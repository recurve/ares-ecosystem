
// lib/enyo-ilib/version.js
enyo&&enyo.version&&(enyo.version["enyo-ilib"]="2.3.0-rc.3");

// lib/enyo-ilib/ilib/js/ilib-dyn-standard.js
var ilib=ilib||{};ilib.getVersion=function(){return"4.0"},ilib.data={norm:{nfc:{},nfd:{},nfkd:{},ccc:{}}},"undefined"!=typeof window&&(window.ilib=ilib),"undefined"!=typeof exports&&(exports.ilib=ilib),ilib._getPlatform=function(){return ilib._platform||(ilib._platform="undefined"!=typeof environment?"rhino":"undefined"!=typeof process||"undefined"!=typeof require?"nodejs":"undefined"!=typeof window?"undefined"!=typeof PalmSystem?"webos":"browser":"unknown"),ilib._platform},ilib._isGlobal=function(t){switch(ilib._getPlatform()){case"rhino":var i=function(){return"object"==typeof global?global:this}();return void 0!==typeof i[t];case"nodejs":var e="undefined"!=typeof global?global:this;return e&&void 0!==typeof e[t];default:return void 0!==typeof window[t]}},ilib.setLocale=function(t){"string"==typeof t&&(ilib.locale=t)},ilib.getLocale=function(){if("string"!=typeof ilib.locale){if("undefined"!=typeof navigator&&navigator.language!==void 0){if(ilib.locale=navigator.language,!ilib.locale){var t=navigator.browserLanguage!==void 0?navigator.browserLanguage:navigator.userLanguage!==void 0?navigator.userLanguage:navigator.systemLanguage!==void 0?navigator.systemLanguage:void 0;t!==void 0&&t&&(ilib.locale=t.substring(0,3)+t.substring(3,5).toUpperCase())}}else if("undefined"!=typeof PalmSystem&&PalmSystem.locales!==void 0)PalmSystem.locales.UI!==void 0&&PalmSystem.locales.UI.length>0&&(ilib.locale=PalmSystem.locales.UI);else if("undefined"!=typeof environment&&environment.user!==void 0)"string"==typeof environment.user.language&&environment.user.language.length>0&&(ilib.locale=environment.user.language,"string"==typeof environment.user.country&&environment.user.country.length>0&&(ilib.locale+="-"+environment.user.country));else if("undefined"!=typeof process&&process.env!==void 0){var t=process.env.LANG||process.env.LC_ALL;t&&"undefined"!==t&&(ilib.locale=t.substring(0,2).toLowerCase()+"-"+t.substring(3,5).toUpperCase())}ilib.locale="string"==typeof ilib.locale?ilib.locale:"en-US"}return ilib.locale},ilib.setTimeZone=function(t){ilib.tz=t||ilib.tz},ilib.getTimeZone=function(){return ilib.tz===void 0&&("undefined"!=typeof navigator&&navigator.timezone!==void 0?navigator.timezone.length>0&&(ilib.tz=navigator.timezone):"undefined"!=typeof PalmSystem&&PalmSystem.timezone!==void 0?PalmSystem.timezone.length>0&&(ilib.tz=PalmSystem.timezone):"undefined"!=typeof environment&&environment.user!==void 0?environment.user.timezone!==void 0&&environment.user.timezone.length>0&&(ilib.tz=environment.user.timezone):"undefined"!=typeof process&&process.env!==void 0&&process.env.TZ&&"undefined"!==process.env.TZ&&(ilib.tz=process.env.TZ),ilib.tz=ilib.tz||"local"),ilib.tz},ilib.setLoaderCallback=function(t){return"function"==typeof t||t===void 0?(ilib._load=t,!0):!1},ilib.Locale=function(t,i,e,n){if(i===void 0){var a=t||ilib.getLocale();if("string"==typeof a){for(var o=a.split("-"),r=0;o.length>r;r++)ilib.Locale._isLanguageCode(o[r])?this.language=o[r]:ilib.Locale._isRegionCode(o[r])?this.region=o[r]:ilib.Locale._isScriptCode(o[r])?this.script=o[r]:this.variant=o[r];this.language=this.language||void 0,this.region=this.region||void 0,this.script=this.script||void 0,this.variant=this.variant||void 0}else"object"==typeof a&&(this.language=a.language||void 0,this.region=a.region||void 0,this.script=a.script||void 0,this.variant=a.variant||void 0)}else t?(t=t.trim(),this.language=t.length>0?t.toLowerCase():void 0):this.language=void 0,i?(i=i.trim(),this.region=i.length>0?i.toUpperCase():void 0):this.region=void 0,e?(e=e.trim(),this.variant=e.length>0?e:void 0):this.variant=void 0,n?(n=n.trim(),this.script=n.length>0?n:void 0):this.script=void 0;this.spec=this.language||"",this.script&&(this.spec.length>0&&(this.spec+="-"),this.spec+=this.script),this.region&&(this.spec.length>0&&(this.spec+="-"),this.spec+=this.region),this.variant&&(this.spec.length>0&&(this.spec+="-"),this.spec+=this.variant)},ilib.Locale.a2toa3regmap={AF:"AFG",AX:"ALA",AL:"ALB",DZ:"DZA",AS:"ASM",AD:"AND",AO:"AGO",AI:"AIA",AQ:"ATA",AG:"ATG",AR:"ARG",AM:"ARM",AW:"ABW",AU:"AUS",AT:"AUT",AZ:"AZE",BS:"BHS",BH:"BHR",BD:"BGD",BB:"BRB",BY:"BLR",BE:"BEL",BZ:"BLZ",BJ:"BEN",BM:"BMU",BT:"BTN",BO:"BOL",BQ:"BES",BA:"BIH",BW:"BWA",BV:"BVT",BR:"BRA",IO:"IOT",BN:"BRN",BG:"BGR",BF:"BFA",BI:"BDI",KH:"KHM",CM:"CMR",CA:"CAN",CV:"CPV",KY:"CYM",CF:"CAF",TD:"TCD",CL:"CHL",CN:"CHN",CX:"CXR",CC:"CCK",CO:"COL",KM:"COM",CG:"COG",CD:"COD",CK:"COK",CR:"CRI",CI:"CIV",HR:"HRV",CU:"CUB",CW:"CUW",CY:"CYP",CZ:"CZE",DK:"DNK",DJ:"DJI",DM:"DMA",DO:"DOM",EC:"ECU",EG:"EGY",SV:"SLV",GQ:"GNQ",ER:"ERI",EE:"EST",ET:"ETH",FK:"FLK",FO:"FRO",FJ:"FJI",FI:"FIN",FR:"FRA",GF:"GUF",PF:"PYF",TF:"ATF",GA:"GAB",GM:"GMB",GE:"GEO",DE:"DEU",GH:"GHA",GI:"GIB",GR:"GRC",GL:"GRL",GD:"GRD",GP:"GLP",GU:"GUM",GT:"GTM",GG:"GGY",GN:"GIN",GW:"GNB",GY:"GUY",HT:"HTI",HM:"HMD",VA:"VAT",HN:"HND",HK:"HKG",HU:"HUN",IS:"ISL",IN:"IND",ID:"IDN",IR:"IRN",IQ:"IRQ",IE:"IRL",IM:"IMN",IL:"ISR",IT:"ITA",JM:"JAM",JP:"JPN",JE:"JEY",JO:"JOR",KZ:"KAZ",KE:"KEN",KI:"KIR",KP:"PRK",KR:"KOR",KW:"KWT",KG:"KGZ",LA:"LAO",LV:"LVA",LB:"LBN",LS:"LSO",LR:"LBR",LY:"LBY",LI:"LIE",LT:"LTU",LU:"LUX",MO:"MAC",MK:"MKD",MG:"MDG",MW:"MWI",MY:"MYS",MV:"MDV",ML:"MLI",MT:"MLT",MH:"MHL",MQ:"MTQ",MR:"MRT",MU:"MUS",YT:"MYT",MX:"MEX",FM:"FSM",MD:"MDA",MC:"MCO",MN:"MNG",ME:"MNE",MS:"MSR",MA:"MAR",MZ:"MOZ",MM:"MMR",NA:"NAM",NR:"NRU",NP:"NPL",NL:"NLD",NC:"NCL",NZ:"NZL",NI:"NIC",NE:"NER",NG:"NGA",NU:"NIU",NF:"NFK",MP:"MNP",NO:"NOR",OM:"OMN",PK:"PAK",PW:"PLW",PS:"PSE",PA:"PAN",PG:"PNG",PY:"PRY",PE:"PER",PH:"PHL",PN:"PCN",PL:"POL",PT:"PRT",PR:"PRI",QA:"QAT",RE:"REU",RO:"ROU",RU:"RUS",RW:"RWA",BL:"BLM",SH:"SHN",KN:"KNA",LC:"LCA",MF:"MAF",PM:"SPM",VC:"VCT",WS:"WSM",SM:"SMR",ST:"STP",SA:"SAU",SN:"SEN",RS:"SRB",SC:"SYC",SL:"SLE",SG:"SGP",SX:"SXM",SK:"SVK",SI:"SVN",SB:"SLB",SO:"SOM",ZA:"ZAF",GS:"SGS",SS:"SSD",ES:"ESP",LK:"LKA",SD:"SDN",SR:"SUR",SJ:"SJM",SZ:"SWZ",SE:"SWE",CH:"CHE",SY:"SYR",TW:"TWN",TJ:"TJK",TZ:"TZA",TH:"THA",TL:"TLS",TG:"TGO",TK:"TKL",TO:"TON",TT:"TTO",TN:"TUN",TR:"TUR",TM:"TKM",TC:"TCA",TV:"TUV",UG:"UGA",UA:"UKR",AE:"ARE",GB:"GBR",US:"USA",UM:"UMI",UY:"URY",UZ:"UZB",VU:"VUT",VE:"VEN",VN:"VNM",VG:"VGB",VI:"VIR",WF:"WLF",EH:"ESH",YE:"YEM",ZM:"ZMB",ZW:"ZWE"},ilib.Locale.a1toa3langmap={ab:"abk",aa:"aar",af:"afr",ak:"aka",sq:"sqi",am:"amh",ar:"ara",an:"arg",hy:"hye",as:"asm",av:"ava",ae:"ave",ay:"aym",az:"aze",bm:"bam",ba:"bak",eu:"eus",be:"bel",bn:"ben",bh:"bih",bi:"bis",bs:"bos",br:"bre",bg:"bul",my:"mya",ca:"cat",ch:"cha",ce:"che",ny:"nya",zh:"zho",cv:"chv",kw:"cor",co:"cos",cr:"cre",hr:"hrv",cs:"ces",da:"dan",dv:"div",nl:"nld",dz:"dzo",en:"eng",eo:"epo",et:"est",ee:"ewe",fo:"fao",fj:"fij",fi:"fin",fr:"fra",ff:"ful",gl:"glg",ka:"kat",de:"deu",el:"ell",gn:"grn",gu:"guj",ht:"hat",ha:"hau",he:"heb",hz:"her",hi:"hin",ho:"hmo",hu:"hun",ia:"ina",id:"ind",ie:"ile",ga:"gle",ig:"ibo",ik:"ipk",io:"ido",is:"isl",it:"ita",iu:"iku",ja:"jpn",jv:"jav",kl:"kal",kn:"kan",kr:"kau",ks:"kas",kk:"kaz",km:"khm",ki:"kik",rw:"kin",ky:"kir",kv:"kom",kg:"kon",ko:"kor",ku:"kur",kj:"kua",la:"lat",lb:"ltz",lg:"lug",li:"lim",ln:"lin",lo:"lao",lt:"lit",lu:"lub",lv:"lav",gv:"glv",mk:"mkd",mg:"mlg",ms:"msa",ml:"mal",mt:"mlt",mi:"mri",mr:"mar",mh:"mah",mn:"mon",na:"nau",nv:"nav",nb:"nob",nd:"nde",ne:"nep",ng:"ndo",nn:"nno",no:"nor",ii:"iii",nr:"nbl",oc:"oci",oj:"oji",cu:"chu",om:"orm",or:"ori",os:"oss",pa:"pan",pi:"pli",fa:"fas",pl:"pol",ps:"pus",pt:"por",qu:"que",rm:"roh",rn:"run",ro:"ron",ru:"rus",sa:"san",sc:"srd",sd:"snd",se:"sme",sm:"smo",sg:"sag",sr:"srp",gd:"gla",sn:"sna",si:"sin",sk:"slk",sl:"slv",so:"som",st:"sot",az:"azb",es:"spa",su:"sun",sw:"swa",ss:"ssw",sv:"swe",ta:"tam",te:"tel",tg:"tgk",th:"tha",ti:"tir",bo:"bod",tk:"tuk",tl:"tgl",tn:"tsn",to:"ton",tr:"tur",ts:"tso",tt:"tat",tw:"twi",ty:"tah",ug:"uig",uk:"ukr",ur:"urd",uz:"uzb",ve:"ven",vi:"vie",vo:"vol",wa:"wln",cy:"cym",wo:"wol",fy:"fry",xh:"xho",yi:"yid",yo:"yor",za:"zha",zu:"zul"},ilib.Locale._notLower=function(t){var i=t.charCodeAt(0);return 97>i||i>122},ilib.Locale._notUpper=function(t){var i=t.charCodeAt(0);return 65>i||i>90},ilib.Locale._notDigit=function(t){var i=t.charCodeAt(0);return 48>i||i>57},ilib.Locale._isLanguageCode=function(t){if(t===void 0||2>t.length||t.length>3)return!1;for(var i=0;t.length>i;i++)if(ilib.Locale._notLower(t.charAt(i)))return!1;return!0},ilib.Locale._isRegionCode=function(t){if(t===void 0||2>t.length||t.length>3)return!1;if(2===t.length){for(var i=0;t.length>i;i++)if(ilib.Locale._notUpper(t.charAt(i)))return!1}else for(var i=0;t.length>i;i++)if(ilib.Locale._notDigit(t.charAt(i)))return!1;return!0},ilib.Locale._isScriptCode=function(t){if(t===void 0||4!==t.length||ilib.Locale._notUpper(t.charAt(0)))return!1;for(var i=1;4>i;i++)if(ilib.Locale._notLower(t.charAt(i)))return!1;return!0},ilib.Locale.regionAlpha2ToAlpha3=function(t){return ilib.Locale.a2toa3regmap[t]||t},ilib.Locale.languageAlpha1ToAlpha3=function(t){return ilib.Locale.a1toa3langmap[t]||t},ilib.Locale.prototype={getLanguage:function(){return this.language},getLanguageAlpha3:function(){return ilib.Locale.languageAlpha1ToAlpha3(this.language)},getRegion:function(){return this.region},getRegionAlpha3:function(){return ilib.Locale.regionAlpha2ToAlpha3(this.region)},getScript:function(){return this.script},getVariant:function(){return this.variant},getSpec:function(){return this.spec},toString:function(){return this.getSpec()},equals:function(t){return this.language===t.language&&this.region===t.region&&this.script===t.script&&this.variant===t.variant},isPseudo:function(){return"zxx"===this.language&&"XX"===this.region}},ilib.Locale.locales=[],ilib.Locale.getAvailableLocales=function(){return ilib.Locale.locales},ilib.LocaleInfo=function(t,i){var e=!0,n=void 0;switch(this.info=ilib.LocaleInfo.defaultInfo,typeof t){case"string":this.locale=new ilib.Locale(t);break;default:case"undefined":this.locale=new ilib.Locale;break;case"object":this.locale=t}i&&(i.sync!==void 0&&(e=1==i.sync),i.loadParams!==void 0&&(n=i.loadParams)),ilib.LocaleInfo.cache||(ilib.LocaleInfo.cache={}),ilib.loadData({object:ilib.LocaleInfo,locale:this.locale,name:"localeinfo.json",sync:e,loadParams:n,callback:ilib.bind(this,function(t){if(!t){t=ilib.LocaleInfo.defaultInfo;var e=this.locale.getSpec().replace(/-/g,"_");ilib.LocaleInfo.cache[e]=t}this.info=t,i&&"function"==typeof i.onLoad&&i.onLoad(this)})})},ilib.LocaleInfo.defaultInfo=ilib.data.localeinfo,ilib.LocaleInfo.defaultInfo=ilib.LocaleInfo.defaultInfo||{scripts:["Latn"],timezone:"Etc/UTC",units:"metric",calendar:"gregorian",clock:"24",currency:"USD",firstDayOfWeek:1,numfmt:{currencyFormats:{common:"{s}{n}",commonNegative:"{s}-{n}",iso:"{s}{n}",isoNegative:"{s}-{n}"},script:"Latn",decimalChar:",",groupChar:".",prigroupSize:3,secgroupSize:0,pctFmt:"{n}%",negativepctFmt:"-{n}%",pctChar:"%",roundingMode:"halfdown",exponential:"e",digits:""}},ilib.LocaleInfo.prototype={getLanguageName:function(){return this.info["language.name"]},getRegionName:function(){return this.info["region.name"]},getClock:function(){return this.info.clock},getLocale:function(){return this.locale},getUnits:function(){return this.info.units},getCalendar:function(){return this.info.calendar},getFirstDayOfWeek:function(){return this.info.firstDayOfWeek},getTimeZone:function(){return this.info.timezone},getDecimalSeparator:function(){return this.info.numfmt.decimalChar},getNativeDecimalSeparator:function(){return this.info.native_numfmt&&this.info.native_numfmt.decimalChar||this.info.numfmt.decimalChar},getGroupingSeparator:function(){return this.info.numfmt.groupChar},getNativeGroupingSeparator:function(){return this.info.native_numfmt&&this.info.native_numfmt.groupChar||this.info.numfmt.groupChar},getPrimaryGroupingDigits:function(){return this.info.numfmt.prigroupSize!==void 0&&this.info.numfmt.prigroupSize||0},getSecondaryGroupingDigits:function(){return this.info.numfmt.secgroupSize||0},getPercentageFormat:function(){return this.info.numfmt.pctFmt},getNegativePercentageFormat:function(){return this.info.numfmt.negativepctFmt},getPercentageSymbol:function(){return this.info.numfmt.pctChar||"%"},getExponential:function(){return this.info.numfmt.exponential},getNativeExponential:function(){return this.info.native_numfmt&&this.info.native_numfmt.exponential||this.info.numfmt.exponential},getNativePercentageSymbol:function(){return this.info.native_numfmt&&this.info.native_numfmt.pctChar||this.info.numfmt.pctChar||"%"},getNegativeNumberFormat:function(){return this.info.numfmt.negativenumFmt},getCurrencyFormats:function(){return this.info.numfmt.currencyFormats},getCurrency:function(){return this.info.currency},getDigits:function(){return this.info.numfmt.digits},getNativeDigits:function(){return this.info.native_numfmt&&this.info.native_numfmt.digits},getRoundingMode:function(){return this.info.numfmt.roundingMode},getDefaultScript:function(){return this.info.scripts?this.info.scripts[0]:"Latn"},getScript:function(){return this.locale.getScript()||this.getDefaultScript()},getAllScripts:function(){return this.info.scripts||["Latn"]}},ilib.Date=function(t){this.year=t&&t.year||0,this.month=t&&t.month||1,this.day=t&&t.day||1,this.hour=t&&t.hour||0,this.minute=t&&t.minute||0,this.second=t&&t.second||0,this.millisecond=t&&t.millisecond||0},ilib.Date.newInstance=function(t){var i,e=t&&t.locale,n=t&&t.type;if(e||(e=new ilib.Locale),!n){var a=new ilib.LocaleInfo(e);n=a.getCalendar()}return i=ilib.Date._constructors[n],i&&new i(t)},ilib.Date._constructors={},ilib.Date.prototype={getType:function(){return"ilib.Date"},getDays:function(){return this.day},getMonths:function(){return this.month},getYears:function(){return this.year},getHours:function(){return this.hour},getMinutes:function(){return this.minute},getSeconds:function(){return this.second},getMilliseconds:function(){return this.millisecond},setDays:function(t){this.day=t},setMonths:function(t){this.month=t},setYears:function(t){this.year=t},setHours:function(t){this.hour=t},setMinutes:function(t){this.minute=t},setSeconds:function(t){this.second=t},setMilliseconds:function(t){this.millisecond=t}},ilib.bind=function(t,i){function e(t,i){for(var e=[],n=i||0,a=t.length;a>n;n++)e.push(t[n]);return e}if(!t||!i)return void 0;if("function"==typeof i){var n,a=e(arguments,2);return n="function"==typeof i.bind?i.bind.apply(i,[t].concat(a)):function(){var n=e(arguments);return i.apply(t,a.concat(n))}}return void 0},ilib.mod=function(t,i){if(0==i)return 0;var e=t%i;return 0>e?e+i:e},ilib.merge=function(t,i,e,n){var a=void 0,o={};for(a in t)a&&t[a]!==void 0&&(o[a]=t[a]);for(a in i)a&&i[a]!==void 0&&(t[a]instanceof Array&&i[a]instanceof Array?(o[a]=[],o[a]=o[a].concat(t[a]),o[a]=o[a].concat(i[a])):"object"==typeof t[a]&&"object"==typeof i[a]?o[a]=ilib.merge(t[a],i[a]):(e&&n&&o[a]==i[a]&&console.log("Property "+a+" in "+e+" is being overridden by the same value in "+n),o[a]=i[a]));return o},ilib.mergeLocData=function(t,i){var e=void 0,n=i||new ilib.Locale,a=!1,o=t;return e=ilib.data[t]||{},n.getLanguage()&&(o=t+"_"+n.getLanguage(),ilib.data[o]&&(a=!0,e=ilib.merge(e,ilib.data[o]))),n.getRegion()&&(o=t+"_"+n.getRegion(),ilib.data[o]&&(a=!0,e=ilib.merge(e,ilib.data[o]))),n.getLanguage()&&(o=t+"_"+n.getLanguage(),n.getScript()&&(o=t+"_"+n.getLanguage()+"_"+n.getScript(),ilib.data[o]&&(a=!0,e=ilib.merge(e,ilib.data[o]))),n.getRegion()&&(o=t+"_"+n.getLanguage()+"_"+n.getRegion(),ilib.data[o]&&(a=!0,e=ilib.merge(e,ilib.data[o])))),n.getRegion()&&n.getVariant()&&(o=t+"_"+n.getLanguage()+"_"+n.getVariant(),ilib.data[o]&&(a=!0,e=ilib.merge(e,ilib.data[o]))),n.getLanguage()&&n.getScript()&&n.getRegion()&&(o=t+"_"+n.getLanguage()+"_"+n.getScript()+"_"+n.getRegion(),ilib.data[o]&&(a=!0,e=ilib.merge(e,ilib.data[o]))),n.getLanguage()&&n.getRegion()&&n.getVariant()&&(o=t+"_"+n.getLanguage()+"_"+n.getRegion()+"_"+n.getVariant(),ilib.data[o]&&(a=!0,e=ilib.merge(e,ilib.data[o]))),n.getLanguage()&&n.getScript()&&n.getRegion()&&n.getVariant()&&(o=t+"_"+n.getLanguage()+"_"+n.getScript()+"_"+n.getRegion()+"_"+n.getVariant(),ilib.data[o]&&(a=!0,e=ilib.merge(e,ilib.data[o]))),a?e:void 0},ilib.getLocFiles=function(t,i){var e="",n=[],a=i||"resources.json",o=t||new ilib.Locale,r=o.getLanguage(),s=o.getRegion(),l=o.getScript(),h=o.getVariant();return n.push(a),r&&(e=r+"/",n.push(e+a)),s&&(e="und/"+s+"/",n.push(e+a)),r&&(l&&(e=r+"/"+l+"/",n.push(e+a)),s&&(e=r+"/"+s+"/",n.push(e+a))),s&&h&&(e="und/"+s+"/"+h+"/",n.push(e+a)),r&&l&&s&&(e=r+"/"+l+"/"+s+"/",n.push(e+a)),r&&s&&h&&(e=r+"/"+s+"/"+h+"/",n.push(e+a)),r&&l&&s&&h&&(e=r+"/"+l+"/"+s+"/"+h+"/",n.push(e+a)),n},ilib.isEmpty=function(t){var i=void 0;if(!t)return!0;for(i in t)if(i&&t[i]!==void 0)return!1;return!0},ilib.hashCode=function(t){function i(t,i){return t*=65543,t+=i,t%=2147483647}function e(t){for(var e=0,n=0;t.length>n;n++)e=i(e,t.charCodeAt(n));return e}var n=0;switch(typeof t){case"undefined":n=0;break;case"string":n=e(t);break;case"function":case"number":case"xml":n=e(t+"");break;case"boolean":n=t?1:0;break;case"object":var a=[];for(var o in t)t.hasOwnProperty(o)&&a.push(o);a.sort();for(var r=0;a.length>r;r++)n=i(n,e(a[r])),n=i(n,ilib.hashCode(t[a[r]]))}return n},ilib.loadData=function(t){var i,e="resources.json",n=void 0,a=new ilib.Locale(ilib.getLocale()),o=!1,r={},s=void 0;if(t&&"function"==typeof t.callback){if(t.name&&(e=t.name),t.object&&(n=t.object),t.locale&&(a="string"==typeof t.locale?new ilib.Locale(t.locale):t.locale),t.type&&(i=t.type),t.loadParams&&(r=t.loadParams),t.sync&&(o=t.sync),s=t.callback,n&&!n.cache&&(n.cache={}),!i){var l=e.lastIndexOf(".");i=-1!==l?e.substring(l+1):"text"}var h=(a.getSpec().replace(/-/g,"_")||"root")+","+e+","+(ilib.hashCode(r)+"");if(n&&n.cache[h]!==void 0)s(n.cache[h]);else{var c;if("json"===i){var u=e.substring(0,e.lastIndexOf("."));if(c=ilib.mergeLocData(u,a))return n&&(n.cache[h]=c),s(c),void 0}if("function"==typeof ilib._load){var g=ilib.getLocFiles(a,e);"json"!==i&&(r.returnOne=!0),ilib._load(g,o,r,ilib.bind(this,function(t){if("json"===i){c=ilib.data[u]||{};for(var e=0;t.length>e;e++)t[e]!==void 0&&(c=ilib.merge(c,t[e]));n&&(n.cache[h]=c),s(c)}else{for(var e=t.length-1;e>-1&&!t[e];)e--;e>-1?(n&&(n.cache[h]=t[e]),s(t[e])):s(void 0)}}))}else n&&c&&(n.cache[h]=c),s(c)}}},ilib.String=function(t){this.str="object"==typeof t?t.str:"string"==typeof t?new String(t):"",this.length=this.str.length,this.cpLength=-1,this.localeSpec=ilib.getLocale()},ilib.String._isSurrogate=function(t){var i=t.charCodeAt(0);return i>=56320&&57343>=i||i>=55296&&56319>=i},ilib.String.fromCodePoint=function(t){if(65536>t)return String.fromCharCode(t);var i=Math.floor(t/65536)-1,e=65535&t;return String.fromCharCode(55296|(15&i)<<6|(64512&e)>>10)+String.fromCharCode(56320|1023&e)},ilib.String.loadPlurals=function(t,i,e,n){var a;a=i?"string"==typeof i?new ilib.Locale(i):i:new ilib.Locale(ilib.getLocale());var o=a.getLanguage();ilib.data["plurals_"+o]?n&&"function"==typeof n&&n(ilib.data["plurals_"+o]):ilib.loadData({name:"plurals.json",object:ilib.String,locale:a,sync:t,loadParams:e,callback:ilib.bind(this,function(t){t||(ilib.String.cache[o]={}),ilib.data["plurals_"+o]=t||{},n&&"function"==typeof n&&n(ilib.data["plurals_"+o])})})},ilib.String._fncs={firstProp:function(t){for(var i in t)if(i&&t[i])return i;return void 0},getValue:function(t,i){if("object"==typeof t){var e=ilib.String._fncs.firstProp(t);return ilib.String._fncs[e](t[e],i)}return"string"==typeof t?i:t},matchRangeContinuous:function(t,i){for(var e in i)if(e!==void 0&&i[e]!==void 0){var n=i[e];if("number"==typeof n){if(t===i[e])return!0}else if("[object Array]"===Object.prototype.toString.call(n)&&t>=n[0]&&n[1]>=t)return!0}return!1},matchRange:function(t,i){return Math.floor(t)!==t?!1:ilib.String._fncs.matchRangeContinuous(t,i)},is:function(t,i){var e=ilib.String._fncs.getValue(t[0],i),n=ilib.String._fncs.getValue(t[1],i);return e==n},isnot:function(t,i){return ilib.String._fncs.getValue(t[0],i)!=ilib.String._fncs.getValue(t[1],i)},inrange:function(t,i){return ilib.String._fncs.matchRange(ilib.String._fncs.getValue(t[0],i),t[1])},notin:function(t,i){return!ilib.String._fncs.matchRange(ilib.String._fncs.getValue(t[0],i),t[1])},within:function(t,i){return ilib.String._fncs.matchRangeContinuous(ilib.String._fncs.getValue(t[0],i),t[1])},mod:function(t,i){return ilib.mod(ilib.String._fncs.getValue(t[0],i),ilib.String._fncs.getValue(t[1],i))},n:function(t,i){return i},or:function(t,i){return ilib.String._fncs.getValue(t[0],i)||ilib.String._fncs.getValue(t[1],i)},and:function(t,i){return ilib.String._fncs.getValue(t[0],i)&&ilib.String._fncs.getValue(t[1],i)}},ilib.String.prototype={_length:function(){return this.str.length},format:function(t){var i=this.str;if(t){var e;for(var n in t)t[n]!==void 0&&(e=RegExp("{"+n+"}","g"),i=i.replace(e,t[n]))}return""+i},formatChoice:function(t,i){var e,n,a,o,r=this.str.split("|"),s=typeof t,l=[],h=[],c=void 0,u="";if(0===this.str.length)return"";for(e=0;r.length>e;e++)if(n=r[e].split("#"),n.length>2)l[e]=n[0],n=n.shift(),h[e]=n.join("#");else{if(2!==n.length)throw"syntax error in choice format pattern: "+r[e];l[e]=n[0],h[e]=n[1]}for(e=0;l.length>e;e++)if(0===l[e].length)u=new ilib.String(h[e]);else switch(s){case"number":if(o=parseInt(t,10),"<="===l[e].substring(0,2))a=parseFloat(l[e].substring(2)),a>=o&&(c=new ilib.String(h[e]),e=l.length);else if(">="===l[e].substring(0,2))a=parseFloat(l[e].substring(2)),o>=a&&(c=new ilib.String(h[e]),e=l.length);else if("<"===l[e].charAt(0))a=parseFloat(l[e].substring(1)),a>o&&(c=new ilib.String(h[e]),e=l.length);else if(">"===l[e].charAt(0))a=parseFloat(l[e].substring(1)),o>a&&(c=new ilib.String(h[e]),e=l.length);else switch(this.locale=this.locale||new ilib.Locale(this.localeSpec),l[e]){case"zero":case"one":case"two":case"few":case"many":var g=ilib.data["plurals_"+this.locale.getLanguage()];if(g){var f=g[l[e]];ilib.String._fncs.getValue(f,o)&&(c=new ilib.String(h[e]),e=l.length)}break;default:var m=l[e].indexOf("-");if(-1!==m){var d=l[e].substring(0,m),p=l[e].substring(m+1);o>=parseInt(d,10)&&parseInt(p,10)>=o&&(c=new ilib.String(h[e]),e=l.length)}else o===parseInt(l[e],10)&&(c=new ilib.String(h[e]),e=l.length)}break;case"boolean":"true"===l[e]&&t===!0?(c=new ilib.String(h[e]),e=l.length):"false"===l[e]&&t===!1&&(c=new ilib.String(h[e]),e=l.length);break;case"string":var b=RegExp(l[e],"i");b.test(t)&&(c=new ilib.String(h[e]),e=l.length);break;case"object":throw"syntax error: fmtChoice parameter for the argument index cannot be an object"}return c||(c=u||new ilib.String("")),c=c.format(i),""+c},toString:function(){return""+this.str},valueOf:function(){return this.str.valueOf()},charAt:function(t){return new ilib.String(this.str.charAt(t))},charCodeAt:function(t){return this.str.charCodeAt(t)},concat:function(t){return new ilib.String(this.str.concat(t))},indexOf:function(t,i){return this.str.indexOf(t,i)},lastIndexOf:function(t,i){return this.str.lastIndexOf(t,i)},match:function(t){return this.str.match(t)},replace:function(t,i){return new ilib.String(this.str.replace(t,i))},search:function(t){return this.str.search(t)},slice:function(t,i){return new ilib.String(this.str.slice(t,i))},split:function(t,i){return this.str.split(t,i)},substr:function(t,i){return new ilib.String(this.str.substr(t,i))},substring:function(t,i){return this.str.substring(t,i)},toLowerCase:function(){return this.str.toLowerCase()},toUpperCase:function(){return this.str.toUpperCase()},_toCodePoint:function(t){if(0===this.str.length)return-1;var i=-1,e=this.str.charCodeAt(t);if(e>=55296&&56319>=e){if(this.str.length>t+1){var n=this.str.charCodeAt(t+1);n>=56320&&57343>=n&&(i=((960&e)>>6)+1<<16|((63&e)<<10|1023&n))}}else i=e;return i},iterator:function(){function t(t){this.index=0,this.hasNext=function(){return this.index<t.str.length},this.next=function(){if(this.index<t.str.length){var i=t._toCodePoint(this.index);this.index+=i>65535?2:1}else i=-1;return i}}return new t(this)},charIterator:function(){function t(t){this.index=0,this.hasNext=function(){return this.index<t.str.length},this.next=function(){var i;return this.index<t.str.length&&(i=t.str.charAt(this.index),ilib.String._isSurrogate(i)&&this.index+1<t.str.length&&ilib.String._isSurrogate(t.str.charAt(this.index+1))&&(this.index++,i+=t.str.charAt(this.index)),this.index++),i}}return new t(this)},codePointAt:function(t){if(0>t)return-1;var i,e,n=this.iterator();for(i=t;i>=0&&n.hasNext();i--)e=n.next();return 0>i?e:-1},setLocale:function(t,i,e,n){"object"==typeof t?this.locale=t:(this.localeSpec=t,this.locale=new ilib.Locale(t)),ilib.String.loadPlurals(i!==void 0?i:!0,this.locale,e,n)},getLocale:function(){return(this.locale?this.locale.getSpec():this.localeSpec)||ilib.getLocale()},codePointLength:function(){if(-1===this.cpLength){var t=this.iterator();for(this.cpLength=0;t.hasNext();)this.cpLength++,t.next()}return this.cpLength}},ilib.Cal=function(){},ilib.Cal.newInstance=function(t){var i,e=t&&t.locale,n=t&&t.type;if(e||(e=new ilib.Locale),!n){var a=new ilib.LocaleInfo(e);n=a.getCalendar()}return i=ilib.Cal._constructors[n],i&&new i(t)},ilib.Cal._constructors={},ilib.Cal.getCalendars=function(){var t,i=[];for(t in ilib.Cal._constructors)t&&ilib.Cal._constructors[t]&&i.push(t);return i},ilib.Cal.prototype={getType:function(){throw"Cannot call methods of abstract class ilib.Cal"},getNumMonths:function(){throw"Cannot call methods of abstract class ilib.Cal"},getMonLength:function(){throw"Cannot call methods of abstract class ilib.Cal"},isLeapYear:function(){throw"Cannot call methods of abstract class ilib.Cal"}},ilib.signum=function(t){var i=t;if("string"==typeof t)i=parseInt(t,10);else if("number"!=typeof t)return 1;return 0>i?-1:1},ilib._roundFnc={floor:function(t){return Math.floor(t)},ceiling:function(t){return Math.ceil(t)},down:function(t){return 0>t?Math.ceil(t):Math.floor(t)},up:function(t){return 0>t?Math.floor(t):Math.ceil(t)},halfup:function(t){return 0>t?Math.ceil(t-.5):Math.floor(t+.5)},halfdown:function(t){return 0>t?Math.floor(t+.5):Math.ceil(t-.5)},halfeven:function(t){return 0===Math.floor(t)%2?Math.ceil(t-.5):Math.floor(t+.5)},halfodd:function(t){return 0!==Math.floor(t)%2?Math.ceil(t-.5):Math.floor(t+.5)}},ilib.JulianDay=function(t){this.jd=t,this.days=Math.floor(this.jd),this.frac=t-this.days},ilib.JulianDay.prototype={getDays:function(){return this.days},setDays:function(t){this.days=Math.floor(t),this.jd=this.days+this.frac},getDayFraction:function(){return this.frac},setDayFraction:function(t){var i=Math.floor(t);this.frac=t-i,this.jd=this.days+this.frac},getDate:function(){return this.jd},setDate:function(t){this.jd=t},addDate:function(t){"number"==typeof t&&(this.jd+=t,this.days=Math.floor(this.jd),this.frac=this.jd-this.days)}},ilib.Cal.Gregorian=function(){this.type="gregorian"},ilib.Cal.Gregorian.monthLengths=[31,28,31,30,31,30,31,31,30,31,30,31],ilib.Cal.Gregorian.prototype.getNumMonths=function(){return 12},ilib.Cal.Gregorian.prototype.getMonLength=function(t,i){return 2===t&&this.isLeapYear(i)?29:ilib.Cal.Gregorian.monthLengths[t-1]},ilib.Cal.Gregorian.prototype.isLeapYear=function(t){var i="number"==typeof t?t:t.getYears(),e=ilib.mod(i,400);return 0===ilib.mod(i,4)&&100!==e&&200!==e&&300!==e},ilib.Cal.Gregorian.prototype.getType=function(){return this.type},ilib.Cal.Gregorian.prototype.newDateInstance=function(t){return new ilib.Date.GregDate(t)},ilib.Cal._constructors.gregorian=ilib.Cal.Gregorian,ilib.bsearch=function(t,i,e){if(i===void 0||!i||t===void 0)return-1;for(var n,a=i.length-1,o=0,r=0,s=e||ilib.bsearch.numbers;a>=o;)if(r=Math.floor((a+o)/2),n=s(i[r],t),n>0)a=r-1;else{if(!(0>n))return r;o=r+1}return o},ilib.bsearch.numbers=function(t,i){return t-i},ilib.Date.GregDate=function(t){if(this.cal=new ilib.Cal.Gregorian,t){if(t.timezone&&(this.timezone=t.timezone),t.locale&&(this.locale="string"==typeof t.locale?new ilib.Locale(t.locale):t.locale,!this.timezone)){var i=new ilib.LocaleInfo(this.locale);this.timezone=i.getTimeZone()}if(t.unixtime!==void 0)this.setTime(parseInt(t.unixtime,10));else if(t.julianday!==void 0)this.timezone="Etc/UTC",this.setJulianDay(parseFloat(t.julianday));else if(t.year||t.month||t.day||t.hour||t.minute||t.second||t.millisecond)this.year=parseInt(t.year,10)||0,this.month=parseInt(t.month,10)||1,this.day=parseInt(t.day,10)||1,this.hour=parseInt(t.hour,10)||0,this.minute=parseInt(t.minute,10)||0,this.second=parseInt(t.second,10)||0,this.millisecond=parseInt(t.millisecond,10)||0;else if(t.rd!==void 0)this.setRd(t.rd);else{var e=new Date;this.setTime(e.getTime())}}else{var e=new Date;this.setTime(e.getTime())}},ilib.Date.GregDate.prototype=new ilib.Date,ilib.Date.GregDate.prototype.parent=ilib.Date,ilib.Date.GregDate.prototype.constructor=ilib.Date.GregDate,ilib.Date.GregDate.cumMonthLengths=[0,31,59,90,120,151,181,212,243,273,304,334,365],ilib.Date.GregDate.cumMonthLengthsLeap=[0,31,60,91,121,152,182,213,244,274,305,335,366],ilib.Date.GregDate.epoch=1721424.5,ilib.Date.GregDate.prototype.calcRataDie=function(t){var i=365*(t.year-1)+Math.floor((t.year-1)/4)-Math.floor((t.year-1)/100)+Math.floor((t.year-1)/400),e=(t.month>1?ilib.Date.GregDate.cumMonthLengths[t.month-1]:0)+t.day+(ilib.Cal.Gregorian.prototype.isLeapYear.call(this.cal,t.year)&&t.month>2?1:0),n=(36e5*t.hour+6e4*t.minute+1e3*t.second+t.millisecond)/864e5;return i+e+n},ilib.Date.GregDate.prototype.getRataDie=function(){return this.calcRataDie(this)},ilib.Date.GregDate.prototype.calcComponents=function(t){var i,e,n,a,o,r,s,l,h,c,u={};return o=Math.floor((t-1)/146097),i=ilib.mod(t-1,146097),r=Math.floor(i/36524),e=ilib.mod(i,36524),s=Math.floor(e/1461),n=ilib.mod(e,1461),l=Math.floor(n/365),a=ilib.mod(n,365)+1,u.year=400*o+100*r+4*s+l,4!==r&&4!==l&&u.year++,u.month=1,u.day=1,u.hour=0,u.minute=0,u.second=0,u.millisecond=0,h=t-ilib.Date.GregDate.prototype.calcRataDie.call(this,u)+1,c=ilib.Cal.Gregorian.prototype.isLeapYear.call(this.cal,u.year)?ilib.Date.GregDate.cumMonthLengthsLeap:ilib.Date.GregDate.cumMonthLengths,u.month=ilib.bsearch(Math.floor(h),c),h-=c[u.month-1],u.day=Math.floor(h),h-=u.day,h=Math.round(864e5*h),u.hour=Math.floor(h/36e5),h-=36e5*u.hour,u.minute=Math.floor(h/6e4),h-=6e4*u.minute,u.second=Math.floor(h/1e3),h-=1e3*u.second,u.millisecond=h,u},ilib.Date.GregDate.prototype.setRd=function(t){var i=this.calcComponents(t);this.year=i.year,this.month=i.month,this.day=i.day,this.hour=i.hour,this.minute=i.minute,this.second=i.second,this.millisecond=i.millisecond},ilib.Date.GregDate.prototype.setJulianDay=function(t){var i,e="number"==typeof t?new ilib.JulianDay(t):t;i=e.getDate()-ilib.Date.GregDate.epoch,this.setRd(i)},ilib.Date.GregDate.prototype.getDayOfWeek=function(){var t=Math.floor(this.getRataDie());return ilib.mod(t,7)},ilib.Date.GregDate.prototype.onOrBeforeRd=function(t,i){return t-ilib.mod(Math.floor(t)-i,7)},ilib.Date.GregDate.prototype.onOrAfterRd=function(t,i){return this.onOrBeforeRd(t+6,i)},ilib.Date.GregDate.prototype.beforeRd=function(t,i){return this.onOrBeforeRd(t-1,i)},ilib.Date.GregDate.prototype.afterRd=function(t,i){return this.onOrBeforeRd(t+7,i)},ilib.Date.GregDate.prototype.firstSunday=function(t){var i=this.calcRataDie({year:t,month:1,day:1,hour:0,minute:0,second:0,millisecond:0}),e=this.onOrAfterRd(i,4);return this.beforeRd(e,0)},ilib.Date.GregDate.prototype.before=function(t){return this.cal.newDateInstance({rd:this.beforeRd(this.getRataDie(),t)})},ilib.Date.GregDate.prototype.after=function(t){return this.cal.newDateInstance({rd:this.afterRd(this.getRataDie(),t)})},ilib.Date.GregDate.prototype.onOrBefore=function(t){return this.cal.newDateInstance({rd:this.onOrBeforeRd(this.getRataDie(),t)})},ilib.Date.GregDate.prototype.onOrAfter=function(t){return this.cal.newDateInstance({rd:this.onOrAfterRd(this.getRataDie(),t)})},ilib.Date.GregDate.prototype.getWeekOfYear=function(){var t,i=Math.floor(this.getRataDie()),e=this.firstSunday(this.year);return e>i?e=this.firstSunday(this.year-1):12==this.month&&this.day>25&&(t=this.firstSunday(this.year+1),i>=t&&(e=t)),Math.floor((i-e)/7)+1},ilib.Date.GregDate.prototype.getDayOfYear=function(){var t=this.cal.isLeapYear(this.year)?ilib.Date.GregDate.cumMonthLengthsLeap:ilib.Date.GregDate.cumMonthLengths;
return t[this.month-1]+this.day},ilib.Date.GregDate.prototype.getWeekOfMonth=function(t){var i=new ilib.LocaleInfo(t),e=this.calcRataDie({year:this.year,month:this.month,day:1,hour:0,minute:0,second:0,millisecond:0}),n=this.getRataDie(),a=this.onOrAfterRd(e,i.getFirstDayOfWeek());return a-e>3&&(a-=7),Math.floor((n-a)/7)+1},ilib.Date.GregDate.prototype.getEra=function(){return 1>this.year?-1:1},ilib.Date.GregDate.prototype.getTime=function(){var t=this.calcRataDie({year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second,millisecond:0});if(719163>t||t>744018.134803241)return-1;var i=86400*Math.floor(t-719163)+3600*this.hour+60*this.minute+this.second,e=1e3*i+this.millisecond;return e},ilib.Date.GregDate.prototype.setTime=function(t){var i=719163+t/864e5;this.setRd(i)},ilib.Date.GregDate.prototype.getJSDate=function(){var t=this.getTime();return-1===t?void 0:new Date(t)},ilib.Date.GregDate.prototype.getJulianDay=function(){return this.getRataDie()+ilib.Date.GregDate.epoch},ilib.Date.GregDate.prototype.getCalendar=function(){return"gregorian"},ilib.Date.GregDate.prototype.getTimeZone=function(){return this.timezone||"local"},ilib.Date.GregDate.prototype.setTimeZone=function(t){t&&""!==t?"string"==typeof t&&(this.timezone=t):this.timezone=void 0},ilib.Date._constructors.gregorian=ilib.Date.GregDate,ilib.TimeZone=function(t){if(this.sync=!0,this.locale=new ilib.Locale,this.isLocal=!1,t){if(t.locale&&(this.locale="string"==typeof t.locale?new ilib.Locale(t.locale):t.locale),t.id){if("local"===t.id){this.isLocal=!0;var i=new Date,e=new Date(i.getFullYear(),0,1),n=new Date(i.getFullYear(),5,1);this.offsetJan1=-e.getTimezoneOffset(),this.offsetJun1=-n.getTimezoneOffset(),this.offset=Math.max(this.offsetJan1,this.offsetJun1)}this.id=t.id}else t.offset&&(this.offset="string"==typeof t.offset?parseInt(t.offset,10):t.offset,this.id=this.getDisplayName(void 0,void 0));t.sync!==void 0&&(this.sync=t.sync),this.loadParams=t.loadParams,this.onLoad=t.onLoad}this.id?this._loadtzdata():new ilib.LocaleInfo(this.locale,{sync:this.sync,onLoad:ilib.bind(this,function(t){this.id=t.getTimeZone()||"Etc/UTC",this._loadtzdata()})})},ilib.data.defaultZones={"Etc/UTC":{o:"0:0",f:"UTC"}},ilib.TimeZone.prototype._loadtzdata=function(){ilib.data.timezones?this._initZone():ilib.loadData({object:ilib.TimeZone,locale:"-",name:"timezones.json",sync:this.sync,loadParams:this.loadParams,callback:ilib.bind(this,function(t){ilib.data.timezones=t||ilib.data.defaultZones,this._initZone()})})},ilib.TimeZone.prototype._initZone=function(){this.zone=ilib.data.timezones[this.id],this.zone||void 0!==this.offset||(this.id="Etc/UTC",this.zone=ilib.data.timezones[this.id]),this.onLoad&&"function"==typeof this.onLoad&&this.onLoad(this)},ilib.TimeZone.getAvailableIds=function(t){var i,e=[];t||e.push("local");for(i in ilib.data.timezones)!i||t&&ilib.data.timezones[i].c!==t||e.push(i);return e},ilib.TimeZone.prototype.getId=function(){return this.id},ilib.TimeZone.prototype.getDisplayName=function(t,i){switch(i=this.isLocal||this.zone===void 0?"rfc822":i||"standard"){default:case"standard":if(this.zone.f&&"zzz"!==this.zone.f){if(-1!==this.zone.f.indexOf("{c}")){var e="";e=this.inDaylightTime(t)?this.zone.s.c:this.zone.e.c;var n=new ilib.String(this.zone.f);return n.format({c:e||""})}return this.zone.f}var n="GMT"+this.zone.o;return this.inDaylightTime(t)&&(n+="+"+this.zone.s.v),n;case"rfc822":var a=this.getOffset(t),o="UTC",r=a.h||0,s=a.m||0;return o+=r>0?"+":"-",10>Math.abs(r)&&(o+="0"),o+=0>r?-r:r,10>s&&(o+="0"),o+=s;case"long":if(this.zone.n){if(-1!==this.zone.n.indexOf("{c}")){var l=this.inDaylightTime(t)?"Daylight":"Standard",n=new ilib.String(this.zone.n);return n.format({c:l||""})}return this.zone.n}var n="GMT"+this.zone.o;return this.inDaylightTime(t)&&(n+="+"+this.zone.s.v),n}},ilib.TimeZone.prototype._offsetStringToObj=function(t){var i,e="string"==typeof t?t.split(":"):[],n={h:0};return e.length>0&&(n.h=parseInt(e[0],10),e.length>1&&(i=parseInt(e[1],10),i&&(n.m=i),e.length>2&&(i=parseInt(e[2],10),i&&(n.s=i)))),n},ilib.TimeZone.prototype.getOffset=function(t){var i=this.getOffsetMillis(t)/6e4,e=ilib._roundFnc.down(i/60),n=Math.abs(i)-60*Math.abs(e),a={h:e};return 0!=n&&(a.m=n),a},ilib.TimeZone.prototype.getOffsetMillis=function(t){var i;if(this.isLocal){var e=t?new Date(t.getTime()):new Date;return 1e3*60*-e.getTimezoneOffset()}return this.dstSavings===void 0&&this._calcDSTSavings(),this.offset===void 0&&this._calcOffset(),i=this.offset,t&&this.inDaylightTime(t)&&(i+=this.dstSavings),1e3*60*i},ilib.TimeZone.prototype.getOffsetStr=function(t){var i,e=this.getOffset(t);return i=e.h,e.m!==void 0?(i+=":"+e.m,e.s!==void 0&&(i+=":"+e.s)):i+=":0",i},ilib.TimeZone.prototype.getRawOffset=function(){var t=this.getRawOffsetMillis()/6e4,i=ilib._roundFnc.down(t/60),e=Math.abs(t)-60*Math.abs(i),n={h:i};return 0!=e&&(n.m=e),n},ilib.TimeZone.prototype.getRawOffsetMillis=function(){return this.offset===void 0&&this._calcOffset(),1e3*60*this.offset},ilib.TimeZone.prototype.getRawOffsetStr=function(){if(this.isLocal){var t=this.getRawOffset();return t.h+":"+t.m}return this.offset!==void 0?this.getOffsetStr(void 0):this.zone&&this.zone.o||"0:0"},ilib.TimeZone.prototype.getDSTSavings=function(){if(this.isLocal){var t=Math.abs(this.offsetJan1-this.offsetJun1),i=ilib._roundFnc.down(t/60),e=t-60*i;return{h:i,m:e}}return this.zone&&this.zone.s?this._offsetStringToObj(this.zone.s.v):{h:0}},ilib.TimeZone.prototype.getDSTSavingsStr=function(){if(this.isLocal){var t=this.getDSTSavings();return t.h+":"+t.m}return this.offset===void 0&&this.zone&&this.zone.s?this.zone.s.v:"0:0"},ilib.TimeZone.prototype._calcRuleStart=function(t,i){var e,n,a,o,r,s,l,h=0,c=0,u=0,g=0;switch("l"==t.r.charAt(0)||"f"==t.r.charAt(0)?(o=ilib.Cal.newInstance({type:"gregorian"}),e=t.r.charAt(0),h=parseInt(t.r.substring(1),10),n="l"===e?o.getMonLength(t.m,i):1):(e="=",l=t.r.indexOf("<"),-1==l&&(l=t.r.indexOf(">")),-1!=l?(e=t.r.charAt(l),h=parseInt(t.r.substring(0,l),10),n=parseInt(t.r.substring(l+1),10)):n=parseInt(t.r,10)),t.t&&(s=t.t.split(":"),c=parseInt(s[0],10),s.length>1&&(u=parseInt(s[1],10),s.length>2&&(g=parseInt(s[2],10)))),a=new ilib.Date.GregDate({year:i,month:t.m,day:n,hour:c,minute:u,second:g}),r=a.getRataDie(),e){case"l":case"<":return a.onOrBeforeRd(r,h);case"f":case">":return a.onOrAfterRd(r,h);default:return r}},ilib.TimeZone.prototype._calcDSTSavings=function(){var t=this.getDSTSavings();this.dstSavings=(60*Math.abs(t.h||0)+(t.m||0))*ilib.signum(t.h||0)},ilib.TimeZone.prototype._calcOffset=function(){if(this.zone.o){var t=this._offsetStringToObj(this.zone.o);this.offset=(60*Math.abs(t.h||0)+(t.m||0))*ilib.signum(t.h||0)}},ilib.TimeZone.prototype.inDaylightTime=function(t){var i,e,n;if(!this.useDaylightTime())return!1;if(this.isLocal){var a=new Date(t?t.getTime():void 0),o=Math.min(this.offsetJan1,this.offsetJun1);return-a.getTimezoneOffset()===o}return t||(t=ilib.Date.newInstance()),i=t.getRataDie(),e=this._calcRuleStart(this.zone.s,t.year),n=this._calcRuleStart(this.zone.e,t.year),n>e?i>=e&&n>i?!0:!1:i>=e||n>i?!0:!1},ilib.TimeZone.prototype.useDaylightTime=function(){return this.isLocal&&this.offsetJan1!==this.offsetJun1||this.zone!==void 0&&this.zone.s!==void 0&&this.zone.e!==void 0},ilib.TimeZone.prototype.getCountry=function(){return this.zone.c},ilib.ResBundle=function(t){var i,e;this.locale=new ilib.Locale,this.baseName="strings",this.type="text",this.loadParams={},this.missing="source",this.sync=!0,t&&(t.locale&&(this.locale="string"==typeof t.locale?new ilib.Locale(t.locale):t.locale),t.name&&(this.baseName=t.name),t.type&&(this.type=t.type),this.lengthen=t.lengthen||!1,t.sync!==void 0&&(this.sync=1==t.sync),t.loadParams!==void 0&&(this.loadParams=t.loadParams),t.missing!==void 0&&("pseudo"===t.missing||"empty"===t.missing)&&(this.missing=t.missing)),this.map={},ilib.ResBundle[this.baseName]||(ilib.ResBundle[this.baseName]={}),i=this.locale.isPseudo()?new ilib.Locale("en-US"):this.locale,ilib.loadData({object:ilib.ResBundle[this.baseName],locale:i,name:this.baseName+".json",sync:this.sync,loadParams:this.loadParams,callback:ilib.bind(this,function(n){n||(n=ilib.data[this.baseName]||{},e=i.getSpec().replace(/-/g,"_"),ilib.ResBundle[this.baseName].cache[e]=n),this.map=n,this.locale.isPseudo()?(ilib.ResBundle.pseudomap||(ilib.ResBundle.pseudomap={}),this._loadPseudo(this.locale,t.onLoad)):"pseudo"===this.missing?(ilib.ResBundle.pseudomap||(ilib.ResBundle.pseudomap={}),new ilib.LocaleInfo(this.locale,{sync:this.sync,loadParams:this.loadParams,onLoad:ilib.bind(this,function(i){var e=new ilib.Locale("zxx","XX",void 0,i.getDefaultScript());this._loadPseudo(e,t.onLoad)})})):t&&"function"==typeof t.onLoad&&t.onLoad(this)})})},ilib.ResBundle.defaultPseudo=ilib.data.pseudomap||{a:"\u00e0",e:"\u00eb",i:"\u00ed",o:"\u00f5",u:"\u00fc",y:"\u00ff",A:"\u00c3",E:"\u00cb",I:"\u00cf",O:"\u00d8",U:"\u00da",Y:"\u0176"},ilib.ResBundle.prototype={_loadPseudo:function(t,i){ilib.loadData({object:ilib.ResBundle.pseudomap,locale:t,name:"pseudomap.json",sync:this.sync,loadParams:this.loadParams,callback:ilib.bind(this,function(e){if(!e||ilib.isEmpty(e)){e=ilib.ResBundle.defaultPseudo;var n=t.getSpec().replace(/-/g,"_");ilib.ResBundle.pseudomap.cache[n]=e}this.pseudomap=e,"function"==typeof i&&i(this)})})},getLocale:function(){return this.locale},getName:function(){return this.baseName},getType:function(){return this.type},pseudo:function(t){if(!t)return void 0;var i,e="";for(i=0;t.length>i;i++)if("raw"!==this.type){if("html"===this.type||"xml"===this.type)if("<"===t.charAt(i)){for(e+=t.charAt(i++);t.length>i&&">"!==t.charAt(i);)e+=t.charAt(i++);t.length>i&&(e+=t.charAt(i++))}else if("&"===t.charAt(i)){for(e+=t.charAt(i++);t.length>i&&";"!==t.charAt(i)&&" "!==t.charAt(i);)e+=t.charAt(i++);t.length>i&&(e+=t.charAt(i++))}if(t.length>i)if("{"===t.charAt(i)){for(e+=t.charAt(i++);t.length>i&&"}"!==t.charAt(i);)e+=t.charAt(i++);t.length>i&&(e+=t.charAt(i))}else e+=this.pseudomap[t.charAt(i)]||t.charAt(i)}else e+=this.pseudomap[t.charAt(i)]||t.charAt(i);if(this.lengthen){var n;for(n=20>=e.length?Math.round(e.length/2):e.length>20&&40>=e.length?Math.round(e.length/3):Math.round(e.length/5),i=n-1;i>=0;i--)e+=i%10}return("Hans"===this.locale.getScript()||"Hant"===this.locale.getScript()||"Hani"===this.locale.getScript()||"Hrkt"===this.locale.getScript()||"Jpan"===this.locale.getScript()||"Hira"===this.locale.getScript()||"Kana"===this.locale.getScript())&&(e=e.replace(/ /g,"")),e},escapeXml:function(t){return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")},unescapeXml:function(t){return t=t.replace(/&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">")},makeKey:function(t){var i=t.replace(/\s+/gm," ");return"xml"===this.type||"html"===this.type?this.unescapeXml(i):i},getString:function(t,i,e){if(!t&&!i)return new ilib.String("");var n;if(this.locale.isPseudo()){var a=t?t:this.map[i];n=this.pseudo(a||i)}else{var o=i||this.makeKey(t);n=this.map[o]!==void 0?this.map[o]:"pseudo"===this.missing?this.pseudo(t||i):"empty"===this.missing?"":t}if(e&&"none"!==e&&("default"==e&&(e=this.type),"xml"===e||"html"===e?n=this.escapeXml(n):("js"==e||"attribute"===e)&&(n=n.replace(/'/g,"\\'").replace(/"/g,'\\"'))),void 0===n)return void 0;var r=new ilib.String(n);return r.setLocale(this.locale.getSpec(),!0,this.loadParams),r},containsKey:function(t,i){if(t===void 0&&i===void 0)return!1;var e=i||this.makeKey(t);return this.map[e]!==void 0},getResObj:function(){return this.map}},ilib.shallowCopy=function(t,i){var e=void 0;if(t&&i)for(e in t)void 0!==e&&t[e]&&(i[e]=t[e])},ilib.mapString=function(t,i){var e="";if(i&&t)for(var n=0;t.length>n;n++){var a=t.charAt(n);e+=i[a]||a}else e=t;return e},ilib.indexOf=function(t,i){if(!t||!i)return-1;if("function"==typeof t.indexOf)return t.indexOf(i);for(var e=0;t.length>e;e++)if(t[e]===i)return e;return-1},ilib.DateFmt=function(t){var i,e,n,a=!0,o=void 0;if(this.locale=new ilib.Locale,this.type="date",this.length="s",this.dateComponents="dmy",this.timeComponents="ahm",this.useNative=!1,t){if(t.locale&&(this.locale="string"==typeof t.locale?new ilib.Locale(t.locale):t.locale),t.type&&("date"===t.type||"time"===t.type||"datetime"===t.type)&&(this.type=t.type),t.calendar&&(this.calName=t.calendar),t.length&&("short"===t.length||"medium"===t.length||"long"===t.length||"full"===t.length)&&(this.length=t.length.charAt(0)),t.date){for(i=t.date.split(""),i.sort(function(t,i){return i>t?-1:t>i?1:0}),n=!1,e=0;i.length>e;e++)if("d"!==i[e]&&"m"!==i[e]&&"y"!==i[e]&&"w"!==i[e]&&"n"!==i[e]){n=!0;break}n||(this.dateComponents=i.join(""))}if(t.time){for(i=t.time.split(""),i.sort(function(t,i){return i>t?-1:t>i?1:0}),this.badTime=!1,e=0;i.length>e;e++)if("h"!==i[e]&&"m"!==i[e]&&"s"!==i[e]&&"a"!==i[e]&&"z"!==i[e]){this.badTime=!0;break}this.badTime||(this.timeComponents=i.join(""))}!t.clock||"12"!==t.clock&&"24"!==t.clock||(this.clock=t.clock),t.template&&(this.type="",this.length="",this.dateComponents="",this.timeComponents="",this.template=t.template),t.timezone?this.tz=new ilib.TimeZone({locale:this.locale,id:t.timezone}):t.locale&&(this.tz=new ilib.TimeZone({locale:this.locale})),t.useNative!==void 0&&(this.useNative=t.useNative),t.sync!==void 0&&(a=1==t.sync),o=t.loadParams}ilib.DateFmt.cache||(ilib.DateFmt.cache={}),new ilib.LocaleInfo(this.locale,{sync:a,onLoad:ilib.bind(this,function(i){this.locinfo=i,this.calName=this.calName||this.locinfo.getCalendar()||"gregorian",this.cal=ilib.Cal.newInstance({type:this.calName}),this.cal||(this.cal=new ilib.Cal.Gregorian),new ilib.ResBundle({locale:this.locale,name:"sysres",sync:a,onLoad:ilib.bind(this,function(i){this.sysres=i,this.template?(this._massageTemplate(),t&&"function"==typeof t.onLoad&&t.onLoad(this)):ilib.loadData({object:ilib.DateFmt,locale:this.locale,name:"dateformats.json",sync:a,loadParams:o,callback:ilib.bind(this,function(i){if(!i){i=ilib.DateFmt.defaultFmt;var e=this.locale.getSpec().replace(/-/g,"_");ilib.DateFmt.cache[e]=i}this.clock===void 0&&(this.clock=this.locinfo.getClock()),this._initTemplate(i),this._massageTemplate(),t&&"function"==typeof t.onLoad&&t.onLoad(this)})})})})})})},ilib.DateFmt.lenmap={s:"short",m:"medium",l:"long",f:"full"},ilib.DateFmt.zeros="0000",ilib.DateFmt.defaultFmt=ilib.data.dateformats||{gregorian:{order:"{date} {time}",date:{dmwy:"EEE d/MM/yyyy",dmy:"d/MM/yyyy",dmw:"EEE d/MM",dm:"d/MM",my:"MM/yyyy",dw:"EEE d",d:"dd",m:"MM",y:"yyyy",n:"NN",w:"EEE"},time:{12:"h:mm:ssa",24:"H:mm:ss"},range:{c00:"{st} - {et}, {sd}/{sm}/{sy}",c01:"{sd}/{sm} {st} - {ed}/{em} {et}, {sy}",c02:"{sd}/{sm} {st} - {ed}/{em} {et}, {sy}",c03:"{sd}/{sm}/{sy} {st} - {ed}/{em}/{ey} {et}",c10:"{sd}-{ed}/{sm}/{sy}",c11:"{sd}/{sm} - {ed}/{em} {sy}",c12:"{sd}/{sm}/{sy} - {ed}/{em}/{ey}",c20:"{sm}/{sy} - {em}/{ey}",c30:"{sy} - {ey}"}},islamic:"gregorian",hebrew:"gregorian",julian:"gregorian",buddhist:"gregorian"},ilib.DateFmt.prototype={_initTemplate:function(t){if(!t[this.calName])throw"No formats available for calendar "+this.calName+" in locale "+(""+this.locale);switch(this.formats=t[this.calName],"string"==typeof this.formats&&(this.formats=t[this.formats]),this.template="",this.type){case"datetime":this.template=this.formats&&this._getLengthFormat(this.formats.order,this.length)||"{date} {time}",this.template=this.template.replace("{date}",this._getFormat(this.formats.date,this.dateComponents,this.length)||""),this.template=this.template.replace("{time}",this._getFormat(this.formats.time[this.clock],this.timeComponents,this.length)||"");break;case"date":this.template=this._getFormat(this.formats.date,this.dateComponents,this.length);break;case"time":this.template=this._getFormat(this.formats.time[this.clock],this.timeComponents,this.length)}},_massageTemplate:function(){var t;if(this.clock&&this.template){var i="";switch(this.clock){case"24":for(t=0;this.template.length>t;t++)if("'"==this.template.charAt(t)){for(i+=this.template.charAt(t++);this.template.length>t&&"'"!==this.template.charAt(t);)i+=this.template.charAt(t++);this.template.length>t&&(i+=this.template.charAt(t))}else i+="K"==this.template.charAt(t)?"k":"h"==this.template.charAt(t)?"H":this.template.charAt(t);this.template=i;break;case"12":for(t=0;this.template.length>t;t++)if("'"==this.template.charAt(t)){for(i+=this.template.charAt(t++);this.template.length>t&&"'"!==this.template.charAt(t);)i+=this.template.charAt(t++);this.template.length>t&&(i+=this.template.charAt(t))}else i+="k"==this.template.charAt(t)?"K":"H"==this.template.charAt(t)?"h":this.template.charAt(t);this.template=i}}this.templateArr=this._tokenize(this.template);var e=this.locinfo.getDigits();e&&"0123456789"!=e&&(this.digits=e),this.useNative&&(e=this.locinfo.getNativeDigits(),e&&(this.digits=e))},_tokenize:function(t){var i,e,n,a=0,o=[];if(t)for(;t.length>a;){if(e=t.charAt(a),i=a,"'"===e){for(a++;t.length>a&&"'"!==t.charAt(a);)a++;t.length>a&&a++}else if(e>="a"&&"z">=e||e>="A"&&"Z">=e)for(n=t.charAt(a);t.length>a&&e===n;)e=t.charAt(++a);else for(;t.length>a&&"'"!==e&&("a">e||e>"z")&&("A">e||e>"Z");)e=t.charAt(++a);o.push(t.substring(i,a))}return o},_getFormat:function(t,i,e){return i!==void 0&&t[i]?this._getLengthFormat(t[i],e):void 0},_getLengthFormat:function(t,i){return"string"==typeof t?t:t[i]?t[i]:void 0},getLocale:function(){return this.locale},getTemplate:function(){return this.template},getType:function(){return this.type},getCalendar:function(){return this.cal.getType()},getLength:function(){return ilib.DateFmt.lenmap[this.length]||""},getDateComponents:function(){return this.dateComponents||""},getTimeComponents:function(){return this.timeComponents||""},getTimeZone:function(){return this.tz||(this.tz=new ilib.TimeZone({id:ilib.getTimeZone()})),this.tz},getClock:function(){return this.clock||this.locinfo.getClock()},toString:function(){return this.getTemplate()},_pad:function(t,i){"string"!=typeof t&&(t=""+t);var e=0;return"-"===t.charAt(0)&&e++,t.length>=i+e?t:t.substring(0,e)+ilib.DateFmt.zeros.substring(0,i-t.length+e)+t.substring(e)},_formatTemplate:function(t,i){var e,n,a,o,r="";for(e=0;i.length>e;e++)switch(i[e]){case"d":r+=t.day||1;break;case"dd":r+=this._pad(t.day||"1",2);break;case"yy":a=""+(t.year||0)%100,r+=this._pad(a,2);break;case"yyyy":r+=this._pad(t.year||"0",4);break;case"M":r+=t.month||1;break;case"MM":r+=this._pad(t.month||"1",2);break;case"h":a=(t.hour||0)%12,0==a&&(a="12"),r+=a;break;case"hh":a=(t.hour||0)%12,0==a&&(a="12"),r+=this._pad(a,2);break;case"K":a=(t.hour||0)%12,r+=a;break;case"KK":a=(t.hour||0)%12,r+=this._pad(a,2);break;case"H":r+=t.hour||"0";break;case"HH":r+=this._pad(t.hour||"0",2);break;case"k":r+=0==t.hour?"24":t.hour;break;case"kk":a=0==t.hour?"24":t.hour,r+=this._pad(a,2);break;case"m":r+=t.minute||"0";break;case"mm":r+=this._pad(t.minute||"0",2);break;case"s":r+=t.minute||"0";break;case"ss":r+=this._pad(t.second||"0",2);break;case"S":r+=t.millisecond||"0";break;case"SSS":r+=this._pad(t.millisecond||"0",3);break;case"N":case"NN":case"MMM":case"MMMM":n=i[e]+(t.month||1),r+=this.sysres.getString(void 0,n+"-"+this.calName)||this.sysres.getString(void 0,n);break;case"E":case"EE":case"EEE":case"EEEE":n=i[e]+t.getDayOfWeek(),r+=this.sysres.getString(void 0,n+"-"+this.calName)||this.sysres.getString(void 0,n);break;case"a":n="zh"===this.locale.getLanguage()?6>t.hour?"azh0":9>t.hour?"azh1":12>t.hour?"azh2":13>t.hour?"azh3":18>t.hour?"azh4":21>t.hour?"azh5":"azh6":12>t.hour?"a0":"a1",r+=this.sysres.getString(void 0,n+"-"+this.calName)||this.sysres.getString(void 0,n);break;case"w":r+=t.getWeekOfYear();break;case"ww":r+=this._pad(t.getWeekOfYear(),2);break;case"D":r+=t.getDayOfYear();break;case"DD":r+=this._pad(t.getDayOfYear(),2);break;case"DDD":r+=this._pad(t.getDayOfYear(),3);break;case"W":r+=t.getWeekOfMonth(this.locale);break;case"G":n="G"+t.getEra(),r+=this.sysres.getString(void 0,n+"-"+this.calName)||this.sysres.getString(void 0,n);break;case"O":a=this.sysres.getString("1#1st|2#2nd|3#3rd|21#21st|22#22nd|23#23rd|31#31st|#{num}th","ordinalChoice"),r+=a.formatChoice(t.day,{num:t.day});break;case"z":o=this.getTimeZone(),r+=o.getDisplayName(t,"standard");break;case"Z":o=this.getTimeZone(),r+=o.getDisplayName(t,"rfc822");break;default:r+=i[e].replace(/'/g,"")}return this.digits&&(r=ilib.mapString(r,this.digits)),r},format:function(t){if(!t.getCalendar||t.getCalendar()!==this.calName)throw"Wrong date type passed to ilib.DateFmt.format()";var i=this.tz&&this.tz.getId()||"local",e=t.timezone||"local";if(e!==i){var n=new ilib.TimeZone({locale:t.locale,id:e}),a=this.tz||new ilib.TimeZone({locale:t.locale,id:i}),o=n.getOffset(t),r=a.getOffset(t),s=60*60*(o.h||0)+60*(o.m||0)+(o.s||0)-(60*60*(r.h||0)+60*(r.m||0)+(r.s||0)),l=ilib.Date.newInstance({type:this.calName,rd:t.getRataDie()-s/86400});t=l}return this._formatTemplate(t,this.templateArr)},formatRelative:function(t,i){var e,n,a,o,r,s;if("object"!=typeof t||!t.getCalendar||t.getCalendar()!==this.calName||"object"!=typeof i||!i.getCalendar||i.getCalendar()!==this.calName)throw"Wrong calendar type";if(e=t.getRataDie(),n=i.getRataDie(),e>n?(r=e-n,a=this.sysres.getString("{duration} ago")):(r=n-e,a=this.sysres.getString("in {duration}")),694444e-9>r)switch(s=Math.round(86400*r),this.length){case"s":o=this.sysres.getString("#{num}s");break;case"m":o=this.sysres.getString("1#1 se|#{num} sec");break;case"l":o=this.sysres.getString("1#1 sec|#{num} sec");break;default:case"f":o=this.sysres.getString("1#1 second|#{num} seconds")}else if(.041666667>r)switch(s=Math.round(1440*r),this.length){case"s":o=this.sysres.getString("#{num}m","durationShortMinutes");break;case"m":o=this.sysres.getString("1#1 mi|#{num} min");break;case"l":o=this.sysres.getString("1#1 min|#{num} min");break;default:case"f":o=this.sysres.getString("1#1 minute|#{num} minutes")}else if(1>r)switch(s=Math.round(24*r),this.length){case"s":o=this.sysres.getString("#{num}h");break;case"m":o=this.sysres.getString("1#1 hr|#{num} hrs","durationMediumHours");break;case"l":o=this.sysres.getString("1#1 hr|#{num} hrs");break;default:case"f":o=this.sysres.getString("1#1 hour|#{num} hours")}else if(14>r)switch(s=Math.round(r),this.length){case"s":o=this.sysres.getString("#{num}d");break;case"m":o=this.sysres.getString("1#1 dy|#{num} dys");break;case"l":o=this.sysres.getString("1#1 day|#{num} days","durationLongDays");break;default:case"f":o=this.sysres.getString("1#1 day|#{num} days")}else if(84>r)switch(s=Math.round(r/7),this.length){case"s":o=this.sysres.getString("#{num}w");break;case"m":o=this.sysres.getString("1#1 wk|#{num} wks","durationMediumWeeks");break;case"l":o=this.sysres.getString("1#1 wk|#{num} wks");break;default:case"f":o=this.sysres.getString("1#1 week|#{num} weeks")}else if(730>r)switch(s=Math.round(r/30.4),this.length){case"s":o=this.sysres.getString("#{num}m","durationShortMonths");break;case"m":o=this.sysres.getString("1#1 mo|#{num} mos");break;case"l":o=this.sysres.getString("1#1 mon|#{num} mons");break;default:case"f":o=this.sysres.getString("1#1 month|#{num} months")}else switch(s=Math.round(r/365),this.length){case"s":o=this.sysres.getString("#{num}y");break;case"m":o=this.sysres.getString("1#1 yr|#{num} yrs","durationMediumYears");break;case"l":o=this.sysres.getString("1#1 yr|#{num} yrs");break;default:case"f":o=this.sysres.getString("1#1 year|#{num} years")}return a.format({duration:o.formatChoice(s,{num:s})})}},ilib.DateRngFmt=function(t){var i=!0;this.locale=new ilib.Locale,this.length="s",t&&(t.locale&&(this.locale="string"==typeof t.locale?new ilib.Locale(t.locale):t.locale),t.length&&("short"===t.length||"medium"===t.length||"long"===t.length||"full"===t.length)&&(this.length=t.length.charAt(0)),t.sync!==void 0&&(i=1==t.sync));var e={};ilib.shallowCopy(t,e),e.sync=i,e.onLoad=ilib.bind(this,function(i){this.dateFmt=i,i&&(this.locinfo=this.dateFmt.locinfo,this.calName=this.calName||this.locinfo.getCalendar()||"gregorian",this.cal=ilib.Cal.newInstance({type:this.calName}),this.cal||(this.cal=new ilib.Cal.Gregorian),this.timeTemplate=this.dateFmt._getFormat(this.dateFmt.formats.time[this.dateFmt.clock],this.dateFmt.timeComponents,this.length)||"hh:mm",this.timeTemplateArr=this.dateFmt._tokenize(this.timeTemplate),t&&"function"==typeof t.onLoad&&t.onLoad(this))}),new ilib.DateFmt(e)},ilib.DateRngFmt.prototype={getLocale:function(){return this.locale},getCalendar:function(){return this.dateFmt.getCalendar()},getLength:function(){return ilib.DateFmt.lenmap[this.length]||""},getTimeZone:function(){return this.dateFmt.getTimeZone()},getClock:function(){return this.dateFmt.getClock()},format:function(t,i){var e,n,a,o,r,s="";if("object"!=typeof t||!t.getCalendar||t.getCalendar()!==this.calName||"object"!=typeof i||!i.getCalendar||i.getCalendar()!==this.calName)throw"Wrong calendar type";return e=t.getRataDie(),n=i.getRataDie(),s=3>n-e?t.year===i.year?t.month===i.month?t.day===i.day?new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c00",this.length)):new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c01",this.length)):new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c02",this.length)):new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c03",this.length)):730>n-e?t.year===i.year?t.month===i.month?new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c10",this.length)):new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c11",this.length)):new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c12",this.length)):3650>n-e?new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c20",this.length)):new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c30",this.length)),a=this.dateFmt._tokenize(this.dateFmt._getFormat(this.dateFmt.formats.date,"y",this.length)||"yyyy"),o=this.dateFmt._tokenize(this.dateFmt._getFormat(this.dateFmt.formats.date,"m",this.length)||"MM"),r=this.dateFmt._tokenize(this.dateFmt._getFormat(this.dateFmt.formats.date,"d",this.length)||"dd"),s.format({sy:this.dateFmt._formatTemplate(t,a),sm:this.dateFmt._formatTemplate(t,o),sd:this.dateFmt._formatTemplate(t,r),st:this.dateFmt._formatTemplate(t,this.timeTemplateArr),ey:this.dateFmt._formatTemplate(i,a),em:this.dateFmt._formatTemplate(i,o),ed:this.dateFmt._formatTemplate(i,r),et:this.dateFmt._formatTemplate(i,this.timeTemplateArr)})}},ilib.Cal.ThaiSolar=function(){this.type="thaisolar"},ilib.Cal.ThaiSolar.prototype=new ilib.Cal.Gregorian,ilib.Cal.ThaiSolar.prototype.parent=ilib.Cal.Gregorian,ilib.Cal.ThaiSolar.prototype.constructor=ilib.Cal.ThaiSolar,ilib.Cal.ThaiSolar.prototype.isLeapYear=function(t){var i="number"==typeof t?t:t.getYears();i-=543;var e=ilib.mod(i,400);return 0===ilib.mod(i,4)&&100!==e&&200!==e&&300!==e},ilib.Cal.ThaiSolar.prototype.newDateInstance=function(t){return new ilib.Date.ThaiSolarDate(t)},ilib.Cal._constructors.thaisolar=ilib.Cal.ThaiSolar,ilib.Date.ThaiSolarDate=function(t){ilib.Date.GregDate.call(this,t),this.cal=new ilib.Cal.ThaiSolar},ilib.Date.ThaiSolarDate.prototype=new ilib.Date.GregDate,ilib.Date.ThaiSolarDate.prototype.parent=ilib.Date.GregDate.prototype,ilib.Date.ThaiSolarDate.prototype.constructor=ilib.Date.ThaiSolarDate,ilib.Date.ThaiSolarDate.epoch=1523097.5,ilib.Date.ThaiSolarDate.prototype.calcRataDie=function(t){var i=this.parent.calcRataDie.call(this,{year:t.year-543,month:t.month,day:t.day,hour:t.hour,minute:t.minute,second:t.second,millisecond:t.millisecond});return i+198327},ilib.Date.ThaiSolarDate.prototype.calcComponents=function(t){var i=this.parent.calcComponents.call(this,t-198327);return i.year+=543,i},ilib.Date.ThaiSolarDate.prototype.setJulianDay=function(t){var i,e="number"==typeof t?new ilib.JulianDay(t):t;i=e.getDate()-ilib.Date.ThaiSolarDate.epoch,this.setRd(i)},ilib.Date.ThaiSolarDate.prototype.getDayOfWeek=function(){var t=Math.floor(this.getRataDie()-198327);return ilib.mod(t,7)},ilib.Date.ThaiSolarDate.prototype.onOrBeforeRd=function(t,i){return t-ilib.mod(Math.floor(t-198327)-i,7)},ilib.Date.ThaiSolarDate.prototype.getTime=function(){var t=this.calcRataDie({year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second,millisecond:0});if(917490>t||t>942345.134803241)return-1;var i=86400*Math.floor(t-917490)+3600*this.hour+60*this.minute+this.second,e=1e3*i+this.millisecond;return e},ilib.Date.ThaiSolarDate.prototype.setTime=function(t){var i=917490+t/864e5;this.setRd(i)},ilib.Date.ThaiSolarDate.prototype.getJulianDay=function(){return this.getRataDie()+ilib.Date.ThaiSolarDate.epoch},ilib.Date.ThaiSolarDate.prototype.getCalendar=function(){return"thaisolar"},ilib.Date._constructors.thaisolar=ilib.Date.ThaiSolarDate,ilib.CType={_inRange:function(t,i,e){var n,a,o;if(!t||0===t.length||!i||e===void 0)return!1;if(o=new ilib.String(t).codePointAt(0),n=e[i],!n)return!1;for(a=0;n.length>a;a++)if(1===n[a].length){if(o===n[a][0])return!0}else if(o>=n[a][0]&&n[a][1]>=o)return!0;return!1},withinRange:function(t,i){return i?ilib.CType._inRange(t,i.toLowerCase(),ilib.data.ctype):!1},_init:function(t,i,e){ilib.CType._load("ctype",t,i,e)},_load:function(t,i,e,n){if(ilib.data[t])n&&"function"==typeof n&&n(ilib.data[t]);else{var a=t?t+".json":"ctype.json";ilib.loadData({name:a,locale:"-",sync:i,loadParams:e,callback:ilib.bind(this,function(i){ilib.data[t]=i,n&&"function"==typeof n&&n(ilib.data[t])})})}}},ilib.CType.isDigit=function(t){return ilib.CType._inRange(t,"digit",ilib.data.ctype)},ilib.CType.isDigit._init=function(t,i,e){ilib.CType._init(t,i,e)},ilib.CType.isSpace=function(t){return ilib.CType._inRange(t,"space",ilib.data.ctype)||ilib.CType._inRange(t,"Zs",ilib.data.ctype_z)||ilib.CType._inRange(t,"Zl",ilib.data.ctype_z)||ilib.CType._inRange(t,"Zp",ilib.data.ctype_z)},ilib.CType.isSpace._init=function(t,i,e){ilib.CType._load("ctype_z",t,i,function(){ilib.CType._init(t,i,e)})},ilib.Number=function(t,i){var e,n,a,o="",r=!0;if(this.locale=new ilib.Locale,this.type="number",i){if(i.locale&&(this.locale="string"==typeof i.locale?new ilib.Locale(i.locale):i.locale),i.type)switch(i.type){case"number":case"currency":case"percentage":this.type=i.type;break;default:}i.sync!==void 0&&(r=1==i.sync),n=i.loadParams,a=i.onLoad}ilib.CType.isDigit._init(r,n,ilib.bind(this,function(){ilib.CType.isSpace._init(r,n,ilib.bind(this,function(){new ilib.LocaleInfo(this.locale,{sync:r,onLoad:ilib.bind(this,function(n){switch(this.decimal=n.getDecimalSeparator(),typeof t){case"string":var a=!0;for(this.str=t||"0",e=0,e=0;this.str.length>e;e++)a&&"-"===this.str.charAt(e)?(a=!1,o+=this.str.charAt(e)):ilib.CType.isDigit(this.str.charAt(e))?(o+=this.str.charAt(e),a=!1):this.str.charAt(e)===this.decimal&&(o+=".",a=!1);this.value=parseFloat(o);break;case"number":this.str=""+t,this.value=t;break;case"object":this.value=t.valueOf(),this.str=""+this.value;break;case"undefined":this.value=0,this.str="0"}switch(this.type){default:break;case"percentage":-1!==this.str.indexOf(n.getPercentageSymbol())&&(this.value/=100);break;case"currency":for(o="",e=0;this.str.length>e&&!ilib.CType.isDigit(this.str.charAt(e))&&!ilib.CType.isSpace(this.str.charAt(e));)o+=this.str.charAt(e++);if(0===o.length){for(;this.str.length>e&&ilib.CType.isDigit(this.str.charAt(e))||ilib.CType.isSpace(this.str.charAt(e))||"."===this.str.charAt(e)||","===this.str.charAt(e);)e++;for(;this.str.length>e&&!ilib.CType.isDigit(this.str.charAt(e))&&!ilib.CType.isSpace(this.str.charAt(e));)o+=this.str.charAt(e++)}return new ilib.Currency({locale:this.locale,sign:o,sync:r,onLoad:ilib.bind(this,function(t){this.currency=t,i&&"function"==typeof i.onLoad&&i.onLoad(this)})}),void 0}i&&"function"==typeof i.onLoad&&i.onLoad(this)})})}))}))},ilib.Number.prototype={getLocale:function(){return this.locale},toString:function(){return this.str},getCurrency:function(){return this.currency},valueOf:function(){return this.value}},ilib.Currency=function(t){this.sync=!0,t&&(t.code&&(this.code=t.code),t.locale&&(this.locale="string"==typeof t.locale?new ilib.Locale(t.locale):t.locale),t.sign&&(this.sign=t.sign),t.sync!==void 0&&(this.sync=t.sync),t.loadParams&&(this.loadParams=t.loadParams)),this.locale=this.locale||new ilib.Locale,ilib.data.currency===void 0?ilib.loadData({name:"currency.json",object:ilib.Currency,locale:"-",sync:this.sync,loadParams:this.loadParams,callback:ilib.bind(this,function(i){ilib.data.currency=i,this._loadLocinfo(t&&t.onLoad)
})}):this._loadLocinfo(t&&t.onLoad)},ilib.Currency.getAvailableCurrencies=function(){var t,i=[],e=new ilib.ResBundle({name:"currency"}).getResObj();for(t in e)t&&e[t]&&i.push(t);return i},ilib.Currency.prototype={_loadLocinfo:function(t){new ilib.LocaleInfo(this.locale,{onLoad:ilib.bind(this,function(i){var e;if(this.locinfo=i,this.code){if(e=ilib.data.currency[this.code],!e)throw"currency "+this.code+" is unknown"}else if(this.sign)if(e=ilib.data.currency[this.sign],e!==void 0)this.code=this.sign;else if(this.code=this.locinfo.getCurrency(),e=ilib.data.currency[this.code],e.sign!==this.sign)for(var n in ilib.data.currency)if(n&&ilib.data.currency[n]&&(e=ilib.data.currency[n],e.sign===this.sign)){this.code=n;break}e&&this.code||(this.code=this.locinfo.getCurrency(),e=ilib.data.currency[this.code]),this.name=e.name,this.fractionDigits=e.decimals,this.sign=e.sign,"function"==typeof t&&t(this)})})},getCode:function(){return this.code},getFractionDigits:function(){return this.fractionDigits},getSign:function(){return this.sign},getName:function(){return this.name},getLocale:function(){return this.locale}},ilib.NumFmt=function(t){var i=!0;this.locale=new ilib.Locale,this.type="number",this.useNative=!1,t&&(t.locale&&(this.locale="string"==typeof t.locale?new ilib.Locale(t.locale):t.locale),t.type&&("number"===t.type||"currency"===t.type||"percentage"===t.type)&&(this.type=t.type),t.currency&&(this.currency=t.currency),"number"==typeof t.maxFractionDigits&&(this.maxFractionDigits=this._toPrimitive(t.maxFractionDigits)),"number"==typeof t.minFractionDigits&&(this.minFractionDigits=this._toPrimitive(t.minFractionDigits)),t.style&&(this.style=t.style),t.useNative&&(this.useNative=t.useNative),this.roundingMode=t.roundingMode,t.sync!==void 0&&(i=1==t.sync)),this.localeInfo=void 0,new ilib.LocaleInfo(this.locale,{sync:i,onLoad:ilib.bind(this,function(e){if(this.localeInfo=e,"number"===this.type)this.templateNegative=new ilib.String(this.localeInfo.getNegativeNumberFormat()||"-{n}");else{if("currency"===this.type){var n;if(!this.currency||"string"!=typeof this.currency)throw"A currency property is required in the options to the number formatter constructor when the type property is set to currency.";return new ilib.Currency({locale:this.locale,code:this.currency,sync:i,onLoad:ilib.bind(this,function(i){this.currencyInfo=i,"common"!==this.style&&"iso"!==this.style&&(this.style="common"),"number"!=typeof this.maxFractionDigits&&"number"!=typeof this.minFractionDigits&&(this.minFractionDigits=this.maxFractionDigits=this.currencyInfo.getFractionDigits()),n=this.localeInfo.getCurrencyFormats(),this.template=new ilib.String(n[this.style]||n.common),this.templateNegative=new ilib.String(n[this.style+"Negative"]||n.commonNegative),this.sign="iso"===this.style?this.currencyInfo.getCode():this.currencyInfo.getSign(),this.roundingMode||(this.roundingMode=this.currencyInfo&&this.currencyInfo.roundingMode),this._init(),t&&"function"==typeof t.onLoad&&t.onLoad(this)})}),void 0}"percentage"===this.type&&(this.template=new ilib.String(this.localeInfo.getPercentageFormat()||"{n}%"),this.templateNegative=new ilib.String(this.localeInfo.getNegativePercentageFormat()||this.localeInfo.getNegativeNumberFormat()+"%"))}this._init(),t&&"function"==typeof t.onLoad&&t.onLoad(this)})})},ilib.NumFmt.getAvailableLocales=function(){return void 0},ilib.NumFmt.zeros="0000000000000000000000000000000000000000000000000000000000000000000000",ilib.NumFmt.prototype={_init:function(){if(this.maxFractionDigits<this.minFractionDigits&&(this.minFractionDigits=this.maxFractionDigits),this.roundingMode||(this.roundingMode=this.localeInfo.getRoundingMode()),this.roundingMode||(this.roundingMode="halfdown"),this.round=ilib._roundFnc[this.roundingMode],this.round||(this.roundingMode="halfdown",this.round=ilib._roundFnc[this.roundingMode]),this.prigroupSize=this.localeInfo.getPrimaryGroupingDigits(),this.secgroupSize=this.localeInfo.getSecondaryGroupingDigits(),this.groupingSeparator=this.useNative?this.localeInfo.getNativeGroupingSeparator():this.localeInfo.getGroupingSeparator(),this.decimalSeparator=this.useNative?this.localeInfo.getNativeDecimalSeparator():this.localeInfo.getDecimalSeparator(),this.useNative){var t=this.localeInfo.getNativeDigits()||this.localeInfo.getDigits();t&&(this.digits=t.split(""))}else{var i=this.localeInfo.getDigits();i&&"0123456789"!==i&&(this.digits=i.split(""))}this.exponentSymbol=this.localeInfo.getExponential()||"e"},_pad:function(t,i,e){return t.length>=i?t:e?ilib.NumFmt.zeros.substring(0,i-t.length)+t:t+ilib.NumFmt.zeros.substring(0,i-t.length)},_toPrimitive:function(t){var i=0;switch(typeof t){case"number":i=t;break;case"string":i=parseFloat(t);break;case"object":i=t.valueOf()}return i},_formatScientific:function(t){var i,e=new Number(t);if(this.maxFractionDigits!==void 0){var n,a,o=e.toExponential(),r=o.split("e"),s=r[0];n=r[1],a=Math.pow(10,this.maxFractionDigits),s=this.round(s*a)/a,i=""+s+this.exponentSymbol+n}else i=e.toExponential(this.minFractionDigits),"e"!==this.exponentSymbol&&(i=i.replace(/e/,this.exponentSymbol));return i},_formatStandard:function(t){var i,e;if(this.maxFractionDigits!==void 0&&this.maxFractionDigits>-1){var n=Math.pow(10,this.maxFractionDigits);t=this.round(t*n)/n}t=Math.abs(t);var a,o,r=(""+t).split("."),s=r[0],l=r[1];if(s=""+s,this.minFractionDigits>0&&(l=this._pad(l||"",this.minFractionDigits,!1)),this.secgroupSize>0){if(s.length>this.prigroupSize){var h=this.prigroupSize,c=s.length,u=c-h;s=s.slice(0,u)+this.groupingSeparator+s.slice(u);var g=s.substring(0,s.indexOf(this.groupingSeparator));for(e=g.length;e>this.secgroupSize;){var f=this.secgroupSize,m=g.length,d=m-f;s=s.slice(0,d)+this.groupingSeparator+s.slice(d),g=s.substring(0,s.indexOf(this.groupingSeparator)),e=g.length}}o=s}else if(0!==this.prigroupSize){for(a=ilib.mod(s.length-1,this.prigroupSize),o="",i=0;s.length-1>i;i++)o+=s.charAt(i),0===a&&(o+=this.groupingSeparator),a=ilib.mod(a-1,this.prigroupSize);o+=s.charAt(s.length-1)}else o=s;return l&&(this.maxFractionDigits===void 0||this.maxFractionDigits>0)&&(o+=this.decimalSeparator,o+=l),this.digits&&(o=ilib.mapString(o,this.digits)),o},format:function(t){var i,e;if(t===void 0)return"";if(e=this._toPrimitive(t),"number"===this.type)i="scientific"===this.style?this._formatScientific(e):this._formatStandard(e),0>t&&(i=this.templateNegative.format({n:i}));else{i=this._formatStandard(e);var n=0>e?this.templateNegative:this.template;i=n.format({n:i,s:this.sign})}return i},getType:function(){return this.type},getLocale:function(){return this.locale},isGroupingUsed:function(){return"undefined"!==this.groupingSeparator&&this.groupingSeparator.length>0},getMaxFractionDigits:function(){return this.maxFractionDigits!==void 0?this.maxFractionDigits:-1},getMinFractionDigits:function(){return this.minFractionDigits!==void 0?this.minFractionDigits:-1},getCurrency:function(){return this.currencyInfo&&this.currencyInfo.getCode()},getRoundingMode:function(){return this.roundingMode},getStyle:function(){return this.style}},ilib.DurFmt=function(t){var i=!0;this.locale=new ilib.Locale,this.length="short",this.style="text",t&&(t.locale&&(this.locale="string"==typeof t.locale?new ilib.Locale(t.locale):t.locale),t.length&&("short"===t.length||"medium"===t.length||"long"===t.length||"full"===t.length)&&(this.length=t.length),t.style&&("text"===t.style||"clock"===t.style)&&(this.style=t.style),t.sync!==void 0&&(i=1==t.sync)),new ilib.ResBundle({locale:this.locale,name:"sysres",sync:i,onLoad:ilib.bind(this,function(e){switch(this.length){case"short":this.components={year:e.getString("#{num}y"),month:e.getString("#{num}m","durationShortMonths"),week:e.getString("#{num}w"),day:e.getString("#{num}d"),hour:e.getString("#{num}h"),minute:e.getString("#{num}m","durationShortMinutes"),second:e.getString("#{num}s"),millisecond:e.getString("#{num}m","durationShortMillis"),separator:e.getString(" ","separatorShort"),finalSeparator:""};break;case"medium":this.components={year:e.getString("1#1 yr|#{num} yrs","durationMediumYears"),month:e.getString("1#1 mo|#{num} mos"),week:e.getString("1#1 wk|#{num} wks","durationMediumWeeks"),day:e.getString("1#1 dy|#{num} dys"),hour:e.getString("1#1 hr|#{num} hrs","durationMediumHours"),minute:e.getString("1#1 mi|#{num} min"),second:e.getString("1#1 se|#{num} sec"),millisecond:e.getString("#{num} ms"),separator:e.getString(" ","separatorMedium"),finalSeparator:""};break;case"long":this.components={year:e.getString("1#1 yr|#{num} yrs"),month:e.getString("1#1 mon|#{num} mons"),week:e.getString("1#1 wk|#{num} wks"),day:e.getString("1#1 day|#{num} days","durationLongDays"),hour:e.getString("1#1 hr|#{num} hrs"),minute:e.getString("1#1 min|#{num} min"),second:e.getString("1#1 sec|#{num} sec"),millisecond:e.getString("#{num} ms"),separator:e.getString(", ","separatorLong"),finalSeparator:""};break;case"full":this.components={year:e.getString("1#1 year|#{num} years"),month:e.getString("1#1 month|#{num} months"),week:e.getString("1#1 week|#{num} weeks"),day:e.getString("1#1 day|#{num} days"),hour:e.getString("1#1 hour|#{num} hours"),minute:e.getString("1#1 minute|#{num} minutes"),second:e.getString("1#1 second|#{num} seconds"),millisecond:e.getString("1#1 millisecond|#{num} milliseconds"),separator:e.getString(", ","separatorFull"),finalSeparator:e.getString(" and ","finalSeparatorFull")}}return"clock"===this.style?(new ilib.DateFmt({locale:this.locale,type:"time",time:"ms",sync:i,onLoad:ilib.bind(this,function(e){this.timeFmtMS=e,new ilib.DateFmt({locale:this.locale,type:"time",time:"hm",sync:i,onLoad:ilib.bind(this,function(e){this.timeFmtHM=e,new ilib.DateFmt({locale:this.locale,type:"time",time:"hms",sync:i,onLoad:ilib.bind(this,function(i){this.timeFmtHMS=i,this.timeFmtHM.template=this.timeFmtHM.template.replace(/hh?/,"H"),this.timeFmtHM.templateArr=this.timeFmtHM._tokenize(this.timeFmtHM.template),this.timeFmtHMS.template=this.timeFmtHMS.template.replace(/hh?/,"H"),this.timeFmtHMS.templateArr=this.timeFmtHMS._tokenize(this.timeFmtHMS.template),t&&"function"==typeof t.onLoad&&t.onLoad(this)})})})})})}),void 0):(t&&"function"==typeof t.onLoad&&t.onLoad(this),void 0)})})},ilib.DurFmt.complist={text:["year","month","week","day","hour","minute","second","millisecond"],clock:["year","month","week","day"]},ilib.DurFmt.prototype.format=function(t){var i,e,n,a=!0,o="";for(e=ilib.DurFmt.complist[this.style],i=e.length-1;i>=0;i--)t[e[i]]!==void 0&&0!=t[e[i]]&&(o.length>0&&(o=("full"===this.length&&a?this.components.finalSeparator:this.components.separator)+o,a=!1),o=this.components[e[i]].formatChoice(t[e[i]],{num:t[e[i]]})+o);return"clock"===this.style&&(n=t.hour!==void 0?t.second!==void 0?this.timeFmtHMS:this.timeFmtHM:this.timeFmtMS,o.length>0&&(o+=this.components.separator),o+=n._formatTemplate(t,n.templateArr)),new ilib.String(o)},ilib.DurFmt.prototype.getLocale=function(){return this.locale},ilib.DurFmt.prototype.getLength=function(){return this.length},ilib.DurFmt.prototype.getStyle=function(){return this.style},ilib.ScriptInfo=function(t,i){var e=!0,n=void 0;this.script=t,i&&(i.sync!==void 0&&(e=1==i.sync),i.loadParams!==void 0&&(n=i.loadParams)),ilib.ScriptInfo.cache||(ilib.ScriptInfo.cache={}),ilib.data.scripts?this.info=ilib.data.scripts[t]:ilib.loadData({object:ilib.ScriptInfo,locale:"-",name:"scripts.json",sync:e,loadParams:n,callback:ilib.bind(this,function(e){if(!e){e={Latn:{nb:215,nm:"Latin",lid:"Latin",rtl:!1,ime:!1,casing:!0}};var n=this.locale.getSpec().replace(/-/g,"_");ilib.ScriptInfo.cache[n]=e}ilib.data.scripts=e,this.info=t&&ilib.data.scripts[t],i&&"function"==typeof i.onLoad&&i.onLoad(this)})})},ilib.ScriptInfo.getAllScripts=function(){var t=[],i=void 0,e=ilib.data.scripts;for(i in e)i&&e[i]&&t.push(i);return t},ilib.ScriptInfo.prototype={getCode:function(){return this.info&&this.script},getCodeNumber:function(){return this.info&&this.info.nb||0},getName:function(){return this.info&&this.info.nm},getLongCode:function(){return this.info&&this.info.lid},getScriptDirection:function(){return this.info&&this.info.rtl!==void 0&&this.info.rtl?"rtl":"ltr"},getNeedsIME:function(){return this.info&&this.info.ime?!0:!1},getCasing:function(){return this.info&&this.info.casing?!0:!1}};

// lib/enyo-ilib/glue.js
(function(){function t(i,e,n,a,o){var r="resources/";if(a&&a.root!==void 0&&(r=a.root+"/"),e.length>0){var s=e.shift(),l=new enyo.Ajax({url:enyo.path.rewrite("$lib/enyo-ilib/ilib/locale/"+s)}),h=function(r,s){n.push(r.failed||"object"!=typeof s?void 0:s),e.length>0?t(i,e,n,a,o):o.call(i,n)};l.response(this,h),l.error(this,function(){var t=r+s,i=new enyo.Ajax({url:t});i.response(this,h),i.error(this,h),i.go()}),l.go()}}ilib.setLoaderCallback(enyo.bind(this,function(i,e,n,a){if(e){var o=[],r="resources/";return n&&n.root!==void 0&&(r=n.root+"/"),i.forEach(function(t){var i=new enyo.Ajax({url:enyo.path.rewrite("$lib/enyo-ilib/ilib/locale/"+t),sync:!0}),e=function(t,i){o.push(t.failed||"object"!=typeof i?void 0:i)};i.response(this,e),i.error(this,function(){var i=new enyo.Ajax({url:r+t,sync:!0});i.response(this,e),i.error(this,e),i.go()}),i.go()}),"function"==typeof a&&a.call(this,o),o}var s=[];t(this,i,s,n,a)})),window.UILocale!==void 0&&ilib.setLocale(window.UILocale),enyo.updateI18NClasses=function(){var t=new ilib.LocaleInfo,i=t.getLocale(),e="enyo-locale-";document&&document.body&&document.body.className&&document.body.className&&(document.body.className=document.body.className.replace(RegExp("(^|\\s)"+e+"[^\\s]*","g"),""));var n=["cs","hu","lv","lt","po","ro","sr","sl","tr","vi"],a=t.getScript();("Latn"!==a||-1!==n.indexOf(i.getLanguage()))&&enyo.dom.addBodyClass(e+"non-latin"),"Latn"!==a&&"Cyrl"!==a&&"Grek"!==a&&enyo.dom.addBodyClass(e+"non-italic");var o=new ilib.ScriptInfo(a);"rtl"===o.getScriptDirection()&&(enyo.dom.addBodyClass(e+"right-to-left"),enyo.Control&&(enyo.Control.prototype.rtl=!0)),i.getLanguage()&&(enyo.dom.addBodyClass(e+i.getLanguage()),i.getScript()?(enyo.dom.addBodyClass(e+i.getLanguage()+"-"+i.getScript()),i.getRegion()&&enyo.dom.addBodyClass(e+i.getLanguage()+"-"+i.getScript()+"-"+i.getRegion())):i.getRegion()&&enyo.dom.addBodyClass(e+i.getLanguage()+"-"+i.getRegion())),i.getScript()&&enyo.dom.addBodyClass(e+i.getScript()),i.getRegion()&&enyo.dom.addBodyClass(e+i.getRegion())}})(),$L=function(t){var i;if($L.rb||$L.setLocale(),"string"==typeof t){if(!$L.rb)return t;i=$L.rb.getString(t)}else if("object"==typeof t)if(t.key!==void 0&&t.value!==void 0){if(!$L.rb)return t.value;i=$L.rb.getString(t.value,t.key)}else i="";else i=t;return""+i},$L.setLocale=function(t){var i=new ilib.Locale(t);$L.rb&&t===$L.rb.getLocale().getSpec()||($L.rb=new ilib.ResBundle({locale:i,type:"html",name:"strings",sync:!0,lengthen:!0}))},enyo.updateLocale=function(){ilib.setLocale(navigator.language),$L.setLocale(navigator.language),enyo.updateI18NClasses()},enyo.updateLocale();

// lib/layout/version.js
enyo&&enyo.version&&(enyo.version.layout="2.3.0-rc.3");

// lib/layout/contextual/source/ContextualLayout.js
enyo.kind({name:"enyo.ContextualLayout",kind:"Layout",adjustPosition:function(){if(this.container.showing&&this.container.hasNode()){this.resetPositioning();var t=this.getViewWidth(),i=this.getViewHeight(),e=this.container.vertFlushMargin,n=i-this.container.vertFlushMargin,a=this.container.horizFlushMargin,o=t-this.container.horizFlushMargin;if(e>this.offset.top+this.offset.height||this.offset.top>n){if(this.applyVerticalFlushPositioning(a,o))return;if(this.applyHorizontalFlushPositioning(a,o))return;if(this.applyVerticalPositioning())return}else if((a>this.offset.left+this.offset.width||this.offset.left>o)&&this.applyHorizontalPositioning())return;var s=this.getBoundingRect(this.container.node);if(s.width>this.container.widePopup){if(this.applyVerticalPositioning())return}else if(s.height>this.container.longPopup&&this.applyHorizontalPositioning())return;if(this.applyVerticalPositioning())return;if(this.applyHorizontalPositioning())return}},initVerticalPositioning:function(){this.resetPositioning(),this.container.addClass("vertical");var t=this.getBoundingRect(this.container.node),i=this.getViewHeight();return this.container.floating?i/2>this.offset.top?(this.applyPosition({top:this.offset.top+this.offset.height,bottom:"auto"}),this.container.addClass("below")):(this.applyPosition({top:this.offset.top-t.height,bottom:"auto"}),this.container.addClass("above")):t.top+t.height>i&&i-t.bottom<t.top-t.height?this.container.addClass("above"):this.container.addClass("below"),t=this.getBoundingRect(this.container.node),t.top+t.height>i||0>t.top?!1:!0},applyVerticalPositioning:function(){if(!this.initVerticalPositioning())return!1;var t=this.getBoundingRect(this.container.node),i=this.getViewWidth();if(this.container.floating){var e=this.offset.left+this.offset.width/2-t.width/2;e+t.width>i?(this.applyPosition({left:this.offset.left+this.offset.width-t.width}),this.container.addClass("left")):0>e?(this.applyPosition({left:this.offset.left}),this.container.addClass("right")):this.applyPosition({left:e})}else{var n=this.offset.left+this.offset.width/2-t.left-t.width/2;t.right+n>i?(this.applyPosition({left:this.offset.left+this.offset.width-t.right}),this.container.addRemoveClass("left",!0)):0>t.left+n?this.container.addRemoveClass("right",!0):this.applyPosition({left:n})}return!0},applyVerticalFlushPositioning:function(t,i){if(!this.initVerticalPositioning())return!1;var e=this.getBoundingRect(this.container.node),n=this.getViewWidth();return t>this.offset.left+this.offset.width/2?(this.offset.left+this.offset.width/2<this.container.horizBuffer?this.applyPosition({left:this.container.horizBuffer+(this.container.floating?0:-e.left)}):this.applyPosition({left:this.offset.width/2+(this.container.floating?this.offset.left:0)}),this.container.addClass("right"),this.container.addClass("corner"),!0):this.offset.left+this.offset.width/2>i?(this.offset.left+this.offset.width/2>n-this.container.horizBuffer?this.applyPosition({left:n-this.container.horizBuffer-e.right}):this.applyPosition({left:this.offset.left+this.offset.width/2-e.right}),this.container.addClass("left"),this.container.addClass("corner"),!0):!1},initHorizontalPositioning:function(){this.resetPositioning();var t=this.getBoundingRect(this.container.node),i=this.getViewWidth();return this.container.floating?i/2>this.offset.left+this.offset.width?(this.applyPosition({left:this.offset.left+this.offset.width}),this.container.addRemoveClass("left",!0)):(this.applyPosition({left:this.offset.left-t.width}),this.container.addRemoveClass("right",!0)):this.offset.left-t.width>0?(this.applyPosition({left:this.offset.left-t.left-t.width}),this.container.addRemoveClass("right",!0)):(this.applyPosition({left:this.offset.width}),this.container.addRemoveClass("left",!0)),this.container.addRemoveClass("horizontal",!0),t=this.getBoundingRect(this.container.node),0>t.left||t.left+t.width>i?!1:!0},applyHorizontalPositioning:function(){if(!this.initHorizontalPositioning())return!1;var t=this.getBoundingRect(this.container.node),i=this.getViewHeight(),e=this.offset.top+this.offset.height/2;return this.container.floating?e>=i/2-.05*i&&i/2+.05*i>=e?this.applyPosition({top:this.offset.top+this.offset.height/2-t.height/2,bottom:"auto"}):i/2>this.offset.top+this.offset.height?(this.applyPosition({top:this.offset.top,bottom:"auto"}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:this.offset.top-t.height+2*this.offset.height,bottom:"auto"}),this.container.addRemoveClass("low",!0)):e>=i/2-.05*i&&i/2+.05*i>=e?this.applyPosition({top:(this.offset.height-t.height)/2}):i/2>this.offset.top+this.offset.height?(this.applyPosition({top:-this.offset.height}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:t.top-t.height-this.offset.top+this.offset.height}),this.container.addRemoveClass("low",!0)),!0},applyHorizontalFlushPositioning:function(t,i){if(!this.initHorizontalPositioning())return!1;var e=this.getBoundingRect(this.container.node),n=this.getViewHeight();return this.container.floating?n/2>this.offset.top?(this.applyPosition({top:this.offset.top+this.offset.height/2}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:this.offset.top+this.offset.height/2-e.height}),this.container.addRemoveClass("low",!0)):e.top+e.height>n&&n-e.bottom<e.top-e.height?(this.applyPosition({top:e.top-e.height-this.offset.top-this.offset.height/2}),this.container.addRemoveClass("low",!0)):(this.applyPosition({top:this.offset.height/2}),this.container.addRemoveClass("high",!0)),t>this.offset.left+this.offset.width?(this.container.addClass("left"),this.container.addClass("corner"),!0):this.offset.left>i?(this.container.addClass("right"),this.container.addClass("corner"),!0):!1},getBoundingRect:function(t){var i=t.getBoundingClientRect();return i.width&&i.height?i:{left:i.left,right:i.right,top:i.top,bottom:i.bottom,width:i.right-i.left,height:i.bottom-i.top}},getViewHeight:function(){return void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight},getViewWidth:function(){return void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth},applyPosition:function(t){var i="";for(var e in t)i+=e+":"+t[e]+(isNaN(t[e])?"; ":"px; ");this.container.addStyles(i)},resetPositioning:function(){this.container.removeClass("right"),this.container.removeClass("left"),this.container.removeClass("high"),this.container.removeClass("low"),this.container.removeClass("corner"),this.container.removeClass("below"),this.container.removeClass("above"),this.container.removeClass("vertical"),this.container.removeClass("horizontal"),this.applyPosition({left:"auto"}),this.applyPosition({top:"auto"})},reflow:function(){this.offset=this.container.activatorOffset,this.adjustPosition()}});

// lib/layout/fittable/source/FittableLayout.js
enyo.kind({name:"enyo.FittableLayout",kind:"Layout",calcFitIndex:function(){var t,i,e=this.container.children;for(i=0;e.length>i;i++)if(t=e[i],t.fit&&t.showing)return i},getFitControl:function(){var t=this.container.children,i=t[this.fitIndex];return i&&i.fit&&i.showing||(this.fitIndex=this.calcFitIndex(),i=t[this.fitIndex]),i},shouldReverse:function(){return this.container.rtl&&"h"===this.orient},getFirstChild:function(){var t=this.getShowingChildren();return this.shouldReverse()?t[t.length-1]:t[0]},getLastChild:function(){var t=this.getShowingChildren();return this.shouldReverse()?t[0]:t[t.length-1]},getShowingChildren:function(){for(var t=[],i=0,e=this.container.children,n=e.length;n>i;i++)e[i].showing&&t.push(e[i]);return t},_reflow:function(t,i,e,n){this.container.addRemoveClass("enyo-stretch",!this.container.noStretch);var a,o,s,r,l,h=this.getFitControl(),c=this.container.hasNode(),u=0,g=0,f=0;if(h&&c){if(a=enyo.dom.calcPaddingExtents(c),o=h.getBounds(),u=c[i]-(a[e]+a[n]),this.shouldReverse()){r=this.getFirstChild(),f=u-(o[e]+o[t]);var d=enyo.dom.getComputedBoxValue(r.hasNode(),"margin",e)||0;if(r==h)g=d;else{var m=r.getBounds(),p=m[e];g=o[e]+d-p}}else{s=this.getLastChild(),g=o[e]-(a[e]||0);var b=enyo.dom.getComputedBoxValue(s.hasNode(),"margin",n)||0;if(s==h)f=b;else{var y=s.getBounds(),v=o[e]+o[t],S=y[e]+y[t]+b;f=S-v}}l=u-(g+f),h.applyStyle(t,l+"px")}},reflow:function(){"h"==this.orient?this._reflow("width","clientWidth","left","right"):this._reflow("height","clientHeight","top","bottom")}}),enyo.kind({name:"enyo.FittableColumnsLayout",kind:"FittableLayout",orient:"h",layoutClass:"enyo-fittable-columns-layout"}),enyo.kind({name:"enyo.FittableRowsLayout",kind:"FittableLayout",layoutClass:"enyo-fittable-rows-layout",orient:"v"});

// lib/layout/fittable/source/FittableRows.js
enyo.kind({name:"enyo.FittableRows",layoutKind:"FittableRowsLayout",noStretch:!1});

// lib/layout/fittable/source/FittableColumns.js
enyo.kind({name:"enyo.FittableColumns",layoutKind:"FittableColumnsLayout",noStretch:!1});

// lib/layout/fittable/source/FittableHeaderLayout.js
enyo.kind({name:"enyo.FittableHeaderLayout",kind:"FittableColumnsLayout",applyFitSize:enyo.inherit(function(t){return function(i,e,n,a){var o=n-a,s=this.getFitControl();0>o?(s.applyStyle("padding-left",Math.abs(o)+"px"),s.applyStyle("padding-right",null)):o>0?(s.applyStyle("padding-left",null),s.applyStyle("padding-right",Math.abs(o)+"px")):(s.applyStyle("padding-left",null),s.applyStyle("padding-right",null)),t.apply(this,arguments)}})});

// lib/layout/list/source/FlyweightRepeater.js
enyo.kind({name:"enyo.FlyweightRepeater",published:{count:0,noSelect:!1,multiSelect:!1,toggleSelected:!1,clientClasses:"",clientStyle:"",rowOffset:0,orient:"v"},events:{onSetupItem:"",onRenderRow:""},bottomUp:!1,components:[{kind:"Selection",onSelect:"selectDeselect",onDeselect:"selectDeselect"},{name:"client"}],create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.noSelectChanged(),this.multiSelectChanged(),this.clientClassesChanged(),this.clientStyleChanged()}}),noSelectChanged:function(){this.noSelect&&this.$.selection.clear()},multiSelectChanged:function(){this.$.selection.setMulti(this.multiSelect)},clientClassesChanged:function(){this.$.client.setClasses(this.clientClasses)},clientStyleChanged:function(){this.$.client.setStyle(this.clientStyle)},setupItem:function(t){this.doSetupItem({index:t,selected:this.isSelected(t)})},generateChildHtml:enyo.inherit(function(t){return function(){var i="";this.index=null;for(var e=0,n=0;this.count>e;e++)n=this.rowOffset+(this.bottomUp?this.count-e-1:e),this.setupItem(n),this.$.client.setAttribute("data-enyo-index",n),"h"==this.orient&&this.$.client.setStyle("display:inline-block;"),i+=t.apply(this,arguments),this.$.client.teardownRender();return i}}),previewDomEvent:function(t){var i=this.index=this.rowForEvent(t);t.rowIndex=t.index=i,t.flyweight=this},decorateEvent:enyo.inherit(function(t){return function(i,e){var n=e&&null!=e.index?e.index:this.index;e&&null!=n&&(e.index=n,e.flyweight=this),t.apply(this,arguments)}}),tap:function(t,i){this.noSelect||-1===i.index||(this.toggleSelected?this.$.selection.toggle(i.index):this.$.selection.select(i.index))},selectDeselect:function(t,i){this.renderRow(i.key)},getSelection:function(){return this.$.selection},isSelected:function(t){return this.getSelection().isSelected(t)},renderRow:function(t){if(!(this.rowOffset>t||t>=this.count+this.rowOffset)){this.setupItem(t);var i=this.fetchRowNode(t);i&&(enyo.dom.setInnerHtml(i,this.$.client.generateChildHtml()),this.$.client.teardownChildren(),this.doRenderRow({rowIndex:t}))}},fetchRowNode:function(t){return this.hasNode()?this.node.querySelector('[data-enyo-index="'+t+'"]'):void 0},rowForEvent:function(t){if(!this.hasNode())return-1;for(var i=t.target;i&&i!==this.node;){var e=i.getAttribute&&i.getAttribute("data-enyo-index");if(null!==e)return Number(e);i=i.parentNode}return-1},prepareRow:function(t){if(!(this.rowOffset>t||t>=this.count+this.rowOffset)){this.setupItem(t);var i=this.fetchRowNode(t);enyo.FlyweightRepeater.claimNode(this.$.client,i)}},lockRow:function(){this.$.client.teardownChildren()},performOnRow:function(t,i,e){this.rowOffset>t||t>=this.count+this.rowOffset||i&&(this.prepareRow(t),enyo.call(e||null,i),this.lockRow())},statics:{claimNode:function(t,i){var e;i&&(e=i.id!==t.id?i.querySelector("#"+t.id):i),t.generated=Boolean(e||!t.tag),t.node=e,t.node&&t.rendered();for(var n,o=0,a=t.children;n=a[o];o++)this.claimNode(n,i)}}});

// lib/layout/list/source/List.js
enyo.kind({name:"enyo.List",kind:"Scroller",classes:"enyo-list",published:{count:0,rowsPerPage:50,orient:"v",bottomUp:!1,noSelect:!1,multiSelect:!1,toggleSelected:!1,fixedSize:!1,reorderable:!1,centerReorderContainer:!0,reorderComponents:[],pinnedReorderComponents:[],swipeableComponents:[],enableSwipe:!1,persistSwipeableItem:!1},events:{onSetupItem:"",onSetupReorderComponents:"",onSetupPinnedReorderComponents:"",onReorder:"",onSetupSwipeItem:"",onSwipeDrag:"",onSwipe:"",onSwipeComplete:""},handlers:{onAnimateFinish:"animateFinish",onRenderRow:"rowRendered",ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",onup:"up",onholdpulse:"holdpulse",onflick:"flick"},rowSize:0,listTools:[{name:"port",classes:"enyo-list-port enyo-border-box",components:[{name:"generator",kind:"FlyweightRepeater",canGenerate:!1,components:[{tag:null,name:"client"}]},{name:"holdingarea",allowHtml:!0,classes:"enyo-list-holdingarea"},{name:"page0",allowHtml:!0,classes:"enyo-list-page"},{name:"page1",allowHtml:!0,classes:"enyo-list-page"},{name:"placeholder",classes:"enyo-list-placeholder"},{name:"swipeableComponents",style:"position:absolute; display:block; top:-1000px; left:0;"}]}],reorderHoldTimeMS:600,draggingRowIndex:-1,initHoldCounter:3,holdCounter:3,holding:!1,draggingRowNode:null,placeholderRowIndex:-1,dragToScrollThreshold:.1,prevScrollTop:0,autoScrollTimeoutMS:20,autoScrollTimeout:null,autoscrollPageY:0,pinnedReorderMode:!1,initialPinPosition:-1,itemMoved:!1,currentPageNumber:-1,completeReorderTimeout:null,swipeIndex:null,swipeDirection:null,persistentItemVisible:!1,persistentItemOrigin:null,swipeComplete:!1,completeSwipeTimeout:null,completeSwipeDelayMS:500,normalSwipeSpeedMS:200,fastSwipeSpeedMS:100,percentageDraggedThreshold:.2,importProps:enyo.inherit(function(t){return function(e){e&&e.reorderable&&(this.touch=!0),t.apply(this,arguments)}}),create:enyo.inherit(function(t){return function(){this.pageSizes=[],this.orientV="v"==this.orient,this.vertical=this.orientV?"default":"hidden",t.apply(this,arguments),this.$.generator.orient=this.orient,this.getStrategy().translateOptimized=!0,this.$.port.addRemoveClass("horizontal",!this.orientV),this.$.port.addRemoveClass("vertical",this.orientV),this.$.page0.addRemoveClass("vertical",this.orientV),this.$.page1.addRemoveClass("vertical",this.orientV),this.bottomUpChanged(),this.noSelectChanged(),this.multiSelectChanged(),this.toggleSelectedChanged(),this.$.generator.setRowOffset(0),this.$.generator.setCount(this.count)}}),initComponents:enyo.inherit(function(t){return function(){this.createReorderTools(),t.apply(this,arguments),this.createSwipeableComponents()}}),createReorderTools:function(){this.createComponent({name:"reorderContainer",classes:"enyo-list-reorder-container",ondown:"sendToStrategy",ondrag:"sendToStrategy",ondragstart:"sendToStrategy",ondragfinish:"sendToStrategy",onflick:"sendToStrategy"})},createStrategy:enyo.inherit(function(t){return function(){this.controlParentName="strategy",t.apply(this,arguments),this.createChrome(this.listTools),this.controlParentName="client",this.discoverControlParent()}}),createSwipeableComponents:function(){for(var t=0;this.swipeableComponents.length>t;t++)this.$.swipeableComponents.createComponent(this.swipeableComponents[t],{owner:this.owner})},rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.$.generator.node=this.$.port.hasNode(),this.$.generator.generated=!0,this.reset()}}),resizeHandler:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.refresh()}}),bottomUpChanged:function(){this.$.generator.bottomUp=this.bottomUp,this.$.page0.applyStyle(this.pageBound,null),this.$.page1.applyStyle(this.pageBound,null),this.pageBound=this.orientV?this.bottomUp?"bottom":"top":this.rtl?this.bottomUp?"left":"right":this.bottomUp?"right":"left",!this.orientV&&this.bottomUp&&(this.$.page0.applyStyle("left","auto"),this.$.page1.applyStyle("left","auto")),this.hasNode()&&this.reset()},noSelectChanged:function(){this.$.generator.setNoSelect(this.noSelect)},multiSelectChanged:function(){this.$.generator.setMultiSelect(this.multiSelect)},toggleSelectedChanged:function(){this.$.generator.setToggleSelected(this.toggleSelected)},countChanged:function(){this.hasNode()&&this.updateMetrics()},sendToStrategy:function(t,e){this.$.strategy.dispatchEvent("on"+e.type,e,t)},updateMetrics:function(){this.defaultPageSize=this.rowsPerPage*(this.rowSize||100),this.pageCount=Math.ceil(this.count/this.rowsPerPage),this.portSize=0;for(var t=0;this.pageCount>t;t++)this.portSize+=this.getPageSize(t);this.adjustPortSize()},holdpulse:function(t,e){return this.getReorderable()&&!this.isReordering()?e.holdTime>=this.reorderHoldTimeMS&&this.shouldStartReordering(t,e)?(this.startReordering(e),!1):void 0:void 0},dragstart:function(t,e){return this.isReordering()?!0:this.isSwipeable()?this.swipeDragStart(t,e):void 0},drag:function(t,e){return this.shouldDoReorderDrag(e)?(e.preventDefault(),this.reorderDrag(e),!0):this.isSwipeable()?(e.preventDefault(),this.swipeDrag(t,e),!0):void 0},dragfinish:function(t,e){this.isReordering()?this.finishReordering(t,e):this.isSwipeable()&&this.swipeDragFinish(t,e)},up:function(t,e){this.isReordering()&&this.finishReordering(t,e)},generatePage:function(t,e){this.page=t;var i=this.rowsPerPage*this.page;this.$.generator.setRowOffset(i);var n=Math.min(this.count-i,this.rowsPerPage);this.$.generator.setCount(n);var o=this.$.generator.generateChildHtml();e.setContent(o),this.getReorderable()&&this.draggingRowIndex>-1&&this.hideReorderingRow();var s=e.getBounds(),r=this.orientV?s.height:s.width;if(!this.rowSize&&r>0&&(this.rowSize=Math.floor(r/n),this.updateMetrics()),!this.fixedSize){var a=this.getPageSize(t);a!=r&&r>0&&(this.pageSizes[t]=r,this.portSize+=r-a)}},pageForRow:function(t){return Math.floor(t/this.rowsPerPage)},preserveDraggingRowNode:function(t){this.draggingRowNode&&this.pageForRow(this.draggingRowIndex)===t&&(this.$.holdingarea.hasNode().appendChild(this.draggingRowNode),this.draggingRowNode=null,this.removedInitialPage=!0)},update:function(t){var e=!1,i=this.positionToPageInfo(t),n=i.pos+this.scrollerSize/2,o=Math.floor(n/Math.max(i.size,this.scrollerSize)+.5)+i.no,s=0===o%2?o:o-1;this.p0!=s&&this.isPageInRange(s)&&(this.preserveDraggingRowNode(this.p0),this.generatePage(s,this.$.page0),this.positionPage(s,this.$.page0),this.p0=s,e=!0,this.p0RowBounds=this.getPageRowSizes(this.$.page0)),s=0===o%2?Math.max(1,o-1):o,this.p1!=s&&this.isPageInRange(s)&&(this.preserveDraggingRowNode(this.p1),this.generatePage(s,this.$.page1),this.positionPage(s,this.$.page1),this.p1=s,e=!0,this.p1RowBounds=this.getPageRowSizes(this.$.page1)),e&&(this.$.generator.setRowOffset(0),this.$.generator.setCount(this.count),this.fixedSize||(this.adjustBottomPage(),this.adjustPortSize()))},getPageRowSizes:function(t){for(var e,i,n={},o=t.hasNode().querySelectorAll("div[data-enyo-index]"),s=0;o.length>s;s++)e=o[s].getAttribute("data-enyo-index"),null!==e&&(i=enyo.dom.getBounds(o[s]),n[parseInt(e,10)]={height:i.height,width:i.width});return n},updateRowBounds:function(t){this.p0RowBounds[t]?this.updateRowBoundsAtIndex(t,this.p0RowBounds,this.$.page0):this.p1RowBounds[t]&&this.updateRowBoundsAtIndex(t,this.p1RowBounds,this.$.page1)},updateRowBoundsAtIndex:function(t,e,i){var n=i.hasNode().querySelector('div[data-enyo-index="'+t+'"]'),o=enyo.dom.getBounds(n);e[t].height=o.height,e[t].width=o.width},updateForPosition:function(t){this.update(this.calcPos(t))},calcPos:function(t){return this.bottomUp?this.portSize-this.scrollerSize-t:t},adjustBottomPage:function(){var t=this.p0>=this.p1?this.$.page0:this.$.page1;this.positionPage(t.pageNo,t)},adjustPortSize:function(){this.scrollerSize=this.orientV?this.getBounds().height:this.getBounds().width;var t=Math.max(this.scrollerSize,this.portSize);this.$.port.applyStyle(this.orientV?"height":"width",t+"px"),this.orientV||this.$.port.applyStyle("height",this.getBounds().height+"px")},positionPage:function(t,e){e.pageNo=t;var i=this.pageToPosition(t);e.applyStyle(this.pageBound,i+"px")},pageToPosition:function(t){for(var e=0,i=t;i>0;)i--,e+=this.getPageSize(i);return e},positionToPageInfo:function(t){for(var e=-1,i=this.calcPos(t),n=this.defaultPageSize;i>=0;)e++,n=this.getPageSize(e),i-=n;return e=Math.max(e,0),{no:e,size:n,pos:i+n,startRow:e*this.rowsPerPage,endRow:Math.min((e+1)*this.rowsPerPage-1,this.count-1)}},isPageInRange:function(t){return t==Math.max(0,Math.min(this.pageCount-1,t))},getPageSize:function(t){var e=this.pageSizes[t];if(!e){var i=this.rowsPerPage*t,n=Math.min(this.count-i,this.rowsPerPage);e=this.defaultPageSize*(n/this.rowsPerPage)}return Math.max(1,e)},invalidatePages:function(){this.p0=this.p1=null,this.p0RowBounds={},this.p1RowBounds={},this.$.page0.setContent(""),this.$.page1.setContent("")},invalidateMetrics:function(){this.pageSizes=[],this.rowSize=0,this.updateMetrics()},scroll:enyo.inherit(function(t){return function(e,i){var n=t.apply(this,arguments),o=this.orientV?this.getScrollTop():this.getScrollLeft();return this.lastPos===o?n:(this.lastPos=o,this.update(o),this.pinnedReorderMode&&this.reorderScroll(e,i),n)}}),setScrollTop:enyo.inherit(function(t){return function(e){this.update(e),t.apply(this,arguments),this.twiddle()}}),getScrollPosition:function(){return this.calcPos(this[this.orientV?"getScrollTop":"getScrollLeft"]())},setScrollPosition:function(t){this[this.orientV?"setScrollTop":"setScrollLeft"](this.calcPos(t))},scrollToBottom:enyo.inherit(function(t){return function(){this.update(this.getScrollBounds().maxTop),t.apply(this,arguments)}}),scrollToRow:function(t){var e=this.pageForRow(t),i=this.pageToPosition(e);if(this.updateForPosition(i),i=this.pageToPosition(e),this.setScrollPosition(i),e==this.p0||e==this.p1){var n=this.$.generator.fetchRowNode(t);if(n){var o=this.orientV?n.offsetTop:n.offsetLeft;this.bottomUp&&(o=this.getPageSize(e)-(this.orientV?n.offsetHeight:n.offsetWidth)-o);var s=this.getScrollPosition()+o;this.setScrollPosition(s)}}},scrollToStart:function(){this[this.bottomUp?this.orientV?"scrollToBottom":"scrollToRight":"scrollToTop"]()},scrollToEnd:function(){this[this.bottomUp?this.orientV?"scrollToTop":"scrollToLeft":this.orientV?"scrollToBottom":"scrollToRight"]()},refresh:function(){this.invalidatePages(),this.update(this[this.orientV?"getScrollTop":"getScrollLeft"]()),this.stabilize(),4===enyo.platform.android&&this.twiddle()},reset:function(){this.getSelection().clear(),this.invalidateMetrics(),this.invalidatePages(),this.stabilize(),this.scrollToStart()},getSelection:function(){return this.$.generator.getSelection()},select:function(t,e){return this.getSelection().select(t,e)},deselect:function(t){return this.getSelection().deselect(t)},isSelected:function(t){return this.$.generator.isSelected(t)},renderRow:function(t){this.$.generator.renderRow(t)},rowRendered:function(t,e){this.updateRowBounds(e.rowIndex)},prepareRow:function(t){this.$.generator.prepareRow(t)},lockRow:function(){this.$.generator.lockRow()},performOnRow:function(t,e,i){this.$.generator.performOnRow(t,e,i)},animateFinish:function(){return this.twiddle(),!0},twiddle:function(){var t=this.getStrategy();enyo.call(t,"twiddle")},pageForPageNumber:function(t,e){return 0===t%2?e&&t!==this.p0?null:this.$.page0:e&&t!==this.p1?null:this.$.page1},shouldStartReordering:function(t,e){return!this.getReorderable()||null==e.rowIndex||0>e.rowIndex||this.pinnedReorderMode||t!==this.$.strategy||null==e.index||0>e.index?!1:!0},startReordering:function(t){this.$.strategy.listReordering=!0,this.buildReorderContainer(),this.doSetupReorderComponents(t),this.styleReorderContainer(t),this.draggingRowIndex=this.placeholderRowIndex=t.rowIndex,this.draggingRowNode=t.target,this.removedInitialPage=!1,this.itemMoved=!1,this.initialPageNumber=this.currentPageNumber=this.pageForRow(t.rowIndex),this.prevScrollTop=this.getScrollTop(),this.replaceNodeWithPlaceholder(t.rowIndex)},buildReorderContainer:function(){this.$.reorderContainer.destroyClientControls();for(var t=0;this.reorderComponents.length>t;t++)this.$.reorderContainer.createComponent(this.reorderComponents[t],{owner:this.owner});this.$.reorderContainer.render()},styleReorderContainer:function(t){this.setItemPosition(this.$.reorderContainer,t.rowIndex),this.setItemBounds(this.$.reorderContainer,t.rowIndex),this.$.reorderContainer.setShowing(!0),this.centerReorderContainer&&this.centerReorderContainerOnPointer(t)},appendNodeToReorderContainer:function(t){this.$.reorderContainer.createComponent({allowHtml:!0,content:t.innerHTML}).render()},centerReorderContainerOnPointer:function(t){var e=enyo.dom.calcNodePosition(this.hasNode()),i=t.pageX-e.left-parseInt(this.$.reorderContainer.domStyles.width,10)/2,n=t.pageY-e.top+this.getScrollTop()-parseInt(this.$.reorderContainer.domStyles.height,10)/2;"ScrollStrategy"!=this.getStrategyKind()&&(i-=this.getScrollLeft(),n-=this.getScrollTop()),this.positionReorderContainer(i,n)},positionReorderContainer:function(t,e){this.$.reorderContainer.addClass("enyo-animatedTopAndLeft"),this.$.reorderContainer.addStyles("left:"+t+"px;top:"+e+"px;"),this.setPositionReorderContainerTimeout()},setPositionReorderContainerTimeout:function(){this.clearPositionReorderContainerTimeout(),this.positionReorderContainerTimeout=setTimeout(this.bindSafely(function(){this.$.reorderContainer.removeClass("enyo-animatedTopAndLeft"),this.clearPositionReorderContainerTimeout()}),100)},clearPositionReorderContainerTimeout:function(){this.positionReorderContainerTimeout&&(clearTimeout(this.positionReorderContainerTimeout),this.positionReorderContainerTimeout=null)},shouldDoReorderDrag:function(){return!this.getReorderable()||0>this.draggingRowIndex||this.pinnedReorderMode?!1:!0},reorderDrag:function(t){this.positionReorderNode(t),this.checkForAutoScroll(t),this.updatePlaceholderPosition(t.pageY)},updatePlaceholderPosition:function(t){var e=this.getRowIndexFromCoordinate(t);-1!==e&&(e>=this.placeholderRowIndex?this.movePlaceholderToIndex(Math.min(this.count,e+1)):this.movePlaceholderToIndex(e))},positionReorderNode:function(t){var e=this.$.reorderContainer.getBounds(),i=e.left+t.ddx,n=e.top+t.ddy;n="ScrollStrategy"==this.getStrategyKind()?n+(this.getScrollTop()-this.prevScrollTop):n,this.$.reorderContainer.addStyles("top: "+n+"px ; left: "+i+"px"),this.prevScrollTop=this.getScrollTop()},checkForAutoScroll:function(t){var e,i=enyo.dom.calcNodePosition(this.hasNode()),n=this.getBounds();this.autoscrollPageY=t.pageY,t.pageY-i.top<n.height*this.dragToScrollThreshold?(e=100*(1-(t.pageY-i.top)/(n.height*this.dragToScrollThreshold)),this.scrollDistance=-1*e):t.pageY-i.top>n.height*(1-this.dragToScrollThreshold)?(e=100*((t.pageY-i.top-n.height*(1-this.dragToScrollThreshold))/(n.height-n.height*(1-this.dragToScrollThreshold))),this.scrollDistance=1*e):this.scrollDistance=0,0===this.scrollDistance?this.stopAutoScrolling():this.autoScrollTimeout||this.startAutoScrolling()},stopAutoScrolling:function(){this.autoScrollTimeout&&(clearTimeout(this.autoScrollTimeout),this.autoScrollTimeout=null)},startAutoScrolling:function(){this.autoScrollTimeout=setInterval(this.bindSafely(this.autoScroll),this.autoScrollTimeoutMS)},autoScroll:function(){0===this.scrollDistance?this.stopAutoScrolling():this.autoScrollTimeout||this.startAutoScrolling(),this.setScrollPosition(this.getScrollPosition()+this.scrollDistance),this.positionReorderNode({ddx:0,ddy:0}),this.updatePlaceholderPosition(this.autoscrollPageY)},movePlaceholderToIndex:function(t){var e,i;if(!(0>t)){t>=this.count?(e=null,i=this.pageForPageNumber(this.pageForRow(this.count-1)).hasNode()):(e=this.$.generator.fetchRowNode(t),i=e.parentNode);var n=this.pageForRow(t);n>=this.pageCount&&(n=this.currentPageNumber),i.insertBefore(this.placeholderNode,e),this.currentPageNumber!==n&&(this.updatePageSize(this.currentPageNumber),this.updatePageSize(n),this.updatePagePositions(n)),this.placeholderRowIndex=t,this.currentPageNumber=n,this.itemMoved=!0}},finishReordering:function(t,e){return!this.isReordering()||this.pinnedReorderMode||this.completeReorderTimeout?void 0:(this.stopAutoScrolling(),this.$.strategy.listReordering=!1,this.moveReorderedContainerToDroppedPosition(e),this.completeReorderTimeout=setTimeout(this.bindSafely(this.completeFinishReordering,e),100),e.preventDefault(),!0)},moveReorderedContainerToDroppedPosition:function(){var t=this.getRelativeOffset(this.placeholderNode,this.hasNode()),e="ScrollStrategy"==this.getStrategyKind()?t.top:t.top-this.getScrollTop(),i=t.left-this.getScrollLeft();this.positionReorderContainer(i,e)},completeFinishReordering:function(t){return this.completeReorderTimeout=null,this.placeholderRowIndex>this.draggingRowIndex&&(this.placeholderRowIndex=Math.max(0,this.placeholderRowIndex-1)),this.draggingRowIndex!=this.placeholderRowIndex||!this.pinnedReorderComponents.length||this.pinnedReorderMode||this.itemMoved?(this.removeDraggingRowNode(),this.removePlaceholderNode(),this.emptyAndHideReorderContainer(),this.pinnedReorderMode=!1,this.reorderRows(t),this.draggingRowIndex=this.placeholderRowIndex=-1,this.refresh(),void 0):(this.beginPinnedReorder(t),void 0)},beginPinnedReorder:function(t){this.buildPinnedReorderContainer(),this.doSetupPinnedReorderComponents(enyo.mixin(t,{index:this.draggingRowIndex})),this.pinnedReorderMode=!0,this.initialPinPosition=t.pageY},emptyAndHideReorderContainer:function(){this.$.reorderContainer.destroyComponents(),this.$.reorderContainer.setShowing(!1)},buildPinnedReorderContainer:function(){this.$.reorderContainer.destroyClientControls();for(var t=0;this.pinnedReorderComponents.length>t;t++)this.$.reorderContainer.createComponent(this.pinnedReorderComponents[t],{owner:this.owner});this.$.reorderContainer.render()},reorderRows:function(t){this.doReorder(this.makeReorderEvent(t)),this.positionReorderedNode(),this.updateListIndices()},makeReorderEvent:function(t){return t.reorderFrom=this.draggingRowIndex,t.reorderTo=this.placeholderRowIndex,t},positionReorderedNode:function(){if(!this.removedInitialPage){var t=this.$.generator.fetchRowNode(this.placeholderRowIndex);if(t&&(t.parentNode.insertBefore(this.hiddenNode,t),this.showNode(this.hiddenNode)),this.hiddenNode=null,this.currentPageNumber!=this.initialPageNumber){var e,i,n=this.pageForPageNumber(this.currentPageNumber),o=this.pageForPageNumber(this.currentPageNumber+1);this.initialPageNumber<this.currentPageNumber?(e=n.hasNode().firstChild,o.hasNode().appendChild(e)):(e=n.hasNode().lastChild,i=o.hasNode().firstChild,o.hasNode().insertBefore(e,i)),this.correctPageSizes(),this.updatePagePositions(this.initialPageNumber)}}},updateListIndices:function(){if(this.shouldDoRefresh())return this.refresh(),this.correctPageSizes(),void 0;var t,e,i,n,o=Math.min(this.draggingRowIndex,this.placeholderRowIndex),s=Math.max(this.draggingRowIndex,this.placeholderRowIndex),r=this.draggingRowIndex-this.placeholderRowIndex>0?1:-1;if(1===r){for(t=this.$.generator.fetchRowNode(this.draggingRowIndex),t&&t.setAttribute("data-enyo-index","reordered"),e=s-1,i=s;e>=o;e--)t=this.$.generator.fetchRowNode(e),t&&(n=parseInt(t.getAttribute("data-enyo-index"),10),i=n+1,t.setAttribute("data-enyo-index",i));t=this.hasNode().querySelector('[data-enyo-index="reordered"]'),t.setAttribute("data-enyo-index",this.placeholderRowIndex)}else for(t=this.$.generator.fetchRowNode(this.draggingRowIndex),t&&t.setAttribute("data-enyo-index",this.placeholderRowIndex),e=o+1,i=o;s>=e;e++)t=this.$.generator.fetchRowNode(e),t&&(n=parseInt(t.getAttribute("data-enyo-index"),10),i=n-1,t.setAttribute("data-enyo-index",i))},shouldDoRefresh:function(){return Math.abs(this.initialPageNumber-this.currentPageNumber)>1},getNodeStyle:function(t){var e=this.$.generator.fetchRowNode(t);if(e){var i=this.getRelativeOffset(e,this.hasNode()),n=enyo.dom.getBounds(e);return{h:n.height,w:n.width,left:i.left,top:i.top}}},getRelativeOffset:function(t,e){var i={top:0,left:0};if(t!==e&&t.parentNode)do i.top+=t.offsetTop||0,i.left+=t.offsetLeft||0,t=t.offsetParent;while(t&&t!==e);return i},replaceNodeWithPlaceholder:function(t){var e=this.$.generator.fetchRowNode(t);if(!e)return enyo.log("No node - "+t),void 0;this.placeholderNode=this.createPlaceholderNode(e),this.hiddenNode=this.hideNode(e);var i=this.pageForPageNumber(this.currentPageNumber);i.hasNode().insertBefore(this.placeholderNode,this.hiddenNode)},createPlaceholderNode:function(t){var e=this.$.placeholder.hasNode().cloneNode(!0),i=enyo.dom.getBounds(t);return e.style.height=i.height+"px",e.style.width=i.width+"px",e},removePlaceholderNode:function(){this.removeNode(this.placeholderNode),this.placeholderNode=null},removeDraggingRowNode:function(){this.draggingRowNode=null;var t=this.$.holdingarea.hasNode();t.innerHTML=""},removeNode:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},updatePageSize:function(t){if(!(0>t)){var e=this.pageForPageNumber(t,!0);if(e){var i=this.pageSizes[t],n=Math.max(1,e.getBounds().height);this.pageSizes[t]=n,this.portSize+=n-i}}},updatePagePositions:function(t){this.positionPage(this.currentPageNumber,this.pageForPageNumber(this.currentPageNumber)),this.positionPage(t,this.pageForPageNumber(t))},correctPageSizes:function(){var t=this.initialPageNumber%2;this.updatePageSize(this.currentPageNumber,this.$["page"+this.currentPage]),t!=this.currentPageNumber&&this.updatePageSize(this.initialPageNumber,this.$["page"+t])},hideNode:function(t){return t.style.display="none",t},showNode:function(t){return t.style.display="block",t},dropPinnedRow:function(t){this.moveReorderedContainerToDroppedPosition(t),this.completeReorderTimeout=setTimeout(this.bindSafely(this.completeFinishReordering,t),100)},cancelPinnedMode:function(t){this.placeholderRowIndex=this.draggingRowIndex,this.dropPinnedRow(t)},getRowIndexFromCoordinate:function(t){var e=this.getScrollTop()+t-enyo.dom.calcNodePosition(this.hasNode()).top;if(0>e)return-1;var i=this.positionToPageInfo(e),n=i.no==this.p0?this.p0RowBounds:this.p1RowBounds;if(!n)return this.count;for(var o=i.pos,s=this.placeholderNode?enyo.dom.getBounds(this.placeholderNode).height:0,r=0,a=i.startRow;i.endRow>=a;++a){if(a===this.placeholderRowIndex&&(r+=s,r>=o))return-1;if(a!==this.draggingRowIndex&&(r+=n[a].height,r>=o))return a}return a},getIndexPosition:function(t){return enyo.dom.calcNodePosition(this.$.generator.fetchRowNode(t))},setItemPosition:function(t,e){var i=this.getNodeStyle(e),n="ScrollStrategy"==this.getStrategyKind()?i.top:i.top-this.getScrollTop(),o="top:"+n+"px; left:"+i.left+"px;";t.addStyles(o)},setItemBounds:function(t,e){var i=this.getNodeStyle(e),n="width:"+i.w+"px; height:"+i.h+"px;";t.addStyles(n)},reorderScroll:function(){"ScrollStrategy"==this.getStrategyKind()&&this.$.reorderContainer.addStyles("top:"+(this.initialPinPosition+this.getScrollTop()-this.rowSize)+"px;"),this.updatePlaceholderPosition(this.initialPinPosition)},hideReorderingRow:function(){var t=this.hasNode().querySelector('[data-enyo-index="'+this.draggingRowIndex+'"]');t&&(this.hiddenNode=this.hideNode(t))},isReordering:function(){return this.draggingRowIndex>-1},isSwiping:function(){return null!=this.swipeIndex&&!this.swipeComplete&&null!=this.swipeDirection},swipeDragStart:function(t,e){return null==e.index||e.vertical?!0:(this.completeSwipeTimeout&&this.completeSwipe(e),this.swipeComplete=!1,this.swipeIndex!=e.index&&(this.clearSwipeables(),this.swipeIndex=e.index),this.swipeDirection=e.xDirection,this.persistentItemVisible||this.startSwipe(e),this.draggedXDistance=0,this.draggedYDistance=0,!0)},swipeDrag:function(t,e){return this.persistentItemVisible?(this.dragPersistentItem(e),this.preventDragPropagation):this.isSwiping()?(this.dragSwipeableComponents(this.calcNewDragPosition(e.ddx)),this.draggedXDistance=e.dx,this.draggedYDistance=e.dy,!0):!1},swipeDragFinish:function(t,e){if(this.persistentItemVisible)this.dragFinishPersistentItem(e);else{if(!this.isSwiping())return!1;var i=this.calcPercentageDragged(this.draggedXDistance);i>this.percentageDraggedThreshold&&e.xDirection===this.swipeDirection?this.swipe(this.fastSwipeSpeedMS):this.backOutSwipe(e)}return this.preventDragPropagation},isSwipeable:function(){return this.enableSwipe&&0!==this.$.swipeableComponents.controls.length&&!this.isReordering()&&!this.pinnedReorderMode},positionSwipeableContainer:function(t,e){var i=this.$.generator.fetchRowNode(t);if(i){var n=this.getRelativeOffset(i,this.hasNode()),o=enyo.dom.getBounds(i),s=1==e?-1*o.width:o.width;this.$.swipeableComponents.addStyles("top: "+n.top+"px; left: "+s+"px; height: "+o.height+"px; width: "+o.width+"px;")}},calcNewDragPosition:function(t){var e=this.$.swipeableComponents.getBounds(),i=e.left,n=this.$.swipeableComponents.getBounds(),o=1==this.swipeDirection?0:-1*n.width,s=1==this.swipeDirection?i+t>o?o:i+t:o>i+t?o:i+t;return s},dragSwipeableComponents:function(t){this.$.swipeableComponents.applyStyle("left",t+"px")},startSwipe:function(t){t.index=this.swipeIndex,this.positionSwipeableContainer(this.swipeIndex,t.xDirection),this.$.swipeableComponents.setShowing(!0),this.setPersistentItemOrigin(t.xDirection),this.doSetupSwipeItem(t)},dragPersistentItem:function(t){var e=0,i="right"==this.persistentItemOrigin?Math.max(e,e+t.dx):Math.min(e,e+t.dx);this.$.swipeableComponents.applyStyle("left",i+"px")},dragFinishPersistentItem:function(t){var e=this.calcPercentageDragged(t.dx)>.2,i=t.dx>0?"right":0>t.dx?"left":null;this.persistentItemOrigin==i?e?this.slideAwayItem():this.bounceItem(t):this.bounceItem(t)},setPersistentItemOrigin:function(t){this.persistentItemOrigin=1==t?"left":"right"},calcPercentageDragged:function(t){return Math.abs(t/this.$.swipeableComponents.getBounds().width)},swipe:function(t){this.swipeComplete=!0,this.animateSwipe(0,t)},backOutSwipe:function(){var t=this.$.swipeableComponents.getBounds(),e=1==this.swipeDirection?-1*t.width:t.width;this.animateSwipe(e,this.fastSwipeSpeedMS),this.swipeDirection=null},bounceItem:function(){var t=this.$.swipeableComponents.getBounds();t.left!=t.width&&this.animateSwipe(0,this.normalSwipeSpeedMS)},slideAwayItem:function(){var t=this.$.swipeableComponents,e=t.getBounds().width,i="left"==this.persistentItemOrigin?-1*e:e;this.animateSwipe(i,this.normalSwipeSpeedMS),this.persistentItemVisible=!1,this.setPersistSwipeableItem(!1)},clearSwipeables:function(){this.$.swipeableComponents.setShowing(!1),this.persistentItemVisible=!1,this.setPersistSwipeableItem(!1)},completeSwipe:function(){this.completeSwipeTimeout&&(clearTimeout(this.completeSwipeTimeout),this.completeSwipeTimeout=null),this.getPersistSwipeableItem()?this.persistentItemVisible=!0:(this.$.swipeableComponents.setShowing(!1),this.swipeComplete&&this.doSwipeComplete({index:this.swipeIndex,xDirection:this.swipeDirection})),this.swipeIndex=null,this.swipeDirection=null},animateSwipe:function(t,e){var i=enyo.now(),n=this.$.swipeableComponents,o=parseInt(n.domStyles.left,10),s=t-o;this.stopAnimateSwipe();var r=this.bindSafely(function(){var t=enyo.now()-i,a=t/e,l=o+s*Math.min(a,1);n.applyStyle("left",l+"px"),this.job=enyo.requestAnimationFrame(r),t/e>=1&&(this.stopAnimateSwipe(),this.completeSwipeTimeout=setTimeout(this.bindSafely(function(){this.completeSwipe()}),this.completeSwipeDelayMS))});this.job=enyo.requestAnimationFrame(r)},stopAnimateSwipe:function(){this.job&&(this.job=enyo.cancelRequestAnimationFrame(this.job))}});

// lib/layout/list/source/PulldownList.js
enyo.kind({name:"enyo.PulldownList",kind:"List",touch:!0,pully:null,pulldownTools:[{name:"pulldown",classes:"enyo-list-pulldown",components:[{name:"puller",kind:"Puller"}]}],events:{onPullStart:"",onPullCancel:"",onPull:"",onPullRelease:"",onPullComplete:""},handlers:{onScrollStart:"scrollStartHandler",onScrollStop:"scrollStopHandler",ondragfinish:"dragfinish"},pullingMessage:"Pull down to refresh...",pulledMessage:"Release to refresh...",loadingMessage:"Loading...",pullingIconClass:"enyo-puller-arrow enyo-puller-arrow-down",pulledIconClass:"enyo-puller-arrow enyo-puller-arrow-up",loadingIconClass:"",create:enyo.inherit(function(t){return function(){var e={kind:"Puller",showing:!1,text:this.loadingMessage,iconClass:this.loadingIconClass,onCreate:"setPully"};this.listTools.splice(0,0,e),t.apply(this,arguments),this.setPulling()}}),initComponents:enyo.inherit(function(t){return function(){this.createChrome(this.pulldownTools),this.accel=enyo.dom.canAccelerate(),this.translation=this.accel?"translate3d":"translate",this.strategyKind=this.resetStrategyKind(),t.apply(this,arguments)}}),resetStrategyKind:function(){return enyo.platform.android>=3?"TranslateScrollStrategy":"TouchScrollStrategy"},setPully:function(t,e){this.pully=e.originator},scrollStartHandler:function(){this.firedPullStart=!1,this.firedPull=!1,this.firedPullCancel=!1},scroll:enyo.inherit(function(t){return function(){var e=t.apply(this,arguments);this.completingPull&&this.pully.setShowing(!1);var i=this.getStrategy().$.scrollMath||this.getStrategy(),n=-1*this.getScrollTop();return i.isInOverScroll()&&n>0&&(enyo.dom.transformValue(this.$.pulldown,this.translation,"0,"+n+"px"+(this.accel?",0":"")),this.firedPullStart||(this.firedPullStart=!0,this.pullStart(),this.pullHeight=this.$.pulldown.getBounds().height),n>this.pullHeight&&!this.firedPull&&(this.firedPull=!0,this.firedPullCancel=!1,this.pull()),this.firedPull&&!this.firedPullCancel&&this.pullHeight>n&&(this.firedPullCancel=!0,this.firedPull=!1,this.pullCancel())),e}}),scrollStopHandler:function(){this.completingPull&&(this.completingPull=!1,this.doPullComplete())},dragfinish:function(){if(this.firedPull){var t=this.getStrategy().$.scrollMath||this.getStrategy();t.setScrollY(-1*this.getScrollTop()-this.pullHeight),this.pullRelease()}},completePull:function(){this.completingPull=!0;var t=this.getStrategy().$.scrollMath||this.getStrategy();t.setScrollY(this.pullHeight),t.start()},pullStart:function(){this.setPulling(),this.pully.setShowing(!1),this.$.puller.setShowing(!0),this.doPullStart()},pull:function(){this.setPulled(),this.doPull()},pullCancel:function(){this.setPulling(),this.doPullCancel()},pullRelease:function(){this.$.puller.setShowing(!1),this.pully.setShowing(!0),this.doPullRelease()},setPulling:function(){this.$.puller.setText(this.pullingMessage),this.$.puller.setIconClass(this.pullingIconClass)},setPulled:function(){this.$.puller.setText(this.pulledMessage),this.$.puller.setIconClass(this.pulledIconClass)}}),enyo.kind({name:"enyo.Puller",classes:"enyo-puller",published:{text:"",iconClass:""},events:{onCreate:""},components:[{name:"icon"},{name:"text",tag:"span",classes:"enyo-puller-text"}],create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.doCreate(),this.textChanged(),this.iconClassChanged()}}),textChanged:function(){this.$.text.setContent(this.text)},iconClassChanged:function(){this.$.icon.setClasses(this.iconClass)}});

// lib/layout/list/source/AroundList.js
enyo.kind({name:"enyo.AroundList",kind:"enyo.List",listTools:[{name:"port",classes:"enyo-list-port enyo-border-box",components:[{name:"aboveClient"},{name:"generator",kind:"FlyweightRepeater",canGenerate:!1,components:[{tag:null,name:"client"}]},{name:"holdingarea",allowHtml:!0,classes:"enyo-list-holdingarea"},{name:"page0",allowHtml:!0,classes:"enyo-list-page"},{name:"page1",allowHtml:!0,classes:"enyo-list-page"},{name:"belowClient"},{name:"placeholder"},{name:"swipeableComponents",style:"position:absolute; display:block; top:-1000px; left:0px;"}]}],aboveComponents:null,initComponents:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.aboveComponents&&this.$.aboveClient.createComponents(this.aboveComponents,{owner:this.owner}),this.belowComponents&&this.$.belowClient.createComponents(this.belowComponents,{owner:this.owner})}}),updateMetrics:function(){this.defaultPageSize=this.rowsPerPage*(this.rowSize||100),this.pageCount=Math.ceil(this.count/this.rowsPerPage),this.aboveHeight=this.$.aboveClient.getBounds().height,this.belowHeight=this.$.belowClient.getBounds().height,this.portSize=this.aboveHeight+this.belowHeight;for(var t=0;this.pageCount>t;t++)this.portSize+=this.getPageSize(t);this.adjustPortSize()},positionPage:function(t,e){e.pageNo=t;var i=this.pageToPosition(t),n=this.bottomUp?this.belowHeight:this.aboveHeight;i+=n,e.applyStyle(this.pageBound,i+"px")},scrollToContentStart:function(){var t=this.bottomUp?this.belowHeight:this.aboveHeight;this.setScrollPosition(t)}});

// lib/layout/list/source/GridFlyweightRepeater.js
enyo.kind({name:"enyo.GridFlyWeightRepeater",kind:"enyo.FlyweightRepeater",events:{onSizeupItem:""},itemsPerRow:0,_itemsFromPreviousPage:0,generateChildHtml:function(){return this.itemFluidWidth||this.itemFixedSize?this._generateChildHtmlEqualSizedItems():this._generateChildHtmlVariableSizedItems()},_generateChildHtmlEqualSizedItems:function(){var t=this.owner.hasNode().clientWidth,e=this.$.client,i="",n=0,o=this.itemWidth,s=this.itemHeight;if(this.itemFluidWidth){n=100/this.itemsPerRow;var r=0;this.itemSpacing>=0&&(r=(this.itemsPerRow+1)*this.itemSpacing,n=100/this.itemsPerRow-100*r/(this.itemsPerRow*t)),o=n/100*t,s=o*(this.itemHeight/this.itemWidth)}for(var a=this.rowOffset;this.rowOffset+this.count>a;a++)e.setAttribute("data-enyo-index",a),this.doSetupItem({index:a,selected:this.isSelected(a)}),this.itemFluidWidth?e.addStyles("width:"+n+"%;height:"+s+"px;"):e.addStyles("width:"+this.itemWidth+"px;height:"+this.itemHeight+"px;"),this.itemSpacing>=0&&(e.addStyles("margin-top:"+this.itemSpacing+"px; margin-left:"+this.itemSpacing+"px;"),a%this.itemsPerRow==this.itemsPerRow-1?e.addStyles("margin-right:"+this.itemSpacing+"px;"):e.addStyles("margin-right: 0px;"),a>=this.count-this.itemsPerRow&&e.addStyles("margin-bottom:"+this.itemSpacing+"px;")),i+=e.generateHtml(),e.teardownRender();return i},_generateChildHtmlVariableSizedItems:function(){this.index=null;var t,e,i=null,n=this.$.client,o=this.owner.hasNode().clientWidth,s=0,r=0,a=0,l=0,h=0,c=0,g=0,d=0,u=0,f=this.itemMinWidth/this.itemMinHeight,p=[{index:0,items:[]}],m=this.owner.$._dummy_.hasNode();0===this.owner.page&&(this._itemsFromPreviousPage=0);var y=this.count+this._itemsFromPreviousPage;for(t=0,e=t+this.rowOffset-this._itemsFromPreviousPage;y>t;t++,e++){d=0,u=0,this.doSizeupItem({index:e,selected:this.isSelected(e)}),d=this.itemWidth,u=this.itemHeight,(!d||0>=d)&&(this.doSetupItem({index:e,selected:this.isSelected(e)}),m.innerHTML=n.generateChildHtml(),d=m.clientWidth,u=m.clientHeight),(!d||0>=d)&&(d=this.itemMinWidth,u=this.itemMinHeight),(!u||0>=u)&&(u=this.itemMinHeight),f=d/u,s=Math.min(d,o),this.itemMinWidth&&this.itemMinWidth>0&&(s=Math.max(d,this.itemMinWidth));var b=t==y-1;if(a=s/f,r+=s,l+=a,i={index:e,pageIndex:t,width:s,height:a},p[g].items.push(i),this.normalizeRows&&(h=r/p[g].items.length,c=l/p[g].items.length,r>=o||b)){p[g].avgHeight=c,p[g].index=g;var S=p[g].items.length,v=(o-r)/S;if(this._itemsFromPreviousPage=0,b&&v+h>1.5*h){this._itemsFromPreviousPage=S,p[g]={avgHeight:0,index:g,items:[]};break}this._normalizeRow(p[g]),b||(g++,p[g]={avgHeight:0,index:0,items:[]}),r=l=c=h=s=a=d=u=0}}m.innerHTML="";var w,C="",R="";for(t=0;p.length>t;t++)if(w=p[t],w.items&&0!==w.items.length)for(var D=0;w.items.length>D;D++)i=w.items[D],this.doSetupItem({index:i.index,selected:this.isSelected(i.index)}),n.setAttribute("data-enyo-index",i.index),n.addStyles("width:"+i.width+"px;height:"+i.height+"px;"),this.itemSpacing>=0&&n.addStyles("margin-top:"+this.itemSpacing+"px;margin-left:"+this.itemSpacing+"px;"),R=n.generateHtml(),n.teardownRender(),C+=R;return C},_normalizeRow:function(t){if(this.normalizeRows&&t.items&&0!==t.items.length){var e,i,n=this.owner.hasNode().clientWidth,o=0,s=0,r="",a=0,l=0,h=0,c=0;for(i=0;t.items.length>i;i++)e=t.items[i],a=e.width,l=e.height,s=Math.floor(t.avgHeight/l*a),r+=" "+s,e.width=s,e.height=t.avgHeight,o+=s,this.itemSpacing>=0&&(o+=this.itemSpacing,i==t.items.length-1&&(o+=this.itemSpacing));for(c=n-o,h=n/(n-c),o=0,s=0,r="",i=0;t.items.length>i;i++){e=t.items[i],a=e.width,l=e.height,s=Math.floor(a*h),r+=" "+s;var g=Math.floor(l*h);e.width=s,e.height=g,o+=s,this.itemSpacing>=0&&(o+=this.itemSpacing,i==t.items.length-1&&(o+=this.itemSpacing))}c=n-o,e=t.items[t.items.length-1],a=e.width,l=e.height,e.width=a+c,e.height=l}}});

// lib/layout/list/source/GridList.js
enyo.kind({name:"enyo.GridList",kind:"enyo.List",classes:"enyo-gridlist",published:{itemFluidWidth:!1,itemFixedSize:!1,itemMinWidth:160,itemMinHeight:160,itemWidth:160,itemHeight:160,itemSpacing:0,normalizeRows:!1},horizontal:"hidden",events:{onSizeupItem:""},show:function(t){this._calculateItemsPerRow(),this.setCount(t),this.reset()},create:enyo.inherit(function(t){return function(){this._setComponents(),t.apply(this,arguments),this.itemFluidWidthChanged(),this.itemFixedSizeChanged(),this.itemMinWidthChanged(),this.itemMinHeightChanged(),this.itemWidthChanged(),this.itemHeightChanged(),this.itemSpacingChanged(),this.normalizeRowsChanged(),this.$.generator.setClientClasses("enyo-gridlist-row")}}),itemFluidWidthChanged:function(){this.$.generator.itemFluidWidth=this.itemFluidWidth,this.setNormalizeRows(!this.itemFluidWidth&&!this.itemFixedSize)},itemFixedSizeChanged:function(){this.$.generator.itemFixedSize=this.itemFixedSize,this.setNormalizeRows(!this.itemFluidWidth&&!this.itemFixedSize)},itemWidthChanged:function(){this.$.generator.itemWidth=this.itemWidth},itemHeightChanged:function(){this.$.generator.itemHeight=this.itemHeight},itemMinWidthChanged:function(){var t=this.hasNode();t&&(this.itemMinWidth||(this.itemMinWidth=160),this.itemMinWidth=Math.min(this.itemMinWidth,t.clientWidth)),this.$.generator.itemMinWidth=this.itemMinWidth},itemMinHeightChanged:function(){var t=this.hasNode();t&&(this.itemMinHeight||(this.itemMinHeight=160),this.itemMinHeight=Math.min(this.itemMinHeight,t.clientHeight)),this.$.generator.itemMinHeight=this.itemMinHeight},itemSpacingChanged:function(){0>this.itemSpacing&&(this.itemSpacing=0),this.itemSpacing=this.itemSpacing,this.$.generator.itemSpacing=this.itemSpacing},normalizeRowsChanged:function(){this.$.generator.normalizeRows=this.normalizeRows},bottomUpChanged:function(){this.bottomUp=!1,this.pageBound="top"},reflow:enyo.inherit(function(t){return function(){this._calculateItemsPerRow(),t.apply(this,arguments)}}),_calculateItemsPerRow:function(){var t=this.hasNode();if(t){this.itemsPerRow=Math.floor((t.clientWidth-this.itemSpacing)/(this.itemMinWidth+this.itemSpacing));var e=Math.round((t.clientHeight-this.itemSpacing)/(this.itemMinHeight+this.itemSpacing));if(this.itemFixedSize||this.itemFluidWidth){var i=Math.floor((t.clientWidth-this.itemSpacing)/(this.itemWidth+this.itemSpacing)),n=Math.floor(i),o=Math.ceil(i),s=t.clientWidth-this.itemSpacing-o*(this.itemWidth+this.itemSpacing);this.itemsPerRow=s>0?o:n,e=Math.round((t.clientHeight-this.itemSpacing)/(this.itemHeight+this.itemSpacing))}this.itemsPerRow=Math.max(1,this.itemsPerRow),this.rowsPerPage=3*this.itemsPerRow*e,this.$.generator.itemsPerRow=this.itemsPerRow}},_setComponents:function(){this.listTools=enyo.clone(this.listTools),this.listTools[0]=enyo.clone(this.listTools[0]),this.listTools[0].components=enyo.clone(this.listTools[0].components);var t=this.listTools[0].components;this.createComponent(new enyo.Component({name:"_dummy_",allowHtml:!0,classes:"enyo-gridlist-dummy",showing:!1},{owner:this}));for(var e=0;t.length>e;e++)if("generator"==t[e].name)return t[e]=enyo.clone(t[e]),t[e].kind="enyo.GridFlyWeightRepeater",void 0}});

// lib/layout/list/source/GridListImageItem.js
enyo.kind({name:"enyo.GridListImageItem",classes:"enyo-gridlist-imageitem",components:[{name:"image",kind:"enyo.Image"},{name:"caption",classes:"caption"},{name:"subCaption",classes:"sub-caption"}],published:{source:"",caption:"",subCaption:"",selected:!1},bindings:[{from:".source",to:".$.image.src"},{from:".caption",to:".$.caption.content"},{from:".caption",to:".$.caption.showing",kind:"enyo.EmptyBinding"},{from:".subCaption",to:".$.subCaption.content"},{from:".subCaption",to:".$.subCaption.showing",kind:"enyo.EmptyBinding"}],create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.selectedChanged()}}),selectedChanged:function(){this.addRemoveClass("selected",this.selected)},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)}});

// lib/layout/slideable/source/Slideable.js
enyo.kind({name:"enyo.Slideable",kind:"Control",published:{axis:"h",value:0,unit:"px",min:0,max:0,accelerated:"auto",overMoving:!0,draggable:!0},events:{onAnimateFinish:"",onChange:""},preventDragPropagation:!1,tools:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"}],handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},kDragScalar:1,dragEventProp:"dx",unitModifier:!1,canTransform:!1,create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.acceleratedChanged(),this.transformChanged(),this.axisChanged(),this.valueChanged(),this.addClass("enyo-slideable")}}),initComponents:enyo.inherit(function(t){return function(){this.createComponents(this.tools),t.apply(this,arguments)}}),rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.canModifyUnit(),this.updateDragScalar()}}),resizeHandler:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.updateDragScalar()}}),canModifyUnit:function(){if(!this.canTransform){var t=this.getInitialStyleValue(this.hasNode(),this.boundary);t.match(/px/i)&&"%"===this.unit&&(this.unitModifier=this.getBounds()[this.dimension])}},getInitialStyleValue:function(t,e){var i=enyo.dom.getComputedStyle(t);return i?i.getPropertyValue(e):t&&t.currentStyle?t.currentStyle[e]:"0"},updateBounds:function(t,e){var i={};i[this.boundary]=t,this.setBounds(i,this.unit),this.setInlineStyles(t,e)},updateDragScalar:function(){if("%"==this.unit){var t=this.getBounds()[this.dimension];this.kDragScalar=t?100/t:1,this.canTransform||this.updateBounds(this.value,100)}},transformChanged:function(){this.canTransform=enyo.dom.canTransform()},acceleratedChanged:function(){(!enyo.platform.android||2>=enyo.platform.android)&&enyo.dom.accelerate(this,this.accelerated)},axisChanged:function(){var t="h"==this.axis;this.dragMoveProp=t?"dx":"dy",this.shouldDragProp=t?"horizontal":"vertical",this.transform=t?"translateX":"translateY",this.dimension=t?"width":"height",this.boundary=t?"left":"top"},setInlineStyles:function(t,e){var i={};this.unitModifier?(i[this.boundary]=this.percentToPixels(t,this.unitModifier),i[this.dimension]=this.unitModifier,this.setBounds(i)):(e?i[this.dimension]=e:i[this.boundary]=t,this.setBounds(i,this.unit))},valueChanged:function(t){var e=this.value;this.isOob(e)&&!this.isAnimating()&&(this.value=this.overMoving?this.dampValue(e):this.clampValue(e)),enyo.platform.android>2&&(this.value?(0===t||void 0===t)&&enyo.dom.accelerate(this,this.accelerated):enyo.dom.accelerate(this,!1)),this.canTransform?enyo.dom.transformValue(this,this.transform,this.value+this.unit):this.setInlineStyles(this.value,!1),this.doChange()},getAnimator:function(){return this.$.animator},isAtMin:function(){return this.value<=this.calcMin()},isAtMax:function(){return this.value>=this.calcMax()},calcMin:function(){return this.min},calcMax:function(){return this.max},clampValue:function(t){var e=this.calcMin(),i=this.calcMax();return Math.max(e,Math.min(t,i))},dampValue:function(t){return this.dampBound(this.dampBound(t,this.min,1),this.max,-1)},dampBound:function(t,e,i){var n=t;return e*i>n*i&&(n=e+(n-e)/4),n},percentToPixels:function(t,e){return Math.floor(e/100*t)},pixelsToPercent:function(t){var e=this.unitModifier?this.getBounds()[this.dimension]:this.container.getBounds()[this.dimension];return 100*(t/e)},shouldDrag:function(t){return this.draggable&&t[this.shouldDragProp]},isOob:function(t){return t>this.calcMax()||this.calcMin()>t},dragstart:function(t,e){return this.shouldDrag(e)?(e.preventDefault(),this.$.animator.stop(),e.dragInfo={},this.dragging=!0,this.drag0=this.value,this.dragd0=0,this.preventDragPropagation):void 0},drag:function(t,e){if(this.dragging){e.preventDefault();var i=this.canTransform?e[this.dragMoveProp]*this.kDragScalar:this.pixelsToPercent(e[this.dragMoveProp]),n=this.drag0+i,o=i-this.dragd0;return this.dragd0=i,o&&(e.dragInfo.minimizing=0>o),this.setValue(n),this.preventDragPropagation}},dragfinish:function(t,e){return this.dragging?(this.dragging=!1,this.completeDrag(e),e.preventTap(),this.preventDragPropagation):void 0},completeDrag:function(t){this.value!==this.calcMax()&&this.value!=this.calcMin()&&this.animateToMinMax(t.dragInfo.minimizing)},isAnimating:function(){return this.$.animator.isAnimating()},play:function(t,e){this.$.animator.play({startValue:t,endValue:e,node:this.hasNode()})},animateTo:function(t){this.play(this.value,t)},animateToMin:function(){this.animateTo(this.calcMin())},animateToMax:function(){this.animateTo(this.calcMax())},animateToMinMax:function(t){t?this.animateToMin():this.animateToMax()},animatorStep:function(t){return this.setValue(t.value),!0},animatorComplete:function(t){return this.doAnimateFinish(t),!0},toggleMinMax:function(){this.animateToMinMax(!this.isAtMin())}});

// lib/layout/panels/source/arrangers/Arranger.js
enyo.kind({name:"enyo.Arranger",kind:"Layout",layoutClass:"enyo-arranger",accelerated:"auto",dragProp:"ddx",dragDirectionProp:"xDirection",canDragProp:"horizontal",incrementalPoints:!1,destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)e._arranger=null;t.apply(this,arguments)}}),arrange:function(){},size:function(){},start:function(){var t=this.container.fromIndex,e=this.container.toIndex,i=this.container.transitionPoints=[t];if(this.incrementalPoints)for(var n=Math.abs(e-t)-2,o=t;n>=0;)o+=t>e?-1:1,i.push(o),n--;i.push(this.container.toIndex)},finish:function(){},calcArrangementDifference:function(){},canDragEvent:function(t){return t[this.canDragProp]},calcDragDirection:function(t){return t[this.dragDirectionProp]},calcDrag:function(t){return t[this.dragProp]},drag:function(t,e,i,n,o){var s=this.measureArrangementDelta(-t,e,i,n,o);return s},measureArrangementDelta:function(t,e,i,n,o){var s=this.calcArrangementDifference(e,i,n,o),a=s?t/Math.abs(s):0;return a*=this.container.fromIndex>this.container.toIndex?-1:1},_arrange:function(t){this.containerBounds||this.reflow();var e=this.getOrderedControls(t);this.arrange(e,t)},arrangeControl:function(t,e){t._arranger=enyo.mixin(t._arranger||{},e)},flow:function(){this.c$=[].concat(this.container.getPanels()),this.controlsIndex=0;for(var t,e=0,i=this.container.getPanels();t=i[e];e++)if(enyo.dom.accelerate(t,!t.preventAccelerate&&this.accelerated),enyo.platform.safari)for(var n,o=t.children,s=0;n=o[s];s++)enyo.dom.accelerate(n,this.accelerated)},reflow:function(){var t=this.container.hasNode();this.containerBounds=t?{width:t.clientWidth,height:t.clientHeight}:{},this.size()},flowArrangement:function(){var t=this.container.arrangement;if(t)for(var e,i=0,n=this.container.getPanels();(e=n[i])&&t[i];i++)this.flowControl(e,t[i])},flowControl:function(t,e){enyo.Arranger.positionControl(t,e);var i=e.opacity;null!=i&&enyo.Arranger.opacifyControl(t,i)},getOrderedControls:function(t){for(var e=Math.floor(t),i=e-this.controlsIndex,n=i>0,o=this.c$||[],s=0;Math.abs(i)>s;s++)n?o.push(o.shift()):o.unshift(o.pop());return this.controlsIndex=e,o},statics:{positionControl:function(t,e,i){var n=i||"px";if(!this.updating)if(!enyo.dom.canTransform()||t.preventTransform||enyo.platform.android||10===enyo.platform.ie)enyo.dom.canTransform()&&t.preventTransform&&enyo.dom.transform(t,{translateX:null,translateY:null}),t.setBounds(e,i);else{var o=e.left,s=e.top;o=enyo.isString(o)?o:o&&o+n,s=enyo.isString(s)?s:s&&s+n,enyo.dom.transform(t,{translateX:o||null,translateY:s||null})}},opacifyControl:function(t,e){var i=e;i=i>.99?1:.01>i?0:i,9>enyo.platform.ie?t.applyStyle("filter","progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*i+")"):t.applyStyle("opacity",i)}}});

// lib/layout/panels/source/arrangers/CardArranger.js
enyo.kind({name:"enyo.CardArranger",kind:"Arranger",layoutClass:"enyo-arranger enyo-arranger-fit",calcArrangementDifference:function(){return this.containerBounds.width},arrange:function(t){for(var e,i,n=0;e=t[n];n++)i=0===n?1:0,this.arrangeControl(e,{opacity:i})},start:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.container.getPanels(),n=0;e=i[n];n++){var o=e.showing;e.setShowing(n==this.container.fromIndex||n==this.container.toIndex),e.showing&&!o&&e.resized()}}}),finish:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)e.setShowing(n==this.container.toIndex)}}),destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)enyo.Arranger.opacifyControl(e,1),e.showing||e.setShowing(!0);t.apply(this,arguments)}})});

// lib/layout/panels/source/arrangers/CardSlideInArranger.js
enyo.kind({name:"enyo.CardSlideInArranger",kind:"CardArranger",start:function(){for(var t,e=this.container.getPanels(),i=0;t=e[i];i++){var n=t.showing;t.setShowing(i==this.container.fromIndex||i==this.container.toIndex),t.showing&&!n&&t.resized()}var o=this.container.fromIndex;i=this.container.toIndex,this.container.transitionPoints=[i+"."+o+".s",i+"."+o+".f"]},finish:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)e.setShowing(n==this.container.toIndex)}}),arrange:function(t,e){for(var i,n,o=e.split("."),s=o[0],a=o[1],r="s"==o[2],h=this.containerBounds.width,l=0,c=this.container.getPanels();i=c[l];l++)n=h,a==l&&(n=r?0:-h),s==l&&(n=r?h:0),a==l&&a==s&&(n=0),this.arrangeControl(i,{left:n})},destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)enyo.Arranger.positionControl(e,{left:null});t.apply(this,arguments)}})});

// lib/layout/panels/source/arrangers/CarouselArranger.js
enyo.kind({name:"enyo.CarouselArranger",kind:"Arranger",size:function(){var t,e,i,n,o,s=this.container.getPanels(),a=this.containerPadding=this.container.hasNode()?enyo.dom.calcPaddingExtents(this.container.node):{},r=this.containerBounds;r.height-=a.top+a.bottom,r.width-=a.left+a.right;var h;for(t=0,i=0;o=s[t];t++)n=enyo.dom.calcMarginExtents(o.hasNode()),o.width=o.getBounds().width,o.marginWidth=n.right+n.left,i+=(o.fit?0:o.width)+o.marginWidth,o.fit&&(h=o);if(h){var l=r.width-i;h.width=l>=0?l:h.width}for(t=0,e=a.left;o=s[t];t++)o.setBounds({top:a.top,bottom:a.bottom,width:o.fit?o.width:null})},arrange:function(t,e){this.container.wrap?this.arrangeWrap(t,e):this.arrangeNoWrap(t,e)},arrangeNoWrap:function(t,e){var i,n,o,s,a=this.container.getPanels(),r=this.container.clamp(e),h=this.containerBounds.width;for(i=r,o=0;(s=a[i])&&(o+=s.width+s.marginWidth,!(o>h));i++);var l=h-o,c=0;if(l>0)for(i=r-1,n=0;s=a[i];i--)if(n+=s.width+s.marginWidth,0>=l-n){c=l-n,r=i;break}var d,g;for(i=0,g=this.containerPadding.left+c;s=a[i];i++)d=s.width+s.marginWidth,r>i?this.arrangeControl(s,{left:-d}):(this.arrangeControl(s,{left:Math.floor(g)}),g+=d)},arrangeWrap:function(t){for(var e,i=0,n=this.containerPadding.left;e=t[i];i++)this.arrangeControl(e,{left:n}),n+=e.width+e.marginWidth},calcArrangementDifference:function(t,e,i,n){var o=Math.abs(t%this.c$.length);return e[o].left-n[o].left},destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)enyo.Arranger.positionControl(e,{left:null,top:null}),e.applyStyle("top",null),e.applyStyle("bottom",null),e.applyStyle("left",null),e.applyStyle("width",null);t.apply(this,arguments)}})});

// lib/layout/panels/source/arrangers/CollapsingArranger.js
enyo.kind({name:"enyo.CollapsingArranger",kind:"CarouselArranger",peekWidth:0,size:enyo.inherit(function(t){return function(){this.clearLastSize(),t.apply(this,arguments)}}),clearLastSize:function(){for(var t,e=0,i=this.container.getPanels();t=i[e];e++)t._fit&&e!=i.length-1&&(t.applyStyle("width",null),t._fit=null)},constructor:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.peekWidth=null!=this.container.peekWidth?this.container.peekWidth:this.peekWidth}}),arrange:function(t,e){for(var i,n=this.container.getPanels(),o=0,s=this.containerPadding.left,a=0;i=n[o];o++)i.getShowing()?(this.arrangeControl(i,{left:s+a*this.peekWidth}),o>=e&&(s+=i.width+i.marginWidth-this.peekWidth),a++):(this.arrangeControl(i,{left:s}),o>=e&&(s+=i.width+i.marginWidth)),o==n.length-1&&0>e&&this.arrangeControl(i,{left:s-e})},calcArrangementDifference:function(t,e,i,n){var o=this.container.getPanels().length-1;return Math.abs(n[o].left-e[o].left)},flowControl:enyo.inherit(function(t){return function(e,i){if(t.apply(this,arguments),this.container.realtimeFit){var n=this.container.getPanels(),o=n.length-1,s=n[o];e==s&&this.fitControl(e,i.left)}}}),finish:enyo.inherit(function(t){return function(){if(t.apply(this,arguments),!this.container.realtimeFit&&this.containerBounds){var e=this.container.getPanels(),i=this.container.arrangement,n=e.length-1,o=e[n];this.fitControl(o,i[n].left)}}}),fitControl:function(t,e){t._fit=!0,t.applyStyle("width",this.containerBounds.width-e+"px"),t.resized()}});

// lib/layout/panels/source/arrangers/DockRightArranger.js
enyo.kind({name:"enyo.DockRightArranger",kind:"Arranger",basePanel:!1,overlap:0,layoutWidth:0,constructor:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.overlap=null!=this.container.overlap?this.container.overlap:this.overlap,this.layoutWidth=null!=this.container.layoutWidth?this.container.layoutWidth:this.layoutWidth}}),size:function(){var t,e,i,n=this.container.getPanels(),o=this.containerPadding=this.container.hasNode()?enyo.dom.calcPaddingExtents(this.container.node):{},s=this.containerBounds;s.width-=o.left+o.right;var a,r=s.width,h=n.length;for(this.container.transitionPositions={},t=0;i=n[t];t++)i.width=0===t&&this.container.basePanel?r:i.getBounds().width;for(t=0;i=n[t];t++){0===t&&this.container.basePanel&&i.setBounds({width:r}),i.setBounds({top:o.top,bottom:o.bottom});for(var l=0;i=n[l];l++){var c;if(0===t&&this.container.basePanel)c=0;else if(t>l)c=r;else{if(t!==l)break;a=r>this.layoutWidth?this.overlap:0,c=r-n[t].width+a}this.container.transitionPositions[t+"."+l]=c}if(h>l)for(var d=!1,g=t+1;h>g;g++){if(a=0,d)a=0;else if(n[t].width+n[g].width-this.overlap>r)a=0,d=!0;else{for(a=n[t].width-this.overlap,e=t;g>e;e++){var u=a+n[e+1].width-this.overlap;if(!(r>u)){a=r;break}a=u}a=r-a}this.container.transitionPositions[t+"."+g]=a}}},arrange:function(t,e){var i,n,o=this.container.getPanels(),s=this.container.clamp(e);for(i=0;n=o[i];i++){var a=this.container.transitionPositions[i+"."+s];this.arrangeControl(n,{left:a})}},calcArrangementDifference:function(t,e,i){var n=this.container.getPanels(),o=i>t?n[i].width:n[t].width;return o},destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)enyo.Arranger.positionControl(e,{left:null,top:null}),e.applyStyle("top",null),e.applyStyle("bottom",null),e.applyStyle("left",null),e.applyStyle("width",null);t.apply(this,arguments)}})});

// lib/layout/panels/source/arrangers/OtherArrangers.js
enyo.kind({name:"enyo.LeftRightArranger",kind:"Arranger",margin:40,axisSize:"width",offAxisSize:"height",axisPosition:"left",constructor:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.margin=null!=this.container.margin?this.container.margin:this.margin}}),size:function(){for(var t,e,i=this.container.getPanels(),n=this.containerBounds[this.axisSize],o=n-this.margin-this.margin,s=0;e=i[s];s++)t={},t[this.axisSize]=o,t[this.offAxisSize]="100%",e.setBounds(t)},start:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.container.fromIndex,n=this.container.toIndex,o=this.getOrderedControls(n),s=Math.floor(o.length/2),r=0;e=o[r];r++)i>n?r==o.length-s?e.applyStyle("z-index",0):e.applyStyle("z-index",1):r==o.length-1-s?e.applyStyle("z-index",0):e.applyStyle("z-index",1)}}),arrange:function(t,e){var i,n,o;if(1==this.container.getPanels().length)return o={},o[this.axisPosition]=this.margin,this.arrangeControl(this.container.getPanels()[0],o),void 0;var s=Math.floor(this.container.getPanels().length/2),r=this.getOrderedControls(Math.floor(e)-s),a=this.containerBounds[this.axisSize]-this.margin-this.margin,h=this.margin-a*s;for(i=0;n=r[i];i++)o={},o[this.axisPosition]=h,this.arrangeControl(n,o),h+=a},calcArrangementDifference:function(t,e,i,n){if(1==this.container.getPanels().length)return 0;var o=Math.abs(t%this.c$.length);return e[o][this.axisPosition]-n[o][this.axisPosition]},destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)enyo.Arranger.positionControl(e,{left:null,top:null}),enyo.Arranger.opacifyControl(e,1),e.applyStyle("left",null),e.applyStyle("top",null),e.applyStyle("height",null),e.applyStyle("width",null);t.apply(this,arguments)}})}),enyo.kind({name:"enyo.TopBottomArranger",kind:"LeftRightArranger",dragProp:"ddy",dragDirectionProp:"yDirection",canDragProp:"vertical",axisSize:"height",offAxisSize:"width",axisPosition:"top"}),enyo.kind({name:"enyo.SpiralArranger",kind:"Arranger",incrementalPoints:!0,inc:20,size:function(){for(var t,e=this.container.getPanels(),i=this.containerBounds,n=this.controlWidth=i.width/3,o=this.controlHeight=i.height/3,s=0;t=e[s];s++)t.setBounds({width:n,height:o})},arrange:function(t){for(var e,i=this.inc,n=0,o=t.length;e=t[n];n++){var s=Math.cos(2*(n/o)*Math.PI)*n*i+this.controlWidth,r=Math.sin(2*(n/o)*Math.PI)*n*i+this.controlHeight;this.arrangeControl(e,{left:s,top:r})}},start:enyo.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.getOrderedControls(this.container.toIndex),n=0;e=i[n];n++)e.applyStyle("z-index",i.length-n)}}),calcArrangementDifference:function(){return this.controlWidth},destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)e.applyStyle("z-index",null),enyo.Arranger.positionControl(e,{left:null,top:null}),e.applyStyle("left",null),e.applyStyle("top",null),e.applyStyle("height",null),e.applyStyle("width",null);t.apply(this,arguments)}})}),enyo.kind({name:"enyo.GridArranger",kind:"Arranger",incrementalPoints:!0,colWidth:100,colHeight:100,size:function(){for(var t,e=this.container.getPanels(),i=this.colWidth,n=this.colHeight,o=0;t=e[o];o++)t.setBounds({width:i,height:n})},arrange:function(t){for(var e,i=this.colWidth,n=this.colHeight,o=Math.max(1,Math.floor(this.containerBounds.width/i)),s=0,r=0;t.length>r;s++)for(var a=0;o>a&&(e=t[r]);a++,r++)this.arrangeControl(e,{left:i*a,top:n*s})},flowControl:enyo.inherit(function(t){return function(e,i){t.apply(this,arguments),enyo.Arranger.opacifyControl(e,0!==i.top%this.colHeight?.25:1)}}),calcArrangementDifference:function(){return this.colWidth},destroy:enyo.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)enyo.Arranger.positionControl(e,{left:null,top:null}),e.applyStyle("left",null),e.applyStyle("top",null),e.applyStyle("height",null),e.applyStyle("width",null);t.apply(this,arguments)}})});

// lib/layout/panels/source/Panels.js
enyo.kind({name:"enyo.Panels",classes:"enyo-panels",published:{index:0,draggable:!0,animate:!0,wrap:!1,arrangerKind:"CardArranger",narrowFit:!0},events:{onTransitionStart:"",onTransitionFinish:""},handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",onscroll:"domScroll"},tools:[{kind:"Animator",onStep:"step",onEnd:"completed"}],fraction:0,create:enyo.inherit(function(t){return function(){this.transitionPoints=[],t.apply(this,arguments),this.arrangerKindChanged(),this.narrowFitChanged(),this.indexChanged()}}),rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),enyo.makeBubble(this,"scroll")}}),domScroll:function(){this.hasNode()&&this.node.scrollLeft>0&&(this.node.scrollLeft=0)},initComponents:enyo.inherit(function(t){return function(){this.createChrome(this.tools),t.apply(this,arguments)}}),arrangerKindChanged:function(){this.setLayoutKind(this.arrangerKind)},narrowFitChanged:function(){this.addRemoveClass("enyo-panels-fit-narrow",this.narrowFit)},destroy:enyo.inherit(function(t){return function(){this.destroying=!0,t.apply(this,arguments)}}),removeControl:enyo.inherit(function(t){return function(e){if(this.destroying)return t.apply(this,arguments);var i=-1,n=enyo.indexOf(e,this.controls);n===this.index&&(i=Math.max(n-1,0)),t.apply(this,arguments),-1!==i&&this.controls.length>0&&(this.setIndex(i),this.flow(),this.reflow())}}),isPanel:function(){return!0},flow:enyo.inherit(function(t){return function(){this.arrangements=[],t.apply(this,arguments)}}),reflow:enyo.inherit(function(t){return function(){this.arrangements=[],t.apply(this,arguments),this.refresh()}}),getPanels:function(){var t=this.controlParent||this;return t.children},getActive:function(){var t=this.getPanels(),e=this.index%t.length;return 0>e&&(e+=t.length),t[e]},getAnimator:function(){return this.$.animator},setIndex:function(t){var e=this.get("index");this.index=this.clamp(t),this.notifyObservers("index",e,t)},setIndexDirect:function(t){this.setIndex(t),this.completed()},selectPanelByName:function(t){if(t)for(var e=0,i=this.getPanels(),n=i.length;n>e;++e)if(t===i[e].name)return this.setIndex(e),e},previous:function(){var t=this.index-1;this.wrap&&0>t&&(t=this.getPanels().length-1),this.setIndex(t)},next:function(){var t=this.index+1;this.wrap&&t>=this.getPanels().length&&(t=0),this.setIndex(t)},clamp:function(t){var e=this.getPanels().length-1;return this.wrap?t:Math.max(0,Math.min(t,e))},indexChanged:function(t){this.lastIndex=t,!this.dragging&&this.$.animator&&(this.$.animator.isAnimating()&&(this.finishTransitionInfo&&(this.finishTransitionInfo.animating=!0),this.completed()),this.$.animator.stop(),this.hasNode()&&(this.animate?(this.startTransition(!0),this.$.animator.play({startValue:this.fraction})):this.refresh()))},step:function(t){return this.fraction=t.value,this.stepTransition(),!0},completed:function(){return this.$.animator.isAnimating()&&this.$.animator.stop(),this.fraction=1,this.stepTransition(),this.finishTransition(!0),!0},dragstart:function(t,e){return this.draggable&&this.layout&&this.layout.canDragEvent(e)?(e.preventDefault(),this.dragstartTransition(e),this.dragging=!0,this.$.animator.stop(),!0):void 0},drag:function(t,e){this.dragging&&(e.preventDefault(),this.dragTransition(e))},dragfinish:function(t,e){this.dragging&&(this.dragging=!1,e.preventTap(),this.dragfinishTransition(e))},dragstartTransition:function(t){if(this.$.animator.isAnimating())this.verifyDragTransition(t);else{var e=this.fromIndex=this.index;this.toIndex=e-(this.layout?this.layout.calcDragDirection(t):0)}this.fromIndex=this.clamp(this.fromIndex),this.toIndex=this.clamp(this.toIndex),this.fireTransitionStart(),this.layout&&this.layout.start()},dragTransition:function(t){var e=this.layout?this.layout.calcDrag(t):0,i=this.transitionPoints,n=i[0],o=i[i.length-1],s=this.fetchArrangement(n),r=this.fetchArrangement(o),a=this.layout?this.layout.drag(e,n,s,o,r):0,h=e&&!a;this.fraction+=a;var l=this.fraction;(l>1||0>l||h)&&((l>0||h)&&this.dragfinishTransition(t),this.dragstartTransition(t),this.fraction=0),this.stepTransition()},dragfinishTransition:function(t){this.verifyDragTransition(t),this.setIndex(this.toIndex),this.dragging&&this.fireTransitionFinish()},verifyDragTransition:function(t){var e=this.layout?this.layout.calcDragDirection(t):0,i=Math.min(this.fromIndex,this.toIndex),n=Math.max(this.fromIndex,this.toIndex);if(e>0){var o=i;i=n,n=o}i!=this.fromIndex&&(this.fraction=1-this.fraction),this.fromIndex=i,this.toIndex=n},refresh:function(){this.$.animator&&this.$.animator.isAnimating()&&this.$.animator.stop(),this.startTransition(!1),this.fraction=1,this.stepTransition(),this.finishTransition(!1)},startTransition:function(t){this.fromIndex=null!=this.fromIndex?this.fromIndex:this.lastIndex||0,this.toIndex=null!=this.toIndex?this.toIndex:this.index,this.layout&&this.layout.start(),t&&this.fireTransitionStart()},finishTransition:function(t){this.layout&&this.layout.finish(),this.transitionPoints=[],this.fraction=0,this.fromIndex=this.toIndex=null,t&&this.fireTransitionFinish()},fireTransitionStart:function(){var t=this.startTransitionInfo;!this.hasNode()||t&&t.fromIndex==this.fromIndex&&t.toIndex==this.toIndex||(this.startTransitionInfo={fromIndex:this.fromIndex,toIndex:this.toIndex},this.doTransitionStart(enyo.clone(this.startTransitionInfo)))},fireTransitionFinish:function(){var t=this.finishTransitionInfo;!this.hasNode()||t&&t.fromIndex==this.lastIndex&&t.toIndex==this.index||(this.finishTransitionInfo=t&&t.animating?{fromIndex:t.toIndex,toIndex:this.lastIndex}:{fromIndex:this.lastIndex,toIndex:this.index},this.doTransitionFinish(enyo.clone(this.finishTransitionInfo)))},stepTransition:function(){if(this.hasNode()){var t=this.transitionPoints,e=(this.fraction||0)*(t.length-1),i=Math.floor(e);e-=i;var n=t[i],o=t[i+1],s=this.fetchArrangement(n),r=this.fetchArrangement(o);this.arrangement=s&&r?enyo.Panels.lerp(s,r,e):s||r,this.arrangement&&this.layout&&this.layout.flowArrangement()}},fetchArrangement:function(t){return null!=t&&!this.arrangements[t]&&this.layout&&(this.layout._arrange(t),this.arrangements[t]=this.readArrangement(this.getPanels())),this.arrangements[t]},readArrangement:function(t){for(var e,i=[],n=0,o=t;e=o[n];n++)i.push(enyo.clone(e._arranger));return i},statics:{isScreenNarrow:function(){return 800>=enyo.dom.getWindowWidth()},lerp:function(t,e,i){for(var n,o=[],s=0,r=enyo.keys(t);n=r[s];s++)o.push(this.lerpObject(t[n],e[n],i));return o},lerpObject:function(t,e,i){var n,o,s=enyo.clone(t);if(e)for(var r in t)n=t[r],o=e[r],n!=o&&(s[r]=n-(n-o)*i);return s}}});

// lib/layout/tree/source/Node.js
enyo.kind({name:"enyo.Node",published:{expandable:!1,expanded:!1,icon:"",onlyIconExpands:!1,selected:!1},style:"padding: 0 0 0 16px;",content:"Node",defaultKind:"Node",classes:"enyo-node",components:[{name:"icon",kind:"Image",showing:!1},{kind:"Control",name:"caption",Xtag:"span",style:"display: inline-block; padding: 4px;",allowHtml:!0},{kind:"Control",name:"extra",tag:"span",allowHtml:!0}],childClient:[{kind:"Control",name:"box",classes:"enyo-node-box",Xstyle:"border: 1px solid orange;",components:[{kind:"Control",name:"client",classes:"enyo-node-client",Xstyle:"border: 1px solid lightblue;"}]}],handlers:{ondblclick:"dblclick"},events:{onNodeTap:"nodeTap",onNodeDblClick:"nodeDblClick",onExpand:"nodeExpand",onDestroyed:"nodeDestroyed"},create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.selectedChanged(),this.iconChanged()}}),destroy:enyo.inherit(function(t){return function(){this.doDestroyed(),t.apply(this,arguments)}}),initComponents:enyo.inherit(function(t){return function(){this.expandable&&(this.kindComponents=this.kindComponents.concat(this.childClient)),t.apply(this,arguments)}}),contentChanged:function(){this.$.caption.setContent(this.content)},iconChanged:function(){this.$.icon.setSrc(this.icon),this.$.icon.setShowing(Boolean(this.icon))},selectedChanged:function(){this.addRemoveClass("enyo-selected",this.selected)},rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.expandable&&!this.expanded&&this.quickCollapse()}}),addNodes:function(t){this.destroyClientControls();for(var e,i=0;e=t[i];i++)this.createComponent(e);this.$.client.render()},addTextNodes:function(t){this.destroyClientControls();for(var e,i=0;e=t[i];i++)this.createComponent({content:e});this.$.client.render()},tap:function(t,e){return this.onlyIconExpands?e.target==this.$.icon.hasNode()?this.toggleExpanded():this.doNodeTap():(this.toggleExpanded(),this.doNodeTap()),!0},dblclick:function(){return this.doNodeDblClick(),!0},toggleExpanded:function(){this.setExpanded(!this.expanded)},quickCollapse:function(){this.removeClass("enyo-animate"),this.$.box.applyStyle("height","0");var t=this.$.client.getBounds().height;this.$.client.setBounds({top:-t})},_expand:function(){this.addClass("enyo-animate");var t=this.$.client.getBounds().height;this.$.box.setBounds({height:t}),this.$.client.setBounds({top:0}),setTimeout(this.bindSafely(function(){this.expanded&&(this.removeClass("enyo-animate"),this.$.box.applyStyle("height","auto"))}),225)},_collapse:function(){this.removeClass("enyo-animate");var t=this.$.client.getBounds().height;this.$.box.setBounds({height:t}),setTimeout(this.bindSafely(function(){this.addClass("enyo-animate"),this.$.box.applyStyle("height","0"),this.$.client.setBounds({top:-t})}),25)},expandedChanged:function(){if(this.expandable){var t={expanded:this.expanded};this.doExpand(t),t.wait||this.effectExpanded()}else this.expanded=!1},effectExpanded:function(){this.$.client&&(this.expanded?this._expand():this._collapse())}});

// lib/layout/imageview/source/PanZoomView.js
enyo.kind({name:"enyo.PanZoomView",kind:enyo.Scroller,touchOverscroll:!1,thumb:!1,animate:!0,verticalDragPropagation:!0,horizontalDragPropagation:!0,published:{scale:"auto",disableZoom:!1},events:{onZoom:""},touch:!0,preventDragPropagation:!1,handlers:{ondragstart:"dragPropagation",onSetDimensions:"setDimensions"},components:[{name:"animator",kind:"Animator",onStep:"zoomAnimationStep",onEnd:"zoomAnimationEnd"},{name:"viewport",style:"overflow:hidden;min-height:100%;min-width:100%;",classes:"enyo-fit",ongesturechange:"gestureTransform",ongestureend:"saveState",ontap:"singleTap",ondblclick:"doubleClick",onmousewheel:"mousewheel",components:[{name:"content"}]}],create:enyo.inherit(function(t){return function(){this.scaleKeyword=this.scale;var e=this.components;this.components=[],t.apply(this,arguments),this.$.content.applyStyle("width",this.contentWidth+"px"),this.$.content.applyStyle("height",this.contentHeight+"px"),this.unscaledComponents&&this.createComponents(this.unscaledComponents),this.controlParentName="content",this.discoverControlParent(),this.createComponents(e),this.canTransform=enyo.dom.canTransform(),this.canTransform||this.$.content.applyStyle("position","relative"),this.canAccelerate=enyo.dom.canAccelerate(),this.getStrategy().setDragDuringGesture(!1)}}),rendered:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.getOriginalScale()}}),dragPropagation:function(t,e){var i=this.getStrategy().getScrollBounds(),n=0===i.top&&e.dy>0||i.top>=i.maxTop-2&&0>e.dy,o=0===i.left&&e.dx>0||i.left>=i.maxLeft-2&&0>e.dx;return!(n&&this.verticalDragPropagation||o&&this.horizontalDragPropagation)},mousewheel:function(t,e){e.pageX|=e.clientX+e.target.scrollLeft,e.pageY|=e.clientY+e.target.scrollTop;var i=(this.maxScale-this.minScale)/10,n=this.scale;return e.wheelDelta>0||0>e.detail?this.scale=this.limitScale(this.scale+i):(0>e.wheelDelta||e.detail>0)&&(this.scale=this.limitScale(this.scale-i)),this.eventPt=this.calcEventLocation(e),this.transform(this.scale),n!=this.scale&&this.doZoom({scale:this.scale}),this.ratioX=this.ratioY=null,e.preventDefault(),!0},resizeHandler:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.scaleChanged()}}),setDimensions:function(t,e){return this.$.content.applyStyle("width",e.width+"px"),this.$.content.applyStyle("height",e.height+"px"),this.originalWidth=e.width,this.originalHeight=e.height,this.scale=this.scaleKeyword,this.scaleChanged(),!0},getOriginalScale:function(){this.$.content.hasNode()&&(this.originalWidth=this.$.content.node.clientWidth,this.originalHeight=this.$.content.node.clientHeight,this.scale=this.scaleKeyword,this.scaleChanged())},scaleChanged:function(){var t=this.hasNode();if(t){this.containerWidth=t.clientWidth,this.containerHeight=t.clientHeight;var e=this.containerWidth/this.originalWidth,i=this.containerHeight/this.originalHeight;this.minScale=Math.min(e,i),this.maxScale=1>3*this.minScale?1:3*this.minScale,"auto"==this.scale?this.scale=this.minScale:"width"==this.scale?this.scale=e:"height"==this.scale?this.scale=i:"fit"==this.scale?(this.fitAlignment="center",this.scale=Math.max(e,i)):(this.maxScale=Math.max(this.maxScale,this.scale),this.scale=this.limitScale(this.scale))}this.eventPt=this.calcEventLocation(),this.transform(this.scale),this.getStrategy().$.scrollMath&&this.getStrategy().$.scrollMath.start(),this.align()},align:function(){if(this.fitAlignment&&"center"===this.fitAlignment){var t=this.getScrollBounds();this.setScrollLeft(t.maxLeft/2),this.setScrollTop(t.maxTop/2)}},gestureTransform:function(t,e){this.eventPt=this.calcEventLocation(e),this.transform(this.limitScale(this.scale*e.scale))},calcEventLocation:function(t){var e={x:0,y:0};if(t&&this.hasNode()){var i=this.node.getBoundingClientRect();e.x=Math.round(t.pageX-i.left-this.bounds.x),e.x=Math.max(0,Math.min(this.bounds.width,e.x)),e.y=Math.round(t.pageY-i.top-this.bounds.y),e.y=Math.max(0,Math.min(this.bounds.height,e.y))}return e},transform:function(t){this.tapped=!1;var e=this.bounds||this.innerBounds(t);this.bounds=this.innerBounds(t),this.scale>this.minScale?this.$.viewport.applyStyle("cursor","move"):this.$.viewport.applyStyle("cursor",null),this.$.viewport.setBounds({width:this.bounds.width+"px",height:this.bounds.height+"px"}),this.ratioX=this.ratioX||(this.eventPt.x+this.getScrollLeft())/e.width,this.ratioY=this.ratioY||(this.eventPt.y+this.getScrollTop())/e.height;var i,n;if(this.$.animator.ratioLock?(i=this.$.animator.ratioLock.x*this.bounds.width-this.containerWidth/2,n=this.$.animator.ratioLock.y*this.bounds.height-this.containerHeight/2):(i=this.ratioX*this.bounds.width-this.eventPt.x,n=this.ratioY*this.bounds.height-this.eventPt.y),i=Math.max(0,Math.min(this.bounds.width-this.containerWidth,i)),n=Math.max(0,Math.min(this.bounds.height-this.containerHeight,n)),this.canTransform){var o={scale:t};o=this.canAccelerate?enyo.mixin({translate3d:Math.round(this.bounds.left)+"px, "+Math.round(this.bounds.top)+"px, 0px"},o):enyo.mixin({translate:this.bounds.left+"px, "+this.bounds.top+"px"},o),enyo.dom.transform(this.$.content,o)}else if(enyo.platform.ie){var s='"progid:DXImageTransform.Microsoft.Matrix(M11='+t+", M12=0, M21=0, M22="+t+", SizingMethod='auto expand')\"";this.$.content.applyStyle("-ms-filter",s),this.$.content.setBounds({width:this.bounds.width*t+"px",height:this.bounds.height*t+"px",left:this.bounds.left+"px",top:this.bounds.top+"px"}),this.$.content.applyStyle("width",t*this.bounds.width),this.$.content.applyStyle("height",t*this.bounds.height)}this.setScrollLeft(i),this.setScrollTop(n),this.positionClientControls(t)},limitScale:function(t){return this.disableZoom?t=this.scale:t>this.maxScale?t=this.maxScale:this.minScale>t&&(t=this.minScale),t},innerBounds:function(t){var e=this.originalWidth*t,i=this.originalHeight*t,n={x:0,y:0,transX:0,transY:0};return this.containerWidth>e&&(n.x+=(this.containerWidth-e)/2),this.containerHeight>i&&(n.y+=(this.containerHeight-i)/2),this.canTransform&&(n.transX-=(this.originalWidth-e)/2,n.transY-=(this.originalHeight-i)/2),{left:n.x+n.transX,top:n.y+n.transY,width:e,height:i,x:n.x,y:n.y}},saveState:function(t,e){var i=this.scale;this.scale*=e.scale,this.scale=this.limitScale(this.scale),i!=this.scale&&this.doZoom({scale:this.scale}),this.ratioX=this.ratioY=null},doubleClick:function(t,e){8==enyo.platform.ie&&(this.tapped=!0,e.pageX=e.clientX+e.target.scrollLeft,e.pageY=e.clientY+e.target.scrollTop,this.singleTap(t,e),e.preventDefault())},singleTap:function(t,e){setTimeout(this.bindSafely(function(){this.tapped=!1}),300),this.tapped?(this.tapped=!1,this.smartZoom(t,e)):this.tapped=!0},smartZoom:function(t,e){var i=this.hasNode(),n=this.$.content.hasNode();if(i&&n&&this.hasNode()&&!this.disableZoom){var o=this.scale;if(this.scale=this.scale!=this.minScale?this.minScale:this.maxScale,this.eventPt=this.calcEventLocation(e),this.animate){var s={x:(this.eventPt.x+this.getScrollLeft())/this.bounds.width,y:(this.eventPt.y+this.getScrollTop())/this.bounds.height};this.$.animator.play({duration:350,ratioLock:s,baseScale:o,deltaScale:this.scale-o})}else this.transform(this.scale),this.doZoom({scale:this.scale})}},zoomAnimationStep:function(){var t=this.$.animator.baseScale+this.$.animator.deltaScale*this.$.animator.value;return this.transform(t),!0},zoomAnimationEnd:function(){return this.stabilize(),this.doZoom({scale:this.scale}),this.$.animator.ratioLock=void 0,!0},positionClientControls:function(t){this.waterfallDown("onPositionPin",{scale:t,bounds:this.bounds})}});

// lib/layout/imageview/source/ImageViewPin.js
enyo.kind({name:"enyo.ImageViewPin",kind:"enyo.Control",published:{highlightAnchorPoint:!1,anchor:{top:0,left:0},position:{top:0,left:0}},style:"position:absolute;z-index:1000;width:0px;height:0px;",handlers:{onPositionPin:"reAnchor"},create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.styleClientControls(),this.positionClientControls(),this.highlightAnchorPointChanged(),this.anchorChanged()}}),styleClientControls:function(){for(var t=this.getClientControls(),e=0;t.length>e;e++)t[e].applyStyle("position","absolute")},positionClientControls:function(){for(var t=this.getClientControls(),e=0;t.length>e;e++)for(var i in this.position)t[e].applyStyle(i,this.position[i]+"px")},highlightAnchorPointChanged:function(){this.addRemoveClass("pinDebug",this.highlightAnchorPoint)},anchorChanged:function(){var t=null,e=null;for(e in this.anchor)t=(""+this.anchor[e]).match(/^(\d+(?:\.\d+)?)(.*)$/),t&&(this.anchor[e+"Coords"]={value:t[1],units:t[2]||"px"})},reAnchor:function(t,e){var i=e.scale,n=e.bounds,o=this.anchor.right?"px"==this.anchor.rightCoords.units?n.width+n.x-this.anchor.rightCoords.value*i:n.width*(100-this.anchor.rightCoords.value)/100+n.x:"px"==this.anchor.leftCoords.units?this.anchor.leftCoords.value*i+n.x:n.width*this.anchor.leftCoords.value/100+n.x,s=this.anchor.bottom?"px"==this.anchor.bottomCoords.units?n.height+n.y-this.anchor.bottomCoords.value*i:n.height*(100-this.anchor.bottomCoords.value)/100+n.y:"px"==this.anchor.topCoords.units?this.anchor.topCoords.value*i+n.y:n.height*this.anchor.topCoords.value/100+n.y;this.applyStyle("left",o+"px"),this.applyStyle("top",s+"px")}});

// lib/layout/imageview/source/ImageView.js
enyo.kind({name:"enyo.ImageView",kind:"enyo.PanZoomView",subKindComponents:[{kind:"Image",ondown:"down",style:"vertical-align: text-top;"}],create:enyo.inherit(function(t){return function(){this.unscaledComponents=this.components,this.components=[],this.kindComponents[1].components[0].components=this.subKindComponents,t.apply(this,arguments),this.$.content.applyStyle("display","inline-block"),this.bufferImage=new Image,this.bufferImage.onload=enyo.bind(this,"imageLoaded"),this.bufferImage.onerror=enyo.bind(this,"imageError"),this.srcChanged(),this.getStrategy().$.scrollMath&&this.getStrategy().$.scrollMath.start()}}),destroy:enyo.inherit(function(t){return function(){this.bufferImage&&(this.bufferImage.onerror=void 0,this.bufferImage.onerror=void 0,delete this.bufferImage),t.apply(this,arguments)}}),down:function(t,e){e.preventDefault()},srcChanged:function(){this.src&&this.src.length>0&&this.bufferImage&&this.src!=this.bufferImage.src&&(this.bufferImage.src=this.src)},imageLoaded:function(){this.scale=this.scaleKeyword,this.originalWidth=this.contentWidth=this.bufferImage.width,this.originalHeight=this.contentHeight=this.bufferImage.height,this.scaleChanged(),this.$.image.setSrc(this.bufferImage.src),enyo.dom.transformValue(this.getStrategy().$.client,"translate3d","0px, 0px, 0"),this.positionClientControls(this.scale),this.align()},imageError:function(t){enyo.error("Error loading image: "+this.src),this.bubble("onerror",t)}});

// lib/layout/imageview/source/ImageCarousel.js
enyo.kind({name:"enyo.ImageCarousel",kind:enyo.Panels,arrangerKind:"enyo.CarouselArranger",defaultScale:"auto",disableZoom:!1,lowMemory:!1,published:{images:[]},handlers:{onTransitionStart:"transitionStart",onTransitionFinish:"transitionFinish"},create:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.imageCount=this.images.length,this.images.length>0&&(this.initContainers(),this.loadNearby())}}),initContainers:function(){for(var t=0;this.images.length>t;t++)this.$["container"+t]||(this.createComponent({name:"container"+t,style:"height:100%; width:100%;"}),this.$["container"+t].render());for(t=this.images.length;this.imageCount>t;t++)this.$["image"+t]&&this.$["image"+t].destroy(),this.$["container"+t].destroy();this.imageCount=this.images.length},loadNearby:function(){var t=this.getBufferRange();for(var e in t)this.loadImageView(t[e])},getBufferRange:function(){var t=[];if(this.layout.containerBounds){var e,i,n,o,s=1,a=this.layout.containerBounds;for(i=this.index-1,n=0,o=a.width*s;i>=0&&o>=n;)e=this.$["container"+i],n+=e.width+e.marginWidth,t.unshift(i),i--;for(i=this.index,n=0,o=a.width*(s+1);this.images.length>i&&o>=n;)e=this.$["container"+i],n+=e.width+e.marginWidth,t.push(i),i++}return t},reflow:enyo.inherit(function(t){return function(){t.apply(this,arguments),this.loadNearby()}}),loadImageView:function(t){return this.wrap&&(t=(t%this.images.length+this.images.length)%this.images.length),t>=0&&this.images.length-1>=t&&(this.$["image"+t]?this.$["image"+t].src!=this.images[t]&&(this.$["image"+t].setSrc(this.images[t]),this.$["image"+t].setScale(this.defaultScale),this.$["image"+t].setDisableZoom(this.disableZoom)):(this.$["container"+t].createComponent({name:"image"+t,kind:"ImageView",scale:this.defaultScale,disableZoom:this.disableZoom,src:this.images[t],verticalDragPropagation:!1,style:"height:100%; width:100%;"},{owner:this}),this.$["image"+t].render())),this.$["image"+t]},setImages:function(t){this.set("images",t)},imagesChanged:function(){this.initContainers(),this.loadNearby()},indexChanged:enyo.inherit(function(t){return function(){this.loadNearby(),this.lowMemory&&this.cleanupMemory(),t.apply(this,arguments)}}),transitionStart:function(t,e){return e.fromIndex==e.toIndex?!0:void 0},transitionFinish:function(){this.loadNearby(),this.lowMemory&&this.cleanupMemory()},getActiveImage:function(){return this.getImageByIndex(this.index)},getImageByIndex:function(t){return this.$["image"+t]||this.loadImageView(t)},cleanupMemory:function(){for(var t=this.getBufferRange(),e=0;this.images.length>e;e++)-1===enyo.indexOf(e,t)&&this.$["image"+e]&&this.$["image"+e].destroy()}});

// lib/onyx/source/Icon.js
enyo.kind({name:"onyx.Icon",published:{src:"",disabled:!1},classes:"onyx-icon",create:function(){this.inherited(arguments),this.src&&this.srcChanged(),this.disabledChanged()},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},srcChanged:function(){this.applyStyle("background-image","url("+enyo.path.rewrite(this.src)+")")}});

// lib/onyx/source/Button.js
enyo.kind({name:"onyx.Button",kind:"enyo.Button",classes:"onyx-button enyo-unselectable",create:function(){enyo.platform.firefoxOS&&(this.handlers.ondown="fxosDown",this.handlers.onenter="fxosEnter",this.handlers.ondrag="fxosDrag",this.handlers.onleave="fxosLeave",this.handlers.onup="fxosUp"),this.inherited(arguments)},fxosDown:function(){this.addClass("pressed"),this._isInControl=!0},fxosEnter:function(){this._isInControl=!0},fxosDrag:function(){this.addRemoveClass("pressed",this._isInControl)},fxosLeave:function(){this.removeClass("pressed"),this._isInControl=!1},fxosUp:function(){this.removeClass("pressed"),this._isInControl=!1}});

// lib/onyx/source/IconButton.js
enyo.kind({name:"onyx.IconButton",kind:"onyx.Icon",published:{active:!1},classes:"onyx-icon-button",create:function(){enyo.platform.firefoxOS&&(this.handlers.ondown="fxosDown",this.handlers.onenter="fxosEnter",this.handlers.ondrag="fxosDrag",this.handlers.onleave="fxosLeave",this.handlers.onup="fxosUp"),this.inherited(arguments)},fxosDown:function(){this.addClass("pressed"),this._isInControl=!0},fxosEnter:function(){this._isInControl=!0},fxosDrag:function(){this.addRemoveClass("pressed",this._isInControl)},fxosLeave:function(){this.removeClass("pressed"),this._isInControl=!1},fxosUp:function(){this.removeClass("pressed"),this._isInControl=!1},rendered:function(){this.inherited(arguments),this.activeChanged()},tap:function(){return this.disabled?!0:(this.setActive(!0),void 0)},activeChanged:function(){this.bubble("onActivate")}});

// lib/onyx/source/Checkbox.js
enyo.kind({name:"onyx.Checkbox",classes:"onyx-checkbox",kind:enyo.Checkbox,tag:"div",handlers:{onclick:""},tap:function(){return this.disabled||(this.setChecked(!this.getChecked()),this.bubble("onchange")),!this.disabled},dragstart:function(){}});

// lib/onyx/source/Drawer.js
enyo.kind({name:"onyx.Drawer",kind:"enyo.Drawer"});

// lib/onyx/source/Grabber.js
enyo.kind({name:"onyx.Grabber",classes:"onyx-grabber"});

// lib/onyx/source/Groupbox.js
enyo.kind({name:"onyx.Groupbox",classes:"onyx-groupbox"}),enyo.kind({name:"onyx.GroupboxHeader",classes:"onyx-groupbox-header"});

// lib/onyx/source/Input.js
enyo.kind({name:"onyx.Input",kind:"enyo.Input",classes:"onyx-input"});

// lib/onyx/source/Popup.js
enyo.kind({name:"onyx.Popup",kind:"enyo.Popup",classes:"onyx-popup",published:{scrimWhenModal:!0,scrim:!1,scrimClassName:""},protectedStatics:{count:0,highestZ:120},defaultZ:120,showingChanged:function(){this.showing?(onyx.Popup.count++,this.applyZIndex()):onyx.Popup.count>0&&onyx.Popup.count--,this.showHideScrim(this.showing),this.inherited(arguments)},showHideScrim:function(t){if(this.floating&&(this.scrim||this.modal&&this.scrimWhenModal)){var e=this.getScrim();if(t){var i=this.getScrimZIndex();this._scrimZ=i,e.showAtZIndex(i)}else e.hideAtZIndex(this._scrimZ);enyo.call(e,"addRemoveClass",[this.scrimClassName,e.showing])}},getScrimZIndex:function(){return onyx.Popup.highestZ>=this._zIndex?this._zIndex-1:onyx.Popup.highestZ},getScrim:function(){return this.modal&&this.scrimWhenModal&&!this.scrim?onyx.scrimTransparent.make():onyx.scrim.make()},applyZIndex:function(){this._zIndex=2*onyx.Popup.count+this.findZIndex()+1,this._zIndex<=onyx.Popup.highestZ&&(this._zIndex=onyx.Popup.highestZ+1),this._zIndex>onyx.Popup.highestZ&&(onyx.Popup.highestZ=this._zIndex),this.applyStyle("z-index",this._zIndex)},findZIndex:function(){var t=this.defaultZ;return this._zIndex?t=this._zIndex:this.hasNode()&&(t=Number(enyo.dom.getComputedStyleValue(this.node,"z-index"))||t),this.defaultZ>t&&(t=this.defaultZ),this._zIndex=t,this._zIndex}});

// lib/onyx/source/TextArea.js
enyo.kind({name:"onyx.TextArea",kind:"enyo.TextArea",classes:"onyx-textarea"});

// lib/onyx/source/RichText.js
enyo.kind({name:"onyx.RichText",kind:"enyo.RichText",classes:"onyx-richtext"});

// lib/onyx/source/InputDecorator.js
enyo.kind({name:"onyx.InputDecorator",kind:"enyo.ToolDecorator",tag:"label",classes:"onyx-input-decorator",published:{alwaysLooksFocused:!1},handlers:{onDisabledChange:"disabledChange",onfocus:"receiveFocus",onblur:"receiveBlur"},create:function(){this.inherited(arguments),this.updateFocus(!1)},alwaysLooksFocusedChanged:function(){this.updateFocus(this.focus)},updateFocus:function(t){this.focused=t,this.addRemoveClass("onyx-focused",this.alwaysLooksFocused||this.focused)},receiveFocus:function(){this.updateFocus(!0)},receiveBlur:function(){this.updateFocus(!1)},disabledChange:function(t,e){this.addRemoveClass("onyx-disabled",e.originator.disabled)}});

// lib/onyx/source/Tooltip.js
enyo.kind({name:"onyx.Tooltip",kind:"onyx.Popup",classes:"onyx-tooltip below left-arrow",autoDismiss:!1,showDelay:500,defaultLeft:-6,handlers:{onRequestShowTooltip:"requestShow",onRequestHideTooltip:"requestHide"},requestShow:function(){return this.showJob=setTimeout(this.bindSafely("show"),this.showDelay),!0},cancelShow:function(){clearTimeout(this.showJob)},requestHide:function(){return this.cancelShow(),this.inherited(arguments)},showingChanged:function(){this.cancelShow(),this.adjustPosition(!0),this.inherited(arguments)},applyPosition:function(t){var e="";for(var i in t)e+=i+":"+t[i]+(isNaN(t[i])?"; ":"px; ");this.addStyles(e)},adjustPosition:function(){if(this.showing&&this.hasNode()){var t=this.node.getBoundingClientRect();t.top+t.height>window.innerHeight?(this.addRemoveClass("below",!1),this.addRemoveClass("above",!0)):(this.addRemoveClass("above",!1),this.addRemoveClass("below",!0)),t.left+t.width>window.innerWidth&&(this.applyPosition({"margin-left":-t.width,bottom:"auto"}),this.addRemoveClass("left-arrow",!1),this.addRemoveClass("right-arrow",!0))}},resizeHandler:function(){this.applyPosition({"margin-left":this.defaultLeft,bottom:"auto"}),this.addRemoveClass("left-arrow",!0),this.addRemoveClass("right-arrow",!1),this.adjustPosition(!0),this.inherited(arguments)}});

// lib/onyx/source/TooltipDecorator.js
enyo.kind({name:"onyx.TooltipDecorator",defaultKind:"onyx.Button",classes:"onyx-popup-decorator",handlers:{onenter:"enter",onleave:"leave"},enter:function(){this.requestShowTooltip()},leave:function(){this.requestHideTooltip()},tap:function(){this.requestHideTooltip()},requestShowTooltip:function(){this.waterfallDown("onRequestShowTooltip")},requestHideTooltip:function(){this.waterfallDown("onRequestHideTooltip")}});

// lib/onyx/source/MenuDecorator.js
enyo.kind({name:"onyx.MenuDecorator",kind:"onyx.TooltipDecorator",defaultKind:"onyx.Button",classes:"onyx-popup-decorator enyo-unselectable",handlers:{onActivate:"activated",onHide:"menuHidden"},activated:function(t,e){this.requestHideTooltip(),e.originator.active&&(this.menuActive=!0,this.activator=e.originator,this.activator.addClass("active"),this.requestShowMenu())},requestShowMenu:function(){this.waterfallDown("onRequestShowMenu",{activator:this.activator})},requestHideMenu:function(){this.waterfallDown("onRequestHideMenu")},menuHidden:function(){this.menuActive=!1,this.activator&&(this.activator.setActive(!1),this.activator.removeClass("active"))},enter:function(){this.menuActive||this.inherited(arguments)},leave:function(){this.menuActive||this.inherited(arguments)}});

// lib/onyx/source/Menu.js
enyo.kind({name:"onyx.Menu",kind:"onyx.Popup",modal:!0,defaultKind:"onyx.MenuItem",classes:"onyx-menu",published:{maxHeight:200,scrolling:!0,scrollStrategyKind:"TouchScrollStrategy"},handlers:{onActivate:"itemActivated",onRequestShowMenu:"requestMenuShow",onRequestHideMenu:"requestHide"},childComponents:[{name:"client",kind:"enyo.Scroller"}],showOnTop:!1,scrollerName:"client",create:function(){this.inherited(arguments),this.maxHeightChanged()},initComponents:function(){this.scrolling&&this.createComponents(this.childComponents,{isChrome:!0,strategyKind:this.scrollStrategyKind}),this.inherited(arguments)},getScroller:function(){return this.$[this.scrollerName]},maxHeightChanged:function(){this.scrolling&&this.getScroller().setMaxHeight(this.maxHeight+"px")},itemActivated:function(t,e){return e.originator.setActive(!1),!0},showingChanged:function(){this.inherited(arguments),this.scrolling&&this.getScroller().setShowing(this.showing),this.adjustPosition(!0)},requestMenuShow:function(t,e){if(this.floating){var i=e.activator.hasNode();if(i){var n=this.activatorOffset=this.getPageOffset(i);this.applyPosition({top:n.top+(this.showOnTop?0:n.height),left:n.left,width:n.width})}}return this.show(),!0},applyPosition:function(t){var e="";for(var i in t)e+=i+":"+t[i]+(isNaN(t[i])?"; ":"px; ");this.addStyles(e)},getPageOffset:function(t){var e=t.getBoundingClientRect(),i=void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset,n=void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,o=void 0===e.height?e.bottom-e.top:e.height,s=void 0===e.width?e.right-e.left:e.width;return{top:e.top+i,left:e.left+n,height:o,width:s}},adjustPosition:function(){if(this.showing&&this.hasNode()){this.scrolling&&!this.showOnTop&&this.getScroller().setMaxHeight(this.maxHeight+"px"),this.removeClass("onyx-menu-up"),this.floating||this.applyPosition({left:"auto"});var t=this.node.getBoundingClientRect(),e=void 0===t.height?t.bottom-t.top:t.height,i=void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight,n=void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth;if(this.menuUp=t.top+e>i&&i-t.bottom<t.top-e,this.addRemoveClass("onyx-menu-up",this.menuUp),this.floating){var o=this.activatorOffset;this.menuUp?this.applyPosition({top:o.top-e+(this.showOnTop?o.height:0),bottom:"auto"}):t.top<o.top&&i>o.top+(this.showOnTop?0:o.height)+e&&this.applyPosition({top:o.top+(this.showOnTop?0:o.height),bottom:"auto"})}if(t.right>n&&(this.floating?this.applyPosition({left:n-t.width}):this.applyPosition({left:-(t.right-n)})),0>t.left&&(this.floating?this.applyPosition({left:0,right:"auto"}):"auto"==this.getComputedStyleValue("right")?this.applyPosition({left:-t.left}):this.applyPosition({right:t.left})),this.scrolling&&!this.showOnTop){t=this.node.getBoundingClientRect();var s;s=this.menuUp?this.maxHeight<t.bottom?this.maxHeight:t.bottom:i>t.top+this.maxHeight?this.maxHeight:i-t.top,this.getScroller().setMaxHeight(s+"px")}}},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()},requestHide:function(){this.setShowing(!1)}});

// lib/onyx/source/MenuItem.js
enyo.kind({name:"onyx.MenuItem",kind:"enyo.Button",events:{onSelect:"",onItemContentChange:""},classes:"onyx-menu-item",tag:"div",create:function(){this.silence(),this.inherited(arguments),this.unsilence(),this.active&&this.bubble("onActivate")},tap:function(){this.inherited(arguments),this.bubble("onRequestHideMenu"),this.doSelect({selected:this,content:this.content})},contentChanged:function(){this.inherited(arguments),this.doItemContentChange({content:this.content})}});

// lib/onyx/source/Submenu.js
enyo.kind({name:"onyx.Submenu",defaultKind:"onyx.MenuItem",initComponents:function(){this.createChrome([{name:"label",kind:"enyo.Control",classes:"onyx-menu-item",content:this.content||this.name,isChrome:!0,ontap:"toggleOpen"},{kind:"onyx.Drawer",name:"client",classes:"client onyx-submenu",isChrome:!0,open:!1}]),this.inherited(arguments)},toggleOpen:function(){this.setOpen(!this.getOpen())},setOpen:function(t){this.$.client.setOpen(t)},getOpen:function(){return this.$.client.getOpen()}});

// lib/onyx/source/PickerDecorator.js
enyo.kind({name:"onyx.PickerDecorator",kind:"onyx.MenuDecorator",classes:"onyx-picker-decorator",defaultKind:"onyx.PickerButton",handlers:{onChange:"change"},change:function(t,e){this.waterfallDown("onChange",e)}});

// lib/onyx/source/PickerButton.js
enyo.kind({name:"onyx.PickerButton",kind:"onyx.Button",handlers:{onChange:"change"},change:function(t,e){void 0!==e.content&&this.setContent(e.content)}});

// lib/onyx/source/Picker.js
enyo.kind({name:"onyx.Picker",kind:"onyx.Menu",classes:"onyx-picker enyo-unselectable",published:{selected:null},events:{onChange:""},handlers:{onItemContentChange:"itemContentChange"},floating:!0,showOnTop:!0,initComponents:function(){this.setScrolling(!0),this.inherited(arguments)},showingChanged:function(){this.getScroller().setShowing(this.showing),this.inherited(arguments),this.showing&&this.selected&&this.scrollToSelected()},scrollToSelected:function(){this.getScroller().scrollToControl(this.selected,!this.menuUp)},itemActivated:function(t,e){return this.processActivatedItem(e.originator),this.inherited(arguments)},processActivatedItem:function(t){t.active&&this.setSelected(t)},selectedChanged:function(t){t&&t.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,content:this.selected.content}))},itemContentChange:function(t,e){e.originator==this.selected&&this.doChange({selected:this.selected,content:this.selected.content})},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()}});

// lib/onyx/source/FlyweightPicker.js
enyo.kind({name:"onyx.FlyweightPicker",kind:"onyx.Picker",classes:"onyx-flyweight-picker",published:{count:0},events:{onSetupItem:"",onSelect:""},handlers:{onSelect:"itemSelect"},components:[{name:"scroller",kind:"enyo.Scroller",strategyKind:"TouchScrollStrategy",components:[{name:"flyweight",kind:"FlyweightRepeater",noSelect:!0,ontap:"itemTap"}]}],scrollerName:"scroller",initComponents:function(){this.controlParentName="flyweight",this.inherited(arguments),this.$.flyweight.$.client.children[0].setActive(!0)},create:function(){this.inherited(arguments),this.countChanged()},rendered:function(){this.inherited(arguments),this.selectedChanged()},scrollToSelected:function(){var t=this.$.flyweight.fetchRowNode(this.selected);this.getScroller().scrollToNode(t,!this.menuUp)},countChanged:function(){this.$.flyweight.count=this.count},processActivatedItem:function(t){this.item=t},selectedChanged:function(t){if(this.item){null!=t&&(this.item.removeClass("selected"),this.$.flyweight.renderRow(t));var e;null!=this.selected&&(this.item.addClass("selected"),this.$.flyweight.renderRow(this.selected),this.item.removeClass("selected"),e=this.$.flyweight.fetchRowNode(this.selected)),this.doChange({selected:this.selected,content:e&&e.textContent||this.item.content})}},itemTap:function(t,e){this.setSelected(e.rowIndex),this.doSelect({selected:this.item,content:this.item.content})},itemSelect:function(t,e){return e.originator!=this?!0:void 0}});

// lib/onyx/source/DatePicker.js
enyo.kind({name:"onyx.DatePicker",classes:"onyx-toolbar-inline",published:{disabled:!1,locale:"en_us",dayHidden:!1,monthHidden:!1,yearHidden:!1,minYear:1900,maxYear:2099,value:null},events:{onSelect:""},create:function(){this.inherited(arguments),enyo.g11n&&(this.locale=enyo.g11n.currentLocale().getLocale()),this.initDefaults()},initDefaults:function(){var t=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];enyo.g11n&&(this._tf=new enyo.g11n.Fmts({locale:this.locale}),t=this._tf.getMonthFields()),this.setupPickers(this._tf?this._tf.getDateFieldOrder():"mdy"),this.dayHiddenChanged(),this.monthHiddenChanged(),this.yearHiddenChanged();for(var e,i=this.value=this.value||new Date,n=0;e=t[n];n++)this.$.monthPicker.createComponent({content:e,value:n,active:n==i.getMonth()});var o=i.getFullYear();for(this.$.yearPicker.setSelected(o-this.minYear),n=1;this.monthLength(i.getYear(),i.getMonth())>=n;n++)this.$.dayPicker.createComponent({content:n,value:n,active:n==i.getDate()})},monthLength:function(t,e){return 32-new Date(t,e,32).getDate()},setupYear:function(t,e){return this.$.year.setContent(this.minYear+e.index),!0},setupPickers:function(t){var e,i,n,o=t.split("");for(i=0,n=o.length;n>i;i++)switch(e=o[i]){case"d":this.createDay();break;case"m":this.createMonth();break;case"y":this.createYear();break;default:}},createYear:function(){var t=this.maxYear-this.minYear;this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateYear",components:[{classes:"onyx-datepicker-year",name:"yearPickerButton",disabled:this.disabled},{name:"yearPicker",kind:"onyx.FlyweightPicker",count:++t,onSetupItem:"setupYear",components:[{name:"year"}]}]})},createMonth:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateMonth",components:[{classes:"onyx-datepicker-month",name:"monthPickerButton",disabled:this.disabled},{name:"monthPicker",kind:"onyx.Picker"}]})},createDay:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateDay",components:[{classes:"onyx-datepicker-day",name:"dayPickerButton",disabled:this.disabled},{name:"dayPicker",kind:"onyx.Picker"}]})},localeChanged:function(){this.refresh()},dayHiddenChanged:function(){this.$.dayPicker.getParent().setShowing(this.dayHidden?!1:!0)},monthHiddenChanged:function(){this.$.monthPicker.getParent().setShowing(this.monthHidden?!1:!0)},yearHiddenChanged:function(){this.$.yearPicker.getParent().setShowing(this.yearHidden?!1:!0)},minYearChanged:function(){this.refresh()},maxYearChanged:function(){this.refresh()},valueChanged:function(){this.refresh()},disabledChanged:function(){this.$.yearPickerButton.setDisabled(this.disabled),this.$.monthPickerButton.setDisabled(this.disabled),this.$.dayPickerButton.setDisabled(this.disabled)},updateDay:function(t,e){var i=this.calcDate(this.value.getFullYear(),this.value.getMonth(),e.selected.value);return this.doSelect({name:this.name,value:i}),this.setValue(i),!0},updateMonth:function(t,e){var i=this.calcDate(this.value.getFullYear(),e.selected.value,this.value.getDate());return this.doSelect({name:this.name,value:i}),this.setValue(i),!0},updateYear:function(t,e){if(-1!=e.originator.selected){var i=this.calcDate(this.minYear+e.originator.selected,this.value.getMonth(),this.value.getDate());this.doSelect({name:this.name,value:i}),this.setValue(i)}return!0},calcDate:function(t,e,i){return new Date(t,e,i,this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds())},refresh:function(){this.destroyClientControls(),this.initDefaults(),this.render()}});

// lib/onyx/source/TimePicker.js
enyo.kind({name:"onyx.TimePicker",classes:"onyx-toolbar-inline",published:{disabled:!1,locale:"en_us",is24HrMode:null,value:null},events:{onSelect:""},create:function(){this.inherited(arguments),enyo.g11n&&(this.locale=enyo.g11n.currentLocale().getLocale()),this.initDefaults()},initDefaults:function(){var t="AM",e="PM";enyo.g11n?(this._tf=new enyo.g11n.Fmts({locale:this.locale}),t=this._tf.getAmCaption(),e=this._tf.getPmCaption(),null==this.is24HrMode&&(this.is24HrMode=!this._tf.isAmPm())):null==this.is24HrMode&&(this.is24HrMode=!1),this.setupPickers(this._tf?this._tf.getTimeFieldOrder():"hma");var i,n=this.value=this.value||new Date;if(this.is24HrMode)for(i=0;24>i;i++)this.$.hourPicker.createComponent({content:i,value:i,active:i==n.getHours()});else{var o=n.getHours();for(o=0===o?12:o,i=1;12>=i;i++)this.$.hourPicker.createComponent({content:i,value:i,active:i==(o>12?o%12:o)})}for(i=0;59>=i;i++)this.$.minutePicker.createComponent({content:10>i?"0"+i:i,value:i,active:i==n.getMinutes()});n.getHours()>=12?this.$.ampmPicker.createComponents([{content:t},{content:e,active:!0}]):this.$.ampmPicker.createComponents([{content:t,active:!0},{content:e}]),this.$.ampmPicker.getParent().setShowing(!this.is24HrMode)},setupPickers:function(t){var e,i,n,o=t.split("");for(i=0,n=o.length;n>i;i++)switch(e=o[i]){case"h":this.createHour();break;case"m":this.createMinute();break;case"a":this.createAmPm();break;default:}},createHour:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateHour",components:[{classes:"onyx-timepicker-hour",name:"hourPickerButton",disabled:this.disabled},{name:"hourPicker",kind:"onyx.Picker"}]})},createMinute:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateMinute",components:[{classes:"onyx-timepicker-minute",name:"minutePickerButton",disabled:this.disabled},{name:"minutePicker",kind:"onyx.Picker"}]})},createAmPm:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateAmPm",components:[{classes:"onyx-timepicker-ampm",name:"ampmPickerButton",disabled:this.disabled},{name:"ampmPicker",kind:"onyx.Picker"}]})},disabledChanged:function(){this.$.hourPickerButton.setDisabled(this.disabled),this.$.minutePickerButton.setDisabled(this.disabled),this.$.ampmPickerButton.setDisabled(this.disabled)},localeChanged:function(){this.is24HrMode=null,this.refresh()},is24HrModeChanged:function(){this.refresh()},valueChanged:function(){this.refresh()},updateHour:function(t,e){var i=e.selected.value;if(!this.is24HrMode){var n=this.$.ampmPicker.getParent().controlAtIndex(0).content;i=i+(12==i?-12:0)+(this.isAm(n)?0:12)}return this.setValue(this.calcTime(i,this.value.getMinutes())),this.doSelect({name:this.name,value:this.value}),!0},updateMinute:function(t,e){return this.setValue(this.calcTime(this.value.getHours(),e.selected.value)),this.doSelect({name:this.name,value:this.value}),!0},updateAmPm:function(t,e){var i=this.value.getHours();return this.is24HrMode||(i+=i>11?this.isAm(e.content)?-12:0:this.isAm(e.content)?0:12),this.setValue(this.calcTime(i,this.value.getMinutes())),this.doSelect({name:this.name,value:this.value}),!0},calcTime:function(t,e){return new Date(this.value.getFullYear(),this.value.getMonth(),this.value.getDate(),t,e,this.value.getSeconds(),this.value.getMilliseconds())},isAm:function(t){var e,i;try{e=this._tf.getAmCaption(),i=this._tf.getPmCaption()}catch(n){e="AM",i="PM"}return t==e?!0:!1},refresh:function(){this.destroyClientControls(),this.initDefaults(),this.render()}});

// lib/onyx/source/RadioButton.js
enyo.kind({name:"onyx.RadioButton",kind:"enyo.Button",classes:"onyx-radiobutton"});

// lib/onyx/source/RadioGroup.js
enyo.kind({name:"onyx.RadioGroup",kind:"enyo.Group",defaultKind:"onyx.RadioButton",highlander:!0});

// lib/onyx/source/ToggleButton.js
enyo.kind({name:"onyx.ToggleButton",classes:"onyx-toggle-button",published:{active:!1,value:!1,onContent:"On",offContent:"Off",disabled:!1},events:{onChange:""},handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},components:[{name:"contentOn",classes:"onyx-toggle-content on"},{name:"contentOff",classes:"onyx-toggle-content off"},{classes:"onyx-toggle-button-knob"}],create:function(){this.inherited(arguments),this.value=Boolean(this.value||this.active),this.onContentChanged(),this.offContentChanged(),this.disabledChanged()},rendered:function(){this.inherited(arguments),this.updateVisualState()},updateVisualState:function(){this.addRemoveClass("off",!this.value),this.$.contentOn.setShowing(this.value),this.$.contentOff.setShowing(!this.value),this.setActive(this.value)},valueChanged:function(){this.updateVisualState(),this.doChange({value:this.value})},activeChanged:function(){this.setValue(this.active),this.bubble("onActivate")},onContentChanged:function(){this.$.contentOn.setContent(this.onContent||""),this.$.contentOn.addRemoveClass("empty",!this.onContent)},offContentChanged:function(){this.$.contentOff.setContent(this.offContent||""),this.$.contentOff.addRemoveClass("empty",!this.onContent)},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},updateValue:function(t){this.disabled||this.setValue(t)},tap:function(){this.updateValue(!this.value)},dragstart:function(t,e){return e.horizontal?(e.preventDefault(),this.dragging=!0,this.dragged=!1,!0):void 0},drag:function(t,e){if(this.dragging){var i=e.dx;return Math.abs(i)>10&&(this.updateValue(i>0),this.dragged=!0),!0}},dragfinish:function(t,e){this.dragging=!1,this.dragged&&e.preventTap()}});

// lib/onyx/source/ToggleIconButton.js
enyo.kind({name:"onyx.ToggleIconButton",kind:"onyx.Icon",published:{active:!1,value:!1},events:{onChange:""},classes:"onyx-icon-button onyx-icon-toggle",activeChanged:function(){this.addRemoveClass("active",this.value),this.bubble("onActivate")},updateValue:function(t){this.disabled||(this.setValue(t),this.doChange({value:this.value}))},tap:function(){this.updateValue(!this.value)},valueChanged:function(){this.setActive(this.value)},create:function(){this.inherited(arguments),this.value=Boolean(this.value||this.active)},rendered:function(){this.inherited(arguments),this.valueChanged(),this.removeClass("onyx-icon")}});

// lib/onyx/source/Toolbar.js
enyo.kind({name:"onyx.Toolbar",classes:"onyx onyx-toolbar onyx-toolbar-inline",create:function(){this.inherited(arguments),this.hasClass("onyx-menu-toolbar")&&enyo.platform.android>=4&&this.applyStyle("position","static")}});

// lib/onyx/source/ProgressBar.js
enyo.kind({name:"onyx.ProgressBar",classes:"onyx-progress-bar",published:{progress:0,min:0,max:100,barClasses:"",showStripes:!0,animateStripes:!0,increment:0},events:{onAnimateProgressFinish:""},components:[{name:"progressAnimator",kind:"enyo.Animator",onStep:"progressAnimatorStep",onEnd:"progressAnimatorComplete"},{name:"bar",classes:"onyx-progress-bar-bar"}],create:function(){this.inherited(arguments),this.progressChanged(),this.barClassesChanged(),this.showStripesChanged(),this.animateStripesChanged()},barClassesChanged:function(t){this.$.bar.removeClass(t),this.$.bar.addClass(this.barClasses)},showStripesChanged:function(){this.$.bar.addRemoveClass("striped",this.showStripes)},animateStripesChanged:function(){this.$.bar.addRemoveClass("animated",this.animateStripes)},progressChanged:function(){this.progress=this.clampValue(this.min,this.max,this.progress);var t=this.calcPercent(this.progress);this.updateBarPosition(t)},calcIncrement:function(t){return Math.round(t/this.increment)*this.increment},clampValue:function(t,e,i){return Math.max(t,Math.min(i,e))},calcRatio:function(t){return(t-this.min)/(this.max-this.min)},calcPercent:function(t){return 100*this.calcRatio(t)},updateBarPosition:function(t){this.$.bar.applyStyle("width",t+"%")},animateProgressTo:function(t){this.$.progressAnimator.play({startValue:this.progress,endValue:t,node:this.hasNode()})},progressAnimatorStep:function(t){return this.setProgress(t.value),!0},progressAnimatorComplete:function(t){return this.doAnimateProgressFinish(t),!0}});

// lib/onyx/source/ProgressButton.js
enyo.kind({name:"onyx.ProgressButton",kind:"onyx.ProgressBar",classes:"onyx-progress-button",events:{onCancel:""},components:[{name:"progressAnimator",kind:"enyo.Animator",onStep:"progressAnimatorStep",onEnd:"progressAnimatorComplete"},{name:"bar",classes:"onyx-progress-bar-bar onyx-progress-button-bar"},{name:"client",classes:"onyx-progress-button-client"},{kind:"onyx.Icon",src:"$lib/onyx/images/progress-button-cancel.png",classes:"onyx-progress-button-icon",ontap:"cancelTap"}],cancelTap:function(){this.doCancel()}});

// lib/onyx/source/Scrim.js
enyo.kind({name:"onyx.Scrim",showing:!1,classes:"onyx-scrim enyo-fit",floating:!1,create:function(){this.inherited(arguments),this.zStack=[],this.floating&&this.setParent(enyo.floatingLayer)},showingChanged:function(){this.floating&&this.showing&&!this.hasNode()&&this.render(),this.inherited(arguments)},addZIndex:function(t){0>enyo.indexOf(t,this.zStack)&&this.zStack.push(t)},removeZIndex:function(t){enyo.remove(t,this.zStack)},showAtZIndex:function(t){this.addZIndex(t),void 0!==t&&this.setZIndex(t),this.show()},hideAtZIndex:function(t){if(this.removeZIndex(t),this.zStack.length){var e=this.zStack[this.zStack.length-1];this.setZIndex(e)}else this.hide()},setZIndex:function(t){this.zIndex=t,this.applyStyle("z-index",t)},make:function(){return this}}),enyo.kind({name:"onyx.scrimSingleton",kind:null,constructor:function(t,e){this.instanceName=t,enyo.setPath(this.instanceName,this),this.props=e||{}},make:function(){var t=new onyx.Scrim(this.props);return enyo.setPath(this.instanceName,t),t},showAtZIndex:function(t){var e=this.make();e.showAtZIndex(t)},hideAtZIndex:enyo.nop,show:function(){var t=this.make();t.show()}}),new onyx.scrimSingleton("onyx.scrim",{floating:!0,classes:"onyx-scrim-translucent"}),new onyx.scrimSingleton("onyx.scrimTransparent",{floating:!0,classes:"onyx-scrim-transparent"});

// lib/onyx/source/Slider.js
enyo.kind({name:"onyx.Slider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{value:0,lockBar:!0,tappable:!0},events:{onChange:"",onChanging:"",onAnimateFinish:""},showStripes:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},moreComponents:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"},{classes:"onyx-slider-taparea"},{name:"knob",classes:"onyx-slider-knob"}],create:function(){this.inherited(arguments),enyo.platform.firefoxOS&&(this.moreComponents[2].ondown="fxosDown",this.moreComponents[2].onenter="fxosEnter",this.moreComponents[2].ondrag="fxosDrag",this.moreComponents[2].onleave="fxosLeave",this.moreComponents[2].onup="fxosUp"),this.createComponents(this.moreComponents),this.valueChanged()},valueChanged:function(){this.value=this.clampValue(this.min,this.max,this.value);var t=this.calcPercent(this.value);this.updateKnobPosition(t),this.lockBar&&this.setProgress(this.value)},updateKnobPosition:function(t){this.$.knob.applyStyle("left",t+"%")},calcKnobPosition:function(t){var e=t.clientX-this.hasNode().getBoundingClientRect().left;return e/this.getBounds().width*(this.max-this.min)+this.min},dragstart:function(t,e){return e.horizontal?(e.preventDefault(),this.dragging=!0,!0):void 0},drag:function(t,e){if(this.dragging){var i=this.calcKnobPosition(e);return i=this.increment?this.calcIncrement(i):i,this.setValue(i),this.doChanging({value:this.value}),!0}},dragfinish:function(t,e){return this.dragging=!1,e.preventTap(),this.doChange({value:this.value}),!0},tap:function(t,e){if(this.tappable){var i=this.calcKnobPosition(e);return i=this.increment?this.calcIncrement(i):i,this.tapped=!0,this.animateTo(i),!0}},fxosDown:function(){this.$.knob.addClass("pressed"),this._isInControl=!0},fxosEnter:function(){this._isInControl=!0},fxosDrag:function(){this.$.knob.addRemoveClass("pressed",this._isInControl)},fxosLeave:function(){this.$.knob.removeClass("pressed"),this._isInControl=!1},fxosUp:function(){this.$.knob.removeClass("pressed"),this._isInControl=!1},animateTo:function(t){this.$.animator.play({startValue:this.value,endValue:t,node:this.hasNode()})},animatorStep:function(t){return this.setValue(t.value),!0},animatorComplete:function(t){return this.tapped&&(this.tapped=!1,this.doChange({value:this.value})),this.doAnimateFinish(t),!0}});

// lib/onyx/source/RangeSlider.js
enyo.kind({name:"onyx.RangeSlider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{rangeMin:0,rangeMax:100,rangeStart:0,rangeEnd:100,beginValue:0,endValue:0},events:{onChange:"",onChanging:""},showStripes:!1,showLabels:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",ondown:"down"},moreComponents:[{name:"startKnob",classes:"onyx-slider-knob"},{name:"endKnob",classes:"onyx-slider-knob onyx-range-slider-knob"}],create:function(){this.inherited(arguments),this.createComponents(this.moreComponents),this.initControls()},rendered:function(){this.inherited(arguments);var t=this.calcPercent(this.beginValue);this.updateBarPosition(t)},initControls:function(){this.$.bar.applyStyle("position","relative"),this.refreshRangeSlider(),this.showLabels&&(this.$.startKnob.createComponent({name:"startLabel",kind:"onyx.RangeSliderKnobLabel"}),this.$.endKnob.createComponent({name:"endLabel",kind:"onyx.RangeSliderKnobLabel"}))},refreshRangeSlider:function(){this.beginValue=this.calcKnobPercent(this.rangeStart),this.endValue=this.calcKnobPercent(this.rangeEnd),this.beginValueChanged(),this.endValueChanged()},calcKnobRatio:function(t){return(t-this.rangeMin)/(this.rangeMax-this.rangeMin)},calcKnobPercent:function(t){return 100*this.calcKnobRatio(t)},beginValueChanged:function(t){if(void 0===t){var e=this.calcPercent(this.beginValue);this.updateKnobPosition(e,this.$.startKnob)}},endValueChanged:function(t){if(void 0===t){var e=this.calcPercent(this.endValue);this.updateKnobPosition(e,this.$.endKnob)}},calcKnobPosition:function(t){var e=t.clientX-this.hasNode().getBoundingClientRect().left;return e/this.getBounds().width*(this.max-this.min)+this.min},updateKnobPosition:function(t,e){e.applyStyle("left",t+"%"),this.updateBarPosition()},updateBarPosition:function(){if(void 0!==this.$.startKnob&&void 0!==this.$.endKnob){var t=this.calcKnobPercent(this.rangeStart),e=this.calcKnobPercent(this.rangeEnd)-t;this.$.bar.applyStyle("left",t+"%"),this.$.bar.applyStyle("width",e+"%")}},calcRangeRatio:function(t){return t/100*(this.rangeMax-this.rangeMin)+this.rangeMin-this.increment/2},swapZIndex:function(t){"startKnob"===t?(this.$.startKnob.applyStyle("z-index",1),this.$.endKnob.applyStyle("z-index",0)):"endKnob"===t&&(this.$.startKnob.applyStyle("z-index",0),this.$.endKnob.applyStyle("z-index",1))},down:function(t){this.swapZIndex(t.name)},dragstart:function(t,e){return e.horizontal?(e.preventDefault(),this.dragging=!0,!0):void 0},drag:function(t,e){if(this.dragging){var i,n,o,s=this.calcKnobPosition(e);if("startKnob"===t.name&&s>=0){if(!(this.endValue>=s&&-1===e.xDirection||this.endValue>=s))return this.drag(this.$.endKnob,e);this.setBeginValue(s),i=this.calcRangeRatio(this.beginValue),n=this.increment?this.calcIncrement(i+.5*this.increment):i,o=this.calcKnobPercent(n),this.updateKnobPosition(o,this.$.startKnob),this.setRangeStart(n),this.doChanging({value:n})}else if("endKnob"===t.name&&100>=s){if(!(s>=this.beginValue&&1===e.xDirection||s>=this.beginValue))return this.drag(this.$.startKnob,e);this.setEndValue(s),i=this.calcRangeRatio(this.endValue),n=this.increment?this.calcIncrement(i+.5*this.increment):i,o=this.calcKnobPercent(n),this.updateKnobPosition(o,this.$.endKnob),this.setRangeEnd(n),this.doChanging({value:n})}return!0}},dragfinish:function(t,e){this.dragging=!1,e.preventTap();var i;return"startKnob"===t.name?(i=this.calcRangeRatio(this.beginValue),this.doChange({value:i,startChanged:!0})):"endKnob"===t.name&&(i=this.calcRangeRatio(this.endValue),this.doChange({value:i,startChanged:!1})),!0},rangeMinChanged:function(){this.refreshRangeSlider()},rangeMaxChanged:function(){this.refreshRangeSlider()},rangeStartChanged:function(){this.refreshRangeSlider()},rangeEndChanged:function(){this.refreshRangeSlider()},setStartLabel:function(t){this.$.startKnob.waterfallDown("onSetLabel",t)},setEndLabel:function(t){this.$.endKnob.waterfallDown("onSetLabel",t)}}),enyo.kind({name:"onyx.RangeSliderKnobLabel",classes:"onyx-range-slider-label",handlers:{onSetLabel:"setLabel"},setLabel:function(t,e){this.setContent(e)}});

// lib/onyx/source/Item.js
enyo.kind({name:"onyx.Item",classes:"onyx-item",tapHighlight:!0,handlers:{onhold:"hold",onrelease:"release"},hold:function(t,e){this.tapHighlight&&onyx.Item.addRemoveFlyweightClass(this.controlParent||this,"onyx-highlight",!0,e)},release:function(t,e){this.tapHighlight&&onyx.Item.addRemoveFlyweightClass(this.controlParent||this,"onyx-highlight",!1,e)},statics:{addRemoveFlyweightClass:function(t,e,i,n,o){var s=n.flyweight;if(s){var a=void 0!==o?o:n.index;s.performOnRow(a,function(){t.addRemoveClass(e,i)})}}}});

// lib/onyx/source/Spinner.js
enyo.kind({name:"onyx.Spinner",classes:"onyx-spinner",stop:function(){this.setShowing(!1)},start:function(){this.setShowing(!0)},toggle:function(){this.setShowing(!this.getShowing())}});

// lib/onyx/source/MoreToolbar.js
enyo.kind({name:"onyx.MoreToolbar",classes:"onyx-toolbar onyx-more-toolbar",menuClass:"",movedClass:"",layoutKind:"FittableColumnsLayout",noStretch:!0,handlers:{onHide:"reflow"},published:{clientLayoutKind:"FittableColumnsLayout"},tools:[{name:"client",noStretch:!0,fit:!0,classes:"onyx-toolbar-inline"},{name:"nard",kind:"onyx.MenuDecorator",showing:!1,onActivate:"activated",components:[{kind:"onyx.IconButton",classes:"onyx-more-button"},{name:"menu",kind:"onyx.Menu",scrolling:!1,classes:"onyx-more-menu"}]}],initComponents:function(){this.menuClass&&this.menuClass.length>0&&!this.$.menu.hasClass(this.menuClass)&&this.$.menu.addClass(this.menuClass),this.createChrome(this.tools),this.inherited(arguments),this.$.client.setLayoutKind(this.clientLayoutKind)},clientLayoutKindChanged:function(){this.$.client.setLayoutKind(this.clientLayoutKind)},reflow:function(){this.inherited(arguments),this.isContentOverflowing()?(this.$.nard.show(),this.popItem()&&this.reflow()):this.tryPushItem()?this.reflow():this.$.menu.children.length||(this.$.nard.hide(),this.$.menu.hide())},activated:function(t,e){this.addRemoveClass("active",e.originator.active)},popItem:function(){var t=this.findCollapsibleItem();if(t){this.movedClass&&this.movedClass.length>0&&!t.hasClass(this.movedClass)&&t.addClass(this.movedClass),this.$.menu.addChild(t,null);var e=this.$.menu.hasNode();return e&&t.hasNode()&&t.insertNodeInParent(e),!0}},pushItem:function(){var t=this.$.menu.children,e=t[0];if(e){this.movedClass&&this.movedClass.length>0&&e.hasClass(this.movedClass)&&e.removeClass(this.movedClass),this.$.client.addChild(e);var i=this.$.client.hasNode();if(i&&e.hasNode()){for(var n,o,s=0;this.$.client.children.length>s;s++){var a=this.$.client.children[s];if(void 0!==a.toolbarIndex&&a.toolbarIndex!=s){n=a,o=s;break}}if(n&&n.hasNode()){e.insertNodeInParent(i,n.node);var r=this.$.client.children.pop();this.$.client.children.splice(o,0,r)}else e.appendNodeToParent(i)}return!0}},tryPushItem:function(){if(this.pushItem()){if(!this.isContentOverflowing())return!0;this.popItem()}},isContentOverflowing:function(){if(this.$.client.hasNode()){var t=this.$.client.children,e=t.length&&t[t.length-1].hasNode();if(e)return this.$.client.reflow(),e.offsetLeft+e.offsetWidth>this.$.client.node.clientWidth}},findCollapsibleItem:function(){for(var t,e=this.$.client.children,i=e.length-1;t=e[i];i--){if(!t.unmoveable)return t;void 0===t.toolbarIndex&&(t.toolbarIndex=i)}}});

// lib/onyx/source/IntegerPicker.js
enyo.kind({name:"onyx.IntegerPicker",kind:"onyx.Picker",published:{value:0,min:0,max:9},create:function(){this.inherited(arguments),this.rangeChanged()},minChanged:function(){this.destroyClientControls(),this.rangeChanged(),this.render()},maxChanged:function(){this.destroyClientControls(),this.rangeChanged(),this.render()},rangeChanged:function(){for(var t=this.min;this.max>=t;t++)this.createComponent({content:t,active:t===this.value?!0:!1})},valueChanged:function(){var t=this.getClientControls(),e=t.length;this.value=Math.min(this.max,Math.max(this.value,this.min));for(var i=0;e>i;i++)if(this.value===parseInt(t[i].content,10)){this.setSelected(t[i]);break}},selectedChanged:function(t){t&&t.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,content:this.selected.content})),this.setValue(parseInt(this.selected.content,10))}});

// lib/onyx/source/ContextualPopup.js
enyo.kind({name:"onyx.ContextualPopup",kind:"enyo.Popup",modal:!0,autoDismiss:!0,floating:!1,classes:"onyx-contextual-popup enyo-unselectable",published:{maxHeight:100,scrolling:!0,title:void 0,actionButtons:[]},vertFlushMargin:60,horizFlushMargin:50,widePopup:200,longPopup:200,horizBuffer:16,events:{onTap:""},handlers:{onRequestShowMenu:"requestShow",onRequestHideMenu:"requestHide"},components:[{name:"title",classes:"onyx-contextual-popup-title"},{classes:"onyx-contextual-popup-scroller",components:[{name:"client",kind:"enyo.Scroller",vertical:"auto",classes:"enyo-unselectable",thumb:!1,strategyKind:"TouchScrollStrategy"}]},{name:"actionButtons",classes:"onyx-contextual-popup-action-buttons"}],scrollerName:"client",create:function(){this.inherited(arguments),this.maxHeightChanged(),this.titleChanged(),this.actionButtonsChanged()},getScroller:function(){return this.$[this.scrollerName]},titleChanged:function(){this.$.title.setContent(this.title)},actionButtonsChanged:function(){for(var t=0;this.actionButtons.length>t;t++)this.$.actionButtons.createComponent({kind:"onyx.Button",content:this.actionButtons[t].content,classes:this.actionButtons[t].classes+" onyx-contextual-popup-action-button",name:this.actionButtons[t].name?this.actionButtons[t].name:"ActionButton"+t,index:t,tap:this.actionButtons[t].ontap?this.owner.bindSafely(this.actionButtons[t].ontap):this.bindSafely(this.tapHandler)})},tapHandler:function(t,e){return e.actionButton=!0,e.popup=this,this.bubble("ontap",e),!0},maxHeightChanged:function(){this.scrolling&&this.getScroller().setMaxHeight(this.maxHeight+"px")},showingChanged:function(){this.inherited(arguments),this.scrolling&&this.getScroller().setShowing(this.showing),this.adjustPosition()},requestShow:function(t,e){var i=e.activator.hasNode();return i&&(this.activatorOffset=this.getPageOffset(i)),this.show(),!0},applyPosition:function(t){var e="";for(var i in t)e+=i+":"+t[i]+(isNaN(t[i])?"; ":"px; ");this.addStyles(e)},getPageOffset:function(t){var e=this.getBoundingRect(t),i=void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset,n=void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,o=void 0===e.height?e.bottom-e.top:e.height,s=void 0===e.width?e.right-e.left:e.width;return{top:e.top+i,left:e.left+n,height:o,width:s}},adjustPosition:function(){if(this.showing&&this.hasNode()){this.resetPositioning();var t=this.getViewWidth(),e=this.getViewHeight(),i=this.vertFlushMargin,n=e-this.vertFlushMargin,o=this.horizFlushMargin,s=t-this.horizFlushMargin;if(i>this.activatorOffset.top+this.activatorOffset.height||this.activatorOffset.top>n){if(this.applyVerticalFlushPositioning(o,s))return;if(this.applyHorizontalFlushPositioning(o,s))return;if(this.applyVerticalPositioning())return}else if((o>this.activatorOffset.left+this.activatorOffset.width||this.activatorOffset.left>s)&&this.applyHorizontalPositioning())return;var a=this.getBoundingRect(this.node);if(a.width>this.widePopup){if(this.applyVerticalPositioning())return}else if(a.height>this.longPopup&&this.applyHorizontalPositioning())return;if(this.applyVerticalPositioning())return;if(this.applyHorizontalPositioning())return}},initVerticalPositioning:function(){this.resetPositioning(),this.addClass("vertical");var t=this.getBoundingRect(this.node),e=this.getViewHeight();return this.floating?e/2>this.activatorOffset.top?(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height,bottom:"auto"}),this.addClass("below")):(this.applyPosition({top:this.activatorOffset.top-t.height,bottom:"auto"}),this.addClass("above")):t.top+t.height>e&&e-t.bottom<t.top-t.height?this.addClass("above"):this.addClass("below"),t=this.getBoundingRect(this.node),t.top+t.height>e||0>t.top?!1:!0},applyVerticalPositioning:function(){if(!this.initVerticalPositioning())return!1;var t=this.getBoundingRect(this.node),e=this.getViewWidth();if(this.floating){var i=this.activatorOffset.left+this.activatorOffset.width/2-t.width/2;i+t.width>e?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width-t.width}),this.addClass("left")):0>i?(this.applyPosition({left:this.activatorOffset.left}),this.addClass("right")):this.applyPosition({left:i})}else{var n=this.activatorOffset.left+this.activatorOffset.width/2-t.left-t.width/2;t.right+n>e?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width-t.right}),this.addRemoveClass("left",!0)):0>t.left+n?this.addRemoveClass("right",!0):this.applyPosition({left:n})}return!0},applyVerticalFlushPositioning:function(t,e){if(!this.initVerticalPositioning())return!1;var i=this.getBoundingRect(this.node),n=this.getViewWidth();return t>this.activatorOffset.left+this.activatorOffset.width/2?(this.activatorOffset.left+this.activatorOffset.width/2<this.horizBuffer?this.applyPosition({left:this.horizBuffer+(this.floating?0:-i.left)}):this.applyPosition({left:this.activatorOffset.width/2+(this.floating?this.activatorOffset.left:0)}),this.addClass("right"),this.addClass("corner"),!0):this.activatorOffset.left+this.activatorOffset.width/2>e?(this.activatorOffset.left+this.activatorOffset.width/2>n-this.horizBuffer?this.applyPosition({left:n-this.horizBuffer-i.right}):this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width/2-i.right}),this.addClass("left"),this.addClass("corner"),!0):!1},initHorizontalPositioning:function(){this.resetPositioning();var t=this.getBoundingRect(this.node),e=this.getViewWidth();return this.floating?e/2>this.activatorOffset.left+this.activatorOffset.width?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width}),this.addRemoveClass("left",!0)):(this.applyPosition({left:this.activatorOffset.left-t.width}),this.addRemoveClass("right",!0)):this.activatorOffset.left-t.width>0?(this.applyPosition({left:this.activatorOffset.left-t.left-t.width}),this.addRemoveClass("right",!0)):(this.applyPosition({left:this.activatorOffset.width}),this.addRemoveClass("left",!0)),this.addRemoveClass("horizontal",!0),t=this.getBoundingRect(this.node),0>t.left||t.left+t.width>e?!1:!0},applyHorizontalPositioning:function(){if(!this.initHorizontalPositioning())return!1;var t=this.getBoundingRect(this.node),e=this.getViewHeight(),i=this.activatorOffset.top+this.activatorOffset.height/2;return this.floating?i>=e/2-.05*e&&e/2+.05*e>=i?this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2-t.height/2,bottom:"auto"}):e/2>this.activatorOffset.top+this.activatorOffset.height?(this.applyPosition({top:this.activatorOffset.top-this.activatorOffset.height,bottom:"auto"}),this.addRemoveClass("high",!0)):(this.applyPosition({top:this.activatorOffset.top-t.height+2*this.activatorOffset.height,bottom:"auto"}),this.addRemoveClass("low",!0)):i>=e/2-.05*e&&e/2+.05*e>=i?this.applyPosition({top:(this.activatorOffset.height-t.height)/2}):e/2>this.activatorOffset.top+this.activatorOffset.height?(this.applyPosition({top:-this.activatorOffset.height}),this.addRemoveClass("high",!0)):(this.applyPosition({top:t.top-t.height-this.activatorOffset.top+this.activatorOffset.height}),this.addRemoveClass("low",!0)),!0},applyHorizontalFlushPositioning:function(t,e){if(!this.initHorizontalPositioning())return!1;var i=this.getBoundingRect(this.node),n=this.getViewHeight();return this.floating?n/2>this.activatorOffset.top?(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2}),this.addRemoveClass("high",!0)):(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2-i.height}),this.addRemoveClass("low",!0)):i.top+i.height>n&&n-i.bottom<i.top-i.height?(this.applyPosition({top:i.top-i.height-this.activatorOffset.top-this.activatorOffset.height/2}),this.addRemoveClass("low",!0)):(this.applyPosition({top:this.activatorOffset.height/2}),this.addRemoveClass("high",!0)),t>this.activatorOffset.left+this.activatorOffset.width?(this.addClass("left"),this.addClass("corner"),!0):this.activatorOffset.left>e?(this.addClass("right"),this.addClass("corner"),!0):!1},getBoundingRect:function(t){var e=t.getBoundingClientRect();return e.width&&e.height?e:{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.right-e.left,height:e.bottom-e.top}},getViewHeight:function(){return void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight},getViewWidth:function(){return void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth},resetPositioning:function(){this.removeClass("right"),this.removeClass("left"),this.removeClass("high"),this.removeClass("low"),this.removeClass("corner"),this.removeClass("below"),this.removeClass("above"),this.removeClass("vertical"),this.removeClass("horizontal"),this.applyPosition({left:"auto"}),this.applyPosition({top:"auto"})},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()},requestHide:function(){this.setShowing(!1)}});

// lib/onyx/source/TabBar.js
enyo.kind({name:"onyx.TabBar",kind:"enyo.FittableColumns",isPanel:!0,classes:"onyx-tab-bar",checkBeforeClosing:!1,checkBeforeChanging:!1,debug:!1,events:{onTabChanged:"",onTabChangeRequested:"",onTabRemoveRequested:"",onTabRemoved:""},published:{maxMenuHeight:600},handlers:{onShowTooltip:"showTooltip",onHideTooltip:"hideTooltip"},components:[{fit:!0,components:[{name:"scroller",kind:"enyo.Scroller",maxHeight:"100px",touch:!0,thumb:!1,vertical:"hidden",horizontal:"auto",classes:"onyx-tab-bar-scroller",components:[{classes:"onyx-tab-wrapper",components:[{components:[{name:"tabs",classes:"onyx-tab-holder",kind:"onyx.RadioGroup",defaultKind:"onyx.TabBar.Item",style:"text-align: left; white-space: nowrap;",onTabCloseRequest:"requestTabClose",onTabSwitchRequest:"requestTabSwitch"},{classes:"onyx-tab-line"},{classes:"onyx-tab-rug"}]}]}]},{kind:"onyx.TooltipDecorator",components:[{kind:"onyx.Tooltip",classes:"onyx-tab-tooltip"}]}]},{kind:"onyx.MenuDecorator",name:"tabPicker",onSelect:"popupButtonTapped",components:[{kind:"onyx.IconButton",classes:"onyx-more-button",ontap:"showPopupAtEvent"},{kind:"onyx.Menu",name:"popup"}]}],lastIndex:0,clientTransitionStart:function(t,e){var i=e.toIndex,n=this.$.tabs.getClientControls()[i];if(n&&n.hasNode()){this.$.tabs.setActive(n);var o=n.node,s=o.offsetLeft,a=s+o.offsetWidth,r=this.$.scroller.getScrollBounds();(r.left>a||a>r.left+r.clientWidth)&&this.$.scroller.scrollToControl(n)}return!0},create:function(){this.inherited(arguments),this.maxMenuHeightChanged()},maxMenuHeightChanged:function(){this.$.popup.setMaxHeight(this.getMaxMenuHeight())},rendered:function(){this.inherited(arguments),this.resetWidth()},addTab:function(t){var e=t.caption||"Tab "+this.lastIndex;this.selectedId=this.lastIndex++;var i=this.$.tabs.createComponent({content:e,userData:t.data||{},tooltipMsg:t.tooltipMsg,userId:t.userId,tabIndex:this.selectedId,addBefore:this.$.line});return i.render(),this.resetWidth(),i.raise(),i.setActive(!0),i},removeTab:function(t){var e=this.resolveTab(t,"removeTab");if(e){var i=this.$.tabs.active,n=i!==e,o=e.indexInContainer(),s={index:e.tabIndex,caption:e.content,userId:e.userId,data:e.userData};e.destroy(),this.resetWidth();var a=this.$.tabs.controls,r=a.length,h=n?i:r>o?a[o]:a[r-1];h&&(h.setActive(!0),h.raise(),this.$.scroller.scrollIntoView(h),this.doTabChanged({index:h.index,caption:h.caption,tooltipMsg:h.tooltipMsg,data:h.userData,userId:h.userId})),this.doTabRemoved(s)}},requestRemoveTab:function(t){var e=this.resolveTab(t,"removeTab"),i={index:e.tabIndex,caption:e.content,tooltipMsg:e.tooltipMsg,userId:e.userId,data:e.userData},n=this;e&&(i.next=function(e){if(e)throw Error(e);n.removeTab(t)},this.doTabRemoveRequested(i))},resolveTab:function(t,e){var i;if(t.userId)enyo.forEach(this.$.tabs.controls,function(e){e.userId===t.userId&&(i=e)});else if(t.caption)enyo.forEach(this.$.tabs.controls,function(e){e.content===t.caption&&(i=e)});else{if(void 0===t.index)throw Error("internal: "+e+" called without index or caption");enyo.forEach(this.$.tabs.controls,function(e){e.tabIndex===t.index&&(i=e)})}return i},requestTabClose:function(t,e){this.checkBeforeClosing?this.requestRemoveTab(e):this.removeTab(e)},activate:function(t){var e=this.resolveTab(t,"activate");e&&this.raiseTab(e)},raiseTab:function(t){t.setActive(!0),this.$.scroller.scrollIntoView(t)},requestTabSwitch:function(t,e){var i,n,o=e.originator;this.checkBeforeChanging?(i="onTabChangeRequested",n=enyo.bind(o,o.setActiveTrue)):(o.setActiveTrue(),i="onTabChanged",n=enyo.bind(this,"undoSwitchOnError",s));var s=this.selectedId;return this.selectedId=e.index,this.selectedId!=s?this.bubble(i,{index:e.index,caption:e.caption,tooltipMsg:e.tooltipMsg,data:e.userData,userId:e.userId,next:n}):o.setActiveTrue(),!0},showTooltip:function(t,e){var i=e.tooltipContent,n=e.bounds;if(i&&!this.$.tooltip.showing){this.$.tooltip.setContent(i);var o=n.left+n.width/2;this.$.tooltipDecorator.applyStyle("left",o+"px"),this.$.tooltip.show()}return!0},hideTooltip:function(){return this.$.tooltip.hide(),!0},undoSwitchOnError:function(t,e){e&&this.activate({index:t})},resizeHandler:function(){this.inherited(arguments),this.adjustTabWidth()},computeOrigTabWidth:function(){var t=0;return enyo.forEach(this.$.tabs.getControls(),function(e){var i=e.origWidth();t+=i+18}),t},origTabWidth:null,adjustTabWidth:function(){var t=this.$.scroller.getBounds().width,e=this.origTabWidth,i=t>e?1:t/e;i=.5>i?.5:i,this.applyCoeff(i)},applyCoeff:function(t){enyo.forEach(this.$.tabs.getControls(),function(e){e.reduce(t)})},resetWidth:function(){this.applyCoeff(1),this.origTabWidth=this.computeOrigTabWidth(),this.adjustTabWidth()},isEmpty:function(){return!this.$.tabs.getControls().length},showPopupAtEvent:function(){var t=this,e=this.$.popup;for(var i in e.$)e.$.hasOwnProperty(i)&&/menuItem/.test(i)&&e.$[i].destroy();enyo.forEach(this.$.tabs.getControls(),function(e){t.$.popup.createComponent({content:e.content,value:e.tabIndex})}),e.maxHeightChanged(),e.showAtPosition({top:30,right:30}),this.render(),this.resized()},popupButtonTapped:function(t,e){this.activate({index:e.originator.value})}});

// lib/onyx/source/TabBarItem.js
enyo.kind({name:"onyx.TabBar.Item",classes:"onyx-tab-item",kind:"enyo.GroupItem",events:{onTabActivated:"",onTabCloseRequest:"",onTabSwitchRequest:"",onActivate:"",onShowTooltip:"",onHideTooltip:""},handlers:{onmouseover:"navOver",onmouseout:"navOut"},navOver:function(){this.$.dissolve.addClass("onyx-tab-item-hovered")},navOut:function(){this.$.dissolve.removeClass("onyx-tab-item-hovered")},components:[{kind:"enyo.Button",name:"button",ontap:"requestSwitch",onmouseover:"showTooltipFromTab",onmouseout:"doHideTooltip"},{classes:"onyx-tab-item-dissolve",ontap:"requestSwitch",name:"dissolve",showing:!1,onmouseover:"showTooltipFromTab",onmouseout:"doHideTooltip"},{classes:"onyx-tab-item-close",name:"closeButton",ontap:"requestClose"}],create:function(){this.inherited(arguments),this.$.button.setContent(this.content)},raise:function(){this.addClass("active"),this.$.dissolve.addClass("active")},putBack:function(){this.removeClass("active"),this.$.dissolve.removeClass("active")},setActiveTrue:function(){this.setActive(!0)},activeChanged:function(){this.container&&this.hasNode()&&(this.active?this.raise():this.putBack(),this.doActivate())},_origWidth:null,origWidth:function(){return this._origWidth=this._origWidth||this.getBounds().width,this._origWidth},reduce:function(t){var e=Math.floor(this.origWidth()*t)-this.$.closeButton.getBounds().width-7;1===t?this.$.dissolve.hide():this.$.dissolve.show(),this.$.button.applyStyle("width",e+"px"),this.$.button.render()},requestSwitch:function(){var t=this.indexInContainer();return this.doTabSwitchRequest({index:t,caption:this.content,userData:this.userData,userId:this.userId}),!0},requestClose:function(){return this.doTabCloseRequest({index:this.tabIndex}),!0},showTooltipFromTab:function(){this.doShowTooltip({tooltipContent:this.tooltipMsg,bounds:this.getBounds()})}});

// lib/onyx/source/TabPanels.js
enyo.kind({name:"onyx.TabPanels",kind:"enyo.Panels",draggable:!1,handlers:{onTabChanged:"switchPanel"},published:{maxMenuHeight:null},tabTools:[{kind:"onyx.TabBar",isPanel:!0,name:"bar"},{name:"client",isPanel:!0,fit:!0,kind:"Panels",classes:"enyo-tab-panels",onTransitionStart:"clientTransitionStart"}],create:function(){this.inherited(arguments),this.getMaxMenuHeight()&&this.maxMenuHeightChanged(),this.$.client.getPanels=this.bindSafely("getClientPanels"),this.draggableChanged(),this.animateChanged(),this.wrapChanged()},maxMenuHeightChanged:function(){this.$.bar.setMaxMenuHeight(this.getMaxMenuHeight())},initComponents:function(){this.createChrome(this.tabTools),this.inherited(arguments)},getClientPanels:function(){return this.getPanels()},flow:function(){this.inherited(arguments),this.$.client.flow()},reflow:function(){this.inherited(arguments),this.$.client.reflow()},draggableChanged:function(){this.$.client.setDraggable(this.draggable),this.draggable=!1},animateChanged:function(){this.$.client.setAnimate(this.animate),this.animate=!1},wrapChanged:function(){this.$.client.setWrap(this.wrap),this.wrap=!1},isClient:function(t){return!t.isPanel},initDone:!1,rendered:function(){if(!this.initDone){var t=this;enyo.forEach(this.controls,function(e){t.isClient(e)&&t.$.bar.addTab(e)}),this.setIndex(this.controls.length-1),this.initDone=!0,this.inherited(arguments)}},addTab:function(t){this.$.bar.addTab(t),this.setIndex(this.controls.length-1)},removeTab:function(t){this.$.bar.removeTab(t)},layoutKindChanged:function(){this.layout||(this.layout=enyo.createFromKind("FittableRowsLayout",this)),this.$.client.setLayoutKind(this.layoutKind)},indexChanged:function(){this.$.client.layout&&this.$.client.setIndex(this.index),this.index=this.$.client.getIndex()},switchPanel:function(t,e){if(this.hasNode()){var i=e.index;this.getIndex()!=i&&this.setIndex(i)}},startTransition:enyo.nop,finishTransition:enyo.nop,stepTransition:enyo.nop,refresh:enyo.nop});

// lib/extra/analyzer2/runtime-machine.js
void 0===window.analyzer&&(window.analyzer={}),analyzer.runtimeMachine={_head:function(t,e,i){this._inflight=!0;var n=document.createElement(t);for(var o in e)n.setAttribute(o,e[o]);return i&&(n.innerText=i),this._headElt||(this._headElt=document.getElementsByTagName("head")[0]),this._headElt.appendChild(n),n},sheet:function(t){this._head("link",{type:"text/css",media:"screen",rel:"stylesheet",href:t})},inject:function(t){this._head("script",{type:"text/javascript"},t)},_scripts:[],script:function(t){this._inflight?this._scripts.push(t):this._script(t)},_require:function(){},_script:function(t){this._inflight=!0;var e=this._head("script",{type:"text/javascript",src:t}),i=this;enyo.platform.ie&&8>=enyo.platform.ie?e.onreadystatechange=function(){("complete"===e.readyState||"loaded"===e.readyState)&&(e.onreadystatechange="",i._loaded(t))}:(e.onload=function(){i._loaded(t)},e.onerror=function(){i._error(t)})},_continue:function(){this._inflight=!1;var t=this._scripts.pop();t&&this._script(t)},_loaded:function(){this._continue()},_error:function(t){enyo.Signals.send("onAnalyserError",{msg:"Failed to load "+t}),this._continue()}};

// lib/extra/analyzer2/AnalyzerDebug.js
enyo.kind({name:"analyzer.AnalyzerDebug",kind:null,debug:!1,_level:0,methodName:function(t){var e=this.getStackInfo(3+(t||0));return e=e.replace(/ .http:.*$/g,""),e=e.replace(/^.*.enyo.kind/g,this.kindName),e+="                                                                    ",e.substr(0,30)},getCurrentStackInfo:function(t){return" current: "+this.getStackInfo(3+(t||0))},getPreviousStackInfo:function(t){return" previous: "+this.getStackInfo(4+(t||0))},getStackInfo:function(t){try{throw Error()}catch(e){var i=e.stack;if(i){var n=i.split("\n");return n[t]}return"(stack trace not available)"}},showLevel:function(){return"#####################################".substr(0,this._level)+" "},incremLevel:function(){return this._level++,this.showLevel()+" --> "},decremLevel:function(){var t=this.showLevel()+" <-- ";return this._level--,t},showIterator:function(t){return t?"["+t.ID+"/"+t.i+"] ":""},logMethodEntry:function(t,e){e=e||"",enyo.log(this.methodName(1)+this.incremLevel()+this.showIterator(t)+e+this.getPreviousStackInfo(1))},logMethodExit:function(t,e){e=e||"",enyo.log(this.methodName(1)+this.decremLevel()+this.showIterator(t)+e+this.getCurrentStackInfo(1))},logProcessing:function(t,e){enyo.log(this.methodName(1)+this.showLevel()+this.showIterator(t)+"PROCESSING kind: "+e.kind+" >>"+e.token+"<< line: "+e.line+this.getCurrentStackInfo(1))},logIterMsg:function(t,e){enyo.log(this.methodName(1)+this.showLevel()+this.showIterator(t)+e+this.getPreviousStackInfo(1))},logMsg:function(t){enyo.log(this.methodName(1)+this.showLevel()+t+this.getPreviousStackInfo(1))},statics:{_debugEnabled:!1}});

// lib/extra/analyzer2/Walker.js
enyo.kind({name:"analyzer.Walker",kind:enyo.Component,published:{verbose:!1},events:{onProgress:"",onFinish:""},walk:function(t,e){this.verbose&&this.log("inPath: "+t+" resolver: ",e),this.loader=new enyo.loaderFactory(analyzer.runtimeMachine,e),this.loader.loadScript=function(){},this.loader.loadSheet=function(){},this.loader.verbose=this.verbose,this.loader.report=this.bindSafely("walkReport"),this.loader.finish=this.bindSafely("walkFinish"),enyo.loader=this.loader;var i;return e?(i=e.rewrite(t),this.verbose&&i!==t&&this.log("inPathResolver: "+t+" ==> "+i)):(i=enyo.path.rewrite(t),this.verbose&&i!==t&&this.log("enyo.path: "+t+" ==> "+i)),enyo.asyncMethod(this.loader,"load",i),this.async=new enyo.Async,this.async},walkReport:function(t,e){this.doProgress({action:t,name:e})},walkFinish:function(){this.modules=this.loader.modules,this.designs=this.loader.designs,this.async.respond({modules:this.modules,designs:this.designs}),this.doFinish({modules:this.modules,designs:this.designs})}});

// lib/extra/analyzer2/Reader.js
enyo.kind({name:"analyzer.Reader",kind:enyo.Async,go:function(t){return this.modules=t.modules,this.designs=t.designs,this.files=t.modules.concat(t.designs),enyo.asyncMethod(this,"nextFile"),this},nextFile:function(){var t=this.files.shift();t?this.loadFile(t):this.filesFinished()},loadFile:function(t){enyo.xhr.request({url:t.path,callback:this.bindSafely("fileLoaded",t)})},fileLoaded:function(t,e,i){i.status>=200&&300>i.status?this.addFile(t,e):this.fail("Analyser cannot read "+t.path+": "+i.status+" "+i.statusText),this.nextFile()},addFile:function(t,e){e&&e.length&&(t.code=e)},filesFinished:function(){this.respond({modules:this.modules,designs:this.designs})}});

// lib/extra/analyzer2/Iterator.js
enyo.kind({name:"analyzer.Iterator",kind:null,i:-1,nodes:null,constructor:function(t){this.ID=analyzer.Iterator._objectCount++,this.stream=t},statics:{_objectCount:0},next:function(){return this.i++,this._read()},prev:function(){return this.i--,this._read()},_read:function(){return this.past=this.stream[this.i-1],this.value=this.stream[this.i],this.future=this.stream[this.i+1],this.value}});

// lib/extra/analyzer2/Lexer.js
enyo.kind({name:"analyzer.AbstractLexer",kind:null,constructor:function(t){return t?(this.start(t),this.finish(),this.r):void 0},p0:0,p:0,start:function(t){this.s=t,this.l=this.s.length,this.r=[],this.d="",this.p0=0,this.p=0,this.n=0,this.analyze()},search:function(t){var e=t.global?t:RegExp(t.source,"g");return e.lastIndex=this.p,this.m=e.exec(this.s),this.p=this.m?this.m.index:-1,e.lastIndex!=this.p0&&(this.d=this.s.charAt(this.p))},lookahead:function(t){return this.s.charAt(this.p+t)},getToken:function(){return this.s.slice(this.p0,this.p)},tokenize:function(t){this.p+=t||0},pushToken:function(t,e,i){this.tokenize(e);var n=this.getToken();if(!n&&!i)return{};var o=(n.match(/\n/g)||[]).length,s={kind:t,token:n,start:this.p0,end:this.p,line:this.n,height:o};return this.r.push(s),this.n+=o,this.p0=this.p,s},tossToken:function(t){this.tokenize(t),this.p0=this.p},finish:function(){this.pushToken("gah")}}),enyo.kind({name:"analyzer.Lexer",kind:analyzer.AbstractLexer,symbols:"(){}[];,:<>+-=*/&",operators:["++","--","+=","-=","==","!=","<=",">=","===","&&","||",'"',"'"],keywords:["function","new","return","if","else","while","do","break","continue","switch","case","var"],constructor:function(){return this.buildPattern(),this.inherited(arguments)},buildPattern:function(){for(var t,e="\\/[^/*[](?:[^\\/\\\\\\r\n]|\\\\.)+\\/\\w*",i='"(?:\\\\"|[^"])*?"',n="'(?:\\\\'|[^'])*?'",o=i+"|"+n,s="\\b(?:"+this.keywords.join("|")+")\\b",a="[\\"+this.symbols.split("").join("\\")+"]",r=[],h=0;t=this.operators[h];h++)r.push("\\"+t.split("").join("\\"));r=r.join("|"),a=r+"|"+a;var l=['\\\\"|\\\\/',e,o,s,"\\/\\/","\\/\\*",a,"\\s"];this.matchers=["doSymbol","doRegex","doString","doKeyword","doLineComment","doCComment","doSymbol","doWhitespace"],this.pattern="("+l.join(")|(")+")"},analyze:function(){for(var t=RegExp(this.pattern,"gi"),e=0;t.lastIndex>=e&&this.search(t);)t.lastIndex>e?e=t.lastIndex:e+=1,this.pushToken("identifier"),this.process(this.matchers),this.pushToken("identifier")},process:function(t){for(var e,i=0;e=t[i];i++)if(this.m[i+1]&&this[e])return this[e].apply(this),void 0;this.doSymbol()},doWhitespace:function(){this.tokenize(1),this.search(/\S/g),this.pushToken("ws"),this.r.pop()},doEscape:function(){this.tokenize(2)},doLiteral:function(){this.tossToken(1);for(var t=this.d,e=RegExp("\\"+t+"|\\\\","g");this.search(e);)switch(this.d){case"\\":this.doEscape();break;default:return this.pushToken("literal",0,!0).delimiter=t,this.tossToken(1),void 0}},doSymbol:function(){this.pushToken(";"==this.d||","==this.d?"terminal":"symbol",this.m[0].length)},doKeyword:function(){this.pushToken("keyword",this.m[0].length)},doLineComment:function(){this.tokenize(2),this.search(/[\r\n]/g)&&this.tokenize(0),this.pushToken("comment")},doCComment:function(){this.tokenize(2),this.search(/\*\//),this.tokenize(2),this.pushToken("comment")},doString:function(){this.pushToken("string",this.m[0].length)},doRegex:function(){this.pushToken("regex",this.m[0].length)}});

// lib/extra/analyzer2/Parser.js
enyo.kind({name:"analyzer.Parser",kind:"analyzer.AnalyzerDebug",constructor:function(t){return this.debug=analyzer.AnalyzerDebug._debugEnabled,this.parse(t)},parse:function(t){for(var e=[],i=new analyzer.Iterator(t);i.next();)"ws"!==i.value.kind&&e.push(i.value);return i=new analyzer.Iterator(e),this.walk(i)},combine:function(t){for(var e,i="",n=0;e=t[n];n++)i+=e.token;return i},walk:function(t,e){this.debug&&this.logMethodEntry(t,"inState "+e+" >>"+JSON.stringify(t.value)+"<<");var i,n=[];try{for(;t.next();)if(i=t.value,this.debug&&this.logProcessing(t,i),"ws"!=i.kind){if("comment"==i.kind)i.kind="comment";else if("array"==e){if("terminal"==i.kind)continue;t.prev();var o=t.value;if(i={kind:"element",token:"expr",children:this.walk(t,"expression")},t.value&&"]"==t.value.token||t.value&&t.value===o)return i.children.length&&n.push(i),this.debug&&this.logMethodExit(t),n}else if("["==i.token)i.kind="array",i.children=this.walk(t,i.kind),t.value?i.end=t.value.end:this.debug&&this.logIterMsg(t,"No end token for array?");else{if("expression"==e&&"]"==i.token)return this.debug&&this.logMethodExit(t),n;if("var"==i.token)i.kind="var",i.children=this.walk(t,"expression");else{if("terminal"==i.kind&&("expression"==e||"var"==e))return this.debug&&this.logMethodExit(t),n;if("terminal"==i.kind)continue;if("{"==i.token){if(i.kind="block",this.debug&&this.logIterMsg(t,"PROCESS BLOCK - START"),i.children=this.walk(t,i.kind),this.debug&&this.logIterMsg(t,"PROCESS BLOCK - END"),t.value?i.end=t.value.end:this.debug&&this.logIterMsg(t,"No end token for block?"),i.commaTerminated=this.isCommaTerminated(t),"expression"==e||"function"==e)return n.push(i),this.debug&&this.logMethodExit(t),n}else{if("expression"==e&&("}"==i.token||")"==i.token))return t.prev(),this.debug&&this.logMethodExit(t),n;if("block"==e&&"}"==i.token)return this.debug&&this.logMethodExit(t),n;if("="==i.token||":"==i.token&&"expression"!=e){var s=n.pop();"identifier"==s.kind?(s.op=i.token,s.kind="assignment",s.children=this.walk(t,"expression"),t.value&&"terminal"==t.value.kind&&(s.commaTerminated=","===t.value.token,t.prev()),i=s):n.push(s)}else if("("==i.token)i.kind="association",i.children=this.walk(t,i.kind);else{if("association"==e&&")"==i.token)return this.debug&&this.logMethodExit(t),n;if("function"==i.token){if(i.kind="function",this.debug&&this.logIterMsg(t,"PROCESS FUNCTION - START"),i.children=this.walk(t,i.kind),this.debug&&this.logIterMsg(t,"PROCESS FUNCTION - END"),t.value&&"symbol"===t.value.kind&&"}"===t.value.token||this.debug&&this.logIterMsg(t,"No end token for function?"),"expression"!==e&&i.children&&i.children.length&&"identifier"==i.children[0].kind){this.debug&&this.logIterMsg(t,"C-Style function"),i.name=i.children[0].token,i.children.shift();var a={kind:"assignment",token:i.name,children:[i]};i=a}if("expression"==e||"function"==e)return i.commaTerminated=this.isCommaTerminated(t),n.push(i),this.debug&&this.logMethodExit(t),n}}}}}this.debug&&this.logIterMsg(t,"PUSH NODE"),n.push(i)}}catch(r){window.console.error(r)}return this.debug&&this.logMethodExit(t),n},isCommaTerminated:function(t){var e=!1,i=t.next();return i&&(e="terminal"===i.kind&&","===i.token),t.prev(),e}});

// lib/extra/analyzer2/Documentor.js
enyo.kind({name:"analyzer.Documentor",kind:"analyzer.AnalyzerDebug",group:"public",constructor:function(t){return this.comment=[],this.debug=analyzer.AnalyzerDebug._debugEnabled,this.parse(t)},parse:function(t){var e=new analyzer.Iterator(t);return this.walk(e)},walk:function(t,e){var i,n,o=[];for(this.debug&&this.logMethodEntry(t,"inState "+e+" >>"+JSON.stringify(t.value)+"<<");t.next();){if(i=t.value,this.debug&&this.logProcessing(t,i),"comment"==i.kind)this.cook_comment(i.token);else if("enyo.kind"==i.token&&t.future&&"association"==t.future.kind)n=this.cook_kind(t);else if("enyo.singleton"==i.token&&t.future&&"association"==t.future.kind)n=this.cook_singleton(t);else if("assignment"==i.kind)n=this.cook_assignment(t);else if("association"==i.kind){var s,a,r;(i.children&&1==i.children.length&&"function"==i.children[0].kind||2==i.children.length&&"function"==i.children[0].kind&&"association"==i.children[1].kind)&&(s=i.children[0],s.children&&2==s.children.length&&(a=s.children[1],r=this.walk(new analyzer.Iterator(a.children)),o=o.concat(r)),1==i.children.length&&t.future&&"association"==t.future.kind&&t.next())}n&&(o.push(n),n=null)}return this.debug&&this.logMethodExit(t),o},cook_kind:function(t){this.debug&&this.logMethodEntry(t,">>"+JSON.stringify(t.value)+"<<");var e=function(t,e){var i,n=analyzer.Documentor.indexByName(t,e);return n>=0&&(i=t[n],t.splice(i,1)),i&&i.value&&i.value.length&&i.value[0].token},i=this.make("kind",t.value);t.next();var n=t.value.children;return n&&n[0]&&"block"==n[0].kind&&(i.properties=this.cook_block(n[0].children),i.name=analyzer.Documentor.stripQuotes(e(i.properties,"name")||""),i.superkind=analyzer.Documentor.stripQuotes(e(i.properties,"kind")||"enyo.Control"),"null"==i.superkind&&(i.superkind=null),i.block={start:n[0].start,end:n[0].end}),this.debug&&this.logMethodExit(t),i},cook_singleton:function(t){var e=this.cook_kind(t);return e.type="singleton",e},cook_block:function(t){this.debug&&this.logMethodEntry();for(var e,i=[],n=0;e=t[n];n++)if(this.debug&&this.logProcessing(null,e),"comment"==e.kind)this.cook_comment(e.token);else if("assignment"==e.kind){var o=this.make("property",e);e.children&&(o.value=[this.walkValue(new analyzer.Iterator(e.children))],void 0===e.commaTerminated?(o.commaTerminated=e.children[0].commaTerminated||!1,void 0===e.children[0].commaTerminated&&this.debug&&this.logMsg("NO COMMA TERMINATED INFO")):o.commaTerminated=e.commaTerminated),i.push(o)}return this.debug&&this.logMethodExit(),i},walkValue:function(t,e){for(this.debug&&this.logMethodEntry(t,"inState: "+e+" >>"+JSON.stringify(t.value)+"<<");t.next();){var i,n=t.value;if(this.debug&&this.logProcessing(t,n),"comment"!=n.kind){if("block"==n.kind)return i=this.make("block",n),i.properties=this.cook_block(n.children),this.debug&&this.logMethodExit(t,"inState: "+e+" >>"+JSON.stringify(t.value)+"<<"),i;if("array"==n.kind)return i=this.cook_array(t),this.debug&&this.logMethodExit(t),i;if("function"==n.kind)return i=this.cook_function(t),this.debug&&this.logMethodExit(t,"inState: "+e+" >>"+JSON.stringify(t.value)+"<<"),i;i=this.make("expression",n);for(var o=n.token;t.next();)o+=t.value.token;return i.token=o,this.debug&&this.logMethodExit(t),i}this.cook_comment(n.token)}this.debug&&this.logMethodExit(t)},cook_function:function(t){this.debug&&this.logMethodEntry(t,">>"+JSON.stringify(t.value)+"<<");var e=t.value,i=this.make("expression",e);return i.commaTerminated=e.commaTerminated,i.block={start:e.children[1].start,end:e.children[1].end},i.arguments=enyo.map(e.children[0].children,function(t){return t.token}),this.debug&&this.logMethodExit(t),i},cook_array:function(t){this.debug&&this.logMethodEntry(t,">>"+JSON.stringify(t.value)+"<<");var e=t.value,i=this.make("array",e),n=e.children;if(n){for(var o,s,a=[],r=0;o=n[r];r++)o.children&&(s=this.walkValue(new analyzer.Iterator(o.children)),s&&a.push(s));i.properties=a}return this.debug&&this.logMethodExit(t),i},cook_assignment:function(t){this.debug&&this.logMethodEntry(t,">>"+JSON.stringify(t.value)+"<<");var e=t.value,i=this.make("global",e);return e.children&&(e.children[0]&&"function"==e.children[0].token&&(i.type="function"),i.value=[this.walkValue(new analyzer.Iterator(e.children))]),this.debug&&this.logMethodExit(),i},make:function(t,e){return{line:e.line,start:e.start,end:e.end,height:e.height,token:e.token,name:e.token,type:t,group:this.group,comment:this.consumeComment()}},commentRx:/\/\*\*([\s\S]*)\*\/|\/\/\*(.*)/m,cook_comment:function(t){this.debug&&this.logMethodEntry();var e=t.match(this.commentRx);if(e){e=e[1]?e[1]:e[2];var i=this.extractPragmas(e);this.honorPragmas(i)}this.debug&&this.logMethodExit()},extractPragmas:function(t){var e=/^[*\s]*@\s*(\S*)\s*/g,i=[],n=t;return n.length&&(n=t.replace(e,function(t,e){return i.push(e),""}),n.length&&this.comment.push(n)),i},honorPragmas:function(t){for(var e,i={"protected":1,"public":1},n=0;e=t[n];n++)i[e]&&(this.group=e)},consumeComment:function(){var t=this.comment.join(" ");this.comment=[];var e=analyzer.Documentor.removeIndent(t);return e},statics:{indexByProperty:function(t,e,i){for(var n,o=0;n=t[o];o++)if(n[e]==i)return o;return-1},findByProperty:function(t,e,i){return t[this.indexByProperty(t,e,i)]},indexByName:function(t,e){return this.indexByProperty(t,"name",e)},findByName:function(t,e){return t[this.indexByName(t,e)]},stripQuotes:function(t){var e=t.charAt(0),i='"'==e||"'"==e?1:0,n=t.charAt(t.length-1),o='"'==n||"'"==n?-1:0;return i||o?t.slice(i,o):t},removeIndent:function(t){var e,i,n=0,o=t.split(/\r?\n/);for(e=0;null!=(i=o[e]);e++)if(i.length>0){n=i.search(/\S/),0>n&&(n=i.length);break}if(n)for(e=0;null!=(i=o[e]);e++)o[e]=i.slice(n);return o.join("\n")}}});

// lib/extra/analyzer2/Indexer.js
enyo.kind({name:"analyzer.Indexer",kind:null,group:"public",constructor:function(){this.objects=[],this.design={}},debug:!1,findByName:function(t){return analyzer.Documentor.findByProperty(this.objects,"name",t)},findByTopic:function(t){return analyzer.Documentor.findByProperty(this.objects,"topic",t)},search:function(t,e,i){var n=enyo.filter(this.objects,t,i);return enyo.map(n,e,i)},normalizePath:function(t){var e=t.split("/"),i=[];return enyo.forEach(e,function(t){"."==t||(".."==t?i.pop():i.push(t))},this),i.join("/")},addModules:function(t){enyo.forEach(t,this.addModule,this),this.objects.sort(analyzer.Indexer.nameCompare)},addModule:function(t){this.debug&&enyo.log("analyzer.Indexer.addModule(): + "+t.path),t.path=this.normalizePath(t.path),this.indexModule(t),this.mergeModule(t)},mergeModule:function(t){this.objects.push(t),this.objects=this.objects.concat(t.objects),enyo.forEach(t.objects,this.mergeProperties,this)},mergeProperties:function(t){t.properties?this.objects=this.objects.concat(t.properties):t.value&&t.value[0]&&t.value[0].properties&&(this.objects=this.objects.concat(t.value[0].properties))},indexModule:function(t){t.type="module",t.module=t,t.name=t.path?t.path.replace("lib/",""):t.label+"/"+t.rawPath,t.objects=new analyzer.Documentor(new analyzer.Parser(new analyzer.Lexer(t.code))),this.indexObjects(t)},removeModule:function(t){this.removeModuleByPath(t.path)},removeModuleByPath:function(t){t=this.normalizePath(t);for(var e=this.objects.length;e--;)this.objects[e].module.path==t&&this.objects.splice(e,1)},reIndexModule:function(t){this.removeModule(t),this.addModule(t)},indexObjects:function(t){enyo.forEach(t.objects,function(e){e.module=t,this.indexObject(e)},this)},indexObject:function(t){switch(t.type){case"kind":this.indexKind(t)}this.indexProperties(t)},indexProperties:function(t){var e=t.properties||t.value&&t.value[0]&&t.value[0].properties;enyo.forEach(e,function(e){e.object=t,e.topic=e.object.name?e.object.name+"::"+e.name:e.name,e.module=t.module},this)},indexKind:function(t){this.listComponents(t),this.indexInheritance(t)},indexInheritance:function(t){t.superkinds=this.listSuperkinds(t),t.allProperties=this.listInheritedProperties(t)},listSuperkinds:function(t){for(var e,i=[];t&&t.superkind;)e=t.superkind,t=this.findByName(e),t||(t=this.findByName("enyo."+e),t&&(e="enyo."+e)),i.push(e);return i},listInheritedProperties:function(t){for(var e,i=[],n={},o=t.superkinds.length-1;e=t.superkinds[o];o--){var s=this.findByName(e);s&&this.mergeInheritedProperties(s.properties,n,i)}return this.mergeInheritedProperties(t.properties,n,i),i.sort(analyzer.Indexer.nameCompare),i},mergeInheritedProperties:function(t,e,i){if(t)for(var n,o=0;n=t[o];o++){var s=e.hasOwnProperty(n.name)&&e[n.name];s?(n.overrides=s,i[enyo.indexOf(s,i)]=n):i.push(n),e[n.name]=n}},listComponents:function(t){t.components=this._listComponents(t,[],{});var e=analyzer.Documentor.findByName(t.properties,"components");e&&e.value&&(t.componentsBlockStart=e.value[0].start,t.componentsBlockEnd=e.value[0].end)},_listComponents:function(t,e,i){var n=analyzer.Documentor.findByName(t.properties,"components");if(n&&n.value&&n.value.length)for(var o,s=n.value[0].properties,a=0;o=s[a];a++){if("block"!==o.type){var r="Error in kind "+t.name+": Expected an object in component list not "+o.type+" "+o.token;throw enyo.log(r),Error(r)}var h=analyzer.Documentor.findByName(o.properties,"name");h&&(h=analyzer.Documentor.stripQuotes(h.value[0].token||""));var l=analyzer.Documentor.findByName(o.properties,"kind");if(l=analyzer.Documentor.stripQuotes(l&&l.value[0].token||"Control"),!h){var c=l.split(".").pop();h=enyo.uncap(c),i[h]?h+=++i[h]:i[h]=1}o.kind=l,o.name=h,e.push(o),this._listComponents(o,e,i)}return e},addDesigns:function(t){enyo.forEach(t,this.addDesign,this)},addDesign:function(t){t.path=this.normalizePath(t.path);try{var e=enyo.json.parse(t.code),i=enyo.keys(e);enyo.forEach(i,function(i){if(e[i]){var n=e[i],o=this.design[i]||[];enyo.forEach(n,function(e){e.design=t},this),this.design[i]=o.concat(n)}},this)}catch(n){enyo.warn("Error parsing designer meta-data ("+t.path+"): "+n)}},removeDesign:function(t){try{var e=enyo.keys(this.design);enyo.forEach(e,function(e){this.removeDesignByPath(t.path,e)},this)}catch(i){enyo.warn("Error removing designer ("+t+"): "+i)}},removeDesignByPath:function(t,e){t=this.normalizePath(t);for(var i=this.design[e].length;i--;){var n=this.design[e][i];n.design.path==t&&this.design[e].splice(i,1)}},reIndexDesign:function(t){this.removeDesign(t),this.addDesign(t)},statics:{nameCompare:function(t,e){var i=t.name.toLowerCase(),n=e.name.toLowerCase();return n>i?-1:i>n?1:0}}});

// lib/extra/analyzer2/Analyzer.js
enyo.kind({name:"analyzer.Analyzer",kind:"Component",debug:!1,events:{onIndexReady:"",onError:""},create:function(){this.index=new analyzer.Indexer,this.inherited(arguments)},analyze:function(t,e){this.walk(t,e)},walk:function(t,e){var i,n=[],o=[],s=function(a,r){if(r){this.debug&&enyo.log("analyzer.Analyzer.walk.next() - inData: ",r);for(var h=0;r.modules.length>h;++h)r.modules[h].label=i;n=n.concat(r.modules),o=o.concat(r.designs)}var l=t.shift();l?(this.debug&&enyo.log("analyzer.Analyzer.walk.next() - path: "+l),enyo.isString(l)||(i=l.label,l=l.path),(new analyzer.Walker).walk(l,e).response(this,s)):this.walkFinished(n,o)};s.call(this)},walkFinished:function(t,e){this.debug&&enyo.log("analyzer.Analyzer.walkFinished called"),this.read(t,e)},read:function(t,e){(new analyzer.Reader).go({modules:t,designs:e}).response(this,function(t,e){try{this.indexModules(e.modules),this.indexDesigns(e.designs),this.doIndexReady()}catch(i){this.log("Analysis failed with: ",""+i),this.doError(i)}}).error(this,function(t,e){this.doError(e)})},indexModules:function(t){this.index.addModules(t)},indexDesigns:function(t){this.index.addDesigns(t)}});

// lib/extra/analyzer2/KindHelper.js
enyo.kind({name:"analyzer.Analyzer.KindHelper",kind:"enyo.Component",published:{definition:null},checkDefAvail:function(){if(!this.definition)throw"No definition provided"},getEvents:function(){this.checkDefAvail();for(var t=[],e=this.definition.properties,i=0;e.length>i;i++)if("events"===e[i].token)for(var n=e[i].value[0].properties,o=0;n.length>o;o++){var s=n[o].name;t.push(s)}return t},getPublished:function(){this.checkDefAvail();for(var t=[],e=this.definition.properties,i=0;e.length>i;i++)if("published"===e[i].token)for(var n=e[i].value[0].properties,o=0;n.length>o;o++){var s=n[o].name;t.push(s)}return t},getFunctions:function(){this.checkDefAvail();for(var t=[],e=this.definition.properties,i=0;e.length>i;i++){var n=e[i];"function"===n.value[0].name&&t.push(n.name)}return t},listHandlers:function(t){this.checkDefAvail();var e=this.definition;t=this.listDeclaredComponentsHandlers(e.components,t);for(var i=0;e.properties.length>i;i++){var n=e.properties[i];if("handlers"===n.name)for(var o=0;n.value[0].properties.length>o;o++){var s=n.value[0].properties[o],a=s.value[0].name;a=a.replace(/["']{1}/g,""),"do"!==a.substr(0,2)&&(t[a]="")}}return t},listDeclaredComponentsHandlers:function(t,e){for(var i=0;t.length>i;i++){for(var n=t[i],o=0;n.properties.length>o;o++){var s=n.properties[o];if("on"===s.name.substr(0,2)){var a=s.value[0].name.replace(/["']{1}/g,"");"do"!==a.substr(0,2)&&(e[a]="")}}t.components&&this.listDeclaredComponentsHandlers(t.components,e)}return e}});

// lib/foss/async.min.js
(function(){var t={},e=this,i=e.async;"undefined"!=typeof module&&module.exports?module.exports=t:e.async=t,t.noConflict=function(){return e.async=i,t};var n=function(t,e){if(t.forEach)return t.forEach(e);for(var i=0;t.length>i;i+=1)e(t[i],i,t)},o=function(t,e){if(t.map)return t.map(e);var i=[];return n(t,function(t,n,o){i.push(e(t,n,o))}),i},s=function(t,e,i){return t.reduce?t.reduce(e,i):(n(t,function(t,n,o){i=e(i,t,n,o)}),i)},a=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e};t.nextTick="undefined"!=typeof process&&process.nextTick?process.nextTick:function(t){setTimeout(t,0)},t.forEach=function(t,e,i){if(i=i||function(){},!t.length)return i();var o=0;n(t,function(n){e(n,function(e){e?(i(e),i=function(){}):(o+=1,o===t.length&&i(null))})})},t.forEachSeries=function(t,e,i){if(i=i||function(){},!t.length)return i();var n=0,o=function(){e(t[n],function(e){e?(i(e),i=function(){}):(n+=1,n===t.length?i(null):o())})};o()},t.forEachLimit=function(t,e,i,n){if(n=n||function(){},!t.length||0>=e)return n();var o=0,s=0,a=0;(function r(){if(o===t.length)return n();for(;e>a&&t.length>s;)s+=1,a+=1,i(t[s-1],function(e){e?(n(e),n=function(){}):(o+=1,a-=1,o===t.length?n():r())})})()};var r=function(e){return function(){var i=Array.prototype.slice.call(arguments);return e.apply(null,[t.forEach].concat(i))}},h=function(e){return function(){var i=Array.prototype.slice.call(arguments);return e.apply(null,[t.forEachSeries].concat(i))}},l=function(t,e,i,n){var s=[];e=o(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){i(t.value,function(i,n){s[t.index]=n,e(i)})},function(t){n(t,s)})};t.map=r(l),t.mapSeries=h(l),t.reduce=function(e,i,n,o){t.forEachSeries(e,function(t,e){n(i,t,function(t,n){i=n,e(t)})},function(t){o(t,i)})},t.inject=t.reduce,t.foldl=t.reduce,t.reduceRight=function(e,i,n,s){var a=o(e,function(t){return t}).reverse();t.reduce(a,i,n,s)},t.foldr=t.reduceRight;var c=function(t,e,i,n){var s=[];e=o(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){i(t.value,function(i){i&&s.push(t),e()})},function(){n(o(s.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};t.filter=r(c),t.filterSeries=h(c),t.select=t.filter,t.selectSeries=t.filterSeries;var d=function(t,e,i,n){var s=[];e=o(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){i(t.value,function(i){i||s.push(t),e()})},function(){n(o(s.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};t.reject=r(d),t.rejectSeries=h(d);var u=function(t,e,i,n){t(e,function(t,e){i(t,function(i){i?(n(t),n=function(){}):e()})},function(){n()})};t.detect=r(u),t.detectSeries=h(u),t.some=function(e,i,n){t.forEach(e,function(t,e){i(t,function(t){t&&(n(!0),n=function(){}),e()})},function(){n(!1)})},t.any=t.some,t.every=function(e,i,n){t.forEach(e,function(t,e){i(t,function(t){t||(n(!1),n=function(){}),e()})},function(){n(!0)})},t.all=t.every,t.sortBy=function(e,i,n){t.map(e,function(t,e){i(t,function(i,n){i?e(i):e(null,{value:t,criteria:n})})},function(t,e){if(t)return n(t);var i=function(t,e){var i=t.criteria,n=e.criteria;return n>i?-1:i>n?1:0};n(null,o(e.sort(i),function(t){return t.value}))})},t.auto=function(t,e){e=e||function(){};var i=a(t);if(!i.length)return e(null);var o={},r=[],h=function(t){r.unshift(t)},l=function(t){for(var e=0;r.length>e;e+=1)if(r[e]===t)return r.splice(e,1),void 0},c=function(){n(r.slice(0),function(t){t()})};h(function(){a(o).length===i.length&&(e(null,o),e=function(){})}),n(i,function(i){var n=t[i]instanceof Function?[t[i]]:t[i],a=function(t){if(t)e(t),e=function(){};else{var n=Array.prototype.slice.call(arguments,1);1>=n.length&&(n=n[0]),o[i]=n,c()}},r=n.slice(0,Math.abs(n.length-1))||[],d=function(){return s(r,function(t,e){return t&&o.hasOwnProperty(e)},!0)&&!o.hasOwnProperty(i)};if(d())n[n.length-1](a,o);else{var u=function(){d()&&(l(u),n[n.length-1](a,o))};h(u)}})},t.waterfall=function(e,i){if(i=i||function(){},!e.length)return i();var n=function(e){return function(o){if(o)i(o),i=function(){};else{var s=Array.prototype.slice.call(arguments,1),a=e.next();a?s.push(n(a)):s.push(i),t.nextTick(function(){e.apply(null,s)})}}};n(t.iterator(e))()},t.parallel=function(e,i){if(i=i||function(){},e.constructor===Array)t.map(e,function(t,e){t&&t(function(t){var i=Array.prototype.slice.call(arguments,1);1>=i.length&&(i=i[0]),e.call(null,t,i)})},i);else{var n={};t.forEach(a(e),function(t,i){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);1>=o.length&&(o=o[0]),n[t]=o,i(e)})},function(t){i(t,n)})}},t.series=function(e,i){if(i=i||function(){},e.constructor===Array)t.mapSeries(e,function(t,e){t&&t(function(t){var i=Array.prototype.slice.call(arguments,1);1>=i.length&&(i=i[0]),e.call(null,t,i)})},i);else{var n={};t.forEachSeries(a(e),function(t,i){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);1>=o.length&&(o=o[0]),n[t]=o,i(e)})},function(t){i(t,n)})}},t.iterator=function(t){var e=function(i){var n=function(){return t.length&&t[i].apply(null,arguments),n.next()};return n.next=function(){return t.length-1>i?e(i+1):null},n};return e(0)},t.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var g=function(t,e,i,n){var o=[];t(e,function(t,e){i(t,function(t,i){o=o.concat(i||[]),e(t)})},function(t){n(t,o)})};t.concat=r(g),t.concatSeries=h(g),t.whilst=function(e,i,n){e()?i(function(o){return o?n(o):(t.whilst(e,i,n),void 0)}):n()},t.until=function(e,i,n){e()?n():i(function(o){return o?n(o):(t.until(e,i,n),void 0)})},t.queue=function(e,i){var o=0,s={tasks:[],concurrency:i,saturated:null,empty:null,drain:null,push:function(e,o){e.constructor!==Array&&(e=[e]),n(e,function(e){s.tasks.push({data:e,callback:"function"==typeof o?o:null}),s.saturated&&s.tasks.length==i&&s.saturated(),t.nextTick(s.process)})},process:function(){if(s.concurrency>o&&s.tasks.length){var t=s.tasks.shift();s.empty&&0==s.tasks.length&&s.empty(),o+=1,e(t.data,function(){o-=1,t.callback&&t.callback.apply(t,arguments),s.drain&&0==s.tasks.length+o&&s.drain(),s.process()})}},length:function(){return s.tasks.length},running:function(){return o}};return s};var f=function(t){return function(e){var i=Array.prototype.slice.call(arguments,1);e.apply(null,i.concat([function(e){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&n(i,function(e){console[t](e)}))}]))}};t.log=f("log"),t.dir=f("dir"),t.memoize=function(t,e){var i={},n={};e=e||function(t){return t};var o=function(){var o=Array.prototype.slice.call(arguments),s=o.pop(),a=e.apply(null,o);a in i?s.apply(null,i[a]):a in n?n[a].push(s):(n[a]=[s],t.apply(null,o.concat([function(){i[a]=arguments;var t=n[a];delete n[a];for(var e=0,o=t.length;o>e;e++)t[e].apply(null,arguments)}])))};return o.unmemoized=t,o},t.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}}})();

// lib/foss/XMLWriter-1.0.0-min.js
function XMLWriter(t,e){t&&(this.encoding=t),e&&(this.version=e)}(function(){function t(e){for(var i=e.c.length;i--;)"object"==typeof e.c[i]&&t(e.c[i]);e.n=e.a=e.c=null}function e(t,i,n,o){var s,a,r=i+"<"+t.n,h=t.c.length,l=0;for(s in t.a)r+=" "+s+'="'+t.a[s]+'"';if(r+=h?">":" />",o.push(r),h){do if(a=t.c[l++],"string"==typeof a){if(1==h)return o.push(o.pop()+a+"</"+t.n+">");o.push(i+n+a)}else"object"==typeof a&&e(a,i+n,n,o);while(h>l);o.push(i+"</"+t.n+">")}}XMLWriter.prototype={encoding:"ISO-8859-1",version:"1.0",formatting:"indented",indentChar:"	",indentation:1,newLine:"\n",writeStartDocument:function(t){this.close(),this.stack=[],this.standalone=t},writeEndDocument:function(){this.active=this.root,this.stack=[]},writeDocType:function(t){this.doctype=t},writeStartElement:function(t,e){e&&(t=e+":"+t);var i=this,n=i.active,o={n:t,a:{},c:[]};n?(n.c.push(o),this.stack.push(n)):i.root=o,i.active=o},writeEndElement:function(){this.active=this.stack.pop()||this.root},writeAttributeString:function(t,e){this.active&&(this.active.a[t]=e)},writeString:function(t){this.active&&this.active.c.push(t)},writeElementString:function(t,e,i){this.writeStartElement(t,i),this.writeString(e),this.writeEndElement()},writeCDATA:function(t){this.writeString("<![CDATA["+t+"]]>")},writeComment:function(t){this.writeString("<!-- "+t+" -->")},flush:function(){var t=this,i="",n="",o=t.indentation,s="indented"==t.formatting.toLowerCase(),a='<?xml version="'+t.version+'" encoding="'+t.encoding+'"';if(t.stack&&t.stack[0]&&t.writeEndDocument(),void 0!==t.standalone&&(a+=' standalone="'+!!t.standalone+'"'),a+=" ?>",a=[a],t.doctype&&t.root&&a.push("<!DOCTYPE "+t.root.n+" "+t.doctype+">"),s)for(;o--;)i+=t.indentChar;return t.root&&e(t.root,n,i,a),a.join(s?t.newLine:"")},close:function(){var e=this;e.root&&t(e.root),e.active=e.root=e.stack=null},getDocument:window.ActiveXObject?function(){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async=!1,t.loadXML(this.flush()),t}:function(){return(new DOMParser).parseFromString(this.flush(),"text/xml")}}})();

// lib/foss/underscore/underscore.js
(function(){var t=this,e=t._,i={},n=Array.prototype,o=Object.prototype,s=Function.prototype,a=n.push,r=n.slice,h=n.concat,l=(n.unshift,o.toString),c=o.hasOwnProperty,u=n.forEach,d=n.map,g=n.reduce,f=n.reduceRight,p=n.filter,m=n.every,y=n.some,v=n.indexOf,b=n.lastIndexOf,w=Array.isArray,S=Object.keys,C=s.bind,x=function(t){return t instanceof x?t:this instanceof x?(this._wrapped=t,void 0):new x(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):t._=x,x.VERSION="1.4.2";var P=x.each=x.forEach=function(t,e,n){if(null!=t)if(u&&t.forEach===u)t.forEach(e,n);else if(t.length===+t.length){for(var o=0,s=t.length;s>o;o++)if(e.call(n,t[o],o,t)===i)return}else for(var a in t)if(x.has(t,a)&&e.call(n,t[a],a,t)===i)return};x.map=x.collect=function(t,e,i){var n=[];return null==t?n:d&&t.map===d?t.map(e,i):(P(t,function(t,o,s){n[n.length]=e.call(i,t,o,s)}),n)},x.reduce=x.foldl=x.inject=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),g&&t.reduce===g)return n&&(e=x.bind(e,n)),o?t.reduce(e,i):t.reduce(e);if(P(t,function(t,s,a){o?i=e.call(n,i,t,s,a):(i=t,o=!0)}),!o)throw new TypeError("Reduce of empty array with no initial value");return i},x.reduceRight=x.foldr=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return n&&(e=x.bind(e,n)),arguments.length>2?t.reduceRight(e,i):t.reduceRight(e);var s=t.length;if(s!==+s){var a=x.keys(t);s=a.length}if(P(t,function(r,h,l){h=a?a[--s]:--s,o?i=e.call(n,i,t[h],h,l):(i=t[h],o=!0)}),!o)throw new TypeError("Reduce of empty array with no initial value");return i},x.find=x.detect=function(t,e,i){var n;return k(t,function(t,o,s){return e.call(i,t,o,s)?(n=t,!0):void 0}),n},x.filter=x.select=function(t,e,i){var n=[];return null==t?n:p&&t.filter===p?t.filter(e,i):(P(t,function(t,o,s){e.call(i,t,o,s)&&(n[n.length]=t)}),n)},x.reject=function(t,e,i){var n=[];return null==t?n:(P(t,function(t,o,s){e.call(i,t,o,s)||(n[n.length]=t)}),n)},x.every=x.all=function(t,e,n){e||(e=x.identity);var o=!0;return null==t?o:m&&t.every===m?t.every(e,n):(P(t,function(t,s,a){return(o=o&&e.call(n,t,s,a))?void 0:i}),!!o)};var k=x.some=x.any=function(t,e,n){e||(e=x.identity);var o=!1;return null==t?o:y&&t.some===y?t.some(e,n):(P(t,function(t,s,a){return o||(o=e.call(n,t,s,a))?i:void 0}),!!o)};x.contains=x.include=function(t,e){var i=!1;return null==t?i:v&&t.indexOf===v?-1!=t.indexOf(e):i=k(t,function(t){return t===e})},x.invoke=function(t,e){var i=r.call(arguments,2);return x.map(t,function(t){return(x.isFunction(e)?e:t[e]).apply(t,i)})},x.pluck=function(t,e){return x.map(t,function(t){return t[e]})},x.where=function(t,e){return x.isEmpty(e)?[]:x.filter(t,function(t){for(var i in e)if(e[i]!==t[i])return!1;return!0})},x.max=function(t,e,i){if(!e&&x.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&x.isEmpty(t))return-1/0;var n={computed:-1/0};return P(t,function(t,o,s){var a=e?e.call(i,t,o,s):t;a>=n.computed&&(n={value:t,computed:a})}),n.value},x.min=function(t,e,i){if(!e&&x.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&x.isEmpty(t))return 1/0;var n={computed:1/0};return P(t,function(t,o,s){var a=e?e.call(i,t,o,s):t;n.computed>a&&(n={value:t,computed:a})}),n.value},x.shuffle=function(t){var e,i=0,n=[];return P(t,function(t){e=x.random(i++),n[i-1]=n[e],n[e]=t}),n};var T=function(t){return x.isFunction(t)?t:function(e){return e[t]}};x.sortBy=function(t,e,i){var n=T(e);return x.pluck(x.map(t,function(t,e,o){return{value:t,index:e,criteria:n.call(i,t,e,o)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index<e.index?-1:1}),"value")};var D=function(t,e,i,n){var o={},s=T(e);return P(t,function(e,a){var r=s.call(i,e,a,t);n(o,r,e)}),o};x.groupBy=function(t,e,i){return D(t,e,i,function(t,e,i){(x.has(t,e)?t[e]:t[e]=[]).push(i)})},x.countBy=function(t,e,i){return D(t,e,i,function(t,e){x.has(t,e)||(t[e]=0),t[e]++})},x.sortedIndex=function(t,e,i,n){i=null==i?x.identity:T(i);for(var o=i.call(n,e),s=0,a=t.length;a>s;){var r=s+a>>>1;o>i.call(n,t[r])?s=r+1:a=r}return s},x.toArray=function(t){return t?t.length===+t.length?r.call(t):x.values(t):[]},x.size=function(t){return t.length===+t.length?t.length:x.keys(t).length},x.first=x.head=x.take=function(t,e,i){return null==e||i?t[0]:r.call(t,0,e)},x.initial=function(t,e,i){return r.call(t,0,t.length-(null==e||i?1:e))},x.last=function(t,e,i){return null==e||i?t[t.length-1]:r.call(t,Math.max(t.length-e,0))},x.rest=x.tail=x.drop=function(t,e,i){return r.call(t,null==e||i?1:e)},x.compact=function(t){return x.filter(t,function(t){return!!t})};var M=function(t,e,i){return P(t,function(t){x.isArray(t)?e?a.apply(i,t):M(t,e,i):i.push(t)}),i};x.flatten=function(t,e){return M(t,e,[])},x.without=function(t){return x.difference(t,r.call(arguments,1))},x.uniq=x.unique=function(t,e,i,n){var o=i?x.map(t,i,n):t,s=[],a=[];return P(o,function(i,n){(e?n&&a[a.length-1]===i:x.contains(a,i))||(a.push(i),s.push(t[n]))}),s},x.union=function(){return x.uniq(h.apply(n,arguments))},x.intersection=function(t){var e=r.call(arguments,1);return x.filter(x.uniq(t),function(t){return x.every(e,function(e){return x.indexOf(e,t)>=0})})},x.difference=function(t){var e=h.apply(n,r.call(arguments,1));return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){for(var t=r.call(arguments),e=x.max(x.pluck(t,"length")),i=Array(e),n=0;e>n;n++)i[n]=x.pluck(t,""+n);return i},x.object=function(t,e){for(var i={},n=0,o=t.length;o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},x.indexOf=function(t,e,i){if(null==t)return-1;var n=0,o=t.length;if(i){if("number"!=typeof i)return n=x.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,o+i):i}if(v&&t.indexOf===v)return t.indexOf(e,i);for(;o>n;n++)if(t[n]===e)return n;return-1},x.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(b&&t.lastIndexOf===b)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var o=n?i:t.length;o--;)if(t[o]===e)return o;return-1},x.range=function(t,e,i){1>=arguments.length&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=0,s=Array(n);n>o;)s[o++]=t,t+=i;return s};var R=function(){};x.bind=function(t,e){var i,n;if(t.bind===C&&C)return C.apply(t,r.call(arguments,1));if(!x.isFunction(t))throw new TypeError;return n=r.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(r.call(arguments)));R.prototype=t.prototype;var o=new R,s=t.apply(o,n.concat(r.call(arguments)));return Object(s)===s?s:o}},x.bindAll=function(t){var e=r.call(arguments,1);return 0==e.length&&(e=x.functions(t)),P(e,function(e){t[e]=x.bind(t[e],t)}),t},x.memoize=function(t,e){var i={};return e||(e=x.identity),function(){var n=e.apply(this,arguments);return x.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},x.delay=function(t,e){var i=r.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},x.defer=function(t){return x.delay.apply(x,[t,1].concat(r.call(arguments,1)))},x.throttle=function(t,e){var i,n,o,s,a,r,h=x.debounce(function(){a=s=!1},e);return function(){i=this,n=arguments;var l=function(){o=null,a&&(r=t.apply(i,n)),h()};return o||(o=setTimeout(l,e)),s?a=!0:(s=!0,r=t.apply(i,n)),h(),r}},x.debounce=function(t,e,i){var n,o;return function(){var s=this,a=arguments,r=function(){n=null,i||(o=t.apply(s,a))},h=i&&!n;return clearTimeout(n),n=setTimeout(r,e),h&&(o=t.apply(s,a)),o}},x.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},x.wrap=function(t,e){return function(){var i=[t];return a.apply(i,arguments),e.apply(this,i)}},x.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},x.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},x.keys=S||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)x.has(t,i)&&(e[e.length]=i);return e},x.values=function(t){var e=[];for(var i in t)x.has(t,i)&&e.push(t[i]);return e},x.pairs=function(t){var e=[];for(var i in t)x.has(t,i)&&e.push([i,t[i]]);return e},x.invert=function(t){var e={};for(var i in t)x.has(t,i)&&(e[t[i]]=i);return e},x.functions=x.methods=function(t){var e=[];for(var i in t)x.isFunction(t[i])&&e.push(i);return e.sort()},x.extend=function(t){return P(r.call(arguments,1),function(e){for(var i in e)t[i]=e[i]}),t},x.pick=function(t){var e={},i=h.apply(n,r.call(arguments,1));return P(i,function(i){i in t&&(e[i]=t[i])}),e},x.omit=function(t){var e={},i=h.apply(n,r.call(arguments,1));for(var o in t)x.contains(i,o)||(e[o]=t[o]);return e},x.defaults=function(t){return P(r.call(arguments,1),function(e){for(var i in e)null==t[i]&&(t[i]=e[i])}),t},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t};var I=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var o=l.call(t);if(o!=l.call(e))return!1;switch(o){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=i.length;s--;)if(i[s]==t)return n[s]==e;i.push(t),n.push(e);var a=0,r=!0;if("[object Array]"==o){if(a=t.length,r=a==e.length)for(;a--&&(r=I(t[a],e[a],i,n)););}else{var h=t.constructor,c=e.constructor;if(h!==c&&!(x.isFunction(h)&&h instanceof h&&x.isFunction(c)&&c instanceof c))return!1;for(var u in t)if(x.has(t,u)&&(a++,!(r=x.has(e,u)&&I(t[u],e[u],i,n))))break;if(r){for(u in e)if(x.has(e,u)&&!a--)break;r=!a}}return i.pop(),n.pop(),r};x.isEqual=function(t,e){return I(t,e,[],[])},x.isEmpty=function(t){if(null==t)return!0;if(x.isArray(t)||x.isString(t))return 0===t.length;for(var e in t)if(x.has(t,e))return!1;return!0},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=w||function(t){return"[object Array]"==l.call(t)},x.isObject=function(t){return t===Object(t)},P(["Arguments","Function","String","Number","Date","RegExp"],function(t){x["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return!(!t||!x.has(t,"callee"))}),x.isFunction=function(t){return"function"==typeof t},x.isFinite=function(t){return x.isNumber(t)&&isFinite(t)},x.isNaN=function(t){return x.isNumber(t)&&t!=+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return c.call(t,e)},x.noConflict=function(){return t._=e,this},x.identity=function(t){return t},x.times=function(t,e,i){for(var n=0;t>n;n++)e.call(i,n)},x.random=function(t,e){return null==e&&(e=t,t=0),t+(0|Math.random()*(e-t+1))};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};A.unescape=x.invert(A.escape);var L={escape:RegExp("["+x.keys(A.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(A.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(t){x[t]=function(e){return null==e?"":(""+e).replace(L[t],function(e){return A[t][e]})}}),x.result=function(t,e){if(null==t)return null;var i=t[e];return x.isFunction(i)?i.call(t):i},x.mixin=function(t){P(x.functions(t),function(e){var i=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),$.call(this,i.apply(x,t))}})};var N=0;x.uniqueId=function(t){var e=N++;return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},_=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(t,e,i){i=x.defaults({},i,x.templateSettings);var n=RegExp([(i.escape||z).source,(i.interpolate||z).source,(i.evaluate||z).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(n,function(e,i,n,a,r){s+=t.slice(o,r).replace(_,function(t){return"\\"+F[t]}),s+=i?"'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?"'+\n((__t=("+n+"))==null?'':__t)+\n'":a?"';\n"+a+"\n__p+='":"",o=r+e.length}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var a=Function(i.variable||"obj","_",s)}catch(r){throw r.source=s,r}if(e)return a(e,x);var h=function(t){return a.call(this,t,x)};return h.source="function("+(i.variable||"obj")+"){\n"+s+"}",h},x.chain=function(t){return x(t).chain()};var $=function(t){return this._chain?x(t).chain():t};x.mixin(x),P(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];x.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],$.call(this,i)}}),P(["concat","join","slice"],function(t){var e=n[t];x.prototype[t]=function(){return $.call(this,e.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);

// lib/foss/backbone/backbone.js
(function(){var t,e=this,i=e.Backbone,n=Array.prototype.slice,o=Array.prototype.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="0.9.2";var s=e._;s||"undefined"==typeof require||(s=require("underscore"));var r=e.jQuery||e.Zepto||e.ender;t.setDomLibrary=function(t){r=t},t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=/\s+/,h=t.Events={on:function(t,e,i){var n,o,s,r,h;if(!e)return this;for(t=t.split(a),n=this._callbacks||(this._callbacks={});o=t.shift();)h=n[o],s=h?h.tail:{},s.next=r={},s.context=i,s.callback=e,n[o]={tail:r,next:h?h.next:s};return this},off:function(t,e,i){var n,o,r,h,l,c;if(o=this._callbacks){if(!(t||e||i))return delete this._callbacks,this;for(t=t?t.split(a):s.keys(o);n=t.shift();)if(r=o[n],delete o[n],r&&(e||i))for(h=r.tail;(r=r.next)!==h;)l=r.callback,c=r.context,(e&&l!==e||i&&c!==i)&&this.on(n,l,c);return this}},trigger:function(t){var e,i,o,s,r,h,l;if(!(o=this._callbacks))return this;for(h=o.all,t=t.split(a),l=n.call(arguments,1);e=t.shift();){if(i=o[e])for(s=i.tail;(i=i.next)!==s;)i.callback.apply(i.context||this,l);if(i=h)for(s=i.tail,r=[e].concat(l);(i=i.next)!==s;)i.callback.apply(i.context||this,r)}return this}};h.bind=h.on,h.unbind=h.off;var l=t.Model=function(t,e){var i;t||(t={}),e&&e.parse&&(t=this.parse(t)),(i=T(this,"defaults"))&&(t=s.extend({},i,t)),e&&e.collection&&(this.collection=e.collection),this.attributes={},this._escapedAttributes={},this.cid=s.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(t,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=s.clone(this.attributes),this.initialize.apply(this,arguments)};s.extend(l.prototype,h,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return s.clone(this.attributes)},get:function(t){return this.attributes[t]},escape:function(t){var e;if(e=this._escapedAttributes[t])return e;var i=this.get(t);return this._escapedAttributes[t]=s.escape(null==i?"":""+i)},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,o,r;if(s.isObject(t)||null==t?(n=t,i=e):(n={},n[t]=e),i||(i={}),!n)return this;if(n instanceof l&&(n=n.attributes),i.unset)for(o in n)n[o]=void 0;if(!this._validate(n,i))return!1;this.idAttribute in n&&(this.id=n[this.idAttribute]);var a=i.changes={},h=this.attributes,c=this._escapedAttributes,u=this._previousAttributes||{};for(o in n)r=n[o],(!s.isEqual(h[o],r)||i.unset&&s.has(h,o))&&(delete c[o],(i.silent?this._silent:a)[o]=!0),i.unset?delete h[o]:h[o]=r,s.isEqual(u[o],r)&&s.has(h,o)==s.has(u,o)?(delete this.changed[o],delete this._pending[o]):(this.changed[o]=r,i.silent||(this._pending[o]=!0));return i.silent||this.change(i),this},unset:function(t,e){return(e||(e={})).unset=!0,this.set(t,null,e)},clear:function(t){return(t||(t={})).unset=!0,this.set(s.clone(this.attributes),t)},fetch:function(e){e=e?s.clone(e):{};var i=this,n=e.success;return e.success=function(t,o,s){return i.set(i.parse(t,s),e)?(n&&n(i,t),void 0):!1},e.error=t.wrapError(e.error,i,e),(this.sync||t.sync).call(this,"read",this,e)},save:function(e,i,n){var o,r;if(s.isObject(e)||null==e?(o=e,n=i):(o={},o[e]=i),n=n?s.clone(n):{},n.wait){if(!this._validate(o,n))return!1;r=s.clone(this.attributes)}var a=s.extend({},n,{silent:!0});if(o&&!this.set(o,n.wait?a:n))return!1;var h=this,l=n.success;n.success=function(t,e,i){var r=h.parse(t,i);return n.wait&&(delete n.wait,r=s.extend(o||{},r)),h.set(r,n)?(l?l(h,t):h.trigger("sync",h,t,n),void 0):!1},n.error=t.wrapError(n.error,h,n);var c=this.isNew()?"create":"update",u=(this.sync||t.sync).call(this,c,this,n);return n.wait&&this.set(r,a),u},destroy:function(e){e=e?s.clone(e):{};var i=this,n=e.success,o=function(){i.trigger("destroy",i,i.collection,e)};if(this.isNew())return o(),!1;e.success=function(t){e.wait&&o(),n?n(i,t):i.trigger("sync",i,t,e)},e.error=t.wrapError(e.error,i,e);var r=(this.sync||t.sync).call(this,"delete",this,e);return e.wait||o(),r},url:function(){var t=T(this,"urlRoot")||T(this.collection,"url")||R();return this.isNew()?t:t+("/"==t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(t){t||(t={});var e=this._changing;this._changing=!0;for(var i in this._silent)this._pending[i]=!0;var n=s.extend({},t.changes,this._silent);this._silent={};for(var i in n)this.trigger("change:"+i,this,this.get(i),t);if(e)return this;for(;!s.isEmpty(this._pending);){this._pending={},this.trigger("change",this,t);for(var i in this.changed)this._pending[i]||this._silent[i]||delete this.changed[i];this._previousAttributes=s.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(t){return arguments.length?s.has(this.changed,t):!s.isEmpty(this.changed)},changedAttributes:function(t){if(!t)return this.hasChanged()?s.clone(this.changed):!1;var e,i=!1,n=this._previousAttributes;for(var o in t)s.isEqual(n[o],e=t[o])||((i||(i={}))[o]=e);return i},previous:function(t){return arguments.length&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(t,e){if(e.silent||!this.validate)return!0;t=s.extend({},this.attributes,t);var i=this.validate(t,e);return i?(e&&e.error?e.error(this,i,e):this.trigger("error",this,i,e),!1):!0}});var c=t.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,{silent:!0,parse:e.parse})};s.extend(c.prototype,h,{model:l,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},add:function(t,e){var i,n,r,a,h,l,c={},u={},d=[];for(e||(e={}),t=s.isArray(t)?t.slice():[t],i=0,r=t.length;r>i;i++){if(!(a=t[i]=this._prepareModel(t[i],e)))throw Error("Can't add an invalid model to a collection");h=a.cid,l=a.id,c[h]||this._byCid[h]||null!=l&&(u[l]||this._byId[l])?d.push(i):c[h]=u[l]=a}for(i=d.length;i--;)t.splice(d[i],1);for(i=0,r=t.length;r>i;i++)(a=t[i]).on("all",this._onModelEvent,this),this._byCid[a.cid]=a,null!=a.id&&(this._byId[a.id]=a);if(this.length+=r,n=null!=e.at?e.at:this.models.length,o.apply(this.models,[n,0].concat(t)),this.comparator&&this.sort({silent:!0}),e.silent)return this;for(i=0,r=this.models.length;r>i;i++)c[(a=this.models[i]).cid]&&(e.index=i,a.trigger("add",a,this,e));return this},remove:function(t,e){var i,n,o,r;for(e||(e={}),t=s.isArray(t)?t.slice():[t],i=0,n=t.length;n>i;i++)r=this.getByCid(t[i])||this.get(t[i]),r&&(delete this._byId[r.id],delete this._byCid[r.cid],o=this.indexOf(r),this.models.splice(o,1),this.length--,e.silent||(e.index=o,r.trigger("remove",r,this,e)),this._removeReference(r));return this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,e),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,s.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t]},getByCid:function(t){return t&&this._byCid[t.cid||t]},at:function(t){return this.models[t]},where:function(t){return s.isEmpty(t)?[]:this.filter(function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},sort:function(t){if(t||(t={}),!this.comparator)throw Error("Cannot sort a set without a comparator");var e=s.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("reset",this,t),this},pluck:function(t){return s.map(this.models,function(e){return e.get(t)})},reset:function(t,e){t||(t=[]),e||(e={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return this._reset(),this.add(t,s.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},fetch:function(e){e=e?s.clone(e):{},void 0===e.parse&&(e.parse=!0);var i=this,n=e.success;return e.success=function(t,o,s){i[e.add?"add":"reset"](i.parse(t,s),e),n&&n(i,t)},e.error=t.wrapError(e.error,i,e),(this.sync||t.sync).call(this,"read",this,e)},create:function(t,e){var i=this;if(e=e?s.clone(e):{},t=this._prepareModel(t,e),!t)return!1;e.wait||i.add(t,e);var n=e.success;return e.success=function(o,s){e.wait&&i.add(o,e),n?n(o,s):o.trigger("sync",t,s,e)},t.save(null,e),t},parse:function(t){return t},chain:function(){return s(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(t,e){if(e||(e={}),t instanceof l)t.collection||(t.collection=this);else{var i=t;e.collection=this,t=new this.model(i,e),t._validate(t.attributes,e)||(t=!1)}return t},_removeReference:function(t){this==t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!=t&&"remove"!=t||i==this)&&("destroy"==t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],this._byId[e.id]=e),this.trigger.apply(this,arguments))}});var u=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];s.each(u,function(t){c.prototype[t]=function(){return s[t].apply(s,[this.models].concat(s.toArray(arguments)))}});var d=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},g=/:\w+/g,f=/\*\w+/g,p=/[-[\]{}()+?.,\\^$|#\s]/g;s.extend(d.prototype,h,{initialize:function(){},route:function(e,i,n){return t.history||(t.history=new m),s.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[i]),t.history.route(e,s.bind(function(o){var s=this._extractParameters(e,o);n&&n.apply(this,s),this.trigger.apply(this,["route:"+i].concat(s)),t.history.trigger("route",this,i,s)},this)),this},navigate:function(e,i){t.history.navigate(e,i)},_bindRoutes:function(){if(this.routes){var t=[];for(var e in this.routes)t.unshift([e,this.routes[e]]);for(var i=0,n=t.length;n>i;i++)this.route(t[i][0],t[i][1],this[t[i][1]])}},_routeToRegExp:function(t){return t=t.replace(p,"\\$&").replace(g,"([^/]+)").replace(f,"(.*?)"),RegExp("^"+t+"$")},_extractParameters:function(t,e){return t.exec(e).slice(1)}});var m=t.History=function(){this.handlers=[],s.bindAll(this,"checkUrl")},y=/^[#\/]/,v=/msie [\w.]+/;m.started=!1,s.extend(m.prototype,h,{interval:50,getHash:function(t){var e=t?t.location:window.location,i=e.href.match(/#(.*)$/);return i?i[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||e){t=window.location.pathname;var i=window.location.search;i&&(t+=i)}else t=this.getHash();return t.indexOf(this.options.root)||(t=t.substr(this.options.root.length)),t.replace(y,"")},start:function(t){if(m.started)throw Error("Backbone.history has already been started");m.started=!0,this.options=s.extend({},{root:"/"},this.options,t),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var e=this.getFragment(),i=document.documentMode,n=v.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);n&&(this.iframe=r('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?r(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?r(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var o=window.location,a=o.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&o.hash&&(this.fragment=this.getHash().replace(y,""),window.history.replaceState({},document.title,o.protocol+"//"+o.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){r(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),m.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t==this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t==this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=s.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return i},navigate:function(t,e){if(!m.started)return!1;e&&e!==!0||(e={trigger:e});var i=(t||"").replace(y,"");this.fragment!=i&&(this._hasPushState?(0!=i.indexOf(this.options.root)&&(i=this.options.root+i),this.fragment=i,window.history[e.replace?"replaceState":"pushState"]({},document.title,i)):this._wantsHashChange?(this.fragment=i,this._updateHash(window.location,i,e.replace),this.iframe&&i!=this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,i,e.replace))):window.location.assign(this.options.root+t),e.trigger&&this.loadUrl(t))},_updateHash:function(t,e,i){i?t.replace((""+t).replace(/(javascript:|#).*$/,"")+"#"+e):t.hash=e}});var b=t.View=function(t){this.cid=s.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName"];s.extend(b.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(t,e,i){var n=document.createElement(t);return e&&r(n).attr(e),i&&r(n).html(i),n},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof r?t:r(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(t||(t=T(this,"events"))){this.undelegateEvents();for(var e in t){var i=t[e];if(s.isFunction(i)||(i=this[t[e]]),!i)throw Error('Method "'+t[e]+'" does not exist');var n=e.match(w),o=n[1],r=n[2];i=s.bind(i,this),o+=".delegateEvents"+this.cid,""===r?this.$el.bind(o,i):this.$el.delegate(r,o,i)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(t){this.options&&(t=s.extend({},this.options,t));for(var e=0,i=S.length;i>e;e++){var n=S[e];t[n]&&(this[n]=t[n])}this.options=t},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var t=T(this,"attributes")||{};this.id&&(t.id=this.id),this.className&&(t["class"]=this.className),this.setElement(this.make(this.tagName,t),!1)}}});var C=function(t,e){var i=k(this,t,e);return i.extend=this.extend,i};l.extend=c.extend=d.extend=b.extend=C;var x={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};t.sync=function(e,i,n){var o=x[e];n||(n={});var a={type:o,dataType:"json"};return n.url||(a.url=T(i,"url")||R()),n.data||!i||"create"!=e&&"update"!=e||(a.contentType="application/json",a.data=JSON.stringify(i.toJSON())),t.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),t.emulateHTTP&&("PUT"===o||"DELETE"===o)&&(t.emulateJSON&&(a.data._method=o),a.type="POST",a.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",o)}),"GET"===a.type||t.emulateJSON||(a.processData=!1),r.ajax(s.extend(a,n))},t.wrapError=function(t,e,i){return function(n,o){o=n===e?o:n,t?t(e,o,i):e.trigger("error",e,o,i)}};var P=function(){},k=function(t,e,i){var n;return n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){t.apply(this,arguments)},s.extend(n,t),P.prototype=t.prototype,n.prototype=new P,e&&s.extend(n.prototype,e),i&&s.extend(n,i),n.prototype.constructor=n,n.__super__=t.prototype,n},T=function(t,e){return t&&t[e]?s.isFunction(t[e])?t[e]():t[e]:null},R=function(){throw Error('A "url" property or function must be specified')}}).call(this);

// lib/foss/qrcode.js
var qrcode=function(){function t(e,i){if(e.length===void 0)throw Error(e.length+"/"+i);var n=function(){for(var t=0;e.length>t&&0==e[t];)t++;for(var n=Array(e.length-t+i),o=0;e.length-t>o;o++)n[o]=e[o+t];return n}(),o={};return o.get=function(t){return n[t]},o.getLength=function(){return n.length},o.multiply=function(e){for(var i=[],n=0;o.getLength()>n;n++)for(var s=0;e.getLength()>s;s++)i[n+s]^=r.gexp(r.glog(o.get(n))+r.glog(e.get(s)));return t(i,0)},o.mod=function(e){if(0>o.getLength()-e.getLength())return o;for(var i=r.glog(o.get(0))-r.glog(e.get(0)),n=[],s=0;o.getLength()>s;s++)n[s]=o.get(s);for(var s=0;e.getLength()>s;s++)n[s]^=r.gexp(r.glog(e.get(s))+i);return t(n,0).mod(e)},o}var e=function(e,i){var o=236,r=17,c=e,u=n[i],d=null,g=0,p=null,m=[],y={},v=function(t,e){g=4*c+17,d=function(t){for(var e=[],i=0;t>i;i++){e[i]=[];for(var n=0;t>n;n++)e[i][n]=null}return e}(g),b(0,0),b(g-7,0),b(0,g-7),C(),S(),k(t,e),c>=7&&x(t),null==p&&(p=M(c,u,m)),P(p,e)},b=function(t,e){for(var i=-1;7>=i;i++)if(!(-1>=t+i||t+i>=g))for(var n=-1;7>=n;n++)-1>=e+n||e+n>=g||(d[t+i][e+n]=i>=0&&6>=i&&(0==n||6==n)||n>=0&&6>=n&&(0==i||6==i)||i>=2&&4>=i&&n>=2&&4>=n?!0:!1)},w=function(){for(var t=0,e=0,i=0;8>i;i++){v(!0,i);var n=s.getLostPoint(y);(0==i||t>n)&&(t=n,e=i)}return e},S=function(){for(var t=8;g-8>t;t++)null==d[t][6]&&(d[t][6]=0==t%2);for(var e=8;g-8>e;e++)null==d[6][e]&&(d[6][e]=0==e%2)},C=function(){for(var t=s.getPatternPosition(c),e=0;t.length>e;e++)for(var i=0;t.length>i;i++){var n=t[e],o=t[i];if(null==d[n][o])for(var r=-2;2>=r;r++)for(var a=-2;2>=a;a++)d[n+r][o+a]=-2==r||2==r||-2==a||2==a||0==r&&0==a?!0:!1}},x=function(t){for(var e=s.getBCHTypeNumber(c),i=0;18>i;i++){var n=!t&&1==(1&e>>i);d[Math.floor(i/3)][i%3+g-8-3]=n}for(var i=0;18>i;i++){var n=!t&&1==(1&e>>i);d[i%3+g-8-3][Math.floor(i/3)]=n}},k=function(t,e){for(var i=u<<3|e,n=s.getBCHTypeInfo(i),o=0;15>o;o++){var r=!t&&1==(1&n>>o);6>o?d[o][8]=r:8>o?d[o+1][8]=r:d[g-15+o][8]=r}for(var o=0;15>o;o++){var r=!t&&1==(1&n>>o);8>o?d[8][g-o-1]=r:9>o?d[8][15-o-1+1]=r:d[8][15-o-1]=r}d[g-8][8]=!t},P=function(t,e){for(var i=-1,n=g-1,o=7,r=0,a=s.getMaskFunction(e),h=g-1;h>0;h-=2)for(6==h&&(h-=1);;){for(var l=0;2>l;l++)if(null==d[n][h-l]){var c=!1;t.length>r&&(c=1==(1&t[r]>>>o));var u=a(n,h-l);u&&(c=!c),d[n][h-l]=c,o-=1,-1==o&&(r++,o=7)}if(n+=i,0>n||n>=g){n-=i,i=-i;break}}},T=function(e,i){for(var n=0,o=0,r=0,a=[],h=[],l=0;i.length>l;l++){var c=i[l].dataCount,u=i[l].totalCount-c;o=Math.max(o,c),r=Math.max(r,u),a[l]=[];for(var d=0;c>d;d++)a[l][d]=255&e.getBuffer()[d+n];n+=c;var g=s.getErrorCorrectPolynomial(u),f=g.getLength()-1,p=t(a[l],f),m=p.mod(g);h[l]=[];for(var d=0;f>d;d++){var y=d+m.getLength()-f;h[l][d]=y>=0?m.get(y):0}}for(var v=0,d=0;i.length>d;d++)v+=i[d].totalCount;for(var b=[],w=0,d=0;o>d;d++)for(var l=0;i.length>l;l++)a[l].length>d&&(b[w]=a[l][d],w++);for(var d=0;r>d;d++)for(var l=0;i.length>l;l++)h[l].length>d&&(b[w]=h[l][d],w++);return b},M=function(t,e,i){for(var n=a.getRSBlocks(t,e),l=h(),c=0;i.length>c;c++){var u=i[c];l.put(u.getMode(),4),l.put(u.getLength(),s.getLengthInBits(u.getMode(),t)),u.write(l)}for(var d=0,c=0;n.length>c;c++)d+=n[c].dataCount;if(l.getLengthInBits()>8*d)throw Error("code length overflow. ("+l.getLengthInBits()+">"+8*d+")");for(8*d>=l.getLengthInBits()+4&&l.put(0,4);0!=l.getLengthInBits()%8;)l.putBit(!1);for(;;){if(l.getLengthInBits()>=8*d)break;if(l.put(o,8),l.getLengthInBits()>=8*d)break;l.put(r,8)}return T(l,n)};return y.addData=function(t){var e=l(t);m.push(e),p=null},y.isDark=function(t,e){if(0>t||t>=g||0>e||e>=g)throw Error(t+","+e);return d[t][e]},y.getModuleCount=function(){return g},y.make=function(){v(!1,w())},y.createTableTag=function(t,e){t=t||2,e=e===void 0?4*t:e;var i="";i+='<table style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: "+e+"px;",i+='">',i+="<tbody>";for(var n=0;y.getModuleCount()>n;n++){i+="<tr>";for(var o=0;y.getModuleCount()>o;o++)i+='<td style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: 0px;",i+=" width: "+t+"px;",i+=" height: "+t+"px;",i+=" background-color: ",i+=y.isDark(n,o)?"#000000":"#ffffff",i+=";",i+='"/>';i+="</tr>"}return i+="</tbody>",i+="</table>"},y.createImgTag=function(t,e){t=t||2,e=e===void 0?4*t:e;var i=y.getModuleCount()*t+2*e,n=e,o=i-e;return f(i,i,function(e,i){if(e>=n&&o>e&&i>=n&&o>i){var s=Math.floor((e-n)/t),r=Math.floor((i-n)/t);return y.isDark(r,s)?0:1}return 1})},y.createSVGPath=function(t){t=t||2;for(var e="",i=y.getModuleCount(),n=0;i>n;n++)for(var o=0;i>o;o++)y.isDark(n,o)&&(e+="M"+o*t+","+n*t+"h"+t+"v"+t+"h-"+t+"z");return{d:e,size:i*t,toString:function(){return this.d}}},y};e.stringToBytes=function(t){for(var e=[],i=0;t.length>i;i++){var n=t.charCodeAt(i);e.push(255&n)}return e},e.createStringToBytes=function(t,e){var i=function(){for(var i=d(t),n=function(){var t=i.read();if(-1==t)throw Error();return t},o=0,s={};;){var r=i.read();if(-1==r)break;var a=n(),h=n(),l=n(),c=String.fromCharCode(r<<8|a),u=h<<8|l;s[c]=u,o++}if(o!=e)throw Error(o+" != "+e);return s}(),n="?".charCodeAt(0);return function(t){for(var e=[],o=0;t.length>o;o++){var s=t.charCodeAt(o);if(128>s)e.push(s);else{var r=i[t.charAt(o)];"number"==typeof r?(255&r)==r?e.push(r):(e.push(r>>>8),e.push(255&r)):e.push(n)}}return e}};var i={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},n={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},s=function(){var e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,s=7973,a=21522,h={},l=function(t){for(var e=0;0!=t;)e++,t>>>=1;return e};return h.getBCHTypeInfo=function(t){for(var e=t<<10;l(e)-l(n)>=0;)e^=n<<l(e)-l(n);return(t<<10|e)^a},h.getBCHTypeNumber=function(t){for(var e=t<<12;l(e)-l(s)>=0;)e^=s<<l(e)-l(s);return t<<12|e},h.getPatternPosition=function(t){return e[t-1]},h.getMaskFunction=function(t){switch(t){case o.PATTERN000:return function(t,e){return 0==(t+e)%2};case o.PATTERN001:return function(t){return 0==t%2};case o.PATTERN010:return function(t,e){return 0==e%3};case o.PATTERN011:return function(t,e){return 0==(t+e)%3};case o.PATTERN100:return function(t,e){return 0==(Math.floor(t/2)+Math.floor(e/3))%2};case o.PATTERN101:return function(t,e){return 0==t*e%2+t*e%3};case o.PATTERN110:return function(t,e){return 0==(t*e%2+t*e%3)%2};case o.PATTERN111:return function(t,e){return 0==(t*e%3+(t+e)%2)%2};default:throw Error("bad maskPattern:"+t)}},h.getErrorCorrectPolynomial=function(e){for(var i=t([1],0),n=0;e>n;n++)i=i.multiply(t([1,r.gexp(n)],0));return i},h.getLengthInBits=function(t,e){if(e>=1&&10>e)switch(t){case i.MODE_NUMBER:return 10;case i.MODE_ALPHA_NUM:return 9;case i.MODE_8BIT_BYTE:return 8;case i.MODE_KANJI:return 8;default:throw Error("mode:"+t)}else if(27>e)switch(t){case i.MODE_NUMBER:return 12;case i.MODE_ALPHA_NUM:return 11;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 10;default:throw Error("mode:"+t)}else{if(!(41>e))throw Error("type:"+e);switch(t){case i.MODE_NUMBER:return 14;case i.MODE_ALPHA_NUM:return 13;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 12;default:throw Error("mode:"+t)}}},h.getLostPoint=function(t){for(var e=t.getModuleCount(),i=0,n=0;e>n;n++)for(var o=0;e>o;o++){for(var s=0,r=t.isDark(n,o),a=-1;1>=a;a++)if(!(0>n+a||n+a>=e))for(var h=-1;1>=h;h++)0>o+h||o+h>=e||(0!=a||0!=h)&&r==t.isDark(n+a,o+h)&&s++;s>5&&(i+=3+s-5)}for(var n=0;e-1>n;n++)for(var o=0;e-1>o;o++){var l=0;t.isDark(n,o)&&l++,t.isDark(n+1,o)&&l++,t.isDark(n,o+1)&&l++,t.isDark(n+1,o+1)&&l++,(0==l||4==l)&&(i+=3)}for(var n=0;e>n;n++)for(var o=0;e-6>o;o++)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(i+=40);for(var o=0;e>o;o++)for(var n=0;e-6>n;n++)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(i+=40);for(var c=0,o=0;e>o;o++)for(var n=0;e>n;n++)t.isDark(n,o)&&c++;var u=Math.abs(100*c/e/e-50)/5;return i+=10*u},h}(),r=function(){for(var t=[],e=[],i=0;8>i;i++)t[i]=1<<i;for(var i=8;256>i;i++)t[i]=t[i-4]^t[i-5]^t[i-6]^t[i-8];for(var i=0;255>i;i++)e[t[i]]=i;var n={};return n.glog=function(t){if(1>t)throw Error("glog("+t+")");return e[t]},n.gexp=function(e){for(;0>e;)e+=255;for(;e>=256;)e-=255;return t[e]},n}(),a=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]],e=function(t,e){var i={};return i.totalCount=t,i.dataCount=e,i},i={},o=function(e,i){switch(i){case n.L:return t[4*(e-1)+0];case n.M:return t[4*(e-1)+1];case n.Q:return t[4*(e-1)+2];case n.H:return t[4*(e-1)+3];default:return void 0}};return i.getRSBlocks=function(t,i){var n=o(t,i);if(n===void 0)throw Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+i);for(var s=n.length/3,r=[],a=0;s>a;a++)for(var h=n[3*a+0],l=n[3*a+1],c=n[3*a+2],u=0;h>u;u++)r.push(e(l,c));return r},i}(),h=function(){var t=[],e=0,i={};return i.getBuffer=function(){return t},i.get=function(e){var i=Math.floor(e/8);return 1==(1&t[i]>>>7-e%8)},i.put=function(t,e){for(var n=0;e>n;n++)i.putBit(1==(1&t>>>e-n-1))},i.getLengthInBits=function(){return e},i.putBit=function(i){var n=Math.floor(e/8);n>=t.length&&t.push(0),i&&(t[n]|=128>>>e%8),e++},i},l=function(t){var n=i.MODE_8BIT_BYTE,o=e.stringToBytes(t),s={};return s.getMode=function(){return n},s.getLength=function(){return o.length},s.write=function(t){for(var e=0;o.length>e;e++)t.put(o[e],8)},s},c=function(){var t=[],e={};return e.writeByte=function(e){t.push(255&e)},e.writeShort=function(t){e.writeByte(t),e.writeByte(t>>>8)},e.writeBytes=function(t,i,n){i=i||0,n=n||t.length;for(var o=0;n>o;o++)e.writeByte(t[o+i])},e.writeString=function(t){for(var i=0;t.length>i;i++)e.writeByte(t.charCodeAt(i))},e.toByteArray=function(){return t},e.toString=function(){var e="";e+="[";for(var i=0;t.length>i;i++)i>0&&(e+=","),e+=t[i];return e+="]"},e},u=function(){var t=0,e=0,i=0,n="",o={},s=function(t){n+=String.fromCharCode(r(63&t))},r=function(t){if(0>t);else{if(26>t)return 65+t;if(52>t)return 97+(t-26);if(62>t)return 48+(t-52);if(62==t)return 43;if(63==t)return 47}throw Error("n:"+t)};return o.writeByte=function(n){for(t=t<<8|255&n,e+=8,i++;e>=6;)s(t>>>e-6),e-=6},o.flush=function(){if(e>0&&(s(t<<6-e),t=0,e=0),0!=i%3)for(var o=3-i%3,r=0;o>r;r++)n+="="},o.toString=function(){return n},o},d=function(t){var e=t,i=0,n=0,o=0,s={};s.read=function(){for(;8>o;){if(i>=e.length){if(0==o)return-1;throw Error("unexpected end of file./"+o)}var t=e.charAt(i);if(i++,"="==t)return o=0,-1;t.match(/^\s$/)||(n=n<<6|r(t.charCodeAt(0)),o+=6)}var s=255&n>>>o-8;return o-=8,s};var r=function(t){if(t>=65&&90>=t)return t-65;if(t>=97&&122>=t)return t-97+26;if(t>=48&&57>=t)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw Error("c:"+t)};return s},g=function(t,e){var i=t,n=e,o=[],s={};s.setPixel=function(t,e,n){o[e*i+t]=n},s.write=function(t){t.writeString("GIF87a"),t.writeShort(i),t.writeShort(n),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(i),t.writeShort(n),t.writeByte(0);var e=2,o=a(e);t.writeByte(e);for(var s=0;o.length-s>255;)t.writeByte(255),t.writeBytes(o,s,255),s+=255;t.writeByte(o.length-s),t.writeBytes(o,s,o.length-s),t.writeByte(0),t.writeString(";")};var r=function(t){var e=t,i=0,n=0,o={};return o.write=function(t,o){if(0!=t>>>o)throw Error("length over");for(;i+o>=8;)e.writeByte(255&(t<<i|n)),o-=8-i,t>>>=8-i,n=0,i=0;n=t<<i|n,i+=o},o.flush=function(){i>0&&e.writeByte(n)},o},a=function(t){for(var e=1<<t,i=(1<<t)+1,n=t+1,s=h(),a=0;e>a;a++)s.add(String.fromCharCode(a));s.add(String.fromCharCode(e)),s.add(String.fromCharCode(i));var l=c(),u=r(l);u.write(e,n);var d=0,g=String.fromCharCode(o[d]);for(d++;o.length>d;){var f=String.fromCharCode(o[d]);d++,s.contains(g+f)?g+=f:(u.write(s.indexOf(g),n),4095>s.size()&&(s.size()==1<<n&&n++,s.add(g+f)),g=f)}return u.write(s.indexOf(g),n),u.write(i,n),u.flush(),l.toByteArray()},h=function(){var t={},e=0,i={};return i.add=function(n){if(i.contains(n))throw Error("dup key:"+n);t[n]=e,e++},i.size=function(){return e},i.indexOf=function(e){return t[e]},i.contains=function(e){return t[e]!==void 0},i};return s},f=function(t,e,i,n){for(var o=g(t,e),s=0;e>s;s++)for(var r=0;t>r;r++)o.setPixel(r,s,i(r,s));var a=c();o.write(a);for(var h=u(),l=a.toByteArray(),d=0;l.length>d;d++)h.writeByte(l[d]);h.flush();var f="";return f+="<img",f+=' src="',f+="data:image/gif;base64,",f+=h,f+='"',f+=' width="',f+=t,f+='"',f+=' height="',f+=e,f+='"',n&&(f+=' alt="',f+=n,f+='"'),f+="/>"};return e}();

// source/I18n.js
var AresI18n={},origin=window.location.origin||window.location.protocol+"//"+window.location.host,req=new enyo.Ajax({url:origin+"/res/language"});req.response(function(t,e){e.language?(enyo.log("Ares forced language:",e.language),AresI18n.spec=e.language):AresI18n.spec=navigator.language}),req.error(function(t,e){enyo.log("inError",e)}),req.go(),function(){var t=function(t,e){var i;if("string"==typeof e)i=t.getString(e);else{if("object"!=typeof e)throw"Parameter 'string' is not an object.";if(void 0===e.key||void 0===e.value)throw"Parameter 'string' is not well defined.";i=t.getString(e.value,e.key)}return""+i};AresI18n.resolve=function(e,i,n){var o=t(e,i);if(n){var s=new ilib.String(o);return s.format(n)}return o},AresI18n.setBundle=function(t){return new ilib.ResBundle({locale:new ilib.Locale(AresI18n.spec),type:"html",name:"strings",sync:!0,lengthen:!0,loadParams:{root:t}})}}();

// source/Ares.js
enyo.path.addPaths({assets:"$enyo/../assets"});var ilibAres=AresI18n.resolve.bind(null,AresI18n.setBundle("$assets/resources")),ilibUtilities=AresI18n.resolve.bind(null,AresI18n.setBundle("$assets/utilities/resources"));enyo.kind({name:"Ares",kind:"Control",classes:"onyx",fit:!0,debug:!1,components:[{name:"aresLayoutPanels",kind:"Panels",draggable:!1,arrangerKind:"CollapsingArranger",fit:!0,classes:"ares-main-panels enyo-border-box",onTransitionFinish:"changeGrabberDirection",components:[{name:"projectView",kind:"ProjectView",classes:"ares-panel-min-width "},{kind:"Harmonia",name:"harmonia",classes:"ares-panel-min-width enyo-fit",onFileOpenRequest:"openDocument",onFileRemoved:"closeDocument",onFolderChanged:"closeSomeDocuments",onModifySettings:"modifySettingsAction",onPreview:"previewAction",onBuild:"buildAction",onInstall:"installAction",onRun:"runAction",onRunDebug:"runDebugAction",onProjectSave:"saveProjectFiles"},{kind:"Ares.EnyoEditor",name:"enyoEditor"}]},{name:"waitPopup",kind:"onyx.Popup",centered:!0,floating:!0,autoDismiss:!1,modal:!0,style:"text-align: center; padding: 20px; width: 200px;",components:[{kind:"Image",src:"$assets/enyo-editor/phobos/images/save-spinner.gif",style:"width: 54px; height: 55px;"},{name:"waitPopupMessage",content:ilibAres("Ongoing..."),style:"padding-top: 10px;"},{kind:"onyx.Button",name:"canceBuildButton",content:ilibAres("Cancel"),ontap:"cancelService",style:"margin-top: 10px;",showing:!1}]},{name:"errorPopup",kind:"Ares.ErrorPopup",msg:ilibAres("Unknown error"),details:""},{name:"signInErrorPopup",kind:"Ares.SignInErrorPopup",msg:ilibAres("Unknown error"),details:""},{kind:"ServiceRegistry"},{kind:"Ares.PackageMunger",name:"packageMunger"}],handlers:{onReloadServices:"handleReloadServices",onUpdateAuth:"handleUpdateAuth",onShowWaitPopup:"showWaitPopup",onHideWaitPopup:"hideWaitPopup",onError:"showError",onDesignerBroken:"showDesignerError",onSignInError:"showAccountConfiguration",onTreeChanged:"_treeChanged",onFsEvent:"_fsEventAction",onChangingNode:"_nodeChanging",onAllDocumentsAreClosed:"showProjectView",onRegisterMe:"_registerComponent",onMovePanel:"_movePanel",onChangeSettings:"applyPreviewSettings",onChangeRightPane:"changeRightPane",onApplySettings:"applySettings",onDisableProjectMenu:"disableProjectMenu"},projectListIndex:0,hermesFileTreeIndex:1,enyoEditorIndex:2,projectListWidth:300,isProjectView:!0,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this._registerComponent(null,{name:"ares",reference:this}),ComponentsRegistry.getComponent("enyoEditor").showPhobosPanel(),ServiceRegistry.instance.setOwner(this),window.onbeforeunload=enyo.bind(this,"handleBeforeUnload"),Ares.TestController?(Ares.Workspace.loadProjects("com.enyojs.ares.tests",!0),this.createComponent({kind:"Ares.TestController",aresObj:this})):Ares.Workspace.loadProjects(),Ares.instance=this,this.trace("ilibAres: Cancel=",ilibAres("Cancel")),this.trace("ilibUtilities: Close=",ilibUtilities("Close"))},rendered:function(){this.inherited(arguments),this.showProjectView()},handleReloadServices:function(t,e){this.trace("sender:",t,", event:",e),this.$.serviceRegistry.reloadServices()},handleUpdateAuth:function(t,e){this.trace("sender:",t,", event:",e),this.$.serviceRegistry.setConfig(e.serviceId,{auth:e.auth},e.next)},openDocument:function(t,e){this._openDocument(e.projectData,e.file,ares.noNext)},onGoingOpen:!1,_openDocument:function(t,e,i){ares.assertCb(i);var n=Ares.Workspace.files.computeId(e),o=ComponentsRegistry.getComponent("enyoEditor");if(!n)throw Error("Undefined fileId for file "+e.name+" service "+e.service);var s=Ares.Workspace.files.get(n);if(this.onGoingOpen){var r="Aborted: openDocument is already on-going";return this.log(r),i(Error(r)),void 0}this.onGoingOpen=!0;var a=function(t){this.onGoingOpen=!1,i(t)}.bind(this),h=Ares.Workspace.files.length?function(t){t()}:function(t){this.hideProjectView(),t()};this.trace("open document with project ",t.getName()," file ",e.name," using cache ",s),s?o.switchToDocument(s,ilibAres("Switching file..."),a):(this.showWaitPopup(this,{msg:ilibAres("Fetching file...")}),async.waterfall([this._fetchDocument.bind(this,t,e),o.switchToNewTabAndDoc.bind(o,t,e),h.bind(this)],function(t){this.hideWaitPopup(),a(t)}.bind(this)))},_fetchDocument:function(t,e,i){this.trace("project name:",t.getName(),", file name:",e.name);var n=t.getService();n.getFile(e.id).response(this,function(t,e){i(null,e&&e.content||"")}).error(this,function(t,e){i(e)})},closeSomeDocuments:function(t,e){this.trace("sender:",t,", event:",e);var i,n,o=Ares.Workspace.files;for(n=0;o.models.length>n;n++){i=o.models[n];var s=i.getFile().path,r=i.getProjectData().getServiceId();r==e.projectData.getServiceId()&&s.indexOf(e.file.path,0)>=0&&(this._closeDocument(i.id),n--)}},closeDocument:function(t,e){this._closeDocument(e.id)},_closeDocument:function(t){ComponentsRegistry.getComponent("enyoEditor").closeDoc(t,ares.noNext)},_fsEventAction:function(t,e){var i=ComponentsRegistry.getComponent("harmonia");i.refreshFileTree(e.nodeId)},saveProjectFiles:function(t,e){ComponentsRegistry.getComponent("enyoEditor").saveProjectDocsWithCb(e.project,e.callback)},handleBeforeUnload:function(){return-1==window.location.search.indexOf("debug")?"You may have some unsaved data":void 0},_calcPanelWidth:function(t){var e=this.$.aresLayoutPanels.hasNode();this.aresContainerBounds=e?{width:e.clientWidth,height:e.clientHeight}:{},t.applyStyle("width",this.aresContainerBounds.width-this.projectListWidth+"px")},hideProjectView:function(){this.isProjectView=!1,this.$.aresLayoutPanels.getPanels()[this.hermesFileTreeIndex].applyStyle("width",null);var t=ComponentsRegistry.getComponent("harmonia");t.addClass("ares-small-screen"),this.$.aresLayoutPanels.reflow(),this.$.aresLayoutPanels.setIndexDirect(this.hermesFileTreeIndex),t.showGrabber(),t.hideLogo()},showProjectView:function(){this.isProjectView=!0;var t=ComponentsRegistry.getComponent("harmonia");t.removeClass("ares-small-screen"),this.$.aresLayoutPanels.setIndex(this.projectListIndex),this.$.aresLayoutPanels.getPanels()[this.enyoEditorIndex].switchGrabberDirection(!1),this._calcPanelWidth(this.$.aresLayoutPanels.getPanels()[this.hermesFileTreeIndex]),this.$.aresLayoutPanels.reflow(),t.hideGrabber(),t.showLogo()},changeGrabberDirection:function(t,e){if(e.toIndex>0&&e.fromIndex<e.toIndex)for(var i=1;e.toIndex>=i;i++)this.$.aresLayoutPanels.getPanels()[i].switchGrabberDirection(!0);e.fromIndex>e.toIndex&&this.$.aresLayoutPanels.getPanels()[e.fromIndex].switchGrabberDirection(!1)},_movePanel:function(t,e){e.panelIndex===this.$.aresLayoutPanels.getIndex()?this.$.aresLayoutPanels.previous():this.$.aresLayoutPanels.setIndex(e.panelIndex)},resizeHandler:function(){this.inherited(arguments),this.$.aresLayoutPanels.getIndex()===this.projectListIndex&&this.isProjectView&&this._calcPanelWidth(this.$.aresLayoutPanels.getPanels()[this.hermesFileTreeIndex])},showWaitPopup:function(t,e){"build"===e.service&&this.$.canceBuildButton.show(),this.$.waitPopupMessage.setContent(e.msg),this.$.waitPopup.show()},cancelService:function(){enyo.Signals.send("plugin.phonegap.buildCanceled"),this.hideWaitPopup()},hideWaitPopup:function(){this.$.canceBuildButton.hide(),this.$.waitPopup.hide()},showError:function(t,e){return this.trace("event:",e,"from sender:",t),this.hideWaitPopup(),e&&e.err&&401===e.err.status?this.showSignInErrorPopup(e):this.showErrorPopup(e),!0},showErrorPopup:function(t){this.$.errorPopup.raise(t)},showDesignerError:function(){this.showError("",ComponentsRegistry.getComponent("enyoEditor").getErrorFromDesignerBroken())},showSignInErrorPopup:function(t){this.$.signInErrorPopup.raise(t)},showAccountConfiguration:function(){ComponentsRegistry.getComponent("accountsConfigurator").show(),this.$.signInErrorPopup.hide()},_treeChanged:function(t,e){this.trace("sender:",t,", event:",e),this.$.packageMunger.changeNodes(e,function(t){t&&this.warn(t)}.bind(this))},_nodeChanging:function(t,e){this.trace("sender:",t,", event:",e);var i=Ares.Workspace.files.computeId(e.node);this._closeDocument(i)},applySettings:function(t,e){ComponentsRegistry.getComponent("enyoEditor").applySettings(e.originator.getSettingFromLS())},applyPreviewSettings:function(t,e){ComponentsRegistry.getComponent("enyoEditor").applySettings(e.originator.getPreviewSettings())},changeRightPane:function(t,e){ComponentsRegistry.getComponent("enyoEditor").changeRightPane(e.originator.getPreviewSettings())},_registerComponent:function(t,e){return ComponentsRegistry.registerComponent(e),!0},stopEvent:function(){return!0},disableProjectMenu:function(t,e){var i=e&&e.disable;return ComponentsRegistry.getComponent("harmonia").disableProjectMenu(i),!0},modifySettingsAction:function(t,e){var i=e&&e.project;return i&&ComponentsRegistry.getComponent("projectView").$.projectWizardModify.start(i),!0},previewAction:function(t,e){var i=e&&e.project;return i&&ComponentsRegistry.getComponent("harmonia").launchPreview(i),!0},buildAction:function(t,e){var i=e&&e.project;return i&&ComponentsRegistry.getComponent("harmonia").projectSaveAndAction(i,"build","build"),!0},installAction:function(t,e){var i=e&&e.project;return i&&ComponentsRegistry.getComponent("harmonia").projectSaveAndAction(i,"test","install"),!0},runAction:function(t,e){var i=e&&e.project;return i&&ComponentsRegistry.getComponent("harmonia").projectSaveAndAction(i,"test","run"),!0},runDebugAction:function(t,e){var i=e&&e.project;return i&&ComponentsRegistry.getComponent("harmonia").projectSaveAndAction(i,"test","runDebug"),!0},statics:{isBrowserSupported:function(){return enyo.platform.ie&&8>=enyo.platform.ie?!1:!0},instance:null}}),Ares.isBrowserSupported()||alert(ilibAres("Ares is designed for the latest version of IE. We recommend that you upgrade your browser or use Chrome")),enyo.kind({name:"ComponentsRegistry",debug:!1,kind:"enyo.Object",statics:{components:{},registerComponent:function(t){var e=ComponentsRegistry.components[t.name];if(void 0!==e&&e!==t.reference)throw Error("Component is already registred: '"+t.name+"'");ComponentsRegistry.components[t.name]=t.reference},getComponent:function(t){return ComponentsRegistry.components[t]}}});

// source/Preview.js
enyo.path.addPaths({assets:"$enyo/../assets"}),enyo.kind({name:"PreviewDevicePicker",kind:"onyx.Picker",components:[{content:ilibAres("default"),value:{height:800,width:600,ppi:163,dpr:1},active:!0},{content:"HP Slate 7",value:{height:1024,width:600,ppi:170,dpr:1}},{content:"iPhone\u2122",value:{height:480,width:320,ppi:163,dpr:1}},{content:"iPhone\u2122 4",value:{height:960,width:640,ppi:326,dpr:2}},{content:"iPhone\u2122 5",value:{height:1136,width:640,ppi:326,dpr:2}},{content:"iPad\u2122 Retina",value:{width:2048,height:1536,ppi:264,dpr:2}},{content:"iPad\u2122 2",value:{width:1024,height:768,ppi:132,dpr:1}},{content:"iPad\u2122 mini",value:{width:1024,height:768,ppi:163,dpr:1}},{content:"HDTV",value:{height:1080,width:1920,ppi:163,dpr:1,landscapeOnly:!0}}]}),enyo.kind({name:"Preview",kind:"FittableColumns",classes:"enyo-fit enyo-border-box ares-preview-body",components:[{classes:"ares-preview-tools-panel",components:[{kind:"onyx.Groupbox",classes:"ares-preview-groupbox",components:[{kind:"onyx.GroupboxHeader",content:ilibAres("Project")},{name:"projectName"}]},{kind:"onyx.Groupbox",classes:"ares-preview-groupbox",components:[{kind:"onyx.GroupboxHeader",content:ilibAres("Device")},{kind:"Ares.PickerDecorator",onSelect:"resize",components:[{},{kind:"PreviewDevicePicker",name:"device"}]},{content:ilibAres("width: 600 px"),name:"devWidth"},{content:ilibAres("height: 800 px"),name:"devHeight"},{content:ilibAres("DPR: 1"),name:"devDPR",attributes:{title:ilibAres("display pixel ratio")}}]},{kind:"onyx.Groupbox",classes:"ares-preview-groupbox",components:[{kind:"onyx.GroupboxHeader",content:ilibAres("Screen")},{kind:"Ares.PickerDecorator",onSelect:"resize",components:[{name:"screenPicker"},{kind:"onyx.Picker",name:"orientation",components:[{name:"portrait",content:ilibAres("portrait"),active:!0},{name:"landscape",content:ilibAres("landscape")}]}]},{content:ilibAres("width: 600 px"),name:"screenWidth",attributes:{title:ilibAres("device width divided by DPR")}},{content:ilibAres("height: 800 px"),name:"screenHeight",attributes:{title:ilibAres("device height divided by DPR")}}]},{kind:"onyx.Groupbox",classes:"ares-preview-groupbox",components:[{kind:"onyx.GroupboxHeader",content:ilibAres("Zoom")},{classes:"zoom-slider",components:[{kind:"onyx.RangeSlider",rangeMin:0,rangeMax:400,rangeStart:0,rangeEnd:100,interval:1,onChange:"zoom",onChanging:"zoom"}]},{components:[{tag:"label",classes:"zoom-label",content:ilibAres("Applied zoom:")},{tag:"label",name:"zoomValue",content:"100%"}]}]},{kind:"onyx.Button",ontap:"reload",classes:"ares-preview-buttons",components:[{tag:"img",attributes:{src:"assets/images/preview_reload.png"}}]},{kind:"onyx.Button",content:ilibAres("Detach test"),ontap:"detachIframe",classes:"ares-preview-buttons",attributes:{title:ilibAres("detach test device, then right click to enable Ripple emulator")}}]},{name:"scrolledIframe",fit:!0,kind:"ares.ScrolledIFrame"}],debug:!1,iframeUrl:null,create:function(){ares.setupTraceLogger(this),this.inherited(arguments);var t=this.getQueryParams(window.location.search);this.iframeUrl=t.url,this.trace("preview url:",t.url),this.$.scrolledIframe.setUrl(t.url),this.$.projectName.setContent(t.name);var e=document.title.split(" ");document.title="(Debug)"===e[e.length-1]?ilibAres("{projectName} - Ares2 Project Preview (Debug)",{projectName:this.$.projectName.getContent()}):"(Test)"===e[e.length]?ilibAres("{projectName} - Ares2 Project Preview (Test)",{projectName:this.$.projectName.getContent()}):ilibAres("{projectName} - Ares2 Project Preview",{projectName:this.$.projectName.getContent()})},zoom:function(t,e){var i=Math.round(e.value)+"%";this.$.zoomValue.setContent(i),this.scale=.3+.7*e.value/100,this.applyScale()},applyScale:function(){enyo.dom.transformValue(this.$.scrolledIframe.$.iframe,ilibAres("scale"),this.scale),this.resized()},resize:function(){var t=this.$.device.selected,e=this.$.orientation.selected;this.trace("size for device ",t.content," orientation ",e.content);var i=t.value.width,n=t.value.height,o=t.value.dpr,s=t.value.landscapeOnly;this.$.devWidth.setContent(ilibAres("width: {width} px",{width:i})),this.$.devHeight.setContent(ilibAres("height: {height} px",{height:n})),this.$.devDPR.setContent(ilibAres("DPR: {dpr}",{dpr:o}));var r="landscape"===e.content||s,a=i>n,h=r^a,l=(h?n:i)/o,c=(h?i:n)/o;this.$.scrolledIframe.setGeometry(l,c),this.$.screenWidth.setContent(ilibAres("width: {dw} px",{dw:l})),this.$.screenHeight.setContent(ilibAres("height: {height} px",{height:c})),s?(this.$.landscape.setActive(!0),this.$.screenPicker.setDisabled(!0)):this.$.screenPicker.setDisabled(!1),this.resized()},getQueryParams:function(t){t=t.split("+").join(" ");for(var e,i={},n=/[?&]?([^=&]+)=?([^&]*)/g;e=n.exec(t);)i[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return i},reload:function(){this.$.scrolledIframe.reload(),this.applyScale()},detachIframe:function(){window.open(this.iframeUrl,"_blank","scrollbars=1,menubar=1,resizable=1",!1),window.close()}});

// source/DocumentToolbar.js
enyo.kind({name:"DocumentToolbar",kind:"FittableRows",events:{onToggleOpen:"",onSwitchDoc:"",onCloseDocRequest:"",onRegisterMe:"",onGrabberClick:""},components:[{name:"tabs",kind:"onyx.TabBar",classes:"ares-small-toolbar title-gradient",showing:!1,checkBeforeClosing:!0,checkBeforeChanging:!0}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this),this.doRegisterMe({name:"documentToolbar",reference:this})},createDocTab:function(t,e,i){this.$.tabs.show(),this.$.tabs.render(),this.$.tabs.addTab({caption:t,userId:e,tooltipMsg:i})},activateDocWithId:function(t){this.$.tabs.activate({userId:t})},removeTab:function(t){this.$.tabs.removeTab({userId:t}),this.$.tabs.isEmpty()&&this.$.tabs.hide()}});

// source/FileData.js
enyo.singleton({kind:"enyo.Component",name:"Ares.Model"}),Ares.Model.File=Backbone.Model.extend({getId:function(){return this.get("id")},getFileId:function(){return this.get("file").id},getFile:function(){return this.get("file")},getName:function(){return this.get("file").name},getData:function(){return this.get("data")},setData:function(t){this.set("data",t)},getEditedData:function(){return this.get("edited-data")},setEditedData:function(t){this.set("edited-data",t)},getProjectData:function(){return this.get("project-data")},setProjectData:function(t){this.set("project-data",t)},getEdited:function(){return this.get("edited")},setEdited:function(t){this.set("edited",t)},getMode:function(){return this.get("mode")},setMode:function(t){this.set("mode",t)},getAceSession:function(){return this.get("ace-session")},setAceSession:function(t){this.set("ace-session",t)},getCurrentIF:function(){return this.get("currentIF")},setCurrentIF:function(t){this.set("currentIF",t)}}),Ares.Model.Files=Backbone.Collection.extend({model:Ares.Model.File,newEntry:function(t,e,i){var n=this.computeId(t),o=new Ares.Model.File({id:n,file:t,data:e,"project-data":i,edited:!1,currentIF:"code"});return this.add(o),o},removeEntry:function(t){var e=this.get(t);e&&(this.remove(e),e.clear({silent:!0}))},computeId:function(t){return t&&t.service&&t.id&&t.service.getConfig().id+"-"+t.id}});

// source/WorkspaceData.js
var AresStore=function(t,e){if(this.name=t,e===!0)localStorage.removeItem(this.name),this.data={};else{var i=localStorage.getItem(this.name);this.data=i&&enyo.json.parse(i)||{}}_.isArray(this.data)&&(this.data={})};_.extend(AresStore.prototype,{debug:!1,strExclude:{originator:1,service:1,config:1,build:1,test:1},stringifyReplacer:function(t,e){return void 0!==this.strExclude[t]?void 0:e},save:function(){try{var t=enyo.json.stringify(this.data,enyo.bind(this,this.stringifyReplacer));localStorage.setItem(this.name,t),this.debug&&enyo.log("Ares.Store#save(): ",t)}catch(e){enyo.error("Ares.Store#save():",e)}},create:function(t){return t.id||(t.id=t.attributes.id=guid()),this.data[t.id]=t,this.save(),t},update:function(t){return this.data[t.id]=t,this.save(),t},find:function(t){return this.data[t.id]},findAll:function(){return _.values(this.data)},destroy:function(t){return delete this.data[t.id],this.save(),t},sync:function(t,e,i){var n;switch(t){case"read":n=e.id?this.find(e):this.findAll();break;case"create":n=this.create(e);break;case"update":n=this.update(e);break;case"delete":n=this.destroy(e)}n?i.success(n):i.error("Record not found")}}),Ares.Model.Project=Backbone.Model.extend({_getProp:function(t){var e=t.split("."),i={};return i.key=e[0],i.obj=this.get(i.key)||{},e.shift(1),i.name=e.join("."),i},getObject:function(t){var e=this._getProp(t);return ares.getObject(e.name,!1,e.obj)},setObject:function(t,e){var i=this._getProp(t);ares.setObject(i.name,e,i.obj),this.set(i.key,i.obj)},getName:function(){return this.get("id")},getServiceId:function(){return this.get("serviceId")},getFolderId:function(){return this.get("folderId")},getService:function(){return this.get("service")},setService:function(t){this.set("service",t)},getDownloadStatus:function(){return this.get("downloadStatus")},setDownloadStatus:function(t){this.set("downloadStatus",t)},getValidPgbConf:function(){return this.get("validPgbConf")},setValidPgbConf:function(t){this.set("validPgbConf",t)},getConfig:function(){return this.get("config")},setConfig:function(t){this.set("config",t)},getProjectUrl:function(){return this.get("project-url")},setProjectUrl:function(t){this.set("project-url",t)},getProjectCtrl:function(){return this.get("controller")},setProjectCtrl:function(t){this.set("controller",t)},getProjectIndexer:function(){return this.get("project-indexer")},setProjectIndexer:function(t){this.set("project-indexer",t)},updateProjectIndexer:function(){this.trigger("update:project-indexer")},sync:function(t,e,i){var n=e.localStorage||e.collection.localStorage;n.sync(t,e,i)}}),Ares.Model.PROJECTS_STORAGE_KEY="com.enyojs.ares.projects",Ares.Model.Projects=Backbone.Collection.extend({model:Ares.Model.Project,comparator:function(t,e){var i;return i=t.id>e.id?1:t.id<e.id?-1:0},createProject:function(t,e,i){var n=this.get(t);if(void 0!==n)throw Error("Already exist");return n=new this.model({id:t,folderId:e,serviceId:i}),this.add(n),n.save(),n},removeProject:function(t){var e=this.get(t);if(void 0===e)throw Error("Project '"+t+"'Does not exist");e.destroy()},renameProject:function(t,e){var i=this.get(t);if(void 0===i)throw Error("Project '"+t+"'Does not exist");this.createProject(e,i.getFolderId(),i.getServiceId()),i.destroy()},setActiveProject:function(t){var e=this.get(t);if(!e)throw Error("Unknown project "+t);this.active=t},getActiveProject:function(){return this.active?this.get(this.active):void 0},setSelectedProject:function(t){var e=this.get(t);if(!e)throw Error("Unknown project "+t);this.selectedProject=t},getSelectedProject:function(){return this.selectedProject?this.get(this.selectedProject):void 0},sync:function(t,e,i){var n=e.localStorage||e.collection.localStorage;n.sync(t,e,i)}}),enyo.singleton({name:"Ares.Workspace",kind:enyo.Component,create:function(){this.inherited(arguments),this.projects=new Ares.Model.Projects,this.files=new Ares.Model.Files},loadProjects:function(t,e){var i=t||Ares.Model.PROJECTS_STORAGE_KEY;this.projects.localStorage=new AresStore(i,e),this.projects.fetch()}});

// source/PackageMunger.js
enyo.kind({name:"Ares.PackageMunger",kind:"enyo.Component",debug:!1,events:{onChangingNode:""},create:function(){ares.setupTraceLogger(this),this.inherited(arguments)},changeNodes:function(t,e){var i,n=[];for(var o in t)i="_"+o+"Node","function"==typeof this[i]&&n.push(this[i].bind(this,t[o]));async.series(n,e)},_addNode:function(t,e){return this.trace("inParam:",t),this._isHandledInPackage(t)?(async.waterfall([this._packageCreate.bind(this,t.service,t.parentNode,t.pkgNode),this._packageRead.bind(this,t.service),this._packageAppend.bind(this,t.node.name),this._packageSave.bind(this,t.service),this._packageCheckNode.bind(this,t.service,t.node),this._packageCreate.bind(this,t.service,t.node)],e),void 0):(this.trace("skipped:",t.node.name,"is not handled by package.js"),e(),void 0)},_removeNode:function(t,e){return this.trace("inParam:",t),this._isHandledInPackage(t)?(async.waterfall([this._packageCreate.bind(this,t.service,t.parentNode,t.pkgNode),this._packageRead.bind(this,t.service),this._packageChop.bind(this,t.node.name),this._packageSave.bind(this,t.service)],e),void 0):(this.trace("skipped:",t.node.name,"is not handled by package.js"),e(),void 0)},_isHandledInPackage:function(t){return t.node.isDir||t.node.name.match(/\.(js|css)$/i)&&"package.js"!==t.node.name},_packageCheckNode:function(t,e,i,n){this.trace("parentNode:",e,"pkgNode:",i),i?n(null,i):e.isDir?t.propfind(e.id,1).response(this,function(t,e){this.trace("PackageMunger._packageCheckNode(): inRequest:",t,"inData:",e);var o=e&&e.children;i=o&&enyo.filter(o,function(t){return"package.js"===t.name})[0],n(null,i)}).error(this,function(t,e){this.trace("PackageMunger._packageCheckNode(): inRequest:",t,"inError:",e),n(e)}):(this.trace("no pkgNode & parentNode is not a folder: nothing to do"),n(null,null))},_packageCreate:function(t,e,i,n){this.trace("parentNode:",e,"pkgNode:",i),i?n(null,i):e.isDir?t.createFile(e.id,"package.js","enyo.depends(\n);\n").response(this,function(t,e){this.trace("PackageMunger._packageCreate(): package.js inFsNode[0]:",e[0]),n(null,e[0])}).error(this,function(t,e){this.trace("PackageMunger._packageCreate(): inRequest:",t,"inError:",e),n(e)}):(this.trace("no pkgNode & parentNode is not a folder: nothing to do"),n())},_packageRead:function(t,e,i){this.trace("pkgNode:",e),t.getFile(e.id).response(this,function(t,n){i(null,e,n.content)})},_packageAppend:function(t,e,i,n){this.trace("name:",t,"pkgContent:",i);var o,s=t.replace(/\./,"\\."),r=RegExp("\\b"+s+"\\b");i.match(r)?this.trace("file ",t," is already in package.js"):(this.trace("inserting ",t,"in package.js"),o=i.replace(/\)/,'	"'+t+'"\n)').replace(/("|')(\s*)"/,'$1,$2"')),o===i?o=null:this.doChangingNode({node:e}),n(null,e,o)},_packageChop:function(t,e,i,n){this.trace("name:",t,"pkgContent:",i);var o=t.replace(/\./,"\\.");this.trace("regexp toMatch:",o);var s,r=RegExp("(\"|')"+o+"(\"|')");i.match(r)?s=i.replace(r,"").replace(/,\s*,/,",").replace(/\(\s*,/,"(").replace(/,\s*\)/,"\n)").replace(/\(\s*\)/,"(\n)"):this.trace("cannot find ",t," in package.js"),s===i?s=null:this.doChangingNode({node:e}),n(null,e,s)},_packageSave:function(t,e,i,n){this.trace("pkgNode:",e,"pkgContent:",i),i?t.putFile(e.id,i).response(this,function(t,e){this.trace("PackageMunger._packageSave(): updated package.js in inFsNode:",e[0]),n(null,null)}).error(this,function(t,e){this.trace("PackageMunger._packageSave(): inRequest:",t,"inError:",e),n(e)}):n(null,null)}});

// source/EnyoEditor.js
enyo.kind({name:"Ares.EnyoEditor",kind:"FittableRows",components:[{kind:"onyx.MoreToolbar",name:"toolbar",classes:"ares-top-toolbar ares-designer-panels",components:[{kind:"onyx.Grabber",classes:"ares-grabber ares-icon",ontap:"activePanel",components:[{kind:"aresGrabber",name:"aresGrabberDirection",classes:"lleftArrow"}]},{name:"designerFileMenu",kind:"Ares.FileMenu",onSelect:"fileMenuItemSelected"},{name:"editorFileMenu",kind:"Ares.FileMenu",onSelect:"fileMenuItemSelected"},{name:"newKindDecorator",kind:"onyx.TooltipDecorator",components:[{name:"newKindButton",kind:"onyx.IconButton",src:"assets/images/new_kind.png",ontap:"newKindAction"},{kind:"onyx.Tooltip",content:ilibAres("New Kind")}]},{name:"docLabel",content:"Deimos",classes:"ares-left-margin"},{name:"deimosKind",kind:"onyx.PickerDecorator",classes:"ares-right-margin",components:[{name:"kindButton",classes:"ares-toolbar-picker deimos-kind-picker",kind:"onyx.PickerButton"},{name:"kindPicker",kind:"onyx.Picker",onChange:"kindSelected",components:[]}]},{fit:!0},{name:"editorSettingDecorator",kind:"onyx.TooltipDecorator",components:[{name:"editorButton",kind:"onyx.IconButton",src:"assets/images/editor_settings.png",ontap:"editorSettings"},{kind:"onyx.Tooltip",content:ilibAres("Editor Settings")}]},{name:"designerButtonContainer",components:[{name:"designerDecorator",kind:"onyx.TooltipDecorator",components:[{name:"designerButton",kind:"onyx.IconButton",src:"assets/images/designer.png",ontap:"designerAction"},{name:"designerButtonBroken",kind:"onyx.IconButton",src:"assets/images/designer_broken.png",ontap:"doDesignerBroken"},{name:"designerTooltipBroken",kind:"Ares.ErrorTooltip",content:ilibAres("Designer")}]}]},{name:"codeEditorDecorator",kind:"onyx.TooltipDecorator",classes:"ares-icon",components:[{kind:"onyx.IconButton",src:"assets/images/code_editor.png",ontap:"closeDesigner"},{kind:"onyx.Tooltip",content:ilibAres("Code editor")}]},{name:"cssHeraDecorator",kind:"onyx.TooltipDecorator",components:[{name:"cssButton",kind:"onyx.IconButton",Showing:"false",src:"assets/images/designer.png",ontap:"doCss"},{kind:"onyx.Tooltip",content:$L("Css Designer")}]},{classes:"ares-logo-container",components:[{name:"logo",kind:"Ares.Logo"}]}]},{name:"savePopup",kind:"Ares.ActionPopup",allowHtmlMsg:!0},{name:"saveAsPopup",kind:"Ares.FileChooser",classes:"ares-masked-content-popup",showing:!1,headerText:ilibAres("Save as..."),folderChooser:!1,onFileChosen:"saveAsFileChosen",allowCreateFolder:!0,allowNewFile:!0,allowToolbar:!0},{name:"overwritePopup",kind:"Ares.ActionPopup",title:ilibAres("Overwrite"),message:ilibAres("Overwrite existing file?"),actionButton:ilibAres("Overwrite")},{name:"docToolBar",kind:"DocumentToolbar",onTabRemoveRequested:"handleCloseDocument",onTabChangeRequested:"handleSwitchDoc",onTabChanged:"handleSwitchDocNoCb",classes:"ares-bottom-bar"},{kind:"Panels",arrangerKind:"CarouselArranger",draggable:!1,classes:"enyo-fit ares-panels",onTransitionStart:"stopPanelEvent",onTransitionFinish:"stopPanelEvent",ondragstart:"stopPanelEvent",ondrag:"stopPanelEvent",ondragfinish:"stopPanelEvent",components:[{components:[{kind:"Phobos"}]},{components:[{kind:"Deimos"}]},{components:[{kind:"Ares.Hera"}]}]}],events:{onShowWaitPopup:"",onHideWaitPopup:"",onAllDocumentsAreClosed:"",onCloseCss:"",onRegisterMe:"",onMovePanel:"",onDesignerBroken:"",onFileEdited:"_fileEdited",onError:""},published:{panelIndex:2,aceActive:!0},handlers:{onErrorTooltip:"showErrorTooltip",onErrorTooltipReset:"resetErrorTooltip",onAceGotFocus:"switchProjectToCurrentDoc",onChildRequest:"handleCall",onAceFocus:"aceFocus",onNewcss:"newCss",onReplacecss:"replacecss",onCssDocument:"cssDocument",onEditcss:"doCss",onReflowed:"reflowed"},debug:!1,create:function(){this.inherited(arguments),ares.setupTraceLogger(this),this.doRegisterMe({name:"enyoEditor",reference:this})},handleCall:function(t,e){var i=e.task,n="object"==typeof i?i:[i],o=n.shift();return this[o].apply(this,n),!0},activePanel:function(){this.doMovePanel({panelIndex:this.panelIndex})},showDeimosPanel:function(){this.$.panels.setIndex(1)},showPhobosPanel:function(){this.$.panels.setIndex(0)},stopPanelEvent:function(){return!0},fileMenuItemSelected:function(t,e){var i=e.selected.value;this[i]()},editorSettings:function(){this.$.phobos.editorSettings()},applySettings:function(t){this.$.phobos.applySettings(t)},changeRightPane:function(t){this.$.phobos.changeRightPane(t)},newKindAction:function(){this.$.phobos.newKindAction()},requestSelectedText:function(){return this.$.phobos.requestSelectedText()},updateComponentsCode:function(t){return this.$.phobos.updateComponentsCode(t)},replaceKind:function(t,e){return this.$.phobos.replaceKind(t,e)},addNewKind:function(t){return this.$.phobos.addNewKind(t)},kindSelected:function(t){var e=t.getSelected().index,i=this.$.deimos;return async.waterfall([i.selectKind.bind(i,e),function(t,e){this.$.kindButton.setContent(t),this.$.toolbar.resized(),e()}.bind(this)]),!0},initKindPicker:function(t){this.$.kindPicker.destroyClientControls();for(var e=0;t.length>e;e++){var i=t[e];this.$.kindPicker.createComponent({content:i.name,index:e})}this.$.kindButton.setContent(t[0].name),this.$.kindPicker.render(),this.$.toolbar.resized()},designerAction:function(){0!==this.$.phobos.editorUserSyntaxError()?this.userSyntaxErrorPop():(this.$.phobos.designerAction(ares.noNext),this.manageControls("designer","js"))},enableDesignerButton:function(t){this.$.designerButton.setShowing(t),this.$.designerButtonBroken.setShowing(!t)},userSyntaxErrorPop:function(){this.doError({msg:ilibAres("Designer cannot work on a file with a syntax error. Please fix the error highlighted in code editor before launching the designer."),title:ilibAres("Syntax Error")})},closeDesigner:function(){return"hera"===this.activeDocument.getCurrentIF()?(this.$.hera.csssave(),this.manageControls("code","css"),this.$.panels.setIndex(0),this.$.toolbar.resized()):this.$.deimos.closeDesigner(!0),!0},switchToCodeMode:function(){this.trace(),this.$.panels.setIndex(this.phobosViewIndex),this.activeDocument.setCurrentIF("code"),this.manageControls("code","js"),this.aceFocus()},manageControls:function(t,e){var i="hera"===t,n="designer"===t,o="code"===t;this.trace("called with mode "+t),this.setAceActive(o),this.$.designerFileMenu.setShowing(n),this.$.docLabel.setShowing(n),this.$.deimosKind.setShowing(n),this.$.cssHeraDecorator.setShowing(o),this.$.editorFileMenu.setShowing(o),this.$.newKindDecorator.setShowing(o),this.$.editorSettingDecorator.setShowing(o),this.$.codeEditorDecorator.setShowing(n||i),"js"==e?this.$.designerButtonContainer.setShowing(o):"css"==e&&this.$.cssHeraDecorator.setShowing(o),this.$.toolbar.reflow(),this.$.toolbar.resized()},switchGrabberDirection:function(t){this.$.aresGrabberDirection.switchGrabberDirection(t)},updateDeimosLabel:function(t){t?this.$.docLabel.setContent("Deimos *"):this.$.docLabel.setContent("Deimos"),this.$.toolbar.resized()},aceFocus:function(){this.getAceActive()&&this.$.phobos.focusEditor()},showErrorTooltip:function(t,e){this.$.designerTooltipBroken.reset("Designer"),this.$.designerButtonBroken.setDisabled(!1),this.$.designerTooltipBroken.raise(e)},resetErrorTooltip:function(){this.$.designerTooltipBroken.reset("Designer"),this.$.designerButtonBroken.setDisabled(!0)},getErrorFromDesignerBroken:function(){return this.$.designerTooltipBroken.error},_fileEdited:function(){this.updateDeimosLabel(this.activeDocument.getEdited())},activeDocument:null,showWaitPopup:function(t){this.doShowWaitPopup({msg:t})},hideWaitPopup:function(){this.doHideWaitPopup(),this.aceFocus()},foreachProjectDocs:function(t,e){function i(t){return t.getProjectData().getName()===o}var n=e instanceof Ares.Model.Project?e:e instanceof Ares.Model.File?e.getProjectData():Ares.Workspace.projects.getActiveProject(),o=n.getName();Ares.Workspace.files.filter(i).forEach(t,this)},saveProjectDocs:function(){var t=function(t){this.saveDoc(t,ares.noNext)};this.foreachProjectDocs(t.bind(this))},saveProjectDocsWithCb:function(t,e){var i=this.$.savePopup,n=[],o=[],s=function(t){t.getEdited()===!0&&(n.push(this.saveDoc.bind(this,t)),o.push(t.getName()))};if(this.foreachProjectDocs(s.bind(this),t),n.length){this.trace("request save project doc on ",t.getName());var r=n.length>1?"were":"was";i.setMessage('"'+o.join('", "')+'" '+r+" modified."),i.setTitle(ilibAres("Project was modified!")),i.setActionButton(ilibAres("Don't Save")),i.setActionCallback(e),i.setAction1Button(ilibAres("Save")),i.setAction1Callback(async.series.bind(null,n,e)),i.setCancelCallback(function(){e(Error("canceled"))}.bind(this)),i.show()}else setTimeout(e,0)},saveAllDocs:function(){var t=function(t){this.saveDoc(t,ares.noNext)};Ares.Workspace.files.forEach(t.bind(this))},saveCurrentDoc:function(){this.saveDoc(this.activeDocument,ares.noNext)},saveDoc:function(t,e){ares.assertCb(e);var i;i=t===this.activeDocument?this.$.phobos.getEditorContent():t.getEditedData();var n={service:t.getProjectData().getService(),fileId:t.getFileId()};this.saveFile(t.getName(),i,n,e)},saveFile:function(t,e,i,n){ares.assertCb(n);var o;i.fileId?(this.trace("Saving doc: "+t+" id "+i.fileId),o=i.service.putFile(i.fileId,e)):(this.trace("Saving doc: "+t+" in dir id "+i.folderId),o=i.service.createFile(i.folderId,i.name,e)),this.showWaitPopup(ilibAres("Saving ")+t+" ..."),o.response(this,function(o,s){this.trace("saveFile response ",s);var r=s[0];r.service=i.service;var a=Ares.Workspace.files.computeId(r);a||this.error("cannot find docDataId from ",r," where ",i);var h=Ares.Workspace.files.get(a);this.trace("saveFile response ok for ",t,r,a," => ",h),h&&(h.setData(e),h.setEditedData(e),h.setEdited(!1),this._fileEdited()),this.hideWaitPopup(),this.analyseData(h),n(null,r)}).error(this,function(e,o){this.trace("saveFile response failed with ",o," for ",t,i),this.hideWaitPopup(),this.doError({msg:"Unable to save the file: "+o}),n(o)})},analyseData:function(t){var e=!1,i=this.$.phobos;this.activeDocument===t?e=i.reparseUsersCode():this.trace("skipping reparse user code"),this.enableDesignerButton(!1),this.trace("triggering full analysis after file save"),i.projectCtrl.forceFullAnalysis(),this.trace("done. codeLooksGood: ",e)},requestSaveDocAs:function(){var t=this.activeDocument.getFile(),e=Ares.Workspace.projects.getActiveProject(),i=function(){var i=t.path,n=i.substring(i.indexOf(e.id)+e.id.length,i.length);this.$.saveAsPopup.pointSelectedName(n,!0),this.$.saveAsPopup.show()};this.$.saveAsPopup.connectProject(e,i.bind(this))},saveAsFileChosen:function(t,e){this.trace(e),e.file?this.$.saveAsPopup.$.hermesFileTree.checkNodeName(e.name,this.requestOverwrite.bind(this,e)):this.aceFocus()},requestOverwrite:function(t,e){var i=this.$.overwritePopup;e?(i.setActionCallback(this.saveAs.bind(this,t)),i.setCancelCallback(this.aceFocus.bind(this)),i.show()):this.saveAs(t)},saveAs:function(t){function e(t){var e,i;a.isDir&&o?e={service:a.service,folderId:a.id,name:o}:a.isDir||o?!a.isDir&&o?e={service:a.service,folderId:a.parent.id,name:o}:i=Error("Internal error: wrong file/folder description"):e={service:a.service,fileId:a.id},t(i,e)}function i(t,e){this.trace(t),ComponentsRegistry.getComponent("harmonia").refreshFileTree(t.id),e(null,t)}this.trace(t);var n=t.name.split("/"),o=n[n.length-1],s=this.activeDocument,r=Ares.Workspace.projects.getActiveProject(),a=t.file,h=this.$.phobos.getEditorContent(),l=function(t){this.trace("err:",t),this.hideWaitPopup()}.bind(this);if(!a)return l(Error("Internal error: missing file/folder description")),void 0;var c=ComponentsRegistry.getComponent("ares");async.waterfall([this.closeDoc.bind(this,s),e.bind(this),this.saveFile.bind(this,o,h),i.bind(this),c._openDocument.bind(c,r)],l.bind(this))},closeActiveDoc:function(){var t=this.activeDocument;this.trace("close document:",t.getName()),this.$.phobos.closeSession(),this.activeDocument=null,this.forgetDoc(t)},forgetDoc:function(t){var e=t.getId();Ares.Workspace.files.removeEntry(e),this.$.docToolBar.removeTab(e),Ares.Workspace.files.length||this.doAllDocumentsAreClosed()},closeDoc:function(t,e){ares.assertCb(e);var i="object"==typeof t?t:Ares.Workspace.files.get(t),n=i?i.getId():void 0;n&&this.activeDocument&&this.activeDocument.getId()===n?this.closeActiveDoc():n?(this.trace("closing a doc different from current one: ",i.getName()),this.forgetDoc(i)):this.trace("called without doc to close"),e()},switchToNewTabAndDoc:function(t,e,i,n){ares.assertCb(n),this.trace("projectData:",t.getName(),", file:",e.name);var o=Ares.Workspace.files.newEntry(e,i,t);ComponentsRegistry.getComponent("documentToolbar").createDocTab(e.name,o.getId(),e.path),this.switchToDocument(o,ilibAres("Opening..."),n)},switchProjectToCurrentDoc:function(){var t=ComponentsRegistry.getComponent("projectList");return!this.switching&&this.activeDocument&&t.selectProject(this.activeDocument.getProjectData(),ares.noNext),!0},handleSwitchDoc:function(t,e){var i=Ares.Workspace.files.get(e.userId);return this.trace(e.id,i),2===this.$.panels.getIndex()&&(this.$.hera.csssave(),this.reflowed()),this.switchToDocument(i,ilibAres("Switching file..."),e.next),!0},handleSwitchDocNoCb:function(t,e){var i=Ares.Workspace.files.get(e.userId);return this.switchToDocument(i,ilibAres("Switching file..."),ares.noNext),!0},switchToDocument:function(t,e,i){if(ares.assertCb(i),!t){if(this.debug)throw"File ID "+t+" not found in cache!";return setTimeout(function(){i(Error("File ID not found in cache!"))},0),void 0}var n=this.$.deimos,o=this.activeDocument,s=Ares.Workspace.projects.getActiveProject(),r=i;if(o&&t.getId()===o.getId())return setTimeout(function(){i()},0),void 0;var a=t.getProjectData().getName();this.trace("switch "+(o?"from "+o.getName()+" ":"")+"to "+t.getName());var h=[];if(this.switching=!0,void 0!==s&&s.getName()!==a){var l=s?"from "+s.getName()+" ":"";this.trace("also switch project "+l+" to "+t.getProjectData().getName());var c=Ares.Workspace.projects.get(t.getProjectData().id),u=ComponentsRegistry.getComponent("projectList");e=ilibAres("Switching project..."),this.resetErrorTooltip(),h.push(function(t){d.doShowWaitPopup({msg:e}),t()},u.selectProject.bind(u,c),n.projectSelected.bind(n,t.getProjectData()))}else h.push(function(t){d.doShowWaitPopup({msg:e}),t()});var d=this;h.push(this._switchDoc.bind(this,t),function(t){d.aceFocus(),t()}),async.series(h,function(){d.doHideWaitPopup(),d.switching=!1,r()})},reloadDoc:function(t,e){ares.assertCb(e);var i=this.activeDocument;this.activeDocument=null,this._switchDoc(i,e)},_switchDoc:function(t,e){ares.assertCb(e);var i,n=this.$.phobos,o=this.activeDocument,s=t.getCurrentIF(),r=o?"from "+o.getName()+" ":" ";if(this.trace("switch "+r+" to "+t.getName()+" IF is ",s),o&&t===o)return setTimeout(e,0),void 0;o&&o.setEditedData(n.getEditorContent());var a=n.openDoc(t);this.activeDocument=t,i=t.getProjectData(),Ares.Workspace.projects.setActiveProject(i.getName());var h="code",l=t.getName().match(/\w+$/);this.trace("edit file type: "+l);var c=[];"code"===s?c.push(function(t){this.$.panels.setIndex(this.phobosViewIndex),t()}.bind(this)):"hera"===s?c.push(function(t){this.$.panels.setIndex(2),h="hera",t()}.bind(this)):a&&(h="designer",c.push(n.designerAction.bind(n)));var u=function(i){this.manageControls(h,l),this._fileEdited(),this.$.toolbar.resized(),this.$.docToolBar.activateDocWithId(t.getId()),this.trace("_switchDoc done with err ",i),setTimeout(e,0)};async.series(c,u.bind(this))},handleCloseDocument:function(t,e){var i=Ares.Workspace.files.get(e.userId);return async.series([this.requestSave.bind(this,i),this.closeDoc.bind(this,i)]),!0},requestCloseCurrentDoc:function(){return async.series([this.requestSave.bind(this,this.activeDocument),this.closeDoc.bind(this,this.activeDocument)]),!0},requestCloseProject:function(t,e){this.trace("close project requested");var i=[];this.foreachProjectDocs(this._chainSaveClose.bind(this,i),t),async.series(i,e)},_chainSaveClose:function(t,e){this.trace("close project will close file "+e.getName(),e);var i=this.closeDoc.bind(this,e),n=this.requestSave.bind(this,e),o=this.activeDocument===e?"push":"unshift";t[o](n,i)},requestCloseCurrentProject:function(){return this.requestCloseProject(),!0},requestCloseAll:function(){this.trace("close project requested");var t=[];return Ares.Workspace.files.forEach(this._chainSaveClose.bind(this,t)),async.series(t),!0},requestSave:function(t,e){ares.assertCb(e);var i=this.$.savePopup;t.getEdited()===!0?(this.trace("request save doc on ",t.getName()),i.setMessage('"'+t.getFile().path+'" was modified.<br/><br/>Save it before closing?'),i.setTitle(ilibAres("Document was modified!")),i.setActionButton(ilibAres("Don't Save")),i.setActionCallback(function(){e(null,t)}),i.setAction1Button(ilibAres("Save")),i.setAction1Callback(this.saveDoc.bind(this,t,e)),i.setCancelCallback(function(){this.reloadDoc(t,ares.noNext),this.aceFocus(),e(Error("canceled"))}.bind(this)),i.show()):setTimeout(e.bind(null,null,t),0)},designDocument:function(t,e){ares.assertCb(e);var i=this.$.deimos,n=t.projectData,o=[];i.isDesignerBroken()&&o.push(i.projectSelected.bind(i,n)),o.push(this.syncEditedFiles.bind(this,t.projectData)),o.push(i.loadDesignerUI.bind(i,t)),o.push(function(t){this.showDeimosPanel(),this.activeDocument.setCurrentIF("designer"),t()}.bind(this)),async.series(o,function(t){t?(this.trace("designDocument -> loadDesignerUI done, err is ",t),this.doError({msg:"designDocument ended with error",err:t,callback:e()})):(this.trace("designDocument done"),setTimeout(e,0))}.bind(this))},syncEditedFiles:function(t,e){function i(t){return"package.js"!==t.getFile().name&&t.getProjectData().getName()===n}var n=t.getName();this.trace("update all edited files on project",n);var o=[],s=function(t){o.push(this.updateCode.bind(this,t))};Ares.Workspace.files.filter(i).forEach(s,this),async.series(o,e)},updateCode:function(t,e){var i=t.getFile().path,n=t.getAceSession(),o=n&&n.getValue(),s=t.getProjectData().getName();this.trace("code update on file",i," project ",s),this.$.deimos.syncFile(s,i,o,e)},undo:function(t){ares.assertCb(t),this.$.phobos.undoAndUpdate(t)},redo:function(t){ares.assertCb(t),this.$.phobos.redoAndUpdate(t)},loadDesignerUI:function(t,e){this.$.deimos.loadDesignerUI(t,e)},doCss:function(){this.$.phobos.cssAction(),this.manageControls("hera","css"),this.$.toolbar.resized()},newCss:function(t,e){this.trace(t,e),this.$.phobos.newcss(this.$.hera.out)},replacecss:function(t,e){this.trace(t,e),this.$.phobos.replacecss(this.$.hera.old,this.$.hera.out)},cssDocument:function(t,e){this.trace(t,e),this.$.hera.cssload(e),this.$.panels.setIndex(2),this.activeDocument.setCurrentIF("hera")},reflowed:function(t,e){this.trace(t,e);var i=3*this.width,n=this.$.panels.getIndex(),o="-webkit-transform: translateX("+i+"px);";1===n&&(i=0,o="-webkit-transform: translateX("+i+"px);",this.$.deimos.setStyle(o)),2===n&&this.$.deimos.setStyle(o)}}),enyo.kind({name:"Ares.FileMenu",kind:"onyx.MenuDecorator",classes:"aresmenu ares-right-margin ares-left-margin",events:{onAceFocus:""},components:[{tag:"button",content:"File"},{kind:"onyx.Menu",floating:!0,classes:"sub-aresmenu",maxHeight:"100%",components:[{name:"saveButton",value:"saveCurrentDoc",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/enyo-editor/phobos/images/menu-icon-save-darken.png"},{content:ilibAres("Save")}]},{name:"saveAsButton",value:"requestSaveDocAs",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/enyo-editor/phobos/images/menu-icon-save-darken.png"},{content:ilibAres("Save as...")}]},{name:"saveProjectButton",value:"saveProjectDocs",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/enyo-editor/phobos/images/menu-icon-save-darken.png"},{content:ilibAres("Save Project")}]},{name:"saveAllDocsButton",value:"saveAllDocs",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/enyo-editor/phobos/images/menu-icon-save-darken.png"},{content:ilibAres("Save all")}]},{classes:"onyx-menu-divider"},{name:"closeButton",value:"requestCloseCurrentDoc",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/enyo-editor/phobos/images/menu-icon-stop.png"},{content:ilibAres("Close")}]},{name:"closeProjectButton",value:"requestCloseCurrentProject",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/enyo-editor/phobos/images/menu-icon-stop.png"},{content:ilibAres("Close Project")}]},{name:"closeAllButton",value:"requestCloseAll",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/enyo-editor/phobos/images/menu-icon-stop.png"},{content:ilibAres("Close All")}]}]}]});

// source/utilities/lang.js
var ares={clone:function(t){return ares.extend(void 0,t)},extend:function(t,e){if(void 0===t){if(!e)return e;t=enyo.isArray(e)?[]:{}}for(var i in e)t[i]="object"==typeof e[i]?ares.extend(t[i],e[i]):e[i];return t},basename:function(t){return t.replace(/\\/g,"/").replace(/.*\//,"")},dirname:function(t){return t.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")},assertCb:function(t){if("function"!=typeof t)throw Error("Assert callback failed: found '"+t+"' instead of a function")},noNext:function(){},_getProp:function(t,e,i){for(var n,o=i||window,s=0;o&&(n=t[s]);s++)o=n in o?o[n]:e?o[n]={}:void 0;return o},setObject:function(t,e,i){var n=t.split("."),o=n.pop(),s=ares._getProp(n,!0,i);return s&&o?s[o]=e:void 0},getObject:function(t,e,i){return ares._getProp(t.split("."),e,i)},decodeWebForm:function(t){var e={},i=t.split("&");return enyo.forEach(i,function(t){try{var i=t.split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}catch(n){enyo.log("skipping key-value: '"+t+"'")}}),e},encodeWebForm:function(t){var e="";return enyo.forEach(enyo.keys(t),function(i){"string"==typeof t[i]?e+=i+"="+encodeURIComponent(t[i])+"&":enyo.log("skipping key: '"+i+"'")},this),e+="oauth_version=1.0"},isPopupAllowed:function(){var t="height=1,width=1,left=-100,top=-100,location=no,toolbar=no,menubar=no,scrollbars=no,resizable=no,directories=no,status=no",e=window.open("popupTest.htm","popupTest",t);return!e||e.closed||e.closed===void 0||0===e.outerHeight||0===e.outerWidth?!0:(e.close(),!1)},setupTraceLogger:function(t){function e(){}return t?(t.trace=t.debug===!0?t.log:e,void 0):(enyo.error("Cannot setup trace logger of ",t),void 0)}};

// source/utilities/Groupbox.js
enyo.kind({name:"Ares.Groupbox",kind:"onyx.Groupbox",published:{header:""},create:function(){this.inherited(arguments)}}),enyo.kind({name:"Ares.GroupBoxItemKey",classes:"ares-groupbox-item-key",create:function(){this.inherited(arguments)}}),enyo.kind({name:"Ares.GroupBoxItemValue",classes:"ares-groupbox-item-value",create:function(){this.inherited(arguments)}});

// source/utilities/ActionPopup.js
enyo.kind({name:"Ares.ActionPopup",kind:"onyx.Popup",modal:!0,centered:!0,floating:!0,autoDismiss:!1,classes:"ares-classic-popup",published:{title:"",actionButton:"",action1Button:"",cancelButton:"",allowHtmlMsg:!1,message:""},events:{onConfirmActionPopup:"",onConfirmAction1Popup:"",onCancelActionPopup:""},components:[{tag:"div",name:"title",classes:"title",content:""},{kind:"enyo.Scroller",classes:"ares-small-popup",fit:!0,components:[{classes:"ares-small-popup-details",name:"popupContent",components:[{name:"message"}]}]},{kind:"onyx.Toolbar",classes:"bottom-toolbar",name:"buttons",components:[{name:"actionButton",kind:"onyx.Button",content:"Action",ontap:"actionConfirm"},{name:"action1Button",kind:"onyx.Button",content:"Action1",ontap:"action1Confirm",showing:!1},{name:"cancelButton",classes:"right",kind:"onyx.Button",content:ilibUtilities("Cancel"),ontap:"actionCancel"}]}],callbacks:{},create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.titleChanged(),this.messageChanged(),this.actionButtonChanged(),this.action1ButtonChanged(),this.cancelButtonChanged(),this.$.message.setAllowHtml(this.allowHtmlMsg)},titleChanged:function(){this.$.title.setContent(this.title)},messageChanged:function(){this.$.message.setContent(this.message)},actionButtonChanged:function(){""!==this.actionButton&&this.$.actionButton.setContent(this.actionButton)},action1ButtonChanged:function(){""!==this.action1Button?(this.$.action1Button.setContent(this.action1Button),this.$.action1Button.show()):this.$.action1Button.hide()},cancelButtonChanged:function(){""!==this.cancelButton&&this.$.cancelButton.setContent(this.cancelButton)},actionConfirm:function(t,e){return this.hide(),this.trace("actionConfirm tapped",t,e),this.runCallbackOrBubbleUp("action","onConfirmActionPopup"),!0},action1Confirm:function(){return this.hide(),this.runCallbackOrBubbleUp("action1","onConfirmAction1Popup"),!0},actionCancel:function(){return this.hide(),this.runCallbackOrBubbleUp("cancel","onCancelActionPopup"),!0},runCallbackOrBubbleUp:function(t,e){var i=this.callbacks[t];this.callbacks={},"function"==typeof i?(this.trace("Running callback "+t),i()):(this.trace("Bubbling fallback event ",e),this.bubble(e))},setActionCallback:function(t){this.callbacks.action=t},setAction1Callback:function(t){this.callbacks.action1=t},setCancelCallback:function(t){this.callbacks.cancel=t},setCallbacks:function(t){this.callbacks=t}});

// source/utilities/ErrorPopup.js
enyo.kind({name:"Ares.ErrorPopup",kind:"onyx.Popup",modal:!0,centered:!0,floating:!0,autoDismiss:!0,published:{title:ilibUtilities("Error"),errorMsg:ilibUtilities("unknown error"),actionMsg:void 0,detailsHtml:"",detailsText:"",callback:null,okButton:ilibUtilities("Close")},classes:"ares-classic-popup",components:[{tag:"div",name:"title",classes:"title"},{classes:"ares-error-popup",fit:!0,components:[{name:"msg",allowHtml:!0},{name:"action",showing:!1},{classes:"ares-error-details",components:[{classes:"button",components:[{tag:"label",classes:" label",name:"detailsBtn",content:ilibUtilities("Details"),ontap:"toggleDetails",showing:!1},{name:"detailsArrow",classes:"optionDownArrow",ontap:"toggleDetails",showing:!1},{name:"detailsDrw",kind:"onyx.Drawer",open:!1,showing:!1,classes:"ares-error-drawer",components:[{name:"detailsText",kind:"onyx.TextArea",disabled:!0,fit:!0,classes:"ares-error-text"},{name:"detailsHtml",allowHtml:!0,fit:!0}]}]}]}]},{kind:"onyx.Toolbar",name:"bottomToolbar",classes:"bottom-toolbar",components:[{name:"okButton",kind:"onyx.Button",ontap:"hideErrorPopup"}]}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.titleChanged(),this.errorMsgChanged(),this.detailsHtmlChanged(),this.detailsTextChanged(),this.okButtonChanged()},titleChanged:function(t){this.trace(t,"->",this.title),this.$.title.setContent(this.title)},errorMsgChanged:function(t){this.trace(t,"->",this.errorMsg),this.$.msg.setContent(this.errorMsg)},detailsTextChanged:function(){this.updateDetailsDrw()},detailsHtmlChanged:function(){this.updateDetailsDrw()},actionMsgChanged:function(){this.actionMsg?(this.$.action.setContent(this.actionMsg),this.$.action.setShowing(!0)):this.$.action.setShowing(!1)},updateDetailsDrw:function(){this.detailsText||this.detailsHtml?(this.$.detailsBtn.show(),this.$.detailsArrow.show(),this.$.detailsDrw.show(),this.$.detailsDrw.setOpen(!0),this.detailsHtml?(this.$.detailsHtml.setContent(this.detailsHtml),this.$.detailsHtml.show(),this.$.detailsText.hide()):(this.$.detailsText.setValue(this.detailsText),this.$.detailsText.show(),this.$.detailsHtml.hide())):(this.$.detailsBtn.hide(),this.$.detailsArrow.hide(),this.$.detailsDrw.hide(),this.$.detailsText.setValue(""),this.$.detailsHtml.setContent(""))},okButtonChanged:function(t){this.trace(t,"->",this.okButton),this.$.okButton.setContent(this.okButton)},toggleDetails:function(){this.$.detailsDrw.setOpen(!this.$.detailsDrw.open)},hideErrorPopup:function(){if(this.reset(),this.hide(),this.callback){var t=this.callback;this.callback=null;try{t()}catch(e){var i="An unexpected exception occured in callback:"+("object"==typeof e?e.message:e),n="object"==typeof e?e.stack:"";this.error(i,n),this.raise({msg:i,err:{stack:n}})}}},raise:function(t){var e,i,n,o;t.callback?(this.callback&&this.error("Previous callback was not fired ! Bug?"),this.callback=t.callback,this.setAutoDismiss(!1)):this.setAutoDismiss(!0),"object"==typeof t?t instanceof Error?(i=t,e=""+i):(i=t.err,e=t.msg||i&&""+i,void 0!==t.title&&this.$.title.setContent(t.title)):e=""+t,n=i&&(i.text||i.stack),o=i&&i.html,n=!o&&n,this.setErrorMsg(e),this.setDetailsHtml(o),this.setDetailsText(n),this.setActionMsg(t.action),this.show()},reset:function(){this.set("title",ilibUtilities("error")),this.set("errorMsg",ilibUtilities("unknown error")),this.set("actionMsg",void 0),this.set("detailsHtml",""),this.set("detailsTxt",""),this.set("okButton",ilibUtilities("Close"))}});

// source/utilities/ErrorTooltip.js
enyo.kind({name:"Ares.ErrorTooltip",kind:"onyx.Tooltip",allowHtml:!0,published:{errorTooltip:ilibUtilities("unknown error"),error:""},create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.setContent("")},raise:function(t){this.error=t;var e;"object"==typeof t?t instanceof Error?(e=t,this.errorTooltip=""+e):(e=t.err,this.errorTooltip=t.msg||e&&""+e):this.errorTooltip=""+t,this.setContent(this.errorTooltip),this.show()},reset:function(t){this.setContent(t),this.hide()}});

// source/utilities/SignInErrorPopup.js
enyo.kind({name:"Ares.SignInErrorPopup",kind:"Ares.ErrorPopup",create:function(){this.inherited(arguments),this.$.bottomToolbar.createComponent({name:"signInButton",kind:"onyx.Button",content:ilibUtilities("Sign In"),owner:this,ontap:"showAccountConfiguration"})},showAccountConfiguration:function(){this.bubble("onSignInError")}});

// source/utilities/AsyncError.js
enyo.kind({name:"AsyncError",kind:"enyo.Async",constructor:function(t){this.inherited(arguments),this.msg=t,this.go()},go:function(){return enyo.asyncMethod(this,function(){this.fail(this.msg)}),this}});

// source/utilities/IFrame.js
enyo.kind({name:"ares.IFrame",kind:"Control",tag:"iframe",attributes:{scrolling:"no",width:"600px",height:"800px"},classes:"ares-preview-device",published:{url:null},create:function(){this.inherited(arguments),this.urlChanged()},urlChanged:function(){this.url&&this.setAttribute("src",this.url)},setGeometry:function(t,e){this.setAttribute("width",t),this.setAttribute("height",e)}}),enyo.kind({name:"ares.ScrolledIFrame",kind:"Scroller",classes:"enyo-border-box",components:[{kind:"ares.IFrame",name:"iframe"}],reload:function(){this.$.iframe.destroy(),this.createComponent({name:"iframe",kind:"ares.IFrame"}),this.width&&this.$.iframe.setGeometry(this.width,this.height),this.setUrl(this.url),this.render()},setUrl:function(t){this.url=t,this.$.iframe.setUrl(t)},setGeometry:function(t,e){this.width=t,this.height=e,this.$.iframe.setGeometry(t,e),this.resized()}});

// source/utilities/LocalStorage.js
enyo.singleton({name:"Ares.LocalStorage",kind:enyo.Component,create:function(){this.inherited(arguments),this.isSupported(),this.set=this.storageArea.set,this.get=this.storageArea.get,this.remove=this.storageArea.remove},isSupported:function(){if(!this.storageArea)if(window.chrome&&window.chrome.storage&&window.chrome.storage.local)this.storageArea=this.chromeStorageArea;else{if(!window.localStorage)throw Error("Ares demands some sort of localStorage");this.storageArea=this.defaultStorageArea}return this.storageArea},storageArea:null,defaultStorageArea:{get:function(t,e,i){var n=window.localStorage.getItem(t);if(e){var o=i?enyo.bind(i,e):e;o(n)}},set:function(t,e,i,n){if(window.localStorage.setItem(t,e),i){var o=n?enyo.bind(n,i):i;o()}},remove:function(t,e,i){if(window.localStorage.removeItem(t),e){var n=i?enyo.bind(i,e):e;n()}}},chromeStorageArea:{get:function(t,e,i){var n=i?enyo.bind(i,e):e;chrome.storage.local.get(t,function(e){n(e[t])})},set:function(t,e,i,n){var o,s={};i&&(o=n?enyo.bind(n,i):i),s[t]=e,chrome.storage.local.set(s,o)},remove:function(t,e,i){var n;e&&(n=i?enyo.bind(i,e):e),chrome.storage.local.remove(t,n)}}});

// source/utilities/HermesNode.js
enyo.kind({name:"hermes.Node",kind:"Node",events:{onItemDown:"",onItemDragstart:"",onItemDragenter:"",onItemDragover:"",onItemDragleave:"",onItemUp:"",onItemDrop:"",onItemDragend:"",onFileClick:"",onFolderClick:"",onNodeRightClick:"",onAdjustScroll:""},published:{file:null,dragAllowed:!1},handlers:{ondown:"down",ondragstart:"dragstart",ondragenter:"dragenter",ondragover:"dragover",ondragleave:"dragleave",onup:"up",ondrop:"drop",ondragend:"dragend"},attributes:{dropTarget:"true"},onlyIconExpands:!0,debug:!1,debugContextMenu:!1,create:function(){ares.setupTraceLogger(this),this.inherited(arguments)},down:function(t,e){return 1===e.which&&this.doItemDown(e),!0},dragstart:function(t,e){return e.dataTransfer?(this.doItemDragstart(e),!0):!0},dragenter:function(t,e){return e.dataTransfer?(this.doItemDragenter(e),!0):!0},dragover:function(t,e){return e.dataTransfer?(this.doItemDragover(e),!0):!0},dragleave:function(t,e){return e.dataTransfer?(this.doItemDragleave(e),!0):!0},up:function(t,e){return 1===e.which&&this.doItemUp(e),!0},drop:function(t,e){return e.dataTransfer?(this.doItemDrop(e),!0):!0},dragend:function(t,e){return e.dataTransfer?(this.doItemDragend(e),!0):!0},updateNodes:function(){return this.startLoading(this),this.trace(this),this.file.service.listFiles(this.file&&this.file.id).response(this,function(t,e){var i=e.sort(this.fileNameSort);e&&!this.showing&&this.show(),this.trace("updating node content of ",this.name,this," with ",i),this.updateNodeContent(i),this.render()}).response(this,function(){this.stopLoading()}).error(this,function(){this.stopLoading()})},startLoading:function(){this.$.extra.setContent('&nbsp;<img src="'+enyo.path.rewrite("$assets/utilities/images/busy.gif")+'"/>')},stopLoading:function(){this.$.extra.setContent("")},updateNodeContent:function(t){var e,i,n,o,s,r=0,a=0;this.trace("updateNodeContent on",this),enyo.forEach(t,function(t){this.trace("updateNodeContent loop on",t),t.dir=t.isDir?(this.file.dir||"/")+t.name+"/":this.file.dir||"/"}.bind(this)),e=this.filesToNodes(t),i=this.getNodeFiles();for(var h=0;i.length>h;h++)this.removeControl(i[h]);for(s=[];i.length>a||e.length>r;)switch(n=a>=i.length?1:r>=e.length?-1:this.fileNameSort(i[a],e[r])){case-1:this.trace(i[a].name,"was removed"),i[a].destroy(),a++;break;case 0:this.trace(i[a].name,"is kept"),this.addControl(i[a]),a++,r++;break;case 1:this.trace(e[r].name,"was created"),o=this.dragAllowed?this.createComponent(e[r],{kind:"hermes.Node",classes:"hermesFileTree-node",dragAllowed:!0,attributes:{draggable:!0}}):this.createComponent(e[r],{kind:"hermes.Node",classes:"hermesFileTree-node"}),this.trace(o,"has been created "),s=this.getNodeFiles(),r++}this.$.client.render()},compareFiles:function(t,e){if(t.length!=e.length)return!1;for(var i in t){var n=t[i],o=e[i];if(n.id!==o.id)return!1}return!0},fileNameSort:function(t,e){var i,n;return i=t.name.toLowerCase(),n=e.name.toLowerCase(),n>i?-1:i>n?1:t.name<e.name?-1:e.name<t.name?1:0},getNodeFiles:function(){var t=function(t){return"$"===t.name.slice(0,1)};return this.getControls().filter(t).sort(this.fileNameSort)},getNodeNamed:function(t){var e=function(e){return e.name==="$"+t};return this.getControls().filter(e)[0]},getNodeWithId:function(t){var e=function(e){return e.file&&e.file.id===t};return this.getControls().filter(e)[0]},filesToNodes:function(t){var e,i=[];t.sort(this.fileNameSort);for(var n=0;t.length>n;n++)e=t[n],e.service=this.file.service,i.push({file:e,name:"$"+e.name,content:e.name,expandable:e.isDir,icon:"$assets/utilities/images/"+(e.isDir?"arrowRight.png":"file.png")});return i},nodeExpand:function(t,e){this.trace(t,"=>",e);var i=e.originator;return this.trace("nodeExpand called while node Expanded is ",i.expanded),i.file.isDir&&i.setIcon("$assets/utilities/images/"+(i.expanded?"arrowDown.png":"arrowRight.png")),i.expanded&&(i.updateNodes().response(this,function(){i.effectExpanded()}),e.wait=!0),!0},refreshTree:function(t,e,i){this.trace(this),this.trace("running refreshTree with "+this.controls.length+" controls with content "+this.content+" force select "+i),t.inc(),this.updateNodes().response(this,function(){this.effectExpanded(),enyo.forEach(this.getNodeFiles(),function(e){var n=this.$[e.name];this.trace("running INNER function of refreshTree on "+e.name+" id "+n.file.id),n.file.id===i&&(this.trace("force select of ",n.file.id),n.doNodeTap(),this.doFolderClick({file:n.file})),n.effectExpanded(),e.expanded&&(t.inc(),n.refreshTree(t,1,i))},this),t.dec()}).error(this,function(t,e){var i="*** Error refreshing the file list ("+e+")";try{i+=": "+enyo.json.parse(t.xhrResponse.body).message}catch(n){}this.warn(i)}),e&&t.dec(),this.trace("refreshTree done")},followNodePath:function(t,e,i){t.length>0?this.updateNodes().response(this,function(){var n=this.getNodeNamed(t.shift());n?(e.push(n),n.followNodePath(t,e,i)):"function"==typeof i&&i()}).error(this,function(t,e){"function"==typeof i&&i(e)}):"function"==typeof i&&i()}});

// source/utilities/HermesFileTree.js
enyo.kind({name:"HermesFileTree",kind:"FittableRows",events:{onError:"",onFileClick:"",onFolderClick:"",onFileOpenRequest:"",onFileRemoved:"",onFolderChanged:"",onTreeChanged:"",onPathChecked:"",onShowWaitPopup:"",onHideWaitPopup:""},handlers:{onItemDown:"itemDown",onItemDragstart:"itemDragstart",onItemDragenter:"itemDragenter",onItemDragover:"itemDragover",onItemDragleave:"itemDragleave",onItemUp:"itemUp",onItemDrop:"itemDrop",onItemDragend:"itemDragend",onNodeDblClick:"nodeDblClick",onAdjustScroll:"adjustScroll"},published:{serverName:"",dragAllowed:!1,menuAllowed:!1},fit:!0,components:[{kind:"onyx.MenuDecorator",name:"hermesMenu",classes:"hermesMenu",onSelect:"hermesMenuItemSelected",components:[{kind:"onyx.Menu",name:"hermesMenuList",classes:"hermesMenu-list",maxHeight:"100%",components:[{name:"newFolderItem",value:"newFolderClick",classes:"hermesMenu-button",components:[{kind:"onyx.IconButton",src:"$assets/utilities/images/folder_new_16.png"},{content:ilibUtilities("New Folder...")}]},{name:"newFileDivider",classes:"onyx-menu-divider hermesMenu-button"},{name:"newFileItem",value:"newFileClick",classes:"hermesMenu-button",components:[{kind:"onyx.IconButton",src:"$assets/utilities/images/document_new_16.png"},{content:ilibUtilities("New File...")}]},{name:"nodeDivider",classes:"onyx-menu-divider hermesMenu-button"},{name:"renameItem",value:"renameClick",classes:"hermesMenu-button",components:[{kind:"onyx.IconButton",src:"$assets/utilities/images/document_edit_16.png"},{content:ilibUtilities("Rename...")}]},{name:"copyItem",value:"copyClick",classes:"hermesMenu-button",components:[{kind:"onyx.IconButton",src:"$assets/utilities/images/copy_16.png"},{content:ilibUtilities("Copy...")}]},{name:"deleteItem",value:"deleteClick",classes:"hermesMenu-button",components:[{kind:"onyx.IconButton",src:"$assets/utilities/images/document_delete_16.png"},{content:ilibUtilities("Delete...")}]}]}]},{kind:"onyx.Toolbar",name:"hermesToolbar",classes:"ares-small-toolbar title-gradient",components:[{name:"newFolder",kind:"onyx.TooltipDecorator",components:[{name:"newFolderButton",kind:"onyx.IconButton",src:"$assets/utilities/images/folder_new.png",ontap:"newFolderClick"},{kind:"onyx.Tooltip",content:ilibUtilities("New Folder...")}]},{name:"reloadAll",kind:"onyx.TooltipDecorator",components:[{kind:"onyx.IconButton",src:"$assets/utilities/images/folder_reload.png",ontap:"reloadClick"},{kind:"onyx.Tooltip",content:ilibUtilities("Reload...")}]},{name:"newFile",kind:"onyx.TooltipDecorator",components:[{name:"newFileButton",kind:"onyx.IconButton",src:"$assets/utilities/images/document_new.png",ontap:"newFileClick"},{kind:"onyx.Tooltip",content:ilibUtilities("New File...")}]},{name:"renameFile",kind:"onyx.TooltipDecorator",components:[{name:"renameFileButton",kind:"onyx.IconButton",src:"$assets/utilities/images/document_edit.png",ontap:"renameClick"},{kind:"onyx.Tooltip",content:ilibUtilities("Rename...")}]},{name:"copyFile",kind:"onyx.TooltipDecorator",components:[{name:"copyFileButton",kind:"onyx.IconButton",src:"$assets/utilities/images/copy.png",ontap:"copyClick"},{kind:"onyx.Tooltip",content:ilibUtilities("Copy...")}]},{name:"deleteFile",kind:"onyx.TooltipDecorator",components:[{name:"deleteFileButton",kind:"onyx.IconButton",src:"$assets/utilities/images/document_delete.png",ontap:"deleteClick"},{kind:"onyx.Tooltip",content:ilibUtilities("Delete...")}]},{name:"revertMove",kind:"onyx.TooltipDecorator",components:[{name:"revertMoveButton",kind:"onyx.IconButton",src:"$assets/utilities/images/undo.png",ontap:"revertClick"},{kind:"onyx.Tooltip",classes:"ares-tooltip-last",content:ilibUtilities("Revert move...")}]}]},{kind:"Scroller",fit:"true",classes:"enyo-document-fit"},{kind:"Selection",onSelect:"select",onDeselect:"deselect"},{name:"service",kind:"FileSystemService"},{name:"errorPopup",kind:"Ares.ErrorPopup",msg:"Service returned an error"},{name:"nameFilePopup",kind:"NamePopup",type:"file",fileName:"",placeHolder:ilibUtilities("File Name"),onCancel:"newFileCancel",onConfirm:"newFileConfirm"},{name:"nameFolderPopup",kind:"NamePopup",type:"folder",fileName:"",placeHolder:ilibUtilities("Folder Name"),onCancel:"newFolderCancel",onConfirm:"newFolderConfirm"},{name:"nameCopyPopup",kind:"NamePopup",title:ilibUtilities("Name for copy of"),fileName:ilibUtilities("Copy of foo.js"),onCancel:"copyFileCancel",onConfirm:"copyFileConfirm"},{name:"deletePopup",kind:"DeletePopup",onCancel:"deleteCancel",onConfirm:"deleteConfirm"},{name:"renamePopup",kind:"RenamePopup",title:ilibUtilities("New name for "),fileName:"foo.js",onCancel:"renameCancel",onConfirm:"renameConfirm"},{name:"revertPopup",kind:"RevertPopup",title:ilibUtilities("Revert node moving"),fileName:"foo.js",onCancel:"revertCancel",onConfirm:"revertConfirm"}],selectedNode:null,debug:!1,debugContextMenu:!1,packages:!1,draggedNode:null,targetNode:null,movedNode:null,originNode:null,revertMove:!1,holdoverTimeout:null,holdoverTimeoutMS:1e3,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.enableDisableButtons(),this.createComponent({name:"serverNode",container:this.$.scroller,kind:"hermes.Node",classes:"enyo-unselectable hermesFileTree-root",showing:!1,content:"server",icon:"$assets/utilities/images/antenna.png",expandable:!0,expanded:!0,collapsible:!1,dragAllowed:this.dragAllowed}),this.menuAllowedChanged()},menuAllowedChanged:function(t){this.trace(t,"=>",this.menuAllowed),this.menuAllowed?enyo.dispatcher.listen(document,"contextmenu",enyo.bind(this,"contextMenu")):enyo.dispatcher.stopListening(document,"contextmenu",enyo.bind(this,"contextMenu"))},contextMenu:function(t){this.trace("inEvent",t);var e=enyo.dispatcher.findDispatchTarget(t.target),i=e;if("caption"!==i.name||"hermes.Node"!==i.owner.kind)return!0;for(;"HermesFileTree"!==i.kind;){if(void 0===i.owner)return!0;i=i.owner}return i.get("menuAllowed")&&!i.get("debugContextMenu")?(t.preventDefault(),this.nodeRightClick(e,t),!0):!0},itemDown:function(t,e){return this.trace(t,"=>",e),!0},itemDragstart:function(t,e){this.trace(t,"=>",e),this.draggedNode=e.originator,"hermes.Node"!==this.draggedNode.kind&&(this.draggedNode=this.draggedNode.parent),this.targetNode=this.draggedNode,e.dataTransfer.effectAllowed="package.js"==this.draggedNode.content?"none":"linkMove";var i={};i.kind=this.draggedNode.kind,i.file=this.draggedNode.file,i.file.service.owner=null;var n=enyo.json.stringify(i);return e.dataTransfer.setData("Text",n),!0},itemDragenter:function(t,e){this.trace(t,"=>",e);var i=e.originator;return"hermes.Node"!==i.kind&&(i=i.parent),"hermes.Node"!==i.kind?!0:(i.file.isDir||(i=i.container),this.targetNode===i?!0:(null!==this.targetNode&&this.targetNode.file.isDir&&this.targetNode.expanded&&(this.targetNode.removeClass("hermesFileTree-folder-highlight"),this.$.selection.deselect(this.targetNode.file.id,this.targetNode)),this.resetHoldoverTimeout(),this.targetNode=i,this.targetNode.file.isDir&&this.targetNode.expanded&&this.targetNode.addClass("hermesFileTree-folder-highlight"),this.setHoldoverTimeout(this.targetNode),!0))},itemDragover:function(t,e){return this.trace(t,"=>",e),this.draggedNode?(this.draggedNode&&"package.js"!=this.draggedNode.content&&(e.dataTransfer.dropEffect=this.isValidDropTarget(this.targetNode)?"link":"move",e.preventDefault()),!0):!0},itemDragleave:function(t,e){return this.trace(t,"=>",e),!0},itemUp:function(t,e){return this.trace(t,"=>",e),!0},itemDrop:function(t,e){this.trace(t,"=>",e);var i=e.dataTransfer.getData("Text");if(""===i)return!0;var n=enyo.json.parse(i);if("hermes.Node"!==n.kind)return!0;var o=n.file.id;if(this.trace("node dropped",o),this.isValidDropTarget(this.targetNode))if("package.js"!=this.draggedNode.content){var s=this.draggedNode.container,r=this.targetNode,a=this.moveNode(this.draggedNode,this.targetNode);a.response(this,function(t,e){var i=r.updateNodes();i.response(this,function(){this.movedNode=r.getNodeWithId(e.id),this.originNode=s,this.revertMove=!0,this.showRevertMoveButton()}),i.error(this,function(){this.warn("error retrieving related node children")})})}else this.trace("'package.js' files cannot be moved");else this.trace("target not valid");return e.dataTransfer.clearData(),!0},itemDragend:function(t,e){return this.trace(t,"=>",e),this.targetNode.file.isDir&&this.targetNode.expanded&&(this.targetNode.removeClass("hermesFileTree-folder-highlight"),this.$.selection.deselect(this.targetNode.file.id,this.targetNode)),this.resetHoldoverTimeout(),this.draggedNode=null,this.targetNode=null,!0},setHoldoverTimeout:function(t){this.holdoverTimeout=setTimeout(enyo.bind(this,function(){this.holdOver(t)}),this.holdoverTimeoutMS)},resetHoldoverTimeout:function(){clearTimeout(this.holdoverTimeout),this.holdoverTimeout=null},holdOver:function(t){this.trace("inTargetNode=",t),t!=this.draggedNode&&t.file.isDir&&!t.expanded&&(this.$.selection.select(t.file.id,t),t.setExpanded(!0),t.setIcon("$assets/utilities/images/arrowDown.png"),t.addClass("hermesFileTree-folder-highlight"),t.updateNodes().response(this,function(){t.effectExpanded()}))},isValidDropTarget:function(t){this.trace("inNode=",t);var e=this.draggedNode.file,i=t.file;if(e!=i)if(i.isDir)if(this.draggedNode.container.file.id!=i.id){if(!e.isDir||i.isServer||-1==i.dir.indexOf(e.dir))return this.trace("target node"),!0;this.trace("target node is a child node")}else this.trace("target node is its own parent node");else this.trace("target node is a file");else this.trace("target node is itself");return!1},connectService:function(t,e){return this.trace("connect to service: ",t),this.projectUrlReady=!1,this.clear(),this.$.service.connect(t,enyo.bind(this,function(i){i?e&&e(i):(this.$.serverNode.file=this.$.service.getRootNode(),this.$.serverNode.file.isServer=!0,this.$.serverNode.setContent(this.$.serverNode.file.name),this.$.serverNode.file.service=t,e&&e())})),this},connectProject:function(t,e){this.trace("config:",t),this.projectData=t,this.trace("HFT:connecting project "+t.getName());var i=this.$.serverNode,n=t.getName(),o=t.getFolderId(),s=t.getService(),r=this;return i.hide(),this.connectService(s,enyo.bind(this,function(a){if(a)this.showErrorPopup(ilibUtilities("Internal Error ({error}) from filesystem service",{error:""+a}));else{this.trace("HFT: service is now connected for project"+t.getName()+". Requesting project URL"),this.selectedNode&&this.deselect(null,{data:this.selectedNode}),this.$.selection.clear(),this.selectedNode=null,this.enableDisableButtons();var h=this.$.service.propfind(o,0);h.response(this,function(o,a){var h=s.getConfig().origin+s.getConfig().pathname+"/file"+a.path;this.trace("HFT: service reply: project"+t.getName()+" URL is "+h+". UPdating projectData"),this.projectData.setProjectUrl(h),this.trace("HFT: projet data update done"),this.projectUrlReady=!0,i.file=a,i.file.isServer=!0,i.file.service=s,i.setContent(n),this.refreshFileTree(function(){r.trace("HFT: refreshFileTree done"),e?e():r.$.selection.select(i.file.id,i)})}),h.error(this,function(t,e){this.projectData.setProjectUrl(""),this.showErrorPopup(ilibUtilities("Internal Error ({error}) from filesystem service",{error:""+e}))})}})),this.packages=!0,this},disconnect:function(){return this.trace("disconnect..."),this.$.selection.clear(),this.selectedNode=null,this.projectUrlReady=!1,this.clear(),this.$.serverNode.file=null,this},hideFileOpButtons:function(){return this.$.newFolder.hide(),this.$.newFile.hide(),this.$.reloadAll.hide(),this.$.renameFile.hide(),this.$.copyFile.hide(),this.$.deleteFile.hide(),this.$.revertMove.hide(),this},showNewFolderButton:function(){return this.$.newFolder.show(),this},showFileOpButtons:function(){return this.$.newFolder.show(),this.$.reloadAll.show(),this.$.newFile.show(),this.$.renameFile.show(),this.$.copyFile.show(),this.$.deleteFile.show(),this},showToolbar:function(t){return this.$.hermesToolbar.setShowing(t),this},showRevertMoveButton:function(){return this.$.revertMove.show(),this},hideRevertMoveButton:function(){return this.$.revertMove.hide(),this},clear:function(){var t=this.$.serverNode;return this.trace("clearing serverNode"),enyo.forEach(t.getNodeFiles(),function(t){t.destroy()}),t.hide(),this},reset:function(){return this.$.serverNode.hide(),this.$.service.isOk()&&(this.trace("reseting serverNode"),this.updateNodes(this.$.serverNode)),this},adjustScroll:function(t,e){this.trace(t,"=>",e);var i=e.originator;return this.scrollToHermesNode(i,!0),!0},scrollToHermesNode:function(t,e){this.trace("inNode",t,"inAlignWithTop",e);for(var i=this.$.scroller.getScrollBounds(),n=t,o={height:0,width:0,top:0,left:0},s=!0,r=0;n&&n.container&&n.container.id!=this.$.scroller.id;){for(var a=n.hasNode(),h={height:a.offsetHeight,width:a.offsetWidth,top:a.offsetTop,left:a.offsetLeft},l=n.node,c={height:0,width:0,top:0,left:0};l;)c={height:l.offsetHeight,width:l.offsetWidth,top:l.offsetTop,left:l.offsetLeft},l=l.nextSibling;var d=n.container,u=d.hasNode(),g={height:0,width:0,top:0,left:0};d.id!=this.$.scroller.id&&(g={height:u.offsetHeight,width:u.offsetWidth,top:u.offsetTop,left:u.offsetLeft}),s&&(r=h.height,s=!1),o.height=a.offsetHeight,o.width=a.offsetWidth,o.top+=g.height-c.top-c.height+h.top,o.left+=-c.left+h.left,n=n.container}this.$.scroller.setScrollTop(Math.min(i.maxTop,e===!1?i.maxTop-(i.height-o.top)+r:o.top)),this.$.scroller.setScrollLeft(Math.min(i.maxLeft,e===!1?o.left-i.clientWidth+o.width:o.left))},nodeTap:function(t,e){this.trace(t,"=>",e);var i=e.originator;return this.$.selection.select(i.file.id,i),i.file.isDir?this.doFolderClick({file:i.file}):this.doFileClick({file:i.file}),!0},nodeDblClick:function(t,e){this.trace(t,"=>",e);var i=e.originator;return i.file.isDir||i.file.isServer?i.file.isDir&&i.set("expanded",!i.get("expanded")):this.doFileOpenRequest({file:i.file,projectData:this.projectData}),!0},nodeRightClick:function(t,e){if(this.trace(t,"=>",e),!this.menuAllowed)return!0;var i=t;if("caption"!==i.name)return!0;if("hermes.Node"!==i.kind&&(i=i.parent),"hermes.Node"!==i.kind)return!0;i.doNodeTap();var n,o=0,s=/translateX\((.*)px\)/;n=enyo.platform.firefox?this.owner.node.style.transform:this.owner.node.style.webkitTransform;var r=s.exec(n);r&&(o=r[1]),this.$.hermesMenu.requestShowMenu();var a=this.$.hermesMenuList.getBounds(),h=0,l=0;return e.clientX-this.node.offsetLeft-o+a.width>this.node.clientWidth&&(h=e.clientX-this.node.offsetLeft-o+a.width-this.node.clientWidth),e.clientY-this.node.offsetTop+a.height>this.node.clientHeight&&(l=a.height),this.$.hermesMenuList.showAtEvent(e,{left:-this.node.offsetLeft-o-h,top:-this.node.offsetTop-l}),this.$.hermesMenuList.updatePosition(),!0},hermesMenuItemSelected:function(t,e){this.trace(t,"=>",e);var i=e&&e.selected&&e.selected.value;return"function"==typeof this[i]?this[i]():this.trace("*** BUG: '",i,"' is not a known function"),!0},select:function(t,e){return this.trace(t,"=>",e),this.selectedNode=e.data,e.data.$.caption.addClass("hermesFileTree-select-highlight"),this.enableDisableButtons(),!0},deselect:function(t,e){return this.trace(t,"=>",e),e.data&&e.data.$.caption&&e.data.$.caption.removeClass("hermesFileTree-select-highlight"),this.selectedNode=null,this.enableDisableButtons(),!0},copyName:function(t){return"Copy of "+t},reloadClick:function(t,e){this.trace(t,"=>",e),this.refreshFileTree()},asyncTracker:function(t){var e=0,i=this;return this.trace("tracker created"),{inc:function(){return e++,i.trace("tracker inc ",e),e},dec:function(){e--,i.trace("tracker dec",e),0===e&&t&&(i.trace("running tracker call-back"),t())}}},refreshFile:function(){this.refreshFileTree()},refreshFileTree:function(t,e,i){i&&(this.warn("deprecated refreshFileTree signature. Callback is now the first parameter"),t=i),e&&e.match(/[^\da-f]/)&&this.warn("refreshFileTree: internal error, toSelectId ",e," does not look like an Id");var n=this.asyncTracker(function(){this.$.serverNode.render(),t&&t()}.bind(this));this.trace("refreshFileTree called. will select ",e),this.$.serverNode.refreshTree(n,0,e),this.trace("refreshFileTree done")},getFolder:function(){var t=this.getFolderOfSelectedNode();return t?t.file:null},getFolderOfSelectedNode:function(){var t=this.selectedNode;return t&&!t.file.isDir?this.selectedNode.container:t},getParentNodeOfSelected:function(){return this.selectedNode&&this.selectedNode.container},getParentOfSelected:function(){return this.selectedNode&&this.selectedNode.container&&this.selectedNode.container.file},newFolderClick:function(t,e){this.trace(t,"=>",e);var i=this.getFolder();this.trace("on folder ",i),this.$.serverNode&&this.$.serverNode.file?i&&i.isDir?(this.$.nameFolderPopup.setFileName(""),this.$.nameFolderPopup.setFolderId(i.id),this.$.nameFolderPopup.setPath(i.path),this.$.nameFolderPopup.show()):this.showErrorPopup(ilibUtilities("Select a parent folder first")):this.showErrorPopup(ilibUtilities("Select a file system first"))},newFolderCancel:function(t,e){this.trace("inSender:",t,"inEvent:",e)},newFolderConfirm:function(t,e){this.trace("inSender:",t,"inEvent:",e);var i=e.folderId,n=t.fileName.trim();if(!this.checkedPath(n))return!0;this.trace("Creating new folder ",n," into folderId=",i);var o="Creating new folder "+n;this.doShowWaitPopup({msg:o});var s=this.$.service.createFolder(i,n,{overwrite:!1});s.response(this,function(t,e){this.trace("inFolder: ",e);var i=this.getFolderOfSelectedNode(),o=i.getNodeNamed("package.js");i.expanded||(i.setExpanded(!0),i.setIcon("$assets/utilities/images/arrowDown.png"),i.updateNodes().response(this,function(){i.effectExpanded()})),this.packages&&this.doTreeChanged({add:{service:this.$.service,parentNode:i&&i.file,pkgNode:o&&o.file,node:e}}),this.resetRevert(),null!==this.findNodeExtension(n)?this.refreshFileTree(function(){i.getNodeWithId(e.id).doAdjustScroll()},e.id):(this.showWarningPopup(ilibUtilities("Folder named '{name}' is an hidden one. It won't be shown in the file tree and will be empty.",{name:n})),this.refreshFileTree()),this.doHideWaitPopup()}),s.error(this,function(){this.doHideWaitPopup(),this._handleXhrError.bind(this,"Unable to create folder '"+n+"'",null)})},_handleXhrError:function(t,e,i,n){var o,s,r,a=i.xhrResponse;a&&(o=a.headers["content-type"],o&&(o.match("^text/plain")&&(r=a.body),o.match("^text/html")&&(s=a.body)));var h=Error(t+" ("+(""+n)+")");h.html=s,h.text=r,h.status=a.status,this.doError({msg:t,err:h}),"function"==typeof e&&e(h)},newFileClick:function(t,e){this.trace(t,"=>",e);var i=this.getFolder();i&&i.isDir?(this.$.nameFilePopup.setFileName(""),this.$.nameFilePopup.setFolderId(i.id),this.$.nameFilePopup.setPath(i.path),this.$.nameFilePopup.show()):this.showErrorPopup(ilibUtilities("Select a parent folder first"))},newFileCancel:function(t,e){this.trace(t,"=>",e),this.trace("New File canceled.")},newFileConfirm:function(t,e){this.trace(t,"=>",e);var i=e.folderId,n=e.name.trim();if(!this.checkedPath(n))return!0;var o="Creating "+n;this.doShowWaitPopup({msg:o});var s,r=n.substring(0,n.lastIndexOf(".")),a=this.findNodeExtension(n),h=""+window.location,l=h.substring(0,h.lastIndexOf("/")+1),c=this.getFolderOfSelectedNode(),d=c.updateNodes();d.response(this,function(){var t=function(t){return t.content===n},e=c.getNodeFiles().filter(t);if(0!==e.length)return this.doHideWaitPopup(),this.showErrorPopup(ilibUtilities("File '{name}' already exists",{name:n})),!0;s="package.js"===n?l+"templates/package.js":l+"templates/template."+a;var o={url:s,cacheBust:!1,handleAs:"text"},h={$NAME:r,$YEAR:(new Date).getFullYear()},d=new enyo.Ajax(o);d.response(this,function(t,e){this.trace("newFileConfirm response: ",e);for(var o in h)e=e.replace(o,h[o]);this.createFile(n,i,e),this.resetRevert()}),d.error(this,function(t,e){404===e?(this.createFile(n,i),null===a?this.showWarningPopup(ilibUtilities("File named '{name}' is an hidden one. It won't be shown in the file tree and will be empty.",{name:n})):this.showWarningPopup(ilibUtilities("No template found for '.{extension}' files. Created an empty one.",{extension:a}))):this.warn("error while fetching ",s,": ",e)}),d.go(),this.doHideWaitPopup()}),d.error(this,function(){return this.doHideWaitPopup(),this.showErrorPopup(ilibUtilities("Cannot reach filesystem")),!0})},copyClick:function(t,e){this.trace(t,"=>",e),this.selectedNode?(this.$.nameCopyPopup.setType(this.selectedNode.file.type),this.$.nameCopyPopup.setFileName(this.copyName(this.selectedNode.file.name)),this.$.nameCopyPopup.setPath(this.selectedNode.file.path),this.$.nameCopyPopup.setFolderId(this.selectedNode.file.id),this.$.nameCopyPopup.show()):this.showErrorPopup(ilibUtilities("First select a file or folder to copy"))},copyFileCancel:function(t,e){this.trace(t,"=>",e)},copyFileConfirm:function(t,e){this.trace(t,"=>",e);var i=this.selectedNode.file.name,n=t.fileName.trim();if(!this.checkedPath(n))return!0;var o,s=this.findNodeExtension(n);this.selectedNode.file.isDir?null===s?this.showWarningPopup(ilibUtilities("The new folder '{newFolder}' will be hidden.",{newFolder:n})):(o=this.findNodeExtension(this.selectedNode.file.name),null===o&&this.showWarningPopup(ilibUtilities("The new folder '{newFolder}' will be no more hidden.",{newFolder:n}))):null===s?this.showWarningPopup(ilibUtilities("The new file '{newFile}' will be hidden.",{newFile:n})):(o=this.findNodeExtension(this.selectedNode.file.name),null===o?this.showWarningPopup(ilibUtilities("The new file '{newFile}' will be no more hidden.",{newFile:n})):"js"!==s&&"txt"!==s&&"md"!==s&&"png"!==s&&"jpg"!==s&&"json"!==s&&"yml"!==s?this.showWarningPopup(ilibUtilities("Unknown '.{extension}' file.",{extension:s})):"js"!==o&&"js"===s&&this.showWarningPopup(ilibUtilities("The new file '{newFile}' will be added to related 'package.js' file.",{newFile:n}))),this.trace("Creating new file ",n," as copy of",i);var r="Creating new file "+n+" as copy of "+i;this.doShowWaitPopup({msg:r});var a=this.$.service.copy(this.selectedNode.file.id,{name:n,overwrite:!1});a.response(this,function(t,e){this.trace("inNode: ",e);var i=this.getParentNodeOfSelected(),o=i.getNodeNamed("package.js");this.doTreeChanged({add:{service:this.$.service,parentNode:i&&i.file,pkgNode:o&&o.file,node:e}}),this.resetRevert(),null!==s?this.refreshFileTree(function(){i.getNodeWithId(e.id).doAdjustScroll()},e.id):(this.showWarningPopup(ilibUtilities("Node named '{newName}' is an hidden one. It won't be shown in the file tree and will be empty.",{name:n})),this.refreshFileTree()),this.doHideWaitPopup()}),a.error(this,function(t,e){this.doHideWaitPopup(),this.warn("Unable to copy:",this.selectedNode.file,"as",n,e),this.showErrorPopup(ilibUtilities("Creating file '{copyName}' as copy of '{name}' failed: {error}",{copyName:n,name:this.selectedNode.file.name,error:""+e}))})},renameClick:function(t,e){this.trace(t,"=>",e),this.selectedNode?(this.$.renamePopup.setType(this.selectedNode.file.type),this.$.renamePopup.setFileName(this.selectedNode.file.name),this.$.renamePopup.setFolderId(this.selectedNode.file.id),this.$.renamePopup.setPath(this.selectedNode.file.path),this.$.renamePopup.show()):this.showErrorPopup(ilibUtilities("Select a file or folder to rename first"))},renameCancel:function(t,e){this.trace("inSender:",t,"inEvent:",e)},renameConfirm:function(t,e){this.trace("inSender:",t,"inEvent:",e);var i=t.fileName.trim();if(!this.checkedPath(i))return!0;var n,o=this.findNodeExtension(i);this.selectedNode.file.isServer||(this.selectedNode.file.isDir?null===o?this.showWarningPopup(ilibUtilities("Folder '{newFolder}' is now hidden.",{newFolder:i})):(n=this.findNodeExtension(this.selectedNode.file.name),null===n&&this.showWarningPopup(ilibUtilities("Folder '{newFolder}' is no more hidden.",{newFolder:i}))):null===o?this.showWarningPopup(ilibUtilities("File '{newFile}' is now hidden.",{newFile:i})):(n=this.findNodeExtension(this.selectedNode.file.name),null===n?this.showWarningPopup(ilibUtilities("File '{newFile}' is no more hidden.",{newFile:i})):"js"!==o?"js"===n?"txt"!==o&&"md"!==o&&"png"!==o&&"jpg"!==o&&"json"!==o&&"yml"!==o?this.showWarningPopup(ilibUtilities("Unknown '.{extension}' file. File '{oldFile}' will be removed from related 'package.js' file.",{extension:o,oldFile:this.selectedNode.file.name})):this.showWarningPopup(ilibUtilities("File '{oldFile}' will be removed from related 'package.js' file.",{oldFile:this.selectedNode.file.name})):"txt"!==o&&"md"!==o&&"png"!==o&&"jpg"!==o&&"json"!==o&&"yml"!==o&&this.showWarningPopup(ilibUtilities("Unknown '.{extension}' file.",{extension:o})):"js"!==n&&this.showWarningPopup(ilibUtilities("File '{newFile}' will be added to related 'package.js' file.",{newFile:i})))),this.trace("Renaming '",this.selectedNode.file,"' as '",i,"'");var s="Renaming "+this.selectedNode.file.name+" as "+i;this.doShowWaitPopup({msg:s});var r=this.$.service.rename(this.selectedNode.file.id,{name:i,overwrite:!1});r.response(this,function(t,e){this.trace("inNode: ",e);var i=this.getParentNodeOfSelected(),n=i.getNodeNamed("package.js");!this.selectedNode.file.isServer&&this.projectUrlReady&&(this.selectedNode.file.isDir?this.doFolderChanged({file:this.selectedNode.file,projectData:this.projectData}):(this.doFileRemoved({id:Ares.Workspace.files.computeId(this.selectedNode.file)}),e.service=this.$.service,this.doFileOpenRequest({file:e,projectData:this.projectData}))),null!==o?(this.doTreeChanged({remove:{service:this.$.service,parentNode:i&&i.file,pkgNode:n&&n.file,node:this.selectedNode.file},add:{service:this.$.service,parentNode:i&&i.file,pkgNode:n&&n.file,node:e}}),this.refreshFileTree(function(){i.getNodeWithId(e.id).doAdjustScroll()},e.id)):(this.doTreeChanged({remove:{service:this.$.service,parentNode:i&&i.file,pkgNode:n&&n.file,node:this.selectedNode.file}}),this.refreshFileTree()),this.resetRevert(),this.doHideWaitPopup()}),r.error(this,function(t,e){this.doHideWaitPopup(),this.warn("Unable to rename:",this.selectedNode.file,"into",i,e),this.showErrorPopup(ilibUtilities("Renaming file '{oldName}' as '{newName}' failed",{oldName:this.selectedNode.file.name,newName:i}))})},deleteClick:function(t,e){this.trace(t,"=>",e),this.selectedNode?(this.$.deletePopup.setType(this.selectedNode.file.isDir?ilibUtilities("folder"):ilibUtilities("file")),this.$.deletePopup.setName(this.selectedNode.file.name),this.$.deletePopup.setPath(this.selectedNode.file.path),this.$.deletePopup.show()):this.showErrorPopup(ilibUtilities("Select a file or folder to delete first"))},deleteCancel:function(t,e){this.trace(t,"=>",e)},deleteConfirm:function(t,e){this.trace(t,"=>",e);var i=this.$.serverNode,n=this.getParentNodeOfSelected(),o=n.getNodeNamed("package.js"),s="Deleting "+(this.selectedNode.file.isDir?"folder ":"file ")+this.selectedNode.file.name;this.doShowWaitPopup({msg:s});var r=this.$.service.remove(this.selectedNode.file.id);r.response(this,function(t,e){this.trace("inParentFolder: ",e),!this.selectedNode.file.isServer&&this.projectUrlReady&&(this.selectedNode.file.isDir?this.doFolderChanged({file:this.selectedNode.file,projectData:this.projectData}):this.doFileRemoved({id:Ares.Workspace.files.computeId(this.selectedNode.file)})),this.doTreeChanged({remove:{service:this.$.service,parentNode:n&&n.file,pkgNode:o&&o.file,node:this.selectedNode.file}}),this.resetRevert(),i.resized(),this.refreshFileTree(function(){n.doAdjustScroll()},n.file.id),n===i&&this.$.selection.select(i.file.id,i),this.doHideWaitPopup()}),r.error(this,function(t,e){this.warn("Unable to delete:",this.selectedNode.file,e),this.showErrorPopup(ilibUtilities("Deleting '{name}' failed",{name:this.selectedNode.file.name})),this.doHideWaitPopup()})},revertClick:function(t,e){this.trace(t,"=>",e),this.revertMove?(this.$.revertPopup.setType(this.movedNode.file.isDir?ilibUtilities("folder"):ilibUtilities("file")),this.$.revertPopup.setName(this.movedNode.file.name),this.$.revertPopup.setPath(this.originNode.file.path),this.$.revertPopup.show()):this.showErrorPopup(ilibUtilities("No more node moving to revert"))},revertCancel:function(t,e){this.trace("inSender:",t,"inEvent:",e)},revertConfirm:function(t,e){this.trace("inSender:",t,"inEvent:",e),this.trace("Reverting '",this.movedNode.file.name,"' into '",this.originNode.file.path,"'");var i="Reverting "+this.movedNode.file.name+" into "+this.originNode.file.path;this.doShowWaitPopup({msg:i});var n=this.moveNode(this.movedNode,this.originNode);n.response(this,function(){this.resetRevert(),this.doHideWaitPopup()}),n.error(this,function(t,e){this.doHideWaitPopup(),this.warn("Unable to revert:",this.movedNode.file.name,"into",this.originNode.file.path,e),this.showErrorPopup(ilibUtilities("Reverting '{name}' to '{oldpath}' failed",{name:this.movedNode.file.name,oldpath:this.originNode.file.path}))})},showErrorPopup:function(t){this.$.errorPopup.setErrorMsg(t),this.$.errorPopup.show()},showWarningPopup:function(t){this.$.errorPopup.set("title",ilibUtilities("warning")),this.showErrorPopup(t)},enableDisableButtons:function(){this.selectedNode?(this.$.deleteFileButton.setDisabled(this.selectedNode.file.isServer),this.$.copyFileButton.setDisabled(this.selectedNode.file.isServer),this.$.renameFileButton.setDisabled(this.selectedNode.file.isServer),this.selectedNode.file.isServer?(this.$.nodeDivider.hide(),this.$.deleteItem.hide(),this.$.copyItem.hide(),this.$.renameItem.hide()):(this.$.nodeDivider.show(),this.$.deleteItem.show(),this.$.copyItem.show(),this.$.renameItem.show())):(this.$.copyFileButton.setDisabled(!0),this.$.deleteFileButton.setDisabled(!0),this.$.renameFileButton.setDisabled(!0),this.$.nodeDivider.hide(),this.$.deleteItem.hide(),this.$.copyItem.hide(),this.$.renameItem.hide())},delayedRefresh:function(t,e){var i=new enyo.Async;return i.response(this,function(i,n){var o=e||n;this.trace("delayed refresh after ",t," on ",o),this.refreshFileTree(null,o)}),i},createFile:function(t,e,i){this.trace("Creating new file ",t," into folderId=",e);var n=this.$.service.createFile(e,t,i,{overwrite:!1});n.response(this,function(e,i){this.trace("inNodes: ",i);var n=this.getFolderOfSelectedNode(),o=n.getNodeNamed("package.js");n.expanded||(n.setExpanded(!0),n.setIcon("$assets/utilities/images/arrowDown.png"),n.updateNodes().response(this,function(){n.effectExpanded()})),this.doTreeChanged({add:{service:this.$.service,parentNode:n&&n.file,pkgNode:o&&o.file,node:i[0]}}),this.resetRevert(),null!==this.findNodeExtension(t)&&this.refreshFileTree(function(){var t=n.getNodeWithId(i[0].id);t.doAdjustScroll(),t.file.isServer||t.file.isDir||!this.projectUrlReady||this.doFileOpenRequest({file:t.file,projectData:this.projectData})}.bind(this),i[0].id)}),n.error(this,this._handleXhrError.bind(this,"Unable to create file '"+t+"'",null))},resetRevert:function(){this.movedNode=null,this.originNode=null,this.revertMove=!1,this.hideRevertMoveButton()},moveNode:function(t,e){this.trace("inNode",t,"inTarget",e);var i=this.$.service.rename(t.file.id,{folderId:e.file.id,overwrite:!1});return i.response(this,function(i,n){this.trace(i,"=>",n);var o=t.container,s=o.getNodeNamed("package.js"),r=e,a=r.getNodeNamed("package.js");!t.file.isServer&&this.projectUrlReady&&(t.file.isDir?this.doFolderChanged({file:t.file,projectData:this.projectData}):this.doFileRemoved({id:Ares.Workspace.files.computeId(t.file)})),r.expanded||(r.setExpanded(!0),r.setIcon("$assets/utilities/images/arrowDown.png"),r.updateNodes().response(this,function(){r.effectExpanded()})),this.doTreeChanged({remove:{service:this.$.service,parentNode:o&&o.file,pkgNode:s&&s.file,node:t.file},add:{service:this.$.service,parentNode:r&&r.file,pkgNode:a&&a.file,node:n}}),this.refreshFileTree(function(){e.getNodeWithId(n.id).doAdjustScroll()},n.id)}),i.error(this,function(e,i){this.warn("Unable to move:",t.file.name,i),this.showErrorPopup(ilibUtilities("Moving {nodeName} failed: {error}",{nodeName:t.file.name,error:""+i}))}),i},gotoNodePath:function(t){var e,i=this.$.serverNode,n=[],o=t.split("/"),s=function(t){if(t)this.warn("Path following failed",t);else{for(e=1;n.length>e;e++)n[e].file.isDir&&n[e-1].getNodeWithId(n[e].file.id).setExpanded(!0).doExpand();this.refreshFileTree(function(){n[e-1].doAdjustScroll()},n[e-1].file.id)
}}.bind(this);o.shift(),n.push(i),i.followNodePath(o,n,s)},checkNodePath:function(t){var e=this.$.serverNode,i=[],n=t.split("/"),o=n.length,s=function(t){return t?(this.warn("Path following failed",t),this.doPathChecked({status:!1}),!1):(i.length==o?this.doPathChecked({status:!0}):this.doPathChecked({status:!1}),void 0)}.bind(this);n.shift(),i.push(e),e.followNodePath(n,i,s)},checkNodeName:function(t,e){var i=this.$.serverNode,n=[],o=t.split("/"),s=o.length,r=function(t){t?(this.warn("Node does not exist",t),e(!1)):n.length==s?e(!0):e(!1)}.bind(this);o.shift(),n.push(i),i.followNodePath(o,n,r)},checkedPath:function(t){var e=/[<>\/\\!?$%&*,:;"|]/i;return t.match(e)?(this.showErrorPopup(ilibUtilities("Path '{path}' contains illegal characters",{path:t})),!1):!0},findNodeExtension:function(t){var e=t.split(".");return""===e[0]?null:1==e.length?"":e[e.length-1]}});

// source/utilities/FileChooser.js
enyo.kind({name:"Ares.FileChooser",kind:"onyx.Popup",modal:!0,centered:!0,floating:!0,autoDismiss:!1,debug:!1,published:{folderChooser:!1,headerText:"",allowCreateFolder:!1,allowNewFile:!1,allowToolbar:!0,serverSelectable:!0},project:null,components:[{kind:"FittableRows",classes:"onyx-popup ares-filechooser ares-classic-popup",components:[{classes:"title",components:[{name:"header",tag:"span",content:ilibUtilities("Select a directory")}]},{kind:"FittableColumns",classes:"onyx-light",fit:!0,components:[{kind:"FittableRows",name:"sources",classes:"ares-left-pane-file-chooser",components:[{kind:"onyx.Toolbar",classes:"ares-small-toolbar title-gradient",components:[{content:ilibUtilities("Sources"),classes:"ares-create-sources"}]},{kind:"ProviderList",selector:["type","filesystem"],fit:"true",name:"providerList",onSelectProvider:"handleSelectProvider"}]},{kind:"HermesFileTree",fit:!0,name:"hermesFileTree",onFileClick:"_selectFile",onFolderClick:"_selectFolder",onNewFolderConfirm:"createFolder"}]},{kind:"FittableRows",classes:"onyx-light ares-filechooser-footer",isContainer:!0,components:[{classes:"ares-row ares-file-choser-row",name:"foldersPathRow",showing:!0,components:[{tag:"label",name:"foldersPathLabel",classes:"ares-fixed-label ares-file-chooser-label"},{name:"foldersPathSelector",kind:"onyx.InputDecorator",classes:"onyx-toolbar-inline file-chooser-input",showing:!0,components:[{name:"selectedFoldersPath",kind:"onyx.Input",classes:"only-light",disabled:!0,placeholder:ilibUtilities("/Folders/File_Name")}]}]},{classes:"ares-row",name:"fileNameRow",showing:!1,components:[{tag:"label",name:"fileNameLabel",classes:"ares-fixed-label ares-file-chooser-label",content:ilibUtilities("File name: ")},{name:"fileNameSelector",kind:"onyx.InputDecorator",classes:"onyx-toolbar-inline file-chooser-input",showing:!1,components:[{name:"selectedFileName",kind:"onyx.Input",classes:"only-light",disabled:!0,placeholder:ilibUtilities("File_Name"),selectOnFocus:!0,oninput:"updateSelectedName",onchange:"updateSelectedName"}]}]}]},{kind:"onyx.Toolbar",classes:"bottom-toolbar",components:[{name:"cancel",kind:"onyx.Button",content:ilibUtilities("Cancel"),ontap:"cancel"},{name:"confirm",kind:"onyx.Button",content:ilibUtilities("OK"),classes:"right",ontap:"confirm",disabled:!0}]}]},{name:"errorPopup",kind:"Ares.ErrorPopup",msg:ilibUtilities("Error message")}],events:{onFileChosen:""},create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.folderChooserChanged(),this.allowToolbarChanged(),this.allowCreateFolderChanged(),this.headerText?this.headerTextChanged():this.folderChooser?this.setHeaderText(ilibUtilities("Select a Folder")):this.setHeaderText(ilibUtilities("Select a File"))},headerTextChanged:function(){this.$.header.setContent(this.headerText)},folderChooserChanged:function(){this.folderChooser?this.$.foldersPathLabel.setContent(ilibUtilities("Folder path: ")):this.allowNewFileChanged()},allowCreateFolderChanged:function(){this.$.hermesFileTree.hideFileOpButtons(),this.allowCreateFolder&&this.$.hermesFileTree.showNewFolderButton()},allowNewFileChanged:function(){return!this.folderChooser&&this.allowNewFile?(this.$.foldersPathLabel.setContent(ilibUtilities("Folder path: ")),this.$.fileNameRow.show(),this.$.fileNameSelector.show(),this.$.selectedFileName.setDisabled(!1),void 0):(this.$.foldersPathLabel.setContent(ilibUtilities("File path: ")),this.$.fileNameRow.hide(),this.$.fileNameSelector.hide(),this.$.selectedFileName.setDisabled(!0),void 0)},allowToolbarChanged:function(){this.$.hermesFileTree.showToolbar(this.allowToolbar)},handleSelectProvider:function(t,e){this.trace("sender:",t,", event:",e);var i=this.$.hermesFileTree,n=e.callBack;return e.service&&async.series([i.connectService.bind(i,e.service),i.refreshFileTree.bind(i)],n),!0},_selectFile:function(t,e){if(this.trace("sender:",t,", event:",e),this.folderChooser)this.selectedFile=void 0,this.$.confirm.setDisabled(!0);else{this.selectedFile=e.file,this.selectedFile.parent=this.$.hermesFileTree.getParentOfSelected(),this.$.confirm.setDisabled(this.selectedFile.isDir);var i=e.file.path;if(this.project){var n=i.substring(i.indexOf(this.project.id)+this.project.id.length,i.length);if(this.allowNewFile){var o=n.slice(0,-e.file.name.length-1);""===o&&(o="/"),this.$.selectedFoldersPath.setValue(o),this.$.selectedFileName.setValue(e.file.name)}else this.folderChooser||this.$.selectedFoldersPath.setValue(n)}else this.$.selectedFoldersPath.setValue(i)}return this.updateConfirmButton(),!0},_selectFolder:function(t,e){this.trace("sender:",t,", event:",e),this.selectedFile=e.file,this.selectedFile.parent=this.$.hermesFileTree.getParentOfSelected(),this.folderChooser?this.$.confirm.setDisabled(!1):this.$.confirm.setDisabled(!0);var i=e.file.path;if(this.project){var n=i.substring(i.indexOf(this.project.id)+this.project.id.length,i.length);""===n&&(n="/"),e.file.isDir&&this.$.selectedFoldersPath.setValue(n)}else this.$.selectedFoldersPath.setValue(i);return this.updateConfirmButton(),!0},updateSelectedName:function(t,e){return this.trace("sender:",t,", event:",e),this.updateConfirmButton(),!0},updateConfirmButton:function(){this.folderChooser?this.$.confirm.setDisabled(this.selectedFile&&this.selectedFile.isServer&&!this.serverSelectable||!(this.selectedFile&&this.selectedFile.isDir)):this.allowNewFile?this.$.confirm.setDisabled(!(this.selectedFile&&""!==this.$.selectedFoldersPath.getValue()&&""!==this.$.selectedFileName.getValue())):this.$.confirm.setDisabled(!(this.selectedFile&&!this.selectedFile.isDir))},confirm:function(t,e){this.trace("sender:",t,", event:",e),this.hide();var i=this.$.selectedFoldersPath.getValue();return this.checkedPath(i)?(this.allowNewFile&&("/"!==this.$.selectedFoldersPath.getValue()&&(i+="/"),i+=this.$.selectedFileName.getValue()),this.trace("New name:",i),this.doFileChosen({file:this.selectedFile,name:i}),!0):(this.doFileChosen(),!0)},cancel:function(t,e){return this.trace("sender:",t,", event:",e),this.hide(),this.doFileChosen(),!0},reset:function(){this.$.confirm.setDisabled(!0),this.$.selectedFoldersPath.setValue(""),this.$.selectedFileName.setValue(""),this.$.hermesFileTree.disconnect(),this.selectedFile=null,this.folderChooserChanged(),this.allowToolbarChanged(),this.allowCreateFolderChanged(),this.disconnectProject()},connectProject:function(t,e){this.project=t,this.$.sources.hide(),this.$.hermesFileTree.connectProject(this.project,e)},disconnectProject:function(){this.project=null,this.$.sources.show(),this.$.providerList.reset(),this.$.hermesFileTree.disconnect()},pointSelectedName:function(t,e){e||(t="/"),this.$.hermesFileTree.gotoNodePath(t)},checkSelectedName:function(t){this.$.hermesFileTree.checkNodePath(t)},checkedPath:function(t){var e=/[<>\\!?$%&*,:;"|]/i;return t.match(e)?(this.showErrorPopup(ilibUtilities("Path '{path}' contains illegal characters",{path:t})),!1):!0},showErrorPopup:function(t){this.$.errorPopup.setErrorMsg(t),this.$.errorPopup.show()}});

// source/utilities/LinkController.js
enyo.kind({name:"control.Link",kind:"enyo.Control",handlers:{onmouseover:"navOver",onmouseout:"navOut",onmousedown:"navPress",onmouseup:"navDePress"},constructor:function(){this.inherited(arguments)},navOver:function(){this.addClass("hover")},navOut:function(){this.removeClass("hover"),this.removeClass("active")},navPress:function(){this.addClass("active")},navDePress:function(){this.removeClass("active")}});

// source/utilities/PanelGrabber.js
enyo.kind({name:"aresGrabber",classes:"lrightArrow",switchGrabberDirection:function(t){this.addRemoveClass("lrightArrow",t),this.addRemoveClass("lleftArrow",!t)}});

// source/utilities/PopupTitle.js
enyo.kind({name:"Ares.PopupTitle",handlers:{ondragstart:"_dragstartAction",ondragend:"_dragendAction",ondrag:"_dragAction"},_initialPosition:"",_isDragging:!1,published:{draggable:!0},create:function(){this.inherited(arguments)},resizeHandler:function(){if(this.inherited(arguments),Ares.instance&&Ares.instance.hasNode()){var t=Ares.instance.hasNode();this.containerBounds=t?{width:t.clientWidth,height:t.clientHeight}:{}}else this.containerBounds={}},_dragAction:function(t,e){if(this.draggable&&this._isDragging){var i=this._isOutOfXDrag(t,e),n=this._isOutOfYDrag(t,e);null!==i?this.container.applyStyle("left",i+"px"):this.container.applyStyle("left",this._initialPosition.left+e.dx+"px"),null!==n?this.container.applyStyle("top",n+"px"):this.container.applyStyle("top",this._initialPosition.top+e.dy+"px")}return!0},_dragstartAction:function(t,e){return this.draggable&&(this._initialPosition=this.container.getBounds(),this._isDragging=this._isInDraggable(t,e)),!0},_dragendAction:function(){return this.draggable&&(this._isDragging=!1),!0},_isInDraggable:function(t,e){var i,n,o,s,r,a;return i=e.clientX,n=e.clientY,o=this._initialPosition.left,s=this._initialPosition.top,r=o+this._initialPosition.width,a=s+this._initialPosition.height,i>=o&&r>=i&&n>=s&&a>=n},_isOutOfXDrag:function(t,e){var i=null,n=e,o=this._initialPosition.left+n.dx;return 0>o?i=0:this.containerBounds.width<o+this._initialPosition.width&&(i=this.containerBounds.width-this._initialPosition.width),i},_isOutOfYDrag:function(t,e){var i=null,n=e,o=this._initialPosition.top+n.dy;return 0>o?i=0:this.containerBounds.height<o+this._initialPosition.height&&(i=this.containerBounds.height-this._initialPosition.height),i}});

// source/utilities/Logo.js
enyo.kind({name:"Ares.Logo",classes:"ares-logo",tag:"img",src:"",alt:"logo",create:function(){this.inherited(arguments),this.setSource("assets/images/enyo-logo.png")},setSource:function(t){this.setAttribute("src",t)},hideLogo:function(){this.setSource(null),this.hide()}});

// source/utilities/EditorSettings.js
enyo.kind({name:"editorSettings",events:{onCloseSettings:"",onApplySettings:"",onChangeRightPane:"",onTabSizeChange:"",onChangeSettings:""},published:{settings:{},previewSettings:{},defaultsSettings:{theme:"clouds",highlight:!1,fontsize:12,wordwrap:!1,rightpane:!0,autoTrace:!1,hera:!1,autoTraceLine:'this.log("sender:", inSender, ", event:", inEvent);',keys:{}},mainToolbar:!0},SETTINGS_STORAGE_KEY:"com.enyojs.editor.settings",components:[{classes:"ace-settings-paddings",components:[{kind:"FittableColumns",components:[{kind:"FittableRows",components:[{classes:"ares-row",components:[{name:"highLightLabel",tag:"label",classes:"ares-fixed-label ace-label",content:ilibUtilities("High light active line")},{name:"highLightButton",kind:"onyx.ToggleButton",onContent:"On",offContent:"Off",onChange:"buttonToggle"}]},{classes:"ares-row",components:[{name:"wordWrapLabel",tag:"label",classes:"ares-fixed-label ace-label",content:ilibUtilities("Word Wrap")},{name:"wordWrapButton",kind:"onyx.ToggleButton",onContent:"On",offContent:"Off",onChange:"wordWrapToggle"}]},{classes:"ares-row",components:[{name:"rightpane",tag:"label",classes:"ares-fixed-label ace-label",content:ilibUtilities("Right Panel (only for js files)")},{name:"rightPaneButton",kind:"onyx.ToggleButton",onContent:"On",offContent:"Off",onChange:"rightPaneChanged"}]},{classes:"ares-row",components:[{name:"hera",tag:"label",classes:"ares-fixed-label ace-label",content:"Css editor (experimental)"},{name:"heraButton",kind:"onyx.ToggleButton",onContent:"On",offContent:"Off",onChange:"heraChanged"}]}]},{kind:"FittableRows",components:[{classes:"ares-row",components:[{name:"editorThemesLabel",tag:"label",classes:"ares-fixed-label ace-label",content:ilibUtilities("Editor Themes")},{name:"themesPicker",kind:"Ares.PickerDecorator",components:[{classes:"large-picker"},{name:"themes",kind:"onyx.Picker",onSelect:"themeSelected",components:[{content:"ambiance"},{content:"chaos"},{content:"chrome"},{content:"clouds"},{content:"clouds_midnight"},{content:"cobalt"},{content:"crimson_editor"},{content:"dawn"},{content:"dreamweaver"},{content:"eclipse"},{content:"github"},{content:"idle_fingers"},{content:"kr_theme"},{content:"merbivore"},{content:"merbivore_soft"},{content:"mono_industrial"},{content:"monokai"},{content:"pastel_on_dark"},{content:"solarized_dark"},{content:"solarized_light"},{content:"textmate"},{content:"tomorrow"},{content:"tomorrow_night"},{content:"tomorrow_night_blue"},{content:"tomorrow_night_bright"},{content:"tomorrow_night_eighties"},{content:"twilight"},{content:"vibrant_ink"},{content:"xcode"}]}]}]},{classes:"ares-row",components:[{name:"fontSizeLabel",tag:"label",classes:"ares-fixed-label ace-label",content:ilibUtilities("Font Size")},{kind:"Ares.PickerDecorator",components:[{classes:"small-picker"},{name:"fontSizePicker",kind:"onyx.Picker",onSelect:"fontSize",components:[{content:6},{content:8},{content:10},{content:12},{content:13},{content:16},{content:20},{content:24},{content:30},{content:36}]}]}]},{classes:"ares-row",components:[{tag:"label",classes:"ares-fixed-label ace-label",content:ilibUtilities("Automatically add log instruction")},{name:"autoTraceButton",kind:"onyx.ToggleButton",onContent:"On",offContent:"Off",onChange:"aTrace"}]}]}]},{tag:"p",classes:"break"},{kind:"FittableRows",name:"functionKeys",components:[{kind:"Control",name:"osMessage",classes:"ares-row",content:ilibUtilities("Programmable buttons Ctrl-SHIFT F1 to F12")},{kind:"onyx.MenuDecorator",name:"program_buttons",classes:"ares-row",components:[{kind:"FittableColumns",classes:"ace-keys",components:[{kind:"onyx.Button",content:ilibUtilities("F-1"),name:"F1",ontap:"showPopup"},{kind:"onyx.Button",content:ilibUtilities("F-2"),name:"F2",ontap:"showPopup"},{kind:"onyx.Button",content:ilibUtilities("F-3"),name:"F3",ontap:"showPopup"},{kind:"onyx.Button",content:ilibUtilities("F-4"),name:"F4",ontap:"showPopup"},{kind:"onyx.Button",content:ilibUtilities("F-5"),name:"F5",ontap:"showPopup"},{kind:"onyx.Button",content:ilibUtilities("F-6"),name:"F6",ontap:"showPopup"}]},{kind:"FittableColumns",classes:"ace-keys",components:[{kind:"onyx.Button",content:ilibUtilities("F-7"),name:"F7",ontap:"showPopup"},{kind:"onyx.Button",content:ilibUtilities("F-8"),name:"F8",ontap:"showPopup"},{kind:"onyx.Button",content:ilibUtilities("F-9"),name:"F9",ontap:"showPopup"},{kind:"onyx.Button",content:ilibUtilities("F-10"),name:"F10",ontap:"showPopup"},{kind:"onyx.Button",content:ilibUtilities("F-11"),name:"F11",ontap:"showPopup"},{kind:"onyx.Button",content:ilibUtilities("F-12"),name:"F12",ontap:"showPopup"}]}]}]},{kind:"onyx.Popup",name:"modalPopup",modal:!0,autoDismiss:!1,onHide:"restoreButton",classes:" enyo-unselectable ace-contextual-popup ares-classic-popup",components:[{kind:"Control",classes:"ace-input-popup",name:"altInputbox",components:[{kind:"onyx.InputDecorator",classes:"ace-input-textarea",name:"inputDecorator",components:[{kind:"onyx.TextArea",placeholder:ilibUtilities("Enter text here"),name:"textArea"}]}]},{kind:"onyx.Toolbar",classes:"bottom-toolbar",components:[{kind:"onyx.Button",content:"Close",name:"closeinput",ontap:"closeModalPopup"},{kind:"onyx.Button",classes:"right",content:ilibUtilities("Update"),name:"oksave",ontap:"inputChanged"}]}]},{tag:"p",classes:"break"},{name:"autoTraceInputBox",kind:"FittableRows",showing:!1,components:[{classes:"ares-row",content:ilibUtilities("Log instruction injected in your event handlers:")},{kind:"onyx.InputDecorator",classes:"ace-input-textarea",components:[{kind:"onyx.Input",style:"width: 100%;",placeholder:ilibUtilities("Enter log instruction here"),name:"autoTraceInputLine",onchange:"atraceline"}]}]}]},{name:"settingsToolbar",kind:"onyx.Toolbar",classes:"bottom-toolbar",components:[{name:"close",kind:"onyx.Button",content:ilibUtilities("Cancel"),ontap:"cancelSettings"},{name:"restoreDefault",kind:"onyx.Button",content:ilibUtilities("Restore defaults"),ontap:"restoreDefaults"},{name:"change",kind:"onyx.Button",classes:"right",content:ilibUtilities("Save"),ontap:"saveSettings"}]}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.mainToolbarChanged(),this.getValuesFromLocalStorage(),this.$.highLightButton.value=this.settings.highlight,this.$.wordWrapButton.value=this.settings.wordwrap,this.$.rightPaneButton.value=this.settings.rightpane,this.$.heraButton.value=this.settings.hera,this.$.autoTraceButton.value=this.settings.autoTrace,this.$.autoTraceInputLine.setValue(this.settings.autoTraceLine),this.$.autoTraceInputBox.setShowing(this.settings.autoTrace);var t=this.$.themes.getClientControls();enyo.forEach(t,function(t){t.content==this.settings.theme&&this.$.themes.setSelected(t)},this);var e=this.$.fontSizePicker.getClientControls();enyo.forEach(e,function(t){t.content==this.settings.fontsize&&this.$.fontSizePicker.setSelected(t)},this),/Macintosh/.test(navigator.userAgent)&&this.$.functionKeys.hide(),this.previewSettings=enyo.json.parse(enyo.json.stringify(this.settings))},mainToolbarChanged:function(){this.mainToolbar||this.$.settingsToolbar.addClass("white")},getValuesFromLocalStorage:function(){var t=this;Ares.LocalStorage.get(this.SETTINGS_STORAGE_KEY,function(e){t.trace("localStorage[",t.SETTINGS_STORAGE_KEY,"] = ",e);var i,n=t.defaultsSettings;try{null!==e&&void 0!==e?(i=enyo.json.parse(e),enyo.forEach(Object.keys(n),function(e){t.settings[e]=void 0===i[e]?n[e]:i[e]})):t.settings=enyo.json.parse(enyo.json.stringify(t.defaultsSettings))}catch(o){Ares.LocalStorage.remove(t.SETTINGS_STORAGE_KEY)}})},initSettings:function(){this.getValuesFromLocalStorage(),this.initUI(this.settings),this.previewSettings=enyo.json.parse(enyo.json.stringify(this.settings)),this.doApplySettings()},getSettingFromLS:function(){return this.getValuesFromLocalStorage(),this.settings},initUI:function(t){this.$.highLightButton.setValue(t.highlight),this.$.wordWrapButton.setValue(t.wordwrap),this.$.autoTraceInputLine.setValue(t.autoTraceLine),this.$.autoTraceButton.setValue(t.autoTrace),this.$.autoTraceInputBox.setShowing(t.autoTrace);var e=this.$.themes.getClientControls();enyo.forEach(e,function(e){e.content==t.theme&&this.$.themes.setSelected(e)},this);var i=this.$.fontSizePicker.getClientControls();enyo.forEach(i,function(e){e.content==t.fontsize&&this.$.fontSizePicker.setSelected(e)},this),this.$.rightPaneButton.setValue(t.rightpane),this.$.heraButton.setValue(t.hera)},themeSelected:function(t,e){this.previewSettings.theme=e.originator.content,this.doChangeSettings()},buttonToggle:function(t,e){this.previewSettings.highlight=e.value,this.doChangeSettings()},wordWrapToggle:function(t,e){this.previewSettings.wordwrap=e.value,this.doChangeSettings()},fontSize:function(t,e){this.previewSettings.fontsize=e.selected.content,this.doChangeSettings()},rightPaneChanged:function(t,e){this.previewSettings.rightpane=e.value,this.doChangeRightPane()},inputChanged:function(){var t=this.key;/^F\d+/.test(t)&&(this.previewSettings.keys[t]=this.$.textArea.value),this.closeModalPopup()},closeModalPopup:function(){this.$.textArea.setValue(""),this.disableKeys(!1),this.$.modalPopup.hide(),this.draggable=!0},restoreButton:function(){return this.$[this.key].removeClass("active"),!0},disableKeys:function(t){var e,i;for(e=1;13>e;e++)i="F"+e,this.$[i].setAttribute("disabled",t);t&&this.$[this.key].setAttribute("disabled",!t)},showPopup:function(t){this.key=t.name,/^F\d+/.test(this.key)&&void 0!==this.previewSettings.keys[this.key]&&this.$.textArea.setValue(this.previewSettings.keys[this.key]),this.$[this.key].addClass("active"),this.disableKeys(!0),this.$.modalPopup.show(),this.draggable=!1},saveSettings:function(){Ares.LocalStorage.set(this.SETTINGS_STORAGE_KEY,enyo.json.stringify(this.previewSettings)),this.initUI(this.previewSettings),this.doCloseSettings()},resetSettings:function(){this.getValuesFromLocalStorage(),this.initUI(this.settings),this.previewSettings=enyo.json.parse(enyo.json.stringify(this.settings)),this.doApplySettings()},cancelSettings:function(){this.initUI(this.settings),this.previewSettings=enyo.json.parse(enyo.json.stringify(this.settings)),this.doApplySettings(),this.doCloseSettings()},restoreDefaults:function(){this.previewSettings=enyo.json.parse(enyo.json.stringify(this.defaultsSettings)),this.initUI(this.defaultsSettings),this.doChangeSettings()},heraChanged:function(t,e){this.log("sender:",t,", event:",e),this.previewSettings.hera=e.value,this.doChangeSettings()},aTrace:function(t,e){this.trace("sender:",t,", event:",e),this.previewSettings.autoTrace=e.value,this.$.autoTraceInputBox.setShowing(this.previewSettings.autoTrace)},atraceline:function(t,e){this.trace("sender:",t,", event:",e),this.previewSettings.autoTraceLine=t.value}});

// source/utilities/AresPickerButton.js
enyo.kind({name:"Ares.PickerButton",kind:"onyx.PickerButton",classes:"ares-picker enyo-border-box",components:[{name:"pickerValue",classes:"ares-picker-value enyo-border-box"},{name:"arrowContainer",classes:"ares-picker-arrow enyo-border-box"}],handlers:{onChange:"change"},change:function(t,e){void 0!==e.content&&this.$.pickerValue.setContent(e.content)},setPickerContent:function(t){this.$.pickerValue.setContent(t)}});

// source/utilities/AresPickerDecorator.js
enyo.kind({name:"Ares.PickerDecorator",kind:"onyx.MenuDecorator",classes:"onyx-picker-decorator",defaultKind:"Ares.PickerButton",handlers:{onChange:"change"},change:function(t,e){this.waterfallDown("onChange",e)}});

// source/utilities/FileChooserInput.js
enyo.kind({name:"Ares.FileChooserInput",classes:"ares-path-input",components:[{kind:"onyx.InputDecorator",name:"pathInputDecorator",components:[{kind:"onyx.Input",name:"pathInputValue",disabled:!0,onchange:"pathInputChanged"},{kind:"onyx.IconButton",name:"pathInputButtonBroken",classes:"ares-file-broken-icon",src:"$assets/project-view/images/broken_path.png",showing:!1,disabled:!0},{kind:"onyx.IconButton",name:"pathInputButtonValid",classes:"ares-file-broken-icon",src:"$assets/project-view/images/valid_path.png",showing:!1,disabled:!0}]},{kind:"onyx.IconButton",name:"pathInputButton",src:"$assets/harmonia/images/folder-open.png",ontap:"pathInputTap"}],published:{pathValue:"",status:!1,inputDisabled:!1,activePathInputButton:!1,inputTip:"",buttonTip:"",inputClasses:"",buttonClasses:"",decoratorClasses:""},events:{onFileChooserAction:"",onInputChanged:""},debug:!1,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.pathValueChanged(),this.inputDisabledChanged(),this.activePathInputButtonChanged(),this.statusChanged(),this.inputTipChanged(),this.buttonTipChanged(),this.inputClasses&&this.$.pathInputValue.addClass(this.inputClasses),this.buttonClasses&&this.$.pathInputButton.addClass(this.buttonClasses),this.decoratorClasses&&this.$.pathInputDecorator.addClass(this.decoratorClasses)},pathValueChanged:function(){this.$.pathInputValue.setValue(this.pathValue)},hideStatusNotification:function(){this.$.pathInputButtonBroken.setShowing(!1),this.$.pathInputButtonValid.setShowing(!1)},statusChanged:function(){this.status?(this.$.pathInputButtonBroken.setShowing(!1),this.$.pathInputButtonValid.setShowing(!0)):(this.$.pathInputButtonBroken.setShowing(!0),this.$.pathInputButtonValid.setShowing(!1)),this.activePathInputButton||this.hideStatusNotification()},inputDisabledChanged:function(){this.$.pathInputValue.setDisabled(this.inputDisabled)},activePathInputButtonChanged:function(){this.$.pathInputButton.setShowing(this.activePathInputButton)},inputTipChanged:function(){this.$.pathInputValue.setAttribute("title",this.inputTip)},buttonTipChanged:function(){this.$.pathInputButton.setAttribute("title",this.buttonTip)},pathInputTap:function(){this.doFileChooserAction()},pathInputChanged:function(){this.pathValue=this.$.pathInputValue.getValue(),this.doInputChanged()}});

// source/enyo-editor/phobos/Phobos.js
var ilibPhobos=AresI18n.resolve.bind(null,AresI18n.setBundle("$assets/enyo-editor/phobos/resources"));enyo.kind({name:"Phobos",classes:"enyo-unselectable",components:[{kind:"FittableRows",classes:"enyo-fit",components:[{name:"body",fit:!0,kind:"FittableColumns",components:[{name:"middle",fit:!0,classes:"panel",components:[{classes:"enyo-fit ares_phobos_panel border ",components:[{kind:"AceWrapper",name:"aceWrapper",classes:"enyo-fit ace-code-editor",onAutoCompletion:"startAutoCompletion",onChange:"docChanged",onCursorChange:"cursorChanged",onFind:"findpop",onFkey:"fkeypressed",onScroll:"handleScroll",onWordwrap:"toggleww"},{name:"imageViewer",kind:"enyo.Image"}]}]},{name:"right",kind:"rightPanels",showing:!1,classes:"ares_phobos_right",arrangerKind:"CardArranger"}]}]},{name:"autocomplete",kind:"Phobos.AutoComplete"},{name:"findpop",kind:"FindPopup",centered:!0,modal:!0,floating:!0,onFindNext:"findNext",onFindPrevious:"findPrevious",onReplace:"replace",onReplaceAll:"replaceAll",onHide:"doAceFocus",onClose:"findClose",onReplaceFind:"replacefind"},{name:"editorSettingsPopup",kind:"onyx.Popup",classes:"enyo-unselectable ares-classic-popup",centered:!0,modal:!0,floating:!0,autoDismiss:!1,onCloseSettings:"closeEditorPopup",onChangeSettings:"applyPreviewSettings",onChangeRightPane:"changeRightPane",components:[{name:"title",classes:"title draggable",kind:"Ares.PopupTitle",content:ilibPhobos("EDITOR GLOBAL SETTINGS")},{kind:"editorSettings",classes:"ace-settings-popup"}]}],events:{onError:"",onRegisterMe:"",onCssDocument:"",onFileEdited:" ",onChildRequest:"",onAceFocus:"",onReflowed:""},handlers:{onNewcss:"newcss",onReparseAsked:"reparseAction",onInitNavigation:"initNavigation",onNavigateInCodeEditor:"navigateInCodeEditor"},published:{projectData:null,objectsToDump:[]},editedDocs:"",injected:!1,debug:!1,analysis:{},helper:null,closeAll:!1,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.helper=new analyzer.Analyzer.KindHelper,this.trace("ilibPhobos: Close=",ilibPhobos("Close"))},getProjectController:function(){this.projectCtrl=this.projectData.getProjectCtrl(),this.projectCtrl||(this.projectCtrl=new ProjectCtrl({projectData:this.projectData}),this.projectCtrl.setOwner(this),this.projectData.setProjectCtrl(this.projectCtrl))},saveNeeded:function(){return this.docData.getEdited()},openDoc:function(t){this.docData&&this.docData.getEdited()&&this.reparseUsersCode(!0),this.docData=t,this.setProjectData(this.docData.getProjectData()),this.getProjectController(),this.setAutoCompleteData();var e=this.docData.getEdited(),i=this.docData.getFile(),n=i.name.split(".").pop();this.analysis=null;var o={json:"json",design:"json",js:"javascript",html:"html",css:"css",coffee:"coffee",dot:"dot",patch:"diff",diff:"diff",jade:"jade",less:"less",md:"markdown",markdown:"markdown",svg:"svg",xml:"xml",jpeg:"image",jpg:"image",png:"image",gif:"image"}[n]||"text";this.docData.setMode(o);var s=this.adjustPanelsForMode(o,this.$.editorSettings.getSettingFromLS());if(s){var r=this.docData.getAceSession();r?this.$.aceWrapper.setSession(r):(r=this.$.aceWrapper.createSession(this.docData.getData(),o),this.$.aceWrapper.setSession(r),this.docData.setAceSession(r)),this.$.autocomplete.setAceWrapper(this.$.aceWrapper),this.focusEditor(),this.$.aceWrapper.applyAceSettings(this.$.editorSettings.getSettingFromLS()),this.$.aceWrapper.editingMode=o}else{var a=this.projectData.getService().getConfig(),h=a.origin+a.pathname+"/file"+i.path;this.$.imageViewer.setAttribute("src",h)}this.manageDesignerButton();var l=this.reparseUsersCode(!0);return this.projectCtrl.buildProjectDb(),this.docData.setEdited(e),l},adjustPanelsForMode:function(t,e){this.trace("mode:",t," settings:",e);var i,n={javascript:{imageViewer:!1,aceWrapper:!0,saveButton:!0,saveAsButton:!0,newKindButton:!0,designerDecorator:!0,cssButton:!1,right:e.rightpane},image:{imageViewer:!0,aceWrapper:!1,saveButton:!1,saveAsButton:!1,newKindButton:!1,designerDecorator:!1,cssButton:!1,right:!1},text:{imageViewer:!1,aceWrapper:!0,saveButton:!0,saveAsButton:!0,newKindButton:!1,designerDecorator:!1,cssButton:!1,right:!1},css:{imageViewer:!1,aceWrapper:!0,saveButton:!0,saveAsButton:!0,newKindButton:!1,designerDecorator:!1,cssButton:e.hera,right:!1},less:{imageViewer:!1,aceWrapper:!0,saveButton:!0,saveAsButton:!0,newKindButton:!1,designerDecorator:!1,cssButton:e.hera,right:!1}},o=n[t]||n.text;for(var s in o)if(i=o[s],this.trace("show",s,":",i),void 0!==this.$[s])"function"==typeof this.$[s].setShowing?this.$[s].setShowing(i):this.warn("BUG: attempting to show/hide a non existing element: ",s);else if(void 0!==this.owner.$.editorFileMenu.$[s]&&void 0!==this.owner.$.designerFileMenu.$[s]){var r=this.owner.$.editorFileMenu.$[s],a=this.owner.$.designerFileMenu.$[s];"function"==typeof r.setShowing&&"function"==typeof a.setShowing?(r.setShowing(i),a.setShowing(i)):this.warn("BUG: attempting to show/hide a non existing element: ",s)}else"function"==typeof this.owner.$[s].setShowing?this.owner.$[s].setShowing(i):this.warn("BUG: attempting to show/hide a non existing element: ",s);var h={json:{rightIndex:0},javascript:{rightIndex:1},html:{rightIndex:2},css:{rightIndex:3},text:{rightIndex:0},image:{rightIndex:0}},l=h[t]||h.text;return this.$.right.setIndex(l.rightIndex),this.resizeHandler(),o.aceWrapper},setAutoCompleteData:function(){this.$.autocomplete.hide(),this.$.autocomplete.setProjectData(this.projectData),this.manageDesignerButton()},resetAutoCompleteData:function(){this.$.autocomplete.setProjectData(null)},manageDesignerButton:function(){this.doChildRequest({task:["enableDesignerButton",this.projectCtrl.fullAnalysisDone]})},projectDataChanged:function(t){this.projectData&&this.projectData.on("update:project-indexer",this.projectIndexerChanged,this),t&&t.off("update:project-indexer",this.projectIndexerChanged)},projectIndexerChanged:function(){this.trace("Project analysis ready"),this.manageDesignerButton()},dumpInfo:function(t){var e=[];if(this.$.right.setDumpCount(0),!t||!t.superkinds)return e.push("no content"),this.objectsToDump=e,this.$.right.setDumpCount(this.objectsToDump.length),void 0;var i=t;e.push(i.name),e.push("Extends");for(var n,o=0;n=i.superkinds[o];o++)n={name:i.superkinds[o],isExtended:!0},e.push(n);if(i.components.length)for(e.push("Components"),o=0,n;n=i.components[o];o++)e.push(n);for(e.push("Properties"),o=0,n;n=i.properties[o];o++)e.push(n);this.objectsToDump=e,this.$.right.setDumpCount(this.objectsToDump.length)},reparseAction:function(){this.reparseUsersCode(!0)},initNavigation:function(t,e){var i=e.item.$.item,n=e.item.index,o=this.objectsToDump[n];return o.isExtended?i.setFixedItem(o.name):o.name?i.setNavigateItem(o.name):i.setTitle(o),i.setIndex(n),!0},navigateInCodeEditor:function(t,e){var i=this.objectsToDump[e.index];i.start&&i.end&&(this.$.aceWrapper.navigateToPosition(i.start,i.end),this.doAceFocus())},reparseUsersCode:function(t){var e=this.docData.getMode(),i=!1,n={name:this.docData.getFile().name,code:this.$.aceWrapper.getValue(),path:this.projectCtrl.projectUrl+this.docData.getFile().dir+this.docData.getFile().name};switch(this.trace("called with mode ",e," inhibitUpdate ",t," on "+n.name),e){case"javascript":try{this.analysis=n,this.projectData.getProjectIndexer().reIndexModule(n),t!==!0&&this.projectData.updateProjectIndexer(),this.updateObjectsLines(n),this.dumpInfo(n.objects&&n.objects[n.currentObject]),this.$.autocomplete.setAnalysis(this.analysis),i=!0}catch(o){enyo.log("An error occured during the code analysis: ",o),this.dumpInfo(null),this.$.autocomplete.setAnalysis(null)}break;case"json":".design"==n.name.slice(-7)&&(this.projectData.getProjectIndexer().reIndexDesign(n),t!==!0&&this.projectData.updateProjectIndexer()),this.analysis=null,this.$.autocomplete.setAnalysis(null);break;default:this.analysis=null,this.$.autocomplete.setAnalysis(null)}return i},updateObjectsLines:function(t){if(t.ranges=[],t.objects&&t.objects.length>0){for(var e,i=0,n=1;t.objects.length>n;n++)e={first:i,last:t.objects[n].line-1},t.ranges.push(e),i=t.objects[n].line;e={first:i,last:1e9},t.ranges.push(e)}var o=this.$.aceWrapper.getCursorPositionInDocument();t.currentObject=this.findCurrentEditedObject(o),t.currentRange=t.ranges[t.currentObject],t.currentLine=o.row},findCurrentEditedObject:function(t){if(this.analysis&&this.analysis.ranges)for(var e=0;this.analysis.ranges.length>e;e++)if(t.row<=this.analysis.ranges[e].last)return e;return-1},designerAction:function(t){ares.assertCb(t),this.reparseUsersCode();var e=this.extractKindsData(),i={kinds:e,projectData:this.projectData,fileIndexer:this.analysis};e.length>0&&this.doChildRequest({task:["designDocument",i,t]})},extractKindsData:function(){var c=this.$.aceWrapper.getValue(),kinds=[];if(this.analysis){var nbKinds=0,errorMsg,i,o,oLen=this.analysis.objects.length;for(i=0;oLen>i;i++)o=this.analysis.objects[i],"kind"!==o.type?errorMsg=ilibPhobos("Ares does not support methods out of a kind. Please place '{name}' into a separate .js file",{name:o.name}):nbKinds++;if(0===nbKinds&&(errorMsg=ilibPhobos("No kinds found in this file")),errorMsg)return this.doError({msg:errorMsg}),[];for(i=0;oLen>i;i++){o=this.analysis.objects[i];var start=o.componentsBlockStart,end=o.componentsBlockEnd,kindBlock=enyo.json.codify.from(c.substring(o.block.start,o.block.end)),name=o.name,kind=kindBlock.kind||o.superkind,comps=[];if(start&&end){var js=c.substring(start,end);comps=eval("("+js+")")}for(var comp={name:name,kind:kind,components:comps},j=0;o.properties.length>j;j++){var prop=o.properties[j],pName=prop.name,value=this.verifyValueType(analyzer.Documentor.stripQuotes(prop.value[0].name));(void 0===start||start>prop.start)&&"components"!==pName&&(comp[pName]="{"===value||"["===value||"function"===value?kindBlock[pName]:value)}kinds.push(comp)}}return kinds},verifyValueType:function(t){return"true"===t?t=!0:"false"===t&&(t=!1),t},listHandlers:function(t,e){try{return this.helper.setDefinition(t),this.helper.listHandlers(e)}catch(i){enyo.log("Unexpected error: ",i)}},insertMissingHandlers:function(){if(this.analysis){this.reparseUsersCode(!0);for(var t=this.analysis.objects.length-1;t>=0;t--){var e=this.analysis.objects[t];e.components&&this.insertMissingHandlersIntoKind(e)}this.reparseUsersCode(!0)}else enyo.log("Unable to insert missing handler methods")},insertMissingHandlersIntoKind:function(t){for(var e=!1,i=0,n={},o=0;t.properties.length>o;o++){var s=t.properties[o];e=s.commaTerminated,"function"===s.value[0].name?(n[s.name]="",i=s.value[0].block.end):i=s.value[0].end}var r=this.listHandlers(t,{});if(t.block){var a,h=this.$.aceWrapper.getNewLineCharacter(),l=t.block.end-1,c=null;e||(c=this.$.aceWrapper.mapToLineColumns([i]),e=!0),this.$.editorSettings.initSettings();var d=this.$.editorSettings.settings,u="";for(var g in r)""!==g&&void 0===n[g]&&(u+=e?"":","+h,e=!1,u+="	"+g+": function(inSender, inEvent) {"+h,d.autoTrace===!0&&null!==d.autoTraceLine&&(u+="		"+d.autoTraceLine+h),u+="		// TO DO - Auto-generated code"+h+"	}");if(""!==u){c&&(this.$.aceWrapper.insertPosition(c[0],","),l++),i++,i===l&&(c=this.$.aceWrapper.mapToLineColumns([i]),this.$.aceWrapper.insertNewLine(c[0]),l+=h.length),a=this.$.aceWrapper.mapToLineColumns([l]),this.$.aceWrapper.insertNewLine(a[0]);var f=this.$.aceWrapper.mapToLineColumnRange(l,l);this.$.aceWrapper.replaceRange(f,u)}}else enyo.log("Unable to insert missing handler methods")},updateComponentsCode:function(t){this.injected=!0;for(var e=this.analysis.objects.length-1;e>=0;e--)if(t[e]){var i=this.analysis.objects[e],n=t[e],o=i.componentsBlockStart,s=i.componentsBlockEnd,r=i.block.start;if(!o||!s){var a=i.properties[i.properties.length-1];a&&(n=(a.commaTerminated?"":",")+"\n	"+"components: []",r=i.block.end-2,s=i.block.end-2)}var h=this.$.aceWrapper.mapToLineColumnRange(r,s);this.$.aceWrapper.replaceRange(h,n)}this.injected=!1,this.insertMissingHandlers(),0!==this.getEditorContent().localeCompare(this.docData.getData())&&(this.docData.setEdited(!0),this.doFileEdited())},docChanged:function(t,e){return this.injected||this.docData.getEdited()||(this.docData.setEdited(!0),this.doFileEdited()),this.trace("data:",enyo.json.stringify(e.data)),this.analysis&&this.$.autocomplete.start(e),!0},editorUserSyntaxError:function(){var t=[];return t=this.$.autocomplete.aceWrapper.editor.session.$annotations.length},cursorChanged:function(t,e){var i=this.$.aceWrapper.getCursorPositionInDocument();this.trace(t.id," ",e.type," ",enyo.json.stringify(i));var n=this.analysis;return n&&void 0!==n.currentLine&&n.currentLine!=i.row&&(n.currentLine=i.row,void 0!==n.currentRange&&(i.row<n.currentRange.first||i.row>n.currentRange.last)&&(n.currentObject=this.findCurrentEditedObject(i),n.currentRange=n.ranges[n.currentObject],this.dumpInfo(n.objects&&n.objects[n.currentObject]))),this.$.autocomplete.cursorChanged(i),!0},startAutoCompletion:function(){this.$.autocomplete.start(null)},newKindAction:function(){var t='enyo.kind({\n	name : "@cursor@",\n	kind : "Control",\n	components : []\n});';this.$.aceWrapper.insertAtEndOfFile(t,"@cursor@")},newcssAction:function(t,e){this.$.aceWrapper.insertAtEndOfFile(e.outPut)},closeSession:function(){this.docData&&(this.$.aceWrapper.destroySession(this.docData.getAceSession()),this.resetAutoCompleteData(),this.docData=null)},findpop:function(){var t=this.$.aceWrapper.getSelection();return t&&this.$.findpop.setFindInput(t),this.$.findpop.removeMessage(),this.$.findpop.disableReplaceButtons(!0),this.$.findpop.show(),!0},findNext:function(){var t={backwards:!1,wrap:!0,caseSensitive:!1,wholeWord:!1,regExp:!1};this.$.aceWrapper.find(this.$.findpop.findValue,t),this.$.findpop.updateAfterFind(this.$.aceWrapper.getSelection())},findPrevious:function(){var t={backwards:!0,wrap:!0,caseSensitive:!1,wholeWord:!1,regExp:!1};this.$.aceWrapper.find(this.$.findpop.findValue,t),this.$.findpop.updateAfterFind(this.$.aceWrapper.getSelection())},replaceAll:function(){var t=this.$.aceWrapper.replaceAll(this.$.findpop.findValue,this.$.findpop.replaceValue);this.$.findpop.updateMessage(this.$.aceWrapper.getSelection(),t)},replacefind:function(){var t={backwards:!1,wrap:!0,caseSensitive:!1,wholeWord:!1,regExp:!1};this.$.aceWrapper.replacefind(this.$.findpop.findValue,this.$.findpop.replaceValue,t),this.$.findpop.updateMessage(this.$.aceWrapper.getSelection())},replace:function(){this.$.aceWrapper.replace(this.$.findpop.findValue,this.$.findpop.replaceValue)},focusEditor:function(){this.$.aceWrapper.focus()},getEditorContent:function(){return this.$.aceWrapper.getValue()},handleScroll:function(){this.$.autocomplete.hide()},findClose:function(){this.$.findpop.hide()},toggleww:function(){"true"===this.$.aceWrapper.wordWrap||this.$.aceWrapper.wordWrap===!0?(this.$.aceWrapper.wordWrap=!1,this.$.aceWrapper.wordWrapChanged()):(this.$.aceWrapper.wordWrap=!0,this.$.aceWrapper.wordWrapChanged())},requestSelectedText:function(){return this.$.aceWrapper.requestSelectedText()},addNewKind:function(t){var e="enyo.kind("+t+"\n);";this.$.aceWrapper.insertAtEndOfFile(e,"@cursor@"),this.designerAction(ares.noNext)},replaceKind:function(t,e){var i=this.analysis.objects[t],n=this.$.aceWrapper.mapToLineColumnRange(i.block.start,i.block.end);this.$.aceWrapper.replaceRange(n,e),this.designerAction(ares.noNext)},editorSettings:function(){this.$.editorSettingsPopup.show(),this.$.editorSettings.initSettings()},closeEditorPopup:function(){return this.$.editorSettingsPopup.hide(),this.doAceFocus(),!0},changeRightPane:function(t){this.docData&&this.adjustPanelsForMode(this.docData.getMode(),t)},applySettings:function(t){this.$.aceWrapper.applyAceSettings(t),this.docData&&this.adjustPanelsForMode(this.docData.getMode(),t)},fkeypressed:function(t,e){var i=e;this.$.aceWrapper.insertAtCursor(this.$.editorSettings.settings.keys[i])},undoAndUpdate:function(t){ares.assertCb(t),this.$.aceWrapper.undo(),this.updateCodeInDesigner(t)},redoAndUpdate:function(t){ares.assertCb(t),this.$.aceWrapper.redo(),this.updateCodeInDesigner(t)},updateCodeInDesigner:function(t){ares.assertCb(t),this.reparseUsersCode(!0);var e={kinds:this.extractKindsData(),projectData:this.projectData,fileIndexer:this.analysis};e.kinds.length>0?this.doChildRequest({task:["loadDesignerUI",e,t]}):setTimeout(t,0)},cssAction:function(){this.reparseAction();var t={projectData:this.projectData,fileIndexer:this.analysis};this.doCssDocument(t)},newcss:function(t){this.$.aceWrapper.insertAtEndOfFile(t)},replacecss:function(t,e){var i={backwards:!1,wrap:!0,caseSensitive:!1,wholeWord:!1,regExp:!1};this.$.aceWrapper.gotoLine(0,0),this.$.aceWrapper.find(t,i),this.$.aceWrapper.replace(t,e,i)},resizeHandler:function(){this.inherited(arguments),this.$.body.reflow(),this.$.aceWrapper.resize(),this.doReflowed()}}),enyo.kind({name:"rightPanels",kind:"Panels",wrap:!1,draggable:!1,events:{onCss:"",onReparseAsked:"",onInitNavigation:"",onNavigateInCodeEditor:""},components:[{},{kind:"enyo.Control",classes:"enyo-fit",components:[{name:"right",classes:"enyo-fit ares_phobos_panel border",components:[{kind:"onyx.Button",content:"Reparse",ontap:"doReparseAsked"},{kind:"enyo.Scroller",classes:"enyo-fit ace-helper-panel",components:[{tag:"ul",kind:"enyo.Repeater",name:"dump",onSetupItem:"sendInitHelperReapeter",ontap:"sendNavigate",components:[{tag:"li",classes:"ace-helper-list",kind:"RightPanel.Helper",name:"item"}]}]}]}]},{},{kind:"enyo.Control",classes:"enyo-fit",components:[]}],create:function(){this.inherited(arguments)},sendInitHelperReapeter:function(t,e){this.doInitNavigation({item:e.item})},sendNavigate:function(t,e){this.doNavigateInCodeEditor({index:e.index})},setDumpCount:function(t){this.$.dump.setCount(t)}}),enyo.kind({name:"RightPanel.Helper",published:{title:"",fixedItem:"",navigateItem:"",index:-1},components:[{name:"title",classes:"ace-title"},{name:"fixedItem",classes:"ace-fixed-item"},{name:"navigateItem",kind:"control.Link",classes:"ace-navigate-item"}],titleChanged:function(){this.$.title.setContent(this.title)},fixedItemChanged:function(){this.$.fixedItem.setContent(this.fixedItem)},navigateItemChanged:function(){this.$.navigateItem.setContent(this.navigateItem)}});

// source/enyo-editor/phobos/AutoComplete.js
enyo.kind({name:"Phobos.AutoComplete",kind:"onyx.Popup",centered:!1,floating:!0,autoDismiss:!1,modal:!1,classes:"ares_phobos_autocomp ares-masked-content-popup",published:{aceWrapper:null,analysis:null,projectData:null,projectIndexer:null},components:[{kind:"Select",name:"autocompleteSelect",attributes:{size:1},onchange:"autocompleteChanged",classes:"ares_phobos_autocomp_select",components:[]}],events:{onAceFocus:""},handlers:{onHide:"hideAutocompletePopup"},AUTOCOMP_THIS:"this.",AUTOCOMP_THIS_DOLLAR:"this.$.",AUTOCOMP_ENYO:"enyo.",AUTOCOMP_ONYX:"onyx.",debug:!1,input:"",suggestions:null,suggestionsEnyo:null,suggestionsOnyx:null,localKinds:{},kindName:"",popupShown:!1,create:function(){ares.setupTraceLogger(this),this.inherited(arguments)},aceWrapperChanged:function(){var t=this.aceWrapper;t.addCommand({name:"Up",bindKey:{win:"Up",mac:"Up"},exec:enyo.bind(this,"cursorUp")}),t.addCommand({name:"Down",bindKey:{win:"Down",mac:"Down"},exec:enyo.bind(this,"cursorDown")}),t.addCommand({name:"Return",bindKey:{win:"Return",mac:"Return"},exec:enyo.bind(this,"keyReturn")}),t.addCommand({name:"Escape",bindKey:{win:"ESC",mac:"ESC"},exec:enyo.bind(this,"keyEscape")})},start:function(t){var e=new Phobos.Suggestions,i=!1;if(this.analysis&&this.analysis.objects&&this.analysis.objects.length>0)if(this.popupShown)t.data&&this.processChanges(t);else{if(this.trace("Auto-Completion needed ? - ",t&&enyo.json.stringify(t.data)),this.kindName=this.analysis.objects[this.analysis.currentObject].name,this.trace("Current Kind Name: ",this.kindName),t){var n=t.data;if(n&&"insertText"===n.action){var o=n.text.substr(n.text.length-1);"."===o&&(i=!0)}}else i=!0;i===!0&&(this.isCompletionAvailable(t,this.AUTOCOMP_THIS_DOLLAR)&&(e=this.fillSuggestionsThisDollar(e)),this.isCompletionAvailable(t,this.AUTOCOMP_THIS)&&(e=this.fillSuggestionsDoEvent(this.kindName,e),e=this.fillSuggestionsGettersSetters(this.kindName,e),e=this.fillSuggestionsProperties(this.kindName,e,this.AUTOCOMP_THIS)),this.isCompletionAvailable(t,this.AUTOCOMP_ENYO)&&(e=this.fillSuggestionsEnyo(e)),this.isCompletionAvailable(t,this.AUTOCOMP_ONYX)&&(e=this.fillSuggestionsOnyx(e)),this.buildLevel2Suggestions(t,e)),e.getCount()>0&&(this.input="",this.suggestions=e.getSortedSuggestions(),this.showAutocompletePopup())}},isCompletionAvailable:function(t,e){this.trace("for ",e);var i,n,o,s;return o=t?t.data.range.end:this.aceWrapper.getCursorPositionInDocument(),i=this.aceWrapper.getLine(o.row),s=e.length,n=i.substr(o.column-s,s),this.trace("last >>",n," <<"),n===e?(this.popupPosition=o,this.trace("Completion available for ",e),!0):!1},buildLevel2Suggestions:function(t,e){var i,n,o,s,r;o=t?t.data.range.end:this.aceWrapper.getCursorPositionInDocument(),i=this.aceWrapper.getLine(o.row);for(var a,h=0;a=this.analysis.objects[this.analysis.currentObject].components[h];h++)if(r=this.AUTOCOMP_THIS_DOLLAR+a.name+".",s=r.length,n=i.substr(o.column-s,s),this.trace("last >>",n,"<<"),n===r)return this.popupPosition=o,this.trace("Completion available for ",r," kind: ",a.kind),this.fillSuggestionsDoEvent(a.kind,e),this.fillSuggestionsGettersSetters(a.kind,e),this.fillSuggestionsProperties(a.kind,e,r),void 0},fillSuggestionsThisDollar:function(t){return enyo.forEach(this.analysis.objects[this.analysis.currentObject].components,function(e){t.addItem({name:e.name})}),t},fillSuggestionsDoEvent:function(t,e){var i,n,o,s,r;if(i=this.getKindDefinition(t),void 0!==i){for(this.trace("Adding doXXX for ",t),n=i.properties,s=0;n.length>s;s++)if("events"===n[s].token){o=n[s].value[0].properties;for(var a=0;o.length>a;a++)r=o[a].name.trim().replace("on","do"),e.addItem({name:r,kind:t})}return this.fillSuggestionsDoEvent(i.superkind,e)}return e},fillSuggestionsGettersSetters:function(t,e){var i,n,o,s,r;if(i=this.getKindDefinition(t),void 0!==i){for(this.trace("Adding getters/setters for ",t),n=i.properties,s=0;n.length>s;s++)if("published"===n[s].token){o=n[s].value[0].properties;for(var a=0;o.length>a;a++)r="set"+o[a].name.substr(0,1).toUpperCase()+o[a].name.substr(1).trim(),e.addItem({name:r,kind:t}),r="get"+o[a].name.substr(0,1).toUpperCase()+o[a].name.substr(1).trim(),e.addItem({name:r,kind:t})}return this.fillSuggestionsGettersSetters(i.superkind,e)}return e},fillSuggestionsProperties:function(t,e,i){var n,o,s,r;if(n=this.getKindDefinition(t),void 0!==n){for(this.trace("Adding properties for ",t),o=n.allProperties,s=0;o.length>s;s++)"function"===o[s].value[0].token&&("public"===o[s].value[0].group||i==this.AUTOCOMP_THIS)&&(r=o[s].name,e.addItem({name:r,kind:t}));return this.fillSuggestionsProperties(n.superkind,e,i)}return e},fillSuggestionsEnyo:function(t){return t.concatenate(this.suggestionsEnyo)},fillSuggestionsOnyx:function(t){return t.concatenate(this.suggestionsOnyx)},showAutocompletePopup:function(){this.fillSuggestionList();var t=this.$.autocompleteSelect;if(t.nbEntries=t.controls.length,t.nbEntries>0){var e=Math.max(2,Math.min(t.nbEntries,10));this.trace("Nb entries: ",t.nbEntries," Shown: ",e),t.setAttribute("size",e),t.setSelected(0),t.render();var i=this.aceWrapper,n=i.textToScreenCoordinates(this.popupPosition.row,this.popupPosition.column);this.applyStyle("padding-top",i.getLineHeight()+"px");var o={left:n.pageX,top:n.pageY};this.showAtPosition(o),this.popupShown=!0}else this.hideAutocompletePopup()},fillSuggestionList:function(){var t=this.$.autocompleteSelect;t.destroyComponents();var e=this.input;this.trace("Preparing suggestions list, input: >>",e,"<< + count ",this.suggestions.length),enyo.forEach(this.suggestions,function(i){var n=i.name;0===e.length?t.createComponent({content:n}):0===n.indexOf(e)&&t.createComponent({content:n})},this)},hideAutocompletePopup:function(){return this.popupShown=!1,this.hide(),this.doAceFocus(),!0},autocompleteChanged:function(){this.hide();var t=this.$.autocompleteSelect.getValue();t=t.substr(this.input.length);var e=enyo.clone(this.popupPosition);return e.column+=this.input.length,this.trace("Inserting >>",t,"<< at ",enyo.json.stringify(e)),this.aceWrapper.insertAt(e,t),this.doAceFocus(),!0},processChanges:function(t){this.trace("Auto-Completion update - ",t.data,this.popupPosition);var e,i=t.data;if("insertText"===i.action)e=i.range.end;else{if("removeText"!==i.action)throw"Unexpected action: "+i.action;e=i.range.start}this.cursorChanged(e)},cursorChanged:function(t){if(this.popupShown){if(t.row!==this.popupPosition.row)return this.hideAutocompletePopup(),void 0;var e=t.column-this.popupPosition.column;if(this.trace("Auto-Completion update - current: ",enyo.json.stringify(t)," len: ",e),0>e)return this.hideAutocompletePopup(),void 0;var i=this.aceWrapper.getLine(t.row);this.input=i.substr(this.popupPosition.column,e),this.showAutocompletePopup()}},cursorUp:function(){if(this.popupShown){var t=this.$.autocompleteSelect,e=t.getSelected()-1;0>e&&(e=t.nbEntries-1),t.setSelected(e)}else this.aceWrapper.navigateUp(1)},cursorDown:function(){if(this.popupShown){var t=this.$.autocompleteSelect,e=(t.getSelected()+1)%t.nbEntries;t.setSelected(e)}else this.aceWrapper.navigateDown(1)},keyEscape:function(){this.hideAutocompletePopup()},keyReturn:function(){this.popupShown?(this.autocompleteChanged(),this.hideAutocompletePopup()):this.aceWrapper.insertAtCursor("\n")},projectDataChanged:function(t){this.projectData&&(this.projectData.on("change:project-indexer",this.projectIndexReady,this),this.projectData.on("update:project-indexer",this.projectIndexerChanged,this),this.setProjectIndexer(this.projectData.getProjectIndexer())),t&&(t.off("change:project-indexer",this.projectIndexReady),t.off("update:project-indexer",this.projectIndexerChanged))},projectIndexReady:function(t,e){this.setProjectIndexer(e)},projectIndexerChanged:function(){this.trace("Project analysis ready");var t,e;this.projectIndexer?(t=new Phobos.Suggestions,e=/^enyo\..*$/,t.add(this.projectIndexer.search(this.getFctFilterFn(e),this.getMapFn(this.AUTOCOMP_ENYO),this)),t.add(this.projectIndexer.search(this.getKindFilter(e),this.getMapFn(this.AUTOCOMP_ENYO),this)),this.suggestionsEnyo=t,t=new Phobos.Suggestions,e=/^onyx\..*$/,t.add(this.projectIndexer.search(this.getFctFilterFn(e),this.getMapFn(this.AUTOCOMP_ONYX),this)),t.add(this.projectIndexer.search(this.getKindFilter(e),this.getMapFn(this.AUTOCOMP_ONYX),this)),this.suggestionsOnyx=t):(this.suggestionsEnyo=new Phobos.Suggestions,this.suggestionsOnyx=new Phobos.Suggestions)},analysisChanged:function(){if(this.localKinds={},this.analysis&&this.analysis.objects)for(var t,e=0;t=this.analysis.objects[e];e++)this.localKinds[t.name]&&this.log("Kind "+t.name+" is defined at least twice in the same file"),this.localKinds[t.name]=t},getKindDefinition:function(t){var e=this.localKinds[t];return void 0===e&&this.projectIndexer&&(e=this.projectIndexer.findByName(t),void 0===e&&(e=this.projectIndexer.findByName(this.AUTOCOMP_ENYO+t))),e},getFctFilterFn:function(t){return function(e){return"function"===e.type&&"public"===e.group&&t.test(e.name)}},getKindFilter:function(t){return function(e){return"kind"===e.type&&"enyo.kind"===e.token&&"public"===e.group&&t.test(e.name)}},getMapFn:function(t){var e,i=t.length;return function(t){return e=t.name.substr(i),{name:e}}}}),enyo.kind({name:"Phobos.Suggestions",kind:"enyo.Component",debug:!1,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.objectId=Phobos.Suggestions.objectCounter++,this.trace("objectId: ",this.objectId),this.items={},this.nbItems=0},add:function(t){t instanceof Array?enyo.forEach(t,this.addItem,this):this.addItem(t)},addItem:function(t){var e=t.name;void 0===this.items[e]&&(this.items[e]=t,this.nbItems++,this.trace("objectId: ",this.objectId," added: ",e," count: ",this.nbItems))},reset:function(){this.trace("objectId: ",this.objectId),this.items={},this.nbItems=0},getSortedSuggestions:function(){var t=[];for(var e in this.items)this.items.hasOwnProperty(e)&&t.push(this.items[e]);return t.sort(Phobos.Suggestions.nameCompare)},getCount:function(){return this.trace("objectId: ",this.objectId," count: ",this.nbItems),this.nbItems},concatenate:function(t){if(t){this.trace("objectId: ",t.objectId," into ",this.objectId);for(var e in t.items)this.addItem(t.items[e])}return this},statics:{objectCounter:0,nameCompare:function(t,e){var i=t.name.toLowerCase(),n=e.name.toLowerCase();return n>i?-1:i>n?1:0}}});

// source/enyo-editor/phobos/FindPopup.js
enyo.kind({name:"FindPopup",kind:"onyx.Popup",classes:"ares-classic-popup",events:{onFindNext:"",onFindPrevious:"",onReplace:"",onReplaceAll:"",onReplaceFind:"",onClose:""},published:{findValue:"",replaceValue:""},handlers:{onShow:"shown"},components:[{classes:"title draggable",kind:"Ares.PopupTitle",content:ilibPhobos("FIND/REPLACE")},{classes:"ace-find-popup",components:[{kind:"FittableRows",components:[{classes:"ares-row",components:[{tag:"label",classes:"ares-fixed-label ace-find-label",content:ilibPhobos("Find:")},{kind:"onyx.InputDecorator",components:[{name:"find",kind:"onyx.Input",oninput:"findChanged"}]}]},{classes:"ares-row",components:[{tag:"label",classes:"ares-fixed-label ace-find-label",content:ilibPhobos("Replace:")},{kind:"onyx.InputDecorator",components:[{name:"replace",kind:"onyx.Input",oninput:"replaceChanged"}]}]},{classes:"ares-row",components:[{name:"message",classes:"ace-find-message",fit:!0}]},{classes:"ares-row",components:[{kind:"FittableColumns",classes:"ace-find-left",fit:!0,components:[{name:"findnext",kind:"onyx.Button",classes:"ace-find-button",content:ilibPhobos("Find"),ontap:"doFindNext"},{name:"findprevious",kind:"onyx.Button",classes:"ace-find-button",content:ilibPhobos("Find Prev"),ontap:"doFindPrevious"}]}]},{classes:"ares-row",components:[{kind:"FittableColumns",classes:"ace-find-left",fit:!0,components:[{name:"replaceFind",kind:"onyx.Button",classes:"ace-find-button",content:ilibPhobos("Replace/Find"),ontap:"doReplaceFind"},{name:"replaceOne",kind:"onyx.Button",classes:"ace-find-button",content:ilibPhobos("Replace"),ontap:"doReplace"}]}]},{classes:"ares-row",components:[{kind:"FittableColumns",classes:"ace-find-left",fit:!0,components:[{name:"replaceAll",kind:"onyx.Button",classes:"ace-find-button",content:ilibPhobos("Replace All"),ontap:"doReplaceAll"}]}]}]}]},{kind:"onyx.Toolbar",classes:"bottom-toolbar",components:[{name:"close",kind:"onyx.Button",content:ilibPhobos("Close"),ontap:"doClose"}]}],create:function(){this.inherited(arguments),this.findChanged()},findChanged:function(){this.findValue=this.$.find.getValue(),this.disableActionButtons(""===this.findValue),this.disableReplaceButtons(!0)},replaceChanged:function(){this.replaceValue=this.$.replace.getValue()},setFindInput:function(t){this.$.find.setValue(t),this.findChanged()},disableActionButtons:function(t){this.$.replaceAll.setDisabled(t),this.$.findprevious.setDisabled(t),this.$.findnext.setDisabled(t),this.disableReplaceButtons(t)},disableReplaceButtons:function(t){this.$.replaceOne.setDisabled(t),this.$.replaceFind.setDisabled(t)},removeMessage:function(){this.$.message.setContent("")},updateMessage:function(t,e){t&&0!==e?e>0?this.$.message.setContent(ilibPhobos("{occurences} matches replaced"),{occurences:e}):this.removeMessage():this.$.message.setContent(ilibPhobos("'{value}' not found",{value:this.findValue}))},updateAfterFind:function(t){this.updateMessage(t),this.disableReplaceButtons(""===t)},shown:function(){this.$.find.focus()}});

// source/enyo-editor/phobos/ProjectCtrl.js
enyo.kind({name:"ProjectCtrl",kind:"enyo.Component",debug:!1,published:{projectData:null,pathResolver:null,fullAnalysisDone:!1},events:{onErrorTooltip:"",onErrorTooltipReset:""},handlers:{onError:"raiseErrorTooltip"},components:[{name:"projectAnalyzer",kind:"analyzer.Analyzer",onIndexReady:"projectIndexReady",onError:"passError"},{kind:"Signals",onAnalyserError:"raiseLoadError"}],ongoing:!1,pending:!1,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.projectUrl=this.projectData.getProjectUrl(),this.trace("New project: ",this.projectUrl),this.createPathResolver(this.projectUrl),this.projectData.setProjectIndexer(this.$.projectAnalyzer.index)},createPathResolver:function(){this.pathResolver||(this.pathResolver=new enyo.pathResolverFactory,this.pathResolver.addPaths({enyo:this.projectUrl+"/enyo",lib:"$enyo/../lib"}))},buildProjectDb:function(){this.fullAnalysisDone?this.trace("Project DB already available for ",this.projectUrl," - index: ",this.$.projectAnalyzer.index):this.forceFullAnalysis()},forceFullAnalysis:function(){this.doErrorTooltipReset(),this.ongoing?(this.trace("Set pending project analysis for ",this.projectUrl),this.pending=!0):(this.trace("Starting project analysis for ",this.projectUrl),this.ongoing=!0,this.pending=!1,this.$.projectAnalyzer.analyze([this.projectUrl+"/enyo/source",this.projectUrl],this.pathResolver))},runPendingAnalysis:function(t){this.ongoing=!1,this.pending&&(this.trace("Running pending project analysis after ",t),this.forceFullAnalysis())},passError:function(){this.runPendingAnalysis("analyser error")},raiseLoadError:function(t,e){var i=RegExp(".*"+this.projectUrl),n=RegExp("[^/]+/\\.\\./"),o=e.msg.replace(i,"").replace(n,"");this.log("analyser cannot load ",o),this.doErrorTooltip({msg:ilibPhobos("analyser cannot load '{barUrl}'",{barUrl:o})}),this.runPendingAnalysis("analyser load error")},projectIndexReady:function(){this.runPendingAnalysis("successfull analysis"),this.pending||(this.fullAnalysisDone=!0,this.projectData.updateProjectIndexer())},raiseErrorTooltip:function(t,e){return this.doErrorTooltip(e),!0}});

// source/enyo-editor/phobos/AceScroller.js
enyo.kind({name:"enyo.AceScroller",kind:enyo.Scroller,events:{onCalcBoundaries:""},calcBoundaries:function(){if(this.hasNode()){var t={bottom:Math.min(0,this.node.clientHeight),right:Math.min(0,this.node.clientWidth)};this.doCalcBoundaries(t),this.$.scroll.bottomBoundary=t.bottom||0,this.$.scroll.rightBoundary=t.right||0}},effectScrollAccelerated:function(){},effectScrollNonAccelerated:function(){}});

// source/enyo-editor/phobos/AceWrapper.js
enyo.kind({name:"enyo.AceWrapper",kind:enyo.Control,published:{value:"",theme:"clouds",fontSize:"",wordWrap:!1,readonly:!1,highlightActiveLine:!1,showPrintMargin:!1,useSoftTabs:!1,persistentHScroll:!1,editingMode:"javascript",translateX:""},requiresDomMousedown:!0,events:{onChange:"",onScroll:"",onCursorChange:"",onAutoCompletion:"",onFind:"",onWordwrap:"",onFkey:"",onChildRequest:"",onAceGotFocus:"",onSetBreakpoint:"",onClearBreakpoint:""},style:"font-size: 0.8em;",components:[{name:"aceEditor",classes:"enyo-view enyo-fit"}],rendered:function(){this.inherited(arguments);var t=this.hasNode();t&&(this.editor=ace.edit(this.$.aceEditor.id),this.valueChanged(),this.updateSessionSettings(this.getSession()),this.readonlyChanged(),this.showPrintMarginChanged(),this.highlightActiveLineChanged(),this.persistentHScrollChanged(),this.gotoLine(0),this.addListeners(),this.addSessionListeners(),this.addKeyBindings())},applyAceSettings:function(t){this.setTheme(t.theme),this.setFontSize(t.fontsize),this.setHighlightActiveLine(t.highlight),this.setWordWrap(t.wordwrap)},addKeyBindings:function(){var t=this.editor.commands;t.addCommand({name:"save",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:this.doChildRequest.bind(this,{task:"saveCurrentDoc"})}),t.addCommand({name:"autocompletion",bindKey:{win:"Ctrl-SPACE",mac:"Ctrl-SPACE"},exec:enyo.bind(this,"doAutoCompletion")}),t.addCommand({name:"find",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:enyo.bind(this,"doFind")}),t.addCommand({name:"Wordwrap",bindKey:{win:"Alt-W",mac:"Alt-W"},exec:enyo.bind(this,"doWordwrap")});var e,i;for(e=1;13>e;e++)i="F"+e,t.addCommand({name:i,bindKey:{win:"Ctrl-SHIFT-"+i},exec:enyo.bind(this,"doFkey",[i])})},addCommand:function(t){this.editor.commands.addCommand(t)},addListeners:function(){this.editor.renderer.on("gutterclick",enyo.bind(this,"gutterclick")),this.editor.renderer.scrollBar.on("scroll",enyo.bind(this,"doScroll"));var t=this.editor.renderer.$gutter;enyo.dispatcher.listen(t,"mousemove",enyo.bind(this,"guttermousemove")),this.editor.on("focus",this.bubble.bind(this,"onAceGotFocus"))},addSessionListeners:function(){this.getSession().on("change",enyo.bind(this,"doChange")),this.getSession().selection.on("changeCursor",enyo.bind(this,"doCursorChange")),this.getSession().on("changeScrollLeft",enyo.bind(this,"handleScroll")),this.getSession().on("changeScrollTop",enyo.bind(this,"handleScroll"))},handleScroll:function(){this.doScroll()},gutterclick:function(t){this.toggleBreakpoint(t.row)},toggleBreakpoint:function(t){var e=this.getSession(),i=e.getBreakpoints();this.log(t),i[t]?(e.clearBreakpoint(t),this.doClearBreakpoint(t)):(e.setBreakpoint(t),this.doSetBreakpoint(t))},removeMeasureNode:function(){var t=document.body.querySelector("body > div[style ~= '-40000px;']");t&&t.parentNode.removeChild(t)},themeChanged:function(){var t=this.theme||"";t=!t||t.indexOf("/")>=0?t:"ace/theme/"+t,this.editor.setTheme(t)},highlightActiveLineChanged:function(){this.editor.setHighlightActiveLine(this.highlightActiveLine)},readonlyChanged:function(){this.editor.setReadOnly(this.readonly)},setSessionMode:function(t,e){try{t.setMode("ace/mode/"+e)}catch(i){this.warn(i)}},updateSessionSettings:function(t){this.setSessionMode(t,this.editingMode),t.setUseWrapMode(this.wordWrap),t.setUseSoftTabs(this.useSoftTabs)},editingModeChanged:function(){this.updateSessionSettings(this.getSession())},wordWrapChanged:function(){this.updateSessionSettings(this.getSession())},useSoftTabsChanged:function(){this.updateSessionSettings(this.getSession())},getValue:function(){return this.value=this.getSession().getValue(),this.value},valueChanged:function(){var t=this.getSession();t&&t.setValue(this.value)},persistentHScrollChanged:function(){this.editor.renderer.setHScrollBarAlwaysVisible(this.persistentHScroll)},updateValue:function(t){this.editor.selectAll(),this.insertAtCursor(t)},focus:function(){void 0!==this.editor&&this.editor.focus()},blur:function(){this.editor.blur()},showPrintMarginChanged:function(){this.editor.renderer.setShowPrintMargin(this.showPrintMargin)},getSelection:function(){return this.getSession().doc.getTextRange(this.editor.getSelectionRange())},insertAt:function(t,e){this.editor.moveCursorToPosition(t),this.editor.insert(e)},insertAtCursor:function(t){this.editor.insert(t)},gotoLine:function(t,e){this.editor.gotoLine(t,e)},navigateUp:function(t){this.editor.navigateUp(t)},navigateDown:function(t){this.editor.navigateDown(t)},find:function(t,e){this.editor.find(t,e)},findNext:function(){this.editor.findNext()},findPrevious:function(){this.editor.findPrevious()},replace:function(t,e){this.editor.replace(e)},replacefind:function(t,e,i){this.editor.replace(e),this.find(t,i)},replaceAll:function(t,e,i){return this.find(t,i),this.editor.replaceAll(e)},getUndoManager:function(){return this.editor.getSession().getUndoManager()},undo:function(){this.canUndo()&&this.getUndoManager().undo()},redo:function(){this.canRedo()&&this.getUndoManager().redo()},canUndo:function(){return this.getUndoManager().hasUndo()},canRedo:function(){return this.getUndoManager().hasRedo()},isDirty:function(t){return t?t!==this.getValue():!0},scrollToY:function(t){this.editor.renderer.scrollToY(t)},getLineCount:function(){return this.getSession().getScreenLength()},getLineHeight:function(){return this.editor.renderer.lineHeight},getContentHeight:function(){return this.getLineCount()*this.getLineHeight()},getLines:function(t,e){return this.getSession().getLines(t,e)},getLine:function(t){return this.getLines(t,t)[0]},getLength:function(){return this.getSession().getLength()},findMatchingBracketAtCursor:function(){return this.getSession().findMatchingBracket(this.getCursorPositionInDocument())},getCursorPositionInDocument:function(){return this.editor.getCursorPosition()},getCursorPositionOnScreen:function(){var t=this.editor.renderer.$cursorLayer.cursor.getBoundingClientRect();return enyo.clone(t)},textToScreenCoordinates:function(t,e){return this.editor.renderer.textToScreenCoordinates(t,e)},insertAtEndOfFile:function(t,e){var i={row:this.getLineCount(),column:0};if(this.gotoLine(i.row),this.editor.navigateLineEnd(),e)for(var n=t.split("\n"),o=0;n.length>o;o++){var s=n[o].indexOf(e);-1!==s&&(i.row+=o+1,i.column=s,t=t.replace(e,""))}this.insertAtCursor("\n"),this.insertAtCursor(t),e&&this.gotoLine(i.row,i.column),this.focus()},insertMethod:function(t,e,i,n){this.gotoLine(i+1),this.editor.navigateLineEnd(),n||this.insertAtCursor(","),this.insertAtCursor("\n"),this.insertAtCursor(t+": function("),enyo.isArray(e)&&this.insertAtCursor(e.join(", ")),this.insertAtCursor(") {"),this.insertAtCursor("\n"),this.insertAtCursor("	"),this.insertAtCursor("\n"),this.insertAtCursor("}"),this.editor.navigateUp(1),this.editor.navigateLineEnd()},createSession:function(t,e){var i=require("ace/edit_session").EditSession,n=require("ace/undomanager").UndoManager,o=new i(t||"");return o.setUndoManager(new n),this.updateSessionSettings(o),e&&this.setSessionMode(o,e),o},destroySession:function(){},addFold:function(t,e,i,n,o){var s=this.createRange(t,e,i,n);this.getSession().addFold(o,s)},addMarker:function(t,e,i,n,o,s){this.log(i,n,o,s);var r=this.createRange(i,n,o,s);return this.getSession().addMarker(r,t,e)},removeMarker:function(t){this.getSession().removeMarker(t)},createRange:function(t,e,i,n){var o=require("ace/range").Range;return new o(t,e,i,n)},getSession:function(){return this.editor.getSession()},setSession:function(t){this.editor.setSession(t),this.addSessionListeners()},mapToLineColumns:function(t){for(var e,i,n=this.getSession(),o=n.getDocument(),s=o.getNewLineCharacter().length,r=n.getLength(),a=0,h=0,l=0,c=t[l],d=[];r>a;)if(e=n.getLine(a),i=e.length,h+i>=c){if(d.push({row:a,column:c-h}),l++,!(t.length>l))return d;c=t[l]}else h+=i+s,a++},mapToLineColumnRange:function(t,e){var i=this.mapToLineColumns([t,e]);return this.createRange(i[0].row,i[0].column,i[1].row,i[1].column)},replaceRange:function(t,e){this.getSession().replace(t,e)},insertPosition:function(t,e){this.getSession().insert(t,e)},insertNewLine:function(t){this.getSession().getDocument().insertNewLine(t)},getNewLineCharacter:function(){return this.getSession().getDocument().getNewLineCharacter()},setFontSize:function(t){var e=t;this.editor.setFontSize(e)},resize:function(){void 0!==this.editor&&this.editor.resize()},requestSelectedText:function(){return this.editor.session.getTextRange(this.editor.getSelectionRange())},navigateToPosition:function(t,e){var i=this.mapToLineColumns([t,e]);this.editor.navigateTo(i[0].row,i[0].column)},guttermousemove:function(){if(enyo.dom.canTransform()&&10!==enyo.platform.ie){var t=ComponentsRegistry.getComponent("enyoEditor").domTransforms.translateX,e=document.getElementsByClassName("ace_gutter-tooltip");e[0]&&this.translateX!==t&&(this.setTranslateX(t),this.applyInverseTransform(e[0]))}},applyInverseTransform:function(t){var e=enyo.dom.getStyleTransformProp();t.className+=" ace_gutter-margin-tooltip",t.style[e]=this.translateX?"translateX(-"+this.translateX+")":"none"}});

// source/enyo-editor/hera/source/hera.js
enyo.kind({name:"Ares.Hera",kind:"enyo.Control",published:{file_source_dir:""},events:{onRegisterMe:"",onNewcss:"",onReplacecss:"",onEditcss:""},handlers:{onPickdeclaration:"radioActivated",onValueUpdate:"change",onUnitChange:"unitchange",onUrlout:"fixurl"},components:[{kind:"enyo.FittableColumns",style:" height: 100%;",components:[{kind:"FittableRows",style:"width: 33%; height: 100%;",components:[{name:"cssleft",kind:"Ares.Hera.Leftpannel",style:"width: 100%; height: 100%; ",classes:"ares_deimos_left"}]},{name:"center",kind:"enyo.FittableRows",style:"width: 33%; height: 100%; ",components:[{name:"sampleBox",kind:"enyo.FittableColumns",style:"width: 33%; height: 60%; ",classes:"hera_builder_font",allowHtml:!0,Xstyle:"padding: 10px;",components:[{name:"Sample",allowHtml:!0,style:"height: 60%; font-size: 10px;",components:[{name:"sampletext",content:"Sample Text"}]}]},{name:"outputBox",kind:"enyo.FittableColumns",style:"width: 100%; height: 40%; ",classes:"hera_builder_font",allowHtml:!0,Xstyle:"padding: 10px;",components:[{kind:"Scroller",classes:"enyo-fit",components:[{name:"bg",allowHtml:!0,style:"font-size: 13px;",content:""}]}]}]},{kind:"FittableRows",style:"width: 33%; height: 100%;",components:[{kind:"enyo.FittableColumns",style:"width: 100%; height: 53%;",classes:"enyo-unselectable",components:[{name:"list",kind:"List",count:0,multiSelect:!1,classes:"list-sample-list",onSetupItem:"setupItem",components:[{name:"item",style:"width: 100%;",classes:"list-sample-item enyo-border-box",ontap:"classGrabber",components:[{name:"name2",style:"width: 100%;"}]}]}]},{kind:"enyo.FittableColumns",style:"width: 90%; height: 5%;",classes:"hera_buttonbox",components:[{kind:"onyx.Button",classes:"hera_newrule_button",content:"Delete rule",ontap:"deleteRule"},{kind:"onyx.Button",classes:"hera_newrule_button",content:"New Css rule",ontap:"newRule"}]},{kind:"enyo.FittableColumns",style:"width: 100%;",fit:!0,classes:"enyo-unselectable",components:[{name:"valueinput",kind:"Ares.Hera.ValueInput",onUpdate:"change"}]}]}]},{kind:"onyx.Popup",modal:!0,floating:!0,centered:!0,canGenerate:!1,name:"newCssPopup",components:[{kind:"onyx.Toolbar",layoutKind:"FittableColumnsLayout",name:"toolbar4",components:[{name:"newCssName",kind:"Control",content:"Enter you new class name"}]},{kind:"onyx.Input",placeholder:"Enter your class name!..",name:"input"},{kind:"onyx.Button",classes:"ok",content:"Ok",ontap:"newDeclaration"}]}],declaration:[],properties:[],value:[],create:function(){this.inherited(arguments),ares.setupTraceLogger(this),this.$.outputBox.applyStyle("color","#FFFFFF"),this.$.outputBox.applyStyle("background-color","#000000"),this.trace("Just created a new",this.name,"object",this),this.unit="px"},cssload:function(t){this.trace("data",t),this.filesourcedir=t.originator.docData.attributes.file.path;var e=t.originator.$.aceWrapper.value;this.reset(),this.dePuzzle(e)},csssave:function(t,e){return this.trace("sender:",t,", event:",e),"reset"!==this.mode?("editing"===this.mode&&(this.doReplacecss(),this.reset()),!0):void 0},change:function(t,e){this.trace("sender:",t,", event:",e);var i=0;for(this.newvalue=void 0===e?this.valueout:e.originator.valueout;void 0!==this.properties[i]&&"null"!==this.properties[i]&&-1===this.properties[i].indexOf(this.property);)i++;this.properties[i]="	"+this.property,this.value[i]=this.newvalue,this.updateBox()},updateBox:function(t,e){this.trace("sender:",t,", event:",e),this.removeStyles();var i=0,n="&nbsp;&nbsp;&nbsp;&nbsp;",o=this.className+" "+"{<br>",s=this.className+" "+"{\n";if(""!==this.className){for(;void 0!==this.properties[i]&&"null"!==this.properties[i];)"font-family"===this.properties[i]&&(this.properties[i]="	"+this.properties[i]),o=o+n+this.properties[i]+":"+this.value[i]+"<br>",s=s+this.properties[i]+":"+this.value[i]+"\n",-1===this.value[i].indexOf("url")?(this.$.Sample.applyStyle(this.properties[i],this.value[i]),this.$.sampletext.applyStyle(this.properties[i],this.value[i])):this.$.Sample.applyStyle(this.properties[i],this.proUrl),i++;this.$.bg.setContent(o+"}"),this.out=s+"}\n",this.mode="editing"}},radioActivated:function(t,e){this.trace("sender:",t,", event:",e);var i=0;if(""===this.className)return this.$.cssleft.selected(),void 0;if(this.property=e.name,"font"===e.input){for(this.$.valueinput.showsblank(),this.property="font-family";void 0!==this.properties[i]&&"null"!==this.properties[i]&&-1===this.properties[i].indexOf(this.property);)i++;this.properties[i]=this.property,this.value[i]=" "+e.name+";",this.updateBox()}this.$.valueinput.inputtype(e.input),this.updateBox()},newRule:function(t,e){this.trace("sender:",t,", event:",e),this.$.newCssPopup.show()},newDeclaration:function(t,e){this.trace("sender:",t,", event:",e),this.out="",this.className=this.$.input.hasNode().value,this.$.newCssPopup.hide(),this.out=this.className+" "+"{\n"+"}",this.doNewcss(),this.reset(),this.doEditcss()},unitchange:function(t,e){this.trace("sender:",t,", event:",e),this.unit=e.content,this.change()},reset:function(){this.$.valueinput.showsblank(),this.$.valueinput.clear(),this.$.cssleft.selected(),this.properties.length=0,this.value.length=0,this.old=null,this.className="",this.outPut="",this.property=null,this.mode="reset",this.$.sampletext.applyStyle("color","#FFFFFF; font-size: 10px;"),this.$.outputBox.applyStyle("background-color","#000000"),this.$.bg.setContent("")},dePuzzle:function(t,e){this.trace("sender:",t,", event:",e);var i=0,n=[];this.file=t;for(var o=t.split("\n"),s=0;o.length>s;s++)("."===o[s].charAt(0)||"#"===o[s].charAt(0))&&(n=o[s].split("{"),this.declaration[i]=n[0],i++,n="");this.$.list.setCount(i),this.$.list.reset()},classGrabber:function(t,e){this.trace("sender:",t,", event:",e);var i=0,n="",o=e.index,s="",r=[];this.csssave(),this.reset(),this.doEditcss(),r=this.file.split("\n"),this.mode="editing";for(var a=0;r.length>a;a++)if(s=r[a].split("{"),this.declaration[o]===s[0]){this.className=this.declaration[o];for(var h=a+1;r.length>h&&(n=r[h].split(":"),0!==n[0].indexOf("}"));h++)this.properties[i]=n[0],this.value[i]=n[1],i++;this.oldcss(this.className),this.updateBox()}},oldcss:function(t,e){this.trace("sender:",t,", event:",e);var i="",n=0,o="";for(i=this.file.split("\n"),n=0;i.length>n;n++)if(0===i[n].indexOf(t)){o=o+i[n]+"\n";for(var s=n+1;i.length>s;s++)if(o=o+i[s]+"\n",0===i[s].indexOf("}"))return this.old=o,void 0}},setupItem:function(t,e){this.trace("sender:",t,", event:",e);var i=e.index,n=this.declaration[i];return this.$.item.addRemoveClass("list-sample-selected",t.isSelected(i)),this.$.name2.setContent(n),!0},fixurl:function(t,e){this.trace("sender:",t,", event:",e);for(var i=Ares.Workspace.projects.active,n=e.file.id,o=e.name.split("/"),s=this.filesourcedir,r=s.split("/"),a="",h="",l=1;r.length>l;l++)if(r[l]===i)for(l++,l;r.length>l;l++)a+=".";for(var c=0;o.length>c;c++)if(o[c]===i)for(c++,c;o.length>c;c++)h=h+"/"+o[c];var d="	url("+a+h+");";this.valueout=d,this.proUrl="	url(http://127.0.0.1:9009/res/services/home/id/"+n+")",this.change(this.valueout)},deleteRule:function(t,e){this.trace("sender:",t,", event:",e),this.out="",this.doReplacecss(),this.doEditcss()},removeStyles:function(){var t=0,e="",i="";if(void 0!==this.out)for(var n=this.out.split("\n"),o=0;n.length>o;o++)for(var s=o+1;n.length>s&&(i=n[s].split(":"),0!==i[0].indexOf("}"));s++)e[t]=i[0],this.$.Sample.addStyles(i[0],"null"),this.$.sampletext.applyStyle(i[0],"null"),t++}});

// source/enyo-editor/hera/source/valueInput.js
enyo.kind({name:"Ares.Hera.ValueInput",kind:"Control",published:{},events:{onValueUpdate:"",onUnitChange:"",onRegisterMe:"",onUrlout:""},handlers:{onTotalx:"inputx",onTotaly:"inputy",onTotalz:"inputz"},components:[{kind:"Panels",arrangerKind:"CardArranger",style:"border: solid black thin;",classes:"enyo-fit",components:[{name:"blank",kind:"Control",showing:!0},{name:"sliders",kind:"Control",showing:!1,components:[{style:"height: 5px"},{style:"height: 15px;  text-align: center; ",content:"Color Sliders"},{style:"height: 5px"},{name:"redSlider",kind:"onyx.Slider",onChanging:"redSliding",onChange:"redChanged",style:"height:10px; background-color: red; enyo-unselectable;"},{style:"height: 5px"},{name:"greenSlider",kind:"onyx.Slider",onChanging:"greenSliding",onChange:"greenChanged",style:"height:10px;  background-color: green; enyo-unselectable"},{style:"height: 5px"},{name:"blueSlider",kind:"onyx.Slider",onChanging:"blueSliding",onChange:"blueChanged",style:"height:10px;  background-color: blue; enyo-unselectable"}]},{name:"misc",kind:"Control",showing:!1,components:[{style:"height: 5px"},{style:"height: 15px;  text-align: center; ",content:"Misc Input"},{style:"height: 5px"},{kind:"FittableColumns",fit:!0,components:[{kind:"onyx.InputDecorator",components:[{kind:"onyx.Input",placeholder:"Enter text here",onchange:"input_misc"}]}]}]},{name:"xy",kind:"Control",showing:!1,components:[{style:"height: 5px"},{style:"height: 15px;  text-align: center; ",content:"X and Y Inputs"},{style:"height: 5px"},{kind:"FittableColumns",fit:!0,classes:"left-input-col",components:[{kind:"Ares.Hera.Xinput"},{kind:"Ares.Hera.Yinput"},{kind:"onyx.PickerDecorator",style:" width: 40px;",components:[{style:"min-width: 40px; font-size: 10px; padding-right: 4px;"},{kind:"onyx.Picker",onSelect:"unit_type",components:[{content:"px",active:!0},{content:"cm"},{content:"em"},{content:"ern"},{content:"rem"},{content:"%"}]}]}]}]},{name:"xyz",kind:"Control",showing:!1,classes:"left-input-box",components:[{style:"height: 5px"},{style:"height: 15px;  text-align: center; ",content:"X Y Z & Color Inputs "},{style:"height: 5px"},{tag:"br"},{kind:"FittableColumns",fit:!0,classes:"left-input-col",components:[{tag:"span",content:"  "},{kind:"Ares.Hera.Xinput"},{kind:"Ares.Hera.Yinput"},{kind:"Ares.Hera.Zinput"},{kind:"onyx.PickerDecorator",style:" width: 40px;",components:[{style:"min-width: 40px; font-size: 10px; padding-right: 4px;"},{kind:"onyx.Picker",onSelect:"unit_type",components:[{content:"px",active:!0},{content:"cm"},{content:"em"},{content:"ern"},{content:"rem"},{content:"%"}]}]}]},{tag:"br"},{tag:"br"},{kind:"Control",showing:!0,components:[{kind:"onyx.Slider",onChanging:"redSliding",onChange:"redChanged",style:"height:10px; background-color: red; enyo-unselectable;"},{style:"height: 5px"},{kind:"onyx.Slider",onChanging:"greenSliding",onChange:"greenChanged",style:"height:10px;  background-color: green; enyo-unselectable"},{style:"height: 5px"},{kind:"onyx.Slider",onChanging:"blueSliding",onChange:"blueChanged",style:"height:10px;  background-color: blue; enyo-unselectable"}]}]},{name:"pickinput",kind:"Control",showing:!1,components:[{style:"height: 5px"},{style:"height: 15px;  text-align: center; ",content:"Picker Inputs"},{style:"height: 5px",tag:"br"},{kind:"FittableColumns",fit:!0,components:[{kind:"onyx.PickerDecorator",components:[{style:"min-width: 80px; font-size: 10px;"},{name:"pinput",kind:"onyx.Picker",onSelect:"input_picker"}]},{kind:"onyx.PickerDecorator",style:"width: 40px;",components:[{style:"min-width: 40px; font-size: 10px;"},{name:"Unit",kind:"onyx.Picker",onSelect:"unit_type",components:[{content:"px",active:!0},{content:"cm"},{content:"em"},{content:"ern"},{content:"rem"},{content:"%"}]}]}]}]},{kind:"Ares.Hera.Lrc"},{name:"filepicker",kind:"Control",showing:!1,components:[{style:"height: 5px"},{style:"height: 15px;  text-align: center; ",content:"File Picker Input"}]},{kind:"Ares.Hera.Bc"},{kind:"Ares.Hera.Bgr"},{kind:"Ares.Hera.BorderWidth"}]},{name:"selectFilePopup",kind:"Ares.FileChooser",classes:"ares-masked-content-popup",showing:!1,folderChooser:!1,allowToolbar:!1,onFileChosen:"fileChosen"}],blank:0,sliders:1,inputbox:2,xy:3,xyz:4,picker:5,lrc:6,filepicker:7,bc:8,br:9,borderwidth:10,create:function(){this.inherited(arguments),ares.setupTraceLogger(this),this.doRegisterMe({name:"valueInput",reference:this}),this.red="00",this.blue="00",this.green="00",this.misc="",this.unit="px";for(var t=1,e=0;2e3>e;e+=t)9>=e&&this.$.pinput.createComponent({content:e,active:!e}),e>=10&&40>=e&&(t=2,this.$.pinput.createComponent({content:e,active:!e})),e>40&&(t=10,this.$.pinput.createComponent({content:e,active:!e}))},redChanged:function(t,e){this.trace("sender:",t,", event:",e);var i=Math.floor(255*e.value/100),n=i.toString(16);1===n.length&&(n="0"+n),this.red=n,this.color()},redSliding:function(t,e){this.trace("sender:",t,", event:",e);var i=Math.floor(255*e.value/100),n=i.toString(16);1==n.length&&(n="0"+n),this.red=n,this.color()},blueChanged:function(t,e){this.trace("sender:",t,", event:",e);var i=Math.floor(255*e.value/100),n=i.toString(16);1==n.length&&(n="0"+n),this.blue=n,this.color()},blueSliding:function(t,e){this.trace("sender:",t,", event:",e);var i=Math.floor(255*e.value/100),n=i.toString(16);1==n.length&&(n="0"+n),this.blue=n,this.color()},greenChanged:function(t,e){this.trace("sender:",t,", event:",e);var i=Math.floor(255*e.value/100),n=i.toString(16);1==n.length&&(n="0"+n),this.green=n,this.color()},greenSliding:function(t,e){this.trace("sender:",t,", event:",e);var i=Math.floor(255*e.value/100),n=i.toString(16);1==n.length&&(n="0"+n),this.green=n,this.color()},showsblank:function(t,e){this.trace("sender:",t,", event:",e),this.clear(),this.$.panels.setIndex(this.blank)},fileChosen:function(t,e){this.event=e,this.doUrlout(this.event)},input_picker:function(t,e){this.trace("sender:",t,", event:",e),this.misc_picker=e.content,this.total()},input_misc:function(t,e){this.trace("sender:",t,", event:",e);var i=this.unit;this.misc=e.value+i,this.total()},inputx:function(t,e){this.trace("sender:",t,", event:",e),this.x=e,this.total()},inputy:function(t,e){this.trace("sender:",t,", event:",e),this.y=e,this.total()},inputz:function(t,e){this.trace("sender:",t,", event:",e),this.z=e,this.total()},unit_type:function(t,e){this.trace("sender:",t,", event:",e),this.unit=e,this.total(e)},color:function(t,e){this.trace("sender:",t,", event:",e),this.c="#"+(this.red+this.green+this.blue).toUpperCase(),this.total()},total:function(){var t="";this.unit=void 0===this.unit.content?"px":this.unit.content,void 0!==this.x&&(t=t+" "+this.x+this.unit),void 0!==this.y&&(t=t+" "+this.y+this.unit),void 0!==this.z&&(t=t+" "+this.z+this.unit),void 0!==this.c&&(t=t+" "+this.c),void 0!==this.misc&&(t=t+" "+this.misc),void 0!==this.misc_picker&&(t=t+" "+this.misc_picker+this.unit),this.valueout=t+";",t="",this.doValueUpdate()},clear:function(t,e){this.trace("sender:",t,", event:",e),this.c=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.misc=void 0,this.misc_picker=void 0,this.valueout=void 0},inputtype:function(t,e){this.trace("sender:",t,", event:",e);var i=Ares.Workspace.projects.getActiveProject();this.clear(),"picker"===t&&this.$.panels.setIndex(this.picker),"color"===t&&this.$.panels.setIndex(this.sliders),"misc"===t&&this.$.panels.setIndex(this.inputbox),"xy"===t&&this.$.panels.setIndex(this.xy),"xyz"===t&&this.$.panels.setIndex(this.xyz),"lrc"===t&&this.$.panels.setIndex(this.lrc),"bgc"===t&&this.$.panels.setIndex(this.bc),"bgr"===t&&this.$.panels.setIndex(this.br),"borderwidth"===t&&this.$.panels.setIndex(this.borderwidth),"filepicker"===t&&(this.$.selectFilePopup.connectProject(i,function(){this.$.selectFilePopup.setHeaderText("Select image"),this.$.selectFilePopup.show()}.bind(this)),this.$.panels.setIndex(this.filepicker),this.$.selectFilePopup.reset())}}),enyo.kind({name:"Ares.Hera.Xinput",kind:"Control",published:{},events:{onTotalx:""},components:[{kind:"onyx.PickerDecorator",classes:"left-input-dec",components:[{style:"min-width: 40px; font-size: 10px; padding-right: 4px;"},{name:"inputx",kind:"onyx.Picker",classes:"left-input-dec",content:"0",onSelect:"inputx"}]}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this);for(var t=1,e=0;11>e;e+=t)this.$.inputx.createComponent({content:e,active:!e})},inputx:function(t,e){this.trace("sender:",t,", event:",e);var i=e.content;i=""+i,this.doTotalx(i)}}),enyo.kind({name:"Ares.Hera.Yinput",kind:"Control",published:{},events:{onTotaly:""},components:[{kind:"onyx.PickerDecorator",classes:"left-input-dec",components:[{style:"min-width: 40px; font-size: 10px; padding-right: 4px;"},{name:"inputy",kind:"onyx.Picker",classes:"left-input-dec",content:"0",onSelect:"inputy"}]}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this);for(var t=1,e=0;11>e;e+=t)this.$.inputy.createComponent({content:e,active:!e})},inputy:function(t,e){this.trace("sender:",t,", event:",e);var i=e.content;i=""+i,this.doTotaly(i)}}),enyo.kind({name:"Ares.Hera.Zinput",kind:"Control",published:{},events:{onTotalz:""},components:[{kind:"onyx.PickerDecorator",classes:"left-input-dec",components:[{style:"min-width: 40px; font-size: 10px; padding-right: 4px;"},{name:"inputz",kind:"onyx.Picker",classes:"left-input-dec",content:"0",onSelect:"inputz"}]}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this);for(var t=1,e=0;11>e;e+=t)this.$.inputz.createComponent({content:e,active:!e})},inputz:function(t,e){this.trace("sender:",t,", event:",e);var i=e.content;i=""+i,this.doTotalz(i)}}),enyo.kind({name:"Ares.Hera.Lrc",kind:"Control",published:{},events:{onValueUpdate:""},components:[{style:"height: 15px;  text-align: center; ",content:"Left Right Center ..... "},{style:"height: 15px"},{kind:"onyx.PickerDecorator",classes:"left-input-dec",components:[{kind:"onyx.PickerButton",content:"Pick One...",style:"width: 200px"},{kind:"onyx.Picker",onSelect:"itemSelected",components:[{content:"left"},{content:"right"},{content:"justify"},{content:"start"},{content:"end"},{content:"match-parent"},{content:"start end"},{content:"'.'"},{content:"start '.'"},{content:"'.' start"},{content:"inherit"}]}]}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this)},itemSelected:function(t,e){this.valueout="	"+e.content+";",this.doValueUpdate()}}),enyo.kind({name:"Ares.Hera.Bc",kind:"Control",published:{},events:{onValueUpdate:""},components:[{style:"height: 15px;  text-align: center; ",content:"background-clip ..... "},{style:"height: 15px"},{kind:"onyx.PickerDecorator",classes:"left-input-dec",components:[{kind:"onyx.PickerButton",content:"Pick One...",style:"width: 200px"},{kind:"onyx.Picker",onSelect:"itemSelected",components:[{content:"border-box"},{content:"padding-box"},{content:"content-box"},{content:"inherit"}]}]}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this)},itemSelected:function(t,e){this.valueout="	"+e.content+";",this.doValueUpdate()}}),enyo.kind({name:"Ares.Hera.Bgr",kind:"Control",published:{},events:{onValueUpdate:""},components:[{style:"height: 15px;  text-align: center; ",content:"background-repeat ..... "},{style:"height: 15px"},{kind:"onyx.PickerDecorator",classes:"left-input-dec",components:[{kind:"onyx.PickerButton",content:"Pick One...",style:"width: 200px"},{kind:"onyx.Picker",onSelect:"itemSelected",components:[{content:"repeat-x"},{content:"repeat-y"},{content:"repeat"},{content:"space"},{content:"round"},{content:"no-repeat"}]}]}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this)},itemSelected:function(t,e){this.valueout="	"+e.content+";",this.doValueUpdate()}}),enyo.kind({name:"Ares.Hera.BorderWidth",kind:"Control",published:{},events:{onValueUpdate:""},components:[{style:"text-align: center; ",content:"Border-width ..... \n"},{style:"height: 15px"},{style:"height: 15px;  text-align: center; ",content:"border-width: width                  /* One-value syntax */"},{style:"text-align: center; ",content:"border-width: horizontal vertical    /* Two-value syntax */"},{style:"text-align: center; ",content:"border-width: top vertical bottom    /* Three-value syntax */"},{style:"text-align: center; ",content:"border-width: top right bottom left  /* Four-value syntax */"},{style:"height: 15px"},{kind:"enyo.FittableColumns",style:"width: 15%; height: 100%;",components:[{kind:"onyx.PickerDecorator",classes:"left-input-dec",components:[{kind:"onyx.PickerButton",content:"Pick One...",classes:"border_width_input"},{kind:"onyx.Picker",onSelect:"one_value",components:[{content:"thin"},{content:"medium"},{content:"thick"}]}]},{kind:"onyx.PickerDecorator",classes:"left-input-dec",components:[{name:"bwPicker2",showing:!1,kind:"onyx.PickerButton",content:"Pick One...",classes:"border_width_input"},{kind:"onyx.Picker",onSelect:"two_value",components:[{content:"thin"},{content:"medium"},{content:"thick"}]}]},{kind:"onyx.PickerDecorator",classes:"left-input-dec",components:[{name:"bwPicker3",showing:!1,kind:"onyx.PickerButton",content:"Pick One...",classes:"border_width_input"},{kind:"onyx.Picker",onSelect:"three_value",components:[{content:"thin"},{content:"medium"},{content:"thick"}]}]},{kind:"onyx.PickerDecorator",classes:"left-input-dec",components:[{name:"bwPicker4",showing:!1,kind:"onyx.PickerButton",content:"Pick One..."},{kind:"onyx.Picker",onSelect:"four_value",components:[{content:"thin"},{content:"medium"},{content:"thick"}]}]}]}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this)},one_value:function(t,e){this.bw1=e.content,this.valueout="	"+this.bw1+";",this.$.bwPicker2.setShowing(!0),this.doValueUpdate()},two_value:function(t,e){this.bw2=e.content,this.valueout="	"+this.bw1+" "+" "+this.bw2+";",this.$.bwPicker3.setShowing(!0),this.doValueUpdate()},three_value:function(t,e){this.bw3=e.content,this.valueout="	"+this.bw1+" "+this.bw2+" "+this.bw3+";",this.$.bwPicker4.setShowing(!0),this.doValueUpdate()},four_value:function(t,e){this.bw4=e.content,this.valueout="	"+this.bw1+" "+this.bw2+" "+this.bw3+" "+this.bw4+";",this.doValueUpdate()}});

// source/enyo-editor/hera/source/leftpannel.js
enyo.kind({name:"Ares.Hera.ColorItem",events:{onPickdeclaration:"",onUncheck:""},handlers:{onUnTap:"unhighlight"},components:[{classes:"palette-category",components:[{ontap:"toggleDrawer",classes:"palette-category-name",components:[{name:"indicator",classes:"indicator turned"},{name:"drawName",tag:"span",content:"Color"}]},{kind:"onyx.Drawer",name:"drawer",open:!0,components:[{name:"colorlist",kind:"Repeater",classes:"list-sample-list enyo-border-box",count:0,onSetupItem:"setupItem",components:[{name:"item",classes:"list-sample-item ",components:[{name:"declaration",ontap:"tap"}]}]}]}]}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this),this.$.colorlist.setCount(this.dec.length)},toggleDrawer:function(t,e){this.trace("sender:",t,", event:",e);var i=this.$.drawer.getOpen();this.$.drawer.setOpen(!i),this.$.indicator.addRemoveClass("turned",!i)},setupItem:function(t,e){this.trace("sender:",t,", event:",e);var i=e.index,n=e.item,o=this.dec[i];return void 0!==n&&(n.$.declaration.setContent(o.name),this.highlight===i&&(this.$.colorlist.addRemoveClass("list-sample-selected",this.selected),n.$.declaration.addRemoveClass("list-sample-selected",this.selected))),!0},tap:function(t,e){this.trace("sender:",t,", event:",e);var i=e.index;this.doUncheck(),this.highlight=i,this.selected=!0,this.$.colorlist.renderRow(i),this.doPickdeclaration(this.dec[i])},unhighlight:function(t,e){this.trace("sender:",t,", event:",e),this.selected=!1;for(var i=0;this.dec.length>i;i++)this.$.colorlist.renderRow(i)},dec:[{name:"background-color",input:"color"},{name:"outline-color",input:"color"}]}),enyo.kind({name:"Ares.Hera.FontsItem",events:{onPickdeclaration:"",onUncheck:""},components:[{classes:"palette-category",components:[{ontap:"toggleDrawer",classes:"palette-category-name",components:[{name:"indicator",classes:"indicator turned"},{name:"name",tag:"span",content:"Font"}]},{kind:"onyx.Drawer",name:"drawer",open:!0,components:[{name:"Fontlist",kind:"Repeater",classes:"list-sample-list",count:0,onSetupItem:"setupItem",components:[{name:"item",classes:"list-sample-item enyo-border-box",components:[{name:"font",ontap:"tap"}]}]}]}]}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this),this.$.Fontlist.setCount(this.fonts.length)},toggleDrawer:function(){var t=this.$.drawer.getOpen();this.$.drawer.setOpen(!t),this.$.indicator.addRemoveClass("turned",!t)},setupItem:function(t,e){this.trace("sender:",t,", event:",e);var i=e.index,n=e.item,o=this.fonts[i];return void 0!==n&&(n.$.font.setContent(o.name),n.$.font.setStyle("font-family:"+o.name+";"),this.highlight===i&&n.$.font.addRemoveClass("list-sample-selected",this.selected)),!0},tap:function(t,e){this.trace("sender:",t,", event:",e);var i=e.index;this.doUncheck(),this.highlight=i,this.selected=!0,this.$.Fontlist.renderRow(i),this.doPickdeclaration(this.fonts[i])},unhighlight:function(t,e){this.trace("sender:",t,", event:",e),this.selected=!1;for(var i=0;this.fonts.length>i;i++)this.$.Fontlist.renderRow(i)},fonts:[{name:"color",input:"color"},{name:"font-size",input:"picker"},{name:"text-shadow",input:"xyz"},{name:"Serif",input:"font"},{name:"Sans-serif",input:"font"},{name:"Helvetica ",input:"font"},{name:"Monospace",input:"font"},{name:"Lucida Sans Unicode",input:"font"},{name:"text-align",input:"lrc"}]}),enyo.kind({name:"Ares.Hera.BorderItem",events:{onPickdeclaration:"",onUncheck:""},handlers:{onUnTap:"unhighlight"},components:[{classes:"palette-category",components:[{ontap:"toggleDrawer",classes:"palette-category-name",components:[{name:"indicator",classes:"indicator turned"},{name:"name",tag:"span",content:"Border/Margin.."}]},{kind:"onyx.Drawer",name:"drawer",open:!0,components:[{name:"borderlist",kind:"Repeater",classes:"list-sample-list",count:0,onSetupItem:"setupItem",components:[{name:"item",classes:"list-sample-item enyo-border-box",components:[{name:"border",ontap:"tap"}]}]}]}]}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this),this.$.borderlist.setCount(this.borders.length)},toggleDrawer:function(t,e){this.trace("sender:",t,", event:",e);var i=this.$.drawer.getOpen();this.$.drawer.setOpen(!i),this.$.indicator.addRemoveClass("turned",!i)},setupItem:function(t,e){this.trace("sender:",t,", event:",e);var i=e.index,n=e.item,o=this.borders[i];return void 0!==n&&(this.highlight===i&&n.$.border.addRemoveClass("list-sample-selected",this.selected),n.$.border.setContent(o.name)),!0},tap:function(t,e){this.trace("sender:",t,", event:",e);var i=e.index;this.doUncheck(),this.highlight=i,this.selected=!0,this.$.borderlist.renderRow(i),this.doPickdeclaration(this.borders[i])},unhighlight:function(t,e){this.trace("sender:",t,", event:",e),this.selected=!1;for(var i=0;this.borders.length>i;i++)this.$.borderlist.renderRow(i)},borders:[{name:"width",input:"picker"},{name:"padding",input:"picker"},{name:"height",input:"picker"},{name:"border-color",input:"color"},{name:"box-shadow",input:"xyz"},{name:"border-radius",input:"xy"},{name:"border-top-color",input:"color"},{name:"border-right-color",input:"color"},{name:"border-left-color",input:"color"},{name:"border-bottom-color",input:"color"},{name:"border-width",input:"borderwidth"},{name:"padding-top",input:"picker"},{name:"padding-left",input:"picker"},{name:"padding-right",input:"picker"},{name:"padding-bottom",input:"picker"},{name:"margin",input:"picker"},{name:"margin-top",input:"picker"},{name:"margin-right",input:"picker"},{name:"margin-left",input:"picker"},{name:"margin-bottom",input:"picker"}]}),enyo.kind({name:"Ares.Hera.ImageItem",events:{onPickdeclaration:"",onUncheck:""},components:[{classes:"palette-category",components:[{ontap:"toggleDrawer",classes:"palette-category-name",components:[{name:"indicator",classes:"indicator turned"},{name:"name",tag:"span",content:"Image"}]},{kind:"onyx.Drawer",name:"drawer",open:!0,components:[{name:"imagelist",kind:"Repeater",classes:"list-sample-list",count:0,onSetupItem:"setupItem",components:[{name:"item",classes:"list-sample-item enyo-border-box",components:[{name:"image",ontap:"tap"}]}]}]}]}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this),this.$.imagelist.setCount(this.image.length)},toggleDrawer:function(t,e){this.trace("sender:",t,", event:",e);var i=this.$.drawer.getOpen();this.$.drawer.setOpen(!i),this.$.indicator.addRemoveClass("turned",!i)},setupItem:function(t,e){this.trace("sender:",t,", event:",e);var i=e.index,n=e.item,o=this.image[i];return void 0!==n&&(n.$.image.setContent(o.name),this.highlight===i&&n.$.image.addRemoveClass("list-sample-selected",this.selected)),!0},tap:function(t,e){this.trace("sender:",t,", event:",e);var i=e.index;this.doUncheck(),this.highlight=i,this.selected=!0,this.$.imagelist.renderRow(i),this.doPickdeclaration(this.image[i])},unhighlight:function(t,e){this.trace("sender:",t,", event:",e),this.selected=!1;for(var i=0;this.image.length>i;i++)this.$.imagelist.renderRow(i)},image:[{name:"background-image",input:"filepicker"},{name:"background-position",input:"xy"},{name:"background-clip",input:"bgc"},{name:"background-repeat",input:"bgr"}]}),enyo.kind({name:"Ares.Hera.Leftpannel",kind:"Control",published:{},events:{onPickdeclaration:"",onUntap:""},handlers:{onUncheck:"selected"},components:[{kind:"enyo.FittableRows",classes:"enyo-fit",components:[{kind:"Scroller",fit:!0,components:[{kind:"Ares.Hera.ColorItem"},{kind:"Ares.Hera.FontsItem"},{kind:"Ares.Hera.BorderItem"},{kind:"Ares.Hera.ImageItem"}]}]}],create:function(){this.inherited(arguments),ares.setupTraceLogger(this)},selected:function(t,e){this.trace("sender:",t,", event:",e),this.$.colorItem.unhighlight(),this.$.fontsItem.unhighlight(),this.$.borderItem.unhighlight(),this.$.imageItem.unhighlight()}});

// source/enyo-editor/deimos/Deimos.js
var ilibDeimos=AresI18n.resolve.bind(null,AresI18n.setBundle("$assets/enyo-editor/deimos/resources"));enyo.kind({name:"Deimos",classes:"enyo-unselectable onyx",debug:!1,published:{projectData:null},components:[{name:"actionPopup",kind:"PaletteComponentActionPopup",centered:!0,floating:!0,autoDismiss:!1,modal:!0},{kind:"FittableRows",classes:"enyo-fit",components:[{name:"body",fit:!0,classes:"deimos_panel_body",kind:"FittableColumns",components:[{name:"palette",classes:"ares_deimos_left",kind:"Palette",ondragstart:"paletteDragStart"},{name:"middle",classes:"ares-deimos-middle",fit:!0,kind:"FittableRows",components:[{name:"middleToolbar",kind:"onyx.MoreToolbar",classes:"deimos-toolbar",components:[{kind:"onyx.Button",name:"reloadDesignerButton",content:ilibDeimos("Reload"),ontap:"reloadDesigner"},{kind:"FittableColumns",classes:"deimos-toolbar-section",components:[{content:ilibDeimos("Fit:")},{kind:"onyx.Checkbox",onchange:"autoZoomDesigner"},{content:ilibDeimos("Zoom:")},{kind:"onyx.PickerDecorator",components:[{name:"zoomPickerButton"},{name:"zoomPicker",kind:"onyx.Picker",onSelect:"zoomDesigner",components:[]}]}]},{kind:"FittableColumns",classes:"deimos-toolbar-section",components:[{content:ilibDeimos("Device:")},{kind:"Ares.PickerDecorator",components:[{classes:"deimos-device-picker"},{kind:"onyx.Picker",name:"devicePicker",ontap:"deviceChosen",components:[{content:ilibDeimos("Default"),value:{height:800,width:600}},{content:"HP Slate7",value:{height:1024,width:600,ppi:170,dpr:1}},{content:"iPhone\u2122",value:{height:480,width:320}},{content:"iPhone\u2122 4",value:{height:960,width:640,ppi:326,dpr:2}},{content:"iPhone\u2122 5",value:{height:573,width:320}},{content:"iPad\u2122",value:{height:768,width:1024}},{content:"iPad\u2122 Retina",value:{width:2048,height:1536,ppi:264,dpr:2}},{content:"iPad\u2122 2",value:{width:1024,height:768,ppi:132,dpr:1}},{content:"iPad\u2122 mini",value:{width:1024,height:768,ppi:163,dpr:1}},{content:"HDTV",value:{height:1080,width:1920}},{content:ilibDeimos("Custom")}]}]},{kind:"Ares.PickerDecorator",components:[{name:"screenPickerButton",classes:"deimos-screen-picker"},{kind:"onyx.Picker",name:"screenPicker",ontap:"screenChosen",components:[{content:ilibDeimos("Portrait"),value:"portrait"},{content:ilibDeimos("Landscape"),value:"landscape"}]}]}]},{kind:"FittableColumns",classes:"deimos-toolbar-section",components:[{content:ilibDeimos("Width (px):")},{kind:"onyx.InputDecorator",components:[{kind:"onyx.Input",name:"designerWidthInput",classes:"deimos-designer-input",placeholder:ilibDeimos("Auto"),onchange:"updateWidth"}]},{kind:"onyx.Button",name:"swapDesignerDimensionsButton",classes:"deimos-swap-dimensions-button",allowHtml:!0,content:"&larr;<br/>&rarr;",ontap:"swapDesignerDimensions"},{content:ilibDeimos("Height (px):")},{kind:"onyx.InputDecorator",components:[{kind:"onyx.Input",name:"designerHeightInput",classes:"deimos-designer-input",placeholder:ilibDeimos("Auto"),onchange:"updateHeight"}]}]}]},{kind:"Scroller",classes:"deimos-designer-wrapper",fit:!0,components:[{kind:"Designer",name:"designer",onSelect:"designerSelect",onSelected:"designerSelected",onMoveItem:"moveItem",onCreateItem:"createItem",onSyncDropTargetHighlighting:"syncComponentViewDropTargetHighlighting",onReloadComplete:"reloadComplete",onResizeItem:"resizeItem",onReturnPositionValue:"designerReturnPositionValue"}]}]},{name:"right",classes:"ares_deimos_right",kind:"FittableRows",components:[{kind:"onyx.MoreToolbar",classes:"deimos-toolbar deimos-toolbar-margined-buttons",components:[{name:"deleteButton",kind:"onyx.Button",content:ilibDeimos("Delete"),classes:"btn-danger",ontap:"deleteAction"},{name:"undoButton",kind:"onyx.Button",content:ilibDeimos("Undo"),classes:"btn-danger",ontap:"undoAction"},{name:"redoButton",kind:"onyx.Button",content:ilibDeimos("Redo"),classes:"btn-danger",ontap:"redoAction"}]},{kind:"ComponentView",classes:"deimos_panel ares_deimos_componentView",onSelect:"componentViewSelect",onHighlightDropTarget:"highlightDesignerDropTarget",onUnHighlightDropTargets:"unhighlightDesignerDropTargets",onMoveItem:"moveItem",onCreateItem:"createItem",onHoldOver:"holdOver"},{kind:"Inspector",fit:!0,classes:"deimos_panel",onModify:"inspectorModify",onRequestPositionValue:"inspectorRequestPositionValue",onPositionDataUpdated:"inspectorPositionDataUpdated"}]}]}]}],events:{onChildRequest:"",onRegisterMe:"",onError:""},handlers:{onPaletteComponentAction:"runPaletteComponentAction",onScaleChange:"displayZoomValue"},kinds:[],index:null,previousContent:"",fileName:"",zoomValues:[25,50,100,125,150,200,400],initZoomIndex:2,create:function(){ares.setupTraceLogger(this),this.trace("Creating Deimos"),this.inherited(arguments),this.addHandlers(),this.trace("ilibDeimos: Delete=",ilibDeimos("Delete"))},rendered:function(){this.inherited(arguments),this.initializeDesignerToolbar()},initializeDesignerToolbar:function(){this.trace("called");var e=this.$.devicePicker.getClientControls()[0];this.$.devicePicker.setSelected(e);var t=this.$.screenPicker.getClientControls()[0];this.$.screenPicker.setSelected(t),this.deviceChosen();var i,n;for(i=0;n=this.zoomValues[i];i++)this.$.zoomPicker.createComponent({content:ilibDeimos("{z}%",{z:n}),value:n,active:n===this.zoomValues[this.initZoomIndex]});this.zoomDesigner(null,{selected:this.$.zoomPicker.getSelected()})},isDesignerBroken:function(){return this.$.designer.isBroken()},loadDesignerUI:function(e,t){this.trace("called with",e),ares.assertCb(t),this.enableDesignerActionButtons(!1);var i=e.kinds;this.index=null,this.kinds=i,this.fileName=e.fileIndexer.name,this.setProjectData(e.projectData),this.doChildRequest({task:["initKindPicker",i]});var n=function(e){t(e)};this.selectKind(0,n)},selectKind:function(e,t){ares.assertCb(t);var i=this.kinds[e],n=this.getSingleKind(e);this.trace("selected kind ",i);var o=function(e){t(e,i.name)};e!==this.index?(this.addAresIds(n),this.addAresKindOptions(n),this.$.inspector.initUserDefinedAttributes(n),this.previousContent=this.formatContent(enyo.json.codify.to(this.cleanUpComponents(n))),this.$.inspector.inspect(null),this.$.inspector.setCurrentKindName(i.name),this.$.designer.renderKind(this.fileName,n[0],null,o),this.index=e):setTimeout(o,0)},projectDataChanged:function(e){this.trace("called. New ",this.projectData," old ",e),e&&(e.off("change:project-indexer",this.projectIndexReady),e.off("update:project-indexer",this.projectIndexUpdated)),ProjectKindsModel.resetInformation(),this.projectData&&(this.trace("projectData",this.projectData),this.projectData.on("change:project-indexer",this.projectIndexReady,this),this.projectData.on("update:project-indexer",this.projectIndexUpdated,this),this.projectIndexer=this.projectData.getProjectIndexer(),this.projectIndexUpdated())},projectIndexReady:function(e,t){this.trace("projectIndexReady: ",t),this.projectIndexer=t,this.projectIndexUpdated()},getSingleKind:function(e){for(var t=[],i=this.kinds.length,n=0;i>n;n++)if(n===e){t[0]=this.kinds[e];break}return t},projectIndexUpdated:function(){var e=this.projectIndexer;this.trace("projectIndexUpdated: for projectIndexer: ",e),this.$.inspector.setProjectIndexer(e),this.$.palette.setProjectIndexer(e),ProjectKindsModel.buildInformation(e),this.$.designer.sendSerializerOptions(ProjectKindsModel.serializerOptions)},rerenderKind:function(e){this.$.designer.renderKind(this.fileName,this.getSingleKind(this.index)[0],e,function(){})},refreshInspector:function(){enyo.job("inspect",enyo.bind(this,function(){this.$.inspector.inspect(this.$.designer.selection)}),200)},refreshComponentView:function(e){this.$.componentView.visualize(e)},designerSelect:function(e){var t=e.selection;return this.refreshInspector(),this.$.componentView.setSelected(t,!0),!0},designerSelected:function(e){return this.refreshInspector(),this.$.componentView.setSelected(e.selection,!1),!0},componentViewSelect:function(e,t){return this.$.designer.select(t.component),!0},syncComponentViewDropTargetHighlighting:function(e,t){this.$.componentView.syncDropTargetHighlighting(t.component)},highlightDesignerDropTarget:function(e,t){return this.$.designer.highlightDropTarget(t.component),!0},unhighlightDesignerDropTargets:function(){return this.$.designer.unHighlightDropTargets(),!0},inspectorModify:function(e,t){return"layoutKind"===t.name&&this.layoutKindUpdated(t.value)?!0:(this.$.designer.modifyProperty(t.name,t.value,ares.noNext),!0)},inspectorRequestPositionValue:function(e,t){this.$.designer.requestPositionValue(t.prop)},inspectorPositionDataUpdated:function(e,t){var i,n,o=this.getItemById(this.$.designer.selection.aresId,this.getSingleKind(this.index));for(i in t.props)n=t.props[i],this.addReplaceStyleProp(o,i,t.props[i]);this.rerenderKind(o.aresId)},layoutKindUpdated:function(e){var t=this.getSingleKind(this.index),i=this.getItemById(this.$.designer.selection.aresId,t);return"AbsolutePositioningLayout"!==e&&"AbsolutePositioningLayout"!==i.layoutKind?!1:("AbsolutePositioningLayout"===e?(i.layoutKind=e,this.updateStyleForAbsolutePositioningLayoutKind(i)):(i.layoutKind&&delete i.layoutKind,this.updateStyleForNonAbsolutePositioningLayoutKind(i)),this.addAresKindOptions(t),this.rerenderKind(i.aresId),!0)},updateStyleForAbsolutePositioningLayoutKind:function(e){if(this.addReplaceStyleProp(e,"position","relative"),e.components)for(var t,i=0;t=e.components[i];i++)this.addAbsolutePositioning(t)},addAbsolutePositioning:function(e){this.addReplaceStyleProp(e,"position","absolute"),e.layoutKind="AbsolutePositioningLayout",this.$.inspector.userDefinedAttributes[e.aresId].layoutKind=e.layoutKind},updateStyleForNonAbsolutePositioningLayoutKind:function(e){if(this.addReplaceStyleProp(e,"position",""),e.components)for(var t,i=0;t=e.components[i];i++)this.removeAbsolutePositioning(t)},removeAbsolutePositioning:function(e){this.addReplaceStyleProp(e,"position",""),this.addReplaceStyleProp(e,"top",""),this.addReplaceStyleProp(e,"right",""),this.addReplaceStyleProp(e,"bottom",""),this.addReplaceStyleProp(e,"left",""),e.layoutKind&&delete e.layoutKind,this.$.inspector.userDefinedAttributes[e.aresId].layoutKind&&delete this.$.inspector.userDefinedAttributes[e.aresId].layoutKind},addReplaceStyleProp:function(e,t,i){var n=e.style||"",o={};enyo.Control.cssTextToDomStyles(this.trimWhitespace(n),o),o[t]=i,e.style=enyo.Control.domStylesToCssText(o),this.$.inspector.userDefinedAttributes[e.aresId].style=e.style},prepareUpdatedKindList:function(){if(null!==this.index){for(var e=[],t=0;this.kinds.length>t;t++)e[t]=t===this.index?this.formatContent(enyo.json.codify.to(this.cleanUpComponents([this.kinds[t]]))):null;return e[this.index]===this.previousContent&&(e=[]),e}},formatContent:function(e){return e=e.replace(/\[\n\t\t\{/,"{\n	"),e=e.replace(/\}\s([^}]+)$/,"")},closeDesigner:function(e){e&&this.$.designer.cleanUp(),this.updateCodeInEditor(this.fileName),this.setProjectData(null),this.doChildRequest({task:"switchToCodeMode"})},buildComponentView:function(e){var t=enyo.json.codify.from(e.val);this.refreshComponentView(t),this.kinds[this.index]=this.cleanUpComponents(t,!0)[0],this.enableDesignerActionButtons(!0)},paletteDragStart:function(e,t){var i=enyo.json.codify.from(t.dataTransfer.getData("text")).type;this.$.designer.sendDragType(i),this.$.componentView.setDragType(i)},createItem:function(e,t){var i=t.config,n=t.options,o=t.targetId,s=t.beforeId,r=o?this.getItemById(o,this.getSingleKind(this.index)):this.kinds[this.index];return i?(i.aresId=this.generateNewAresId(),i.components&&this.addAresIds(i.components),n&&n.isViewTemplate?this.showActionPopup(n,i,r):this.performCreateItem(i,r,s),!0):(enyo.warn("Could not create new item - bad data: ",t),!0)},moveItem:function(e,t){var i=this.getSingleKind(this.index),n=this.getItemById(t.itemId,i),o=enyo.clone(n),s=t.beforeId||null,r=t.targetId?this.getItemById(t.targetId,i):this.kinds[this.index];if(r===n||null!==s&&s===t.itemId)return!0;if(this.removeItemById(t.itemId,this.kinds[this.index].components),o=this.applyLayoutKindRules(t.layoutData,o),void 0!==o.style&&(this.$.inspector.userDefinedAttributes[o.aresId].style=o.style),this.addAresKindOptions(i),s&&s!==r.aresId){if(!this.insertItemBefore(o,r,s))return!0}else this.insertItem(o,r);return this.rerenderKind(t.itemId),!0},resizeItem:function(e,t){var i=this.getItemById(this.$.designer.selection.aresId,this.getSingleKind(this.index));for(var n in t.sizeData)this.addReplaceStyleProp(i,n,t.sizeData[n]);return this.rerenderKind(i.aresId),!0},designerReturnPositionValue:function(e,t){return this.$.inspector.setRequestedPositionValue(t.prop,t.value),!0},applyLayoutKindRules:function(e,t){var i=e&&e.layoutKind;switch(i){case"AbsolutePositioningLayout":t.style=this.addAbsolutePositioningStyle(e,t);break;default:void 0!==t.style&&(t.style=this.removeAbsolutePositioningStyle(t))}return t},addAbsolutePositioningStyle:function(e,t){var i=t.style||"",n={};return enyo.Control.cssTextToDomStyles(this.trimWhitespace(i),n),n.position="absolute",(n.top||!n.top&&!n.bottom)&&(n.top=e.bounds.top+"px"),n.bottom&&(n.bottom=e.bounds.bottom+"px"),(n.left||!n.left&&!n.right)&&(n.left=e.bounds.left+"px"),n.right&&(n.right=e.bounds.right+"px"),enyo.Control.domStylesToCssText(n)},removeAbsolutePositioningStyle:function(e){var t=e.style||"",i={};return enyo.Control.cssTextToDomStyles(this.trimWhitespace(t),i),i.position=i.top=i.right=i.bottom=i.left="",enyo.Control.domStylesToCssText(i)},trimWhitespace:function(e){return e=e||"",e.replace(/\s/g,"")},holdOver:function(e,t){this.$.designer.prerenderDrop(t.targetId,t.beforeId)},insertItem:function(e,t){t.components=t.components||[],t.components.push(e)},insertItemBefore:function(e,t,i){var n,o,s=-1;for(t.components=t.components||[],o=0;n=t.components[o];o++)if(n.aresId===i){s=o;break}return-1===s?(enyo.warn("Couldn't find id: "+i+" in ",t),!1):(t.components.splice(s,0,e),!0)},getItemById:function(e,t){if(0!==t.length)for(var i,n,o=0;i=t[o];o++)if(i.aresId===e?n=t[o]:i.components&&(n=this.getItemById(e,i.components)),n)return n},getParentOfId:function(e,t){for(var i,n,o=0;i=t.components[o];o++)if(i.aresId===e?n=t:i.components&&(n=this.getParentOfId(e,i)),n)return n},removeItemById:function(e,t){for(var i,n=0;i=t[n];n++){if(i.aresId===e)return t.splice(n,1),void 0;i.components&&this.removeItemById(e,i.components)}},cleanUpComponents:function(e,t){var i,n,o=[];for(n=0;i=e[n];n++)o.push(this.cleanUpComponent(i,t));return o},cleanUpComponent:function(e,t){var i,n,o,s=e.aresId,r=[],a={};if(!s)return a;if(i=this.$.inspector.userDefinedAttributes[s],!i)return a;for(n in i)(t&&"aresId"===n||"aresId"!==n&&"components"!==n&&"__aresOptions"!==n)&&(a[n]=i[n]);if(e.components){for(o=0;e.components.length>o;o++)r.push(this.cleanUpComponent(e.components[o],t));r.length>0&&(a.components=r)}return a},cleanUpViewComponent:function(e,t){var i,n,o=e.aresId,s=[],r={};if(!o)return r;for(i in e)(t&&"aresId"===i||"aresId"!==i&&"components"!==i&&"__aresOptions"!==i)&&(r[i]=e[i]);if(e.components){for(n=0;e.components.length>n;n++)s.push(this.cleanUpViewComponent(e.components[n],t));s.length>0&&(r.components=s)}return r},undoAction:function(){return this.enableDesignerActionButtons(!1),this.doChildRequest({task:["undo",ares.noNext]}),!0},redoAction:function(){return this.enableDesignerActionButtons(!1),this.doChildRequest({task:["redo",ares.noNext]}),!0},deleteAction:function(){if(!this.$.designer.selection)return!0;this.$.inspector.inspect(null),this.enableDesignerActionButtons(!1);var e=this.getSingleKind(this.index);return this.deleteComponentByAresId(this.$.designer.selection.aresId,e),this.addAresKindOptions(e),this.rerenderKind(),!0},deleteComponentByAresId:function(e,t){for(var i=0;t.length>i;i++){if(t[i].aresId===e)return t.splice(i,1),void 0;t[i].components&&this.deleteComponentByAresId(e,t[i].components)}},updateCodeInEditor:function(e){var t=this.prepareUpdatedKindList();if(e===this.fileName){var i=this.getSingleKind(this.index);this.previousContent=this.formatContent(enyo.json.codify.to(this.cleanUpComponents(i))),this.doChildRequest({task:["updateComponentsCode",t]})}else this.log("skipped code update of stale file ",e)},projectSelected:function(e,t){this.trace("called with ",e),this.$.designer.updateSource(e,t)},reloadDesigner:function(){this.enableDesignerActionButtons(!1),this.$.designer.reload(),this.$.inspector.inspect(null)},reloadComplete:function(){this.rerenderKind()},syncFile:function(e,t,i,n){ares.assertCb(n),this.$.designer.syncFile(e,t,i,n)},addAresIds:function(e){for(var t=0;e.length>t;t++)e[t].aresId||(e[t].aresId=this.generateNewAresId()),e[t].components&&this.addAresIds(e[t].components)},addAresKindOptions:function(e){for(var t=0;e.length>t;t++)this.addOptionsToComponent(e[t]),e[t].components&&this.addAresKindOptions(e[t].components)},addOptionsToComponent:function(e){var t=ProjectKindsModel.getKindOptions(e.kind);t&&(e.__aresOptions=t)},generateNewAresId:function(){return"ares_"+Math.floor(Math.random()*(new Date).getTime()+1)},deviceChosen:function(){var e=this.$.devicePicker.getSelected();return e.value?(this.$.designerWidthInput.set("disabled",!0),this.$.designerHeightInput.set("disabled",!0),this.$.swapDesignerDimensionsButton.set("disabled",!0),this.$.screenPickerButton.set("disabled",!1)):(this.$.designerWidthInput.set("disabled",!1),this.$.designerHeightInput.set("disabled",!1),this.$.swapDesignerDimensionsButton.set("disabled",!1),this.$.screenPickerButton.set("disabled",!0)),this.screenChosen(),!0},screenChosen:function(){var e=this.$.screenPicker.getSelected(),t=this.$.devicePicker.getSelected(),i=0,n=0;return t.value?("portrait"===e.value?(n=t.value.width,i=t.value.height):(n=t.value.height,i=t.value.width),this.$.designerWidthInput.setValue(n),this.$.designerHeightInput.setValue(i)):(n=this.$.designerWidthInput.getValue(),i=this.$.designerHeightInput.getValue()),this.$.designer.setWidth(n),this.$.designer.setHeight(i),!0},updateHeight:function(e){this.$.designer.setHeight(e.getValue()),this.findDeviceDimensionMatch()},updateWidth:function(e){this.$.designer.setWidth(e.getValue()),this.findDeviceDimensionMatch()},findDeviceDimensionMatch:function(){var e,t,i=this.$.devicePicker.getClientControls(),n=this.$.designerHeightInput.getValue(),o=this.$.designerWidthInput.getValue();for(t=0,e;e=i[t];t++)if(e.value&&(n==e.value.height&&o==e.value.width||n==e.value.width&&o==e.value.height))return this.$.devicePicker.setSelected(e),void 0;for(t=0,e;e=i[t];t++)e.value||this.$.devicePicker.setSelected(e)},swapDesignerDimensions:function(){var e=this.$.designerHeightInput.getValue(),t=this.$.designerWidthInput.getValue();this.$.designerHeightInput.setValue(t),this.$.designerWidthInput.setValue(e),this.$.designer.setWidth(this.$.designerWidthInput.getValue()),this.$.designer.setHeight(this.$.designerHeightInput.getValue())},zoomDesigner:function(e,t){this.$.designer.zoom(t.selected.value)},autoZoomDesigner:function(e){var t=e.getValue();if(this.$.zoomPickerButton.setDisabled(t),this.$.designer.setAutoZoom(t),t){var i=this.$.designer.zoomFromWidth();this.$.zoomPickerButton.setContent(i+"%")}else this.$.zoomPickerButton.setContent(this.zoomValues[this.initZoomIndex]+"%"),this.$.zoomPicker.setSelected(this.$.zoomPicker.getClientControls()[this.initZoomIndex]),this.zoomDesigner(null,{selected:this.$.zoomPicker.getSelected()})},displayZoomValue:function(e,t){this.$.zoomPickerButton.setContent(t.scale+"%")},addHandlers:function(){document.ondragstart=enyo.dispatch,document.ondrag=enyo.dispatch,document.ondragenter=enyo.dispatch,document.ondragleave=enyo.dispatch,document.ondragover=enyo.dispatch,document.ondrop=enyo.dispatch,document.ondragend=enyo.dispatch},showActionPopup:function(e,t,i){e.isViewTemplate?this.$.actionPopup.setActionShowing("vtAction"):this.$.actionPopup.setActionShowing(null),this.$.actionPopup.setConfigComponent(t),this.$.actionPopup.setTargetComponent(i),this.$.actionPopup.show()},runPaletteComponentAction:function(e,t){var i=this.$.actionPopup.getConfigComponent(i),n=this.formatContent(enyo.json.codify.to(this.cleanUpViewComponent(i)));if("addtoKind"===t.getName()){var o=this.$.actionPopup.getTargetComponent(o),s=t.beforeId;this.performCreateItem(i,o,s)}else"replaceKind"===t.getName()?this.doChildRequest({task:["replaceKind",this.index,n]}):"addNewKind"===t.getName()?this.doChildRequest({task:["addNewKind",n]}):this.log("unexpected event: "+t.getName());return this.$.actionPopup.hide(),!0},performCreateItem:function(e,t,i){var n=this.getSingleKind(this.index);i&&i!==t.aresId?this.insertItemBefore(e,t,i):this.insertItem(e,t),this.$.inspector.initUserDefinedAttributes(n),this.addAresKindOptions(n),this.rerenderKind(e.aresId)},enableDesignerActionButtons:function(e){this.$.deleteButton.setAttribute("disabled",!e),this.$.undoButton.setAttribute("disabled",!e),this.$.redoButton.setAttribute("disabled",!e),this.$.reloadDesignerButton.setAttribute("disabled",!e)}});

// source/enyo-editor/deimos/ProjectKindsModel.js
enyo.singleton({name:"ProjectKindsModel",kind:"enyo.Component",debug:!1,info:{},kindOptions:{},serializerOptions:{},defaults:{properties:{owner:{filterLevel:"hidden"},container:{filterLevel:"hidden"},parent:{filterLevel:"hidden"},prepend:{filterLevel:"hidden"},events:{filterLevel:"hidden"},id:{filterLevel:"hidden"},isContainer:{filterLevel:"hidden"},controlParentName:{filterLevel:"hidden"},layoutKind:{filterLevel:"hidden"},canGenerate:{filterLevel:"dangerous",inputKind:"Inspector.Config.Boolean"},content:{filterLevel:"useful",inputKind:"Inspector.Config.Text"},name:{filterLevel:"useful",inputKind:"Inspector.Config.Text"}},events:{ontap:{filterLevel:"useful"}}},defaultKindOptions:{"enyo.Repeater":{isRepeater:!0}},defaultSerializerOptions:{},F_HIDDEN:-1,F_DANGEROUS:1,F_NORMAL:2,F_USEFUL:3,levelMapping:null,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.levelMapping={hidden:this.F_HIDDEN,dangerous:this.F_DANGEROUS,normal:this.F_NORMAL,useful:this.F_USEFUL}},resetInformation:function(){this.trace("resetInformation!"),this.info={},this.addInformation("properties","__default",this.defaults.properties),this.addInformation("events","__default",this.defaults.events),this.kindOptions=enyo.clone(this.defaultKindOptions),this.serializerOptions=enyo.clone(this.defaultSerializerOptions)},buildInformation:function(e){this.trace("buildInformation: Indexer: ",e),this.resetInformation(),enyo.forEach(e.design.inspector,function(e){"kind"===e.type?(this.trace("Processing: ",e.name,e),this.addInformation("properties",e.name,e.properties),this.addInformation("events",e.name,e.events)):enyo.error("Unknown data type='"+e.type+"' -- Ignored")},this),this.addKindOptions(e.design.palette),this.addSerializerOptions(e.design.serializer)},addKindOptions:function(e){enyo.forEach(e,function(e){enyo.forEach(e.items,function(e){e.options&&(this.kindOptions[e.config.kind||""]=e.options)},this)},this)},getKindOptions:function(e){return this.kindOptions[e]||this.kindOptions["enyo."+e]},addSerializerOptions:function(e){enyo.forEach(e,function(e){var t=e.name,i=this.serializerOptions[t];i||(this.serializerOptions[t]=i={}),i.exclude=e.exclude},this)},addInformation:function(e,t,i){if(i){this.trace("addInformation: Adding ",e," information for ",t);var n=function(e,t,i,n){n.filterLevel?(n.level=ProjectKindsModel.levelMapping[n.filterLevel],n.level||(n.level=ProjectKindsModel.F_NORMAL,enyo.error("Invalid filter level for "+e+" "+t+"."+i))):n.level=ProjectKindsModel.F_NORMAL,this.trace("addInformation: Setting level ",n.level," for ",e," ",t,".",i)},o=enyo.bind(this,n,e,t);this.info[t]||(this.info[t]={}),this.info[t][e]=i;for(var s=Object.keys(i),r=0;s.length>r;r++)o(s[r],i[s[r]])}},getInfo:function(e,t,i){var n=this.info[e]||this.info["enyo."+e],o=n&&n[t]&&n[t].hasOwnProperty(i);return o?n[t][i]:void 0},getFilterLevel:function(e,t,i){var n=this.getInfo(e,t,i);return n&&n.level?n.level:(n=this.getInfo("__default",t,i),n&&n.level||ProjectKindsModel.F_NORMAL)},getFlattenedContainerInfo:function(){return null}});

// source/enyo-editor/deimos/designer/Palette.js
enyo.kind({name:"CategoryItem",components:[{classes:"palette-category",components:[{ontap:"toggleDrawer",classes:"palette-category-name",components:[{name:"indicator",classes:"indicator turned"},{name:"name",tag:"span"}]},{kind:"onyx.Drawer",name:"drawer",open:!0,components:[{name:"list",kind:"Repeater",count:0,onSetupItem:"setupItem",components:[{kind:"PaletteItem"}]}]}]}],events:{onToggledDrawer:""},toggleDrawer:function(){if(0!==this.$.list.count){var e=this.$.drawer.getOpen();this.$.drawer.setOpen(!e),this.$.indicator.addRemoveClass("turned",!e),this.doToggledDrawer()}return!0},setModel:function(e){this.model=e,this.$.name.setContent(this.model.name),this.$.list.count=this.model.items.length,0===this.$.list.count&&this.$.drawer.getOpen()&&this.closeDrawer(),this.$.list.build(),"ignore"===this.$.name.content&&this.hide()},setupItem:function(e,t){return t.item.$.paletteItem.setModel(this.model.items[t.index]),!0},openDrawer:function(){this.$.drawer.setOpen(!0),this.$.indicator.addRemoveClass("turned",!0)},closeDrawer:function(){this.$.drawer.setOpen(!1),this.$.indicator.addRemoveClass("turned",!1)},drawerStatus:function(){return this.$.drawer.getOpen()}}),enyo.kind({name:"PaletteItem",components:[{kind:"Control",classes:"palette-item",attributes:{draggable:!0},components:[{name:"icon",kind:"Image",showing:!1},{name:"name"},{classes:"row-fluid",name:"client"}]}],handlers:{ondragstart:"decorateDragEvent"},decorateDragEvent:function(e,t){return t.dataTransfer?(t.config=this.config,t.options=this.options,void 0):!0},setModel:function(e){if(e){for(var t in e){var i=this.$[t];if(i){var n=e[t];"Image"==i.kind?(i.setSrc("$assets/enyo-editor/deimos/images/"+n),i.setShowing(!0)):i.setContent(n)}}this.attributes.title=e.description,this.config=e.config,this.options=e.options}}}),enyo.kind({name:"Palette",style:"position: relative",published:{projectIndexer:""},debug:!1,components:[{kind:"FittableRows",classes:"enyo-fit",components:[{kind:"onyx.MoreToolbar",classes:"deimos-toolbar deimos-toolbar-margined-buttons",components:[{kind:"onyx.Button",name:"expandAllCategoriesButton",content:ilibDeimos("Expand all"),ontap:"expandAllCategories"},{kind:"onyx.Button",name:"collapseAllCategoriesButton",content:ilibDeimos("Collapse all"),ontap:"collapseAllCategories"}]},{kind:"Scroller",fit:!0,components:[{name:"list",kind:"Repeater",count:0,onSetupItem:"setupItem",components:[{kind:"CategoryItem"}]}]},{kind:"onyx.InputDecorator",style:"width:100%; margin-top:10px;",layoutKind:"FittableColumnsLayout",components:[{kind:"onyx.Input",name:"filterPalette",fit:!0,placeholder:ilibDeimos("filter"),oninput:"paletteFiltering"},{kind:"onyx.Icon",name:"filterPaletteIcon",src:"$assets/enyo-editor/deimos/images/search-input-search.png",style:"height:20px;",ontap:"resetFilter"}]}]}],handlers:{ondragstart:"dragstart",onToggledDrawer:"toggledDrawer"},create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.$.expandAllCategoriesButton.setDisabled(!0)},setupItem:function(e,t){var i=t.index,n=t.item;return n.$.categoryItem.setModel(this.palette[i]),!0},dragstart:function(e,t){if(!t.dataTransfer)return!0;var i={type:"ares/createitem",item:{config:t.config,options:t.options}};t.dataTransfer.setData("text",enyo.json.codify.to(i))},projectIndexerChanged:function(){this.trace("projectIndexerChanged: rebuilt the palette ");var e=this.buildCatchAllPalette(),t=ares.clone(e.concat(this.projectIndexer.design.palette||[])),i=this.$.filterPalette.getValue().toLowerCase();if(""!==i){var n;enyo.forEach(t,function(e){for(n=0;e.items.length>n;n++)-1===e.items[n].name.toLowerCase().indexOf(i)&&(e.items.splice(n,1),n--)},this)}var o=0;enyo.forEach(t,function(e){0===e.items.length?o--:o++},this),o===this.$.list.count?(this.$.expandAllCategoriesButton.setDisabled(!0),this.$.collapseAllCategoriesButton.setDisabled(!1)):o===-this.$.list.count&&(this.$.expandAllCategoriesButton.setDisabled(!0),this.$.collapseAllCategoriesButton.setDisabled(!0)),this.palette=t,this.palette.sort(function(e,t){return(e.name||"").localeCompare(t.name||"")+(e.order||0)-(t.order||0)}),this.$.list.set("count",0),this.$.list.set("count",this.palette.length)},buildCatchAllPalette:function(){var e={"":{order:11e3,name:ilibDeimos("Custom Kinds"),items:[]}},t=[];if(this.projectIndexer.design.hasOwnProperty("palette")){var i=Object.keys(this.projectIndexer.design.palette);enyo.forEach(i,function(e){if(this.projectIndexer.design.palette[e]){var i=Object.keys(this.projectIndexer.design.palette[e].items);enyo.forEach(i,function(i){var n=this.projectIndexer.design.palette[e].items[i].config.kind||"";t.push(n)},this)}},this)}var n=enyo.filter(this.projectIndexer.objects,function(e){return"kind"==e.type&&enyo.indexOf("enyo.Component",e.superkinds)>=0&&"public"==e.group&&-1==t.indexOf(e.name)}).sort(function(e,t){return e.name.localeCompare(t.name)});enyo.forEach(n,function(t){var i={name:t.name,description:t.comment,config:{kind:t.name}},n=t.name.lastIndexOf(".");if(n>0){var o=t.name.substring(0,n),s=e[o];s||(s={order:1e4,name:ilibDeimos("{pkg} (other)",{pkg:o}),items:[]},e[o]=s),i.description="",s.items.push(i)}else e[""].items.push(i)});var o=[];for(var s in e)e.hasOwnProperty(s)&&o.push(e[s]);return o},paletteFiltering:function(e,t){return this.trace(e,"=>",t),""===this.$.filterPalette.getValue()?this.$.filterPaletteIcon.set("src","$assets/enyo-editor/deimos/images/search-input-search.png"):this.$.filterPaletteIcon.set("src","$assets/enyo-editor/deimos/images/search-input-cancel.png"),this.$.expandAllCategoriesButton.setDisabled(!0),this.$.collapseAllCategoriesButton.setDisabled(!1),this.projectIndexerChanged(),!0},resetFilter:function(e,t){return this.trace(e,"=>",t),""!==this.$.filterPalette.getValue()&&(this.$.filterPalette.setValue(""),this.paletteFiltering()),!0},expandAllCategories:function(e,t){return this.trace(e,"=>",t),this.paletteFiltering(e,t),this.$.expandAllCategoriesButton.setDisabled(!0),this.$.collapseAllCategoriesButton.setDisabled(!1),!0},collapseAllCategories:function(e,t){this.trace(e,"=>",t),this.$.collapseAllCategoriesButton.setDisabled(!0),this.$.expandAllCategoriesButton.setDisabled(!1);for(var i=0;this.$.list.count>i;i++)this.$.list.getControls()[i].$.categoryItem.closeDrawer();return!0},toggledDrawer:function(e,t){this.trace(e,"=>",t);for(var i=0,n=0,o=0;this.$.list.count>o;o++)this.$.list.getControls()[o].$.categoryItem.drawerStatus()?i++:n--;i===this.$.list.count?(this.$.expandAllCategoriesButton.setDisabled(!0),this.$.collapseAllCategoriesButton.setDisabled(!1)):n===-this.$.list.count?(this.$.expandAllCategoriesButton.setDisabled(!1),this.$.collapseAllCategoriesButton.setDisabled(!0)):(this.$.expandAllCategoriesButton.setDisabled(!1),this.$.collapseAllCategoriesButton.setDisabled(!1))}});

// source/enyo-editor/deimos/designer/designerFrame/Json.js
enyo.json.codify={_block:function(e,t){e=e.join(",\n");var i=e?"\n"+e+"\n"+t:"";return i},obj:function(e,t){var i,n,o=[];for(var s in e)n=e[s],n="isa"==s?n.prototype.declaredClass:this.value(n,t+"	"),i=s+": "+n,o.push(i);return"{"+o.join(", ")+"}"},array:function(e,t){for(var i,n,o=[],s=0;n=e[s];s++)i=t+"	"+this.value(n,t+"	"),o.push(i);return"["+this._block(o,t)+"]"},value:function(e,t){var i=null===e||void 0===e?"":typeof e;switch(i){case"string":return e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"'),'"'+e+'"';case"function":var n=""+e;return n=n.replace(/\n*\r/g,"\n"),n=n.replace(/(^\.\.\.\.)|[\.\t]+(\.\.\.\.)/g,"	"),n=n.split("\n"),n.join("\n"+t);case"object":return e.constructor==Array?this.array(e,t):this.obj(e,t);default:return e}},to:function(e){return this.value(e,"	")},from:function(inJson){var o=eval("("+inJson+")");return o}};

// source/enyo-editor/deimos/designer/Inspector.js
enyo.kind({name:"Inspector",kind:"FittableRows",events:{onModify:"",onAction:""},published:{filterLevel:null,filterType:null,projectIndexer:null},components:[{kind:"Inspector.FilterType",onValueChanged:"updateFilterType"},{kind:"Scroller",fit:!0,components:[{name:"content",kind:"FittableRows",onActivate:"inheritAttributeToggle"}]},{name:"filterLevel",kind:"Inspector.FilterLevel",onValueChanged:"updateFilterLevel"},{name:"partialFilter",kind:"onyx.InputDecorator",classes:"properties-filter",layoutKind:"FittableColumnsLayout",showing:!1,components:[{kind:"onyx.Input",name:"filterProperties",fit:!0,placeholder:"filter",oninput:"propertiesFiltering"},{kind:"onyx.Icon",classes:"filter-icon",name:"filterPropertiesIcon",src:"$assets/enyo-editor/deimos/images/search-input-search.png",ontap:"resetFilter"}]},{name:"selectFilePopup",kind:"Ares.FileChooser",classes:"ares-masked-content-popup",showing:!1,folderChooser:!1,allowToolbar:!1,onFileChosen:"selectFileChosen"}],handlers:{onChange:"change",onDblClick:"dblclick",onPositionPropertyChanged:"positionPropertyChanged",onInputButtonTap:"selectFile",onPathChecked:"handlePathChecked"},classes:"inspector-panel",debug:!1,helper:null,userDefinedAttributes:{},create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.helper=new analyzer.Analyzer.KindHelper,this.helper.getPublishedWithValues=function(){this.checkDefAvail();for(var published=[],obj=this.definition.properties,i=0;obj.length>i;i++)if("published"===obj[i].token)for(var p=obj[i].value[0].properties,j=0;p.length>j;j++)if("array"!=p[j].value[0].type){var val="";try{val=eval(p[j].value[0].token)}catch(err){enyo.warn("Invalid value for property '"+p[j].name+"': "+p[j].value[0].token)}published.push({name:p[j].name,value:val})}return published}},allowed:function(e,t,i){var n=ProjectKindsModel.getFilterLevel(e,t,i);return this.trace("Level: ",n," for ",e,".",i),n>=this.filterLevel},buildPropList:function(e){var t=e.kind,i=t,n=this.getKindDefinition(i);if(!n)return this.trace("NO DEFINITION found for '",i,"' inControl: ",e),this.buildPropListFromObject(e);if(this.userDefinedAttributes[e.aresId]){for(var o=["ontap","onchange","ondown","onup","ondragstart","ondrag","ondragfinish","onenter","onleave"],s={},r={};n;){this.helper.setDefinition(n);var a=this.helper.getPublishedWithValues();this.trace("buildPropList: publishedProperties",a);for(var h,l=0;h=a[l];l++)(this.allowed(t,"properties",h.name)||this.userDefinedAttributes[e.aresId].hasOwnProperty(h.name))&&(this.trace("Adding property '",h.name,"' from '",i,"'"),s[h.name]=h.value);var c=this.helper.getEvents();for(l=0,h;h=c[l];l++)(this.allowed(t,"events",h)||this.userDefinedAttributes[e.aresId].hasOwnProperty(h))&&(this.trace("Adding event '",h,"' from '",i,"'"),r[h]=!0);i=n.superkind||"",n=""===i?null:this.getKindDefinition(i)}var d=s;d.events=[];for(var u in r)d.events.push(u);for(u=0;o.length>u;u++)this.allowed(t,"events",o[u])&&d.events.push(o[u]);return this.trace("buildPropList: props",d),d}},buildPropListFromObject:function(e){for(var t=["ontap","onchange","ondown","onup","ondragstart","ondrag","ondragfinish","onenter","onleave"],i={},n={},o=e,s=e.kind;o;){for(var r in o.published)this.allowed(s,"properties",r)&&(this.trace("Adding property '",r,"' from '",o.kind,"'"),i[r]=!0);for(var a in o.events)this.allowed(s,"events",a)&&(this.trace("Adding event '",a,"' from '",o.kind,"'"),n[a]=!0);o=o.base&&o.base.prototype}for(var h=[],l=Object.keys(i).sort(),c=0;l.length>c;c++)h.push(l[c]);h.events=[];for(c in n)h.events.push(c);for(c=0;t.length>c;c++)this.allowed(s,"events",t[c])&&h.events.push(t[c]);return h},makeEditor:function(e,t,i,n){if("events"!==t){this.trace("Adding entry for ",n," ",t," : ",i);var o,s,r,a,h=!(e.aresId&&this.userDefinedAttributes&&this.userDefinedAttributes[e.aresId]&&this.userDefinedAttributes[e.aresId][t]!==void 0),l=h?i:this.userDefinedAttributes[e.aresId][t],c="ares-inspector-row",d="attributeVal";if(o=this.$.content.createComponent({classes:c}),o.createComponent({kind:"InheritCheckbox",checked:!h,prop:t}),"events"===n&&(r={kind:"Inspector.Config.Event",values:this.kindFunctions}),s=ProjectKindsModel.getInfo(e.kind,n,t),r=s&&s.inputKind||r,"src"===t&&(r={kind:"Inspector.Config.PathInputRow",label:t}),r&&r instanceof Object)r=enyo.clone(r),r=enyo.mixin(r,{name:d,fieldName:t,fieldValue:l,fieldType:n,disabled:h}),o.createComponent(r),"Inspector.Config.PathInputRow"===r.kind&&r.fieldValue&&this.checkPath(o.$[d],r.fieldValue);else{a=r?r:l===!0||l===!1||"true"===l||"false"===l?"Inspector.Config.Boolean":"Inspector.Config.Text";var u=s?s.values:null,p={name:d,kind:a,fieldName:t,fieldValue:l,extra:n,disabled:h};u&&(p.values=u);var g=o.createComponent(p);"properties"===n&&g.$.value.addClass("property-value")}}},makeLayoutEditor:function(e){var t,i,n=["position","top","right","bottom","left","width","height"],o={},s={};for(enyo.Control.cssTextToDomStyles(this.trimWhitespace(this.getControlStyle(e)),o),i=0;t=n[i];i++)o[t]&&(s[t]={val:o[t],disabled:!1});this.$.content.createComponent({name:"layoutEditor",kind:"Inspector.LayoutEditor",layoutKinds:this.getLayoutKinds(),layoutKind:this.getControlLayoutKind(e),styleProps:s}).render()},trimWhitespace:function(e){return e=e||"",e.replace(/\s/g,"")},getControlStyle:function(e){return e.aresId&&this.userDefinedAttributes&&this.userDefinedAttributes[e.aresId]?this.userDefinedAttributes[e.aresId].style:null},getControlLayoutKind:function(e){var t=!(e.aresId&&this.userDefinedAttributes&&this.userDefinedAttributes[e.aresId]&&this.userDefinedAttributes[e.aresId].layoutKind!==void 0);return t?"":this.userDefinedAttributes[e.aresId].layoutKind},getLayoutKinds:function(){var e=enyo.filter(this.projectIndexer.objects,function(e){return"kind"==e.type&&("enyo.Layout"==e.name||enyo.indexOf("enyo.Layout",e.superkinds)>=0)});e.push({name:""},{name:"AbsolutePositioningLayout"}),e.sort(function(e,t){return e.name.localeCompare(t.name)});for(var t=0;e.length>t;t++)e[t]=e[t].name;return e},positionPropertyChanged:function(e,t){var i=this.selected.aresId&&this.userDefinedAttributes&&this.userDefinedAttributes[this.selected.aresId]?this.userDefinedAttributes[this.selected.aresId].style:null,n={},o=this.getAttributeVal(t.target),s=o.fieldName,r=o.fieldValue;return enyo.Control.cssTextToDomStyles(i,n),n[s]=" "+r,o.fieldName="style",o.fieldValue=enyo.Control.domStylesToCssText(n),this.change(e,enyo.mixin(t,{target:o})),!0},setRequestedPositionValue:function(e,t){this.waterfall("onSetRequestedPositionValue",{prop:e,value:t})},inspect:function(e){var t,i,n;if(this.$.content.destroyComponents(),e){this.selected=e;var o=e.name+" ("+e.kind+")";if(this.$.content.createComponent({tag:"h3",content:o,classes:"label label-info"}),t=this.buildPropList(e)){switch(this.filterType){case"P":this.$.content.createComponent({classes:"onyx-groupbox-header",content:"Properties"});for(n in t)this.makeEditor(e,n,t[n],"properties");this.$.filterLevel.show(),this.$.partialFilter.show(),this.propertiesFiltering();break;case"E":for(t=t.events,t.length&&this.$.content.createComponent({classes:"onyx-groupbox-header",content:"Events"}),i=0,n;n=t[i];i++)this.makeEditor(e,n,"","events");this.$.filterLevel.show(),this.$.partialFilter.hide();break;case"S":var s="";e&&void 0!==e.style&&(s=e.style),this.$.content.createComponent({kind:"CssEditor",currentStyle:s,inspectorObj:this}),this.$.filterLevel.hide(),this.$.partialFilter.hide();break;case"L":this.makeLayoutEditor(e),this.$.filterLevel.hide(),this.$.partialFilter.hide();break;default:enyo.warn("Inspector has unknown filterType: ",this.filterType)}this.$.content.render(),this.resized()}}},change:function(e,t){if(!t.target)return!0;var i=t.target.fieldName,n=t.target.fieldValue,o=parseFloat(n);return o+""==n&&(n=o),this.trace("Set property: ",i," --> ",n),this.userDefinedAttributes[this.selected.aresId]||(this.userDefinedAttributes[this.selected.aresId]={}),""===n?delete this.userDefinedAttributes[this.selected.aresId][i]:this.userDefinedAttributes[this.selected.aresId][i]=n,this.doModify({name:i,value:n,type:t.target.fieldType}),!0},getAttributeVal:function(e){return e instanceof Inspector.Config.IF?e:e.parent?this.getAttributeVal(e.parent):void 0},dblclick:function(e,t){if("events"===t.target.fieldType){var i=t.target.fieldName,n=t.target.fieldValue;n||(n=this.selected.name+enyo.cap(i.slice(2)),this.trace("SET handler: ",i," --> ",n),t.target.setFieldValue(n),this.change(e,t))}},initUserDefinedAttributes:function(e){this.userDefinedAttributes={};for(var t,i=this.flattenComponents(e),n=0;t=i[n];n++)this.userDefinedAttributes[t.aresId]=t},flattenComponents:function(e){var t,i,n=[];if(!e)return n;for(var o=0;i=e[o];o++)if(n.push(i),i.components){t=this.flattenComponents(i.components);for(var s=0;i=t[s];s++)n.push(i)}return n},getKindDefinition:function(e){var t=this.projectIndexer.findByName(e);return void 0===t&&(t=this.projectIndexer.findByName("enyo."+e)),t},updateFilterLevel:function(e,t){return t.active&&(this.setFilterLevel(t.originator.value),this.inspect(this.selected)),!0},updateFilterType:function(e,t){return t.active&&(this.setFilterType(t.originator.value),this.inspect(this.selected)),!0},inheritAttributeToggle:function(e,t){var i=t.originator,n=i.parent,o=i.prop;n.$.attributeVal&&(this.userDefinedAttributes[this.selected.aresId]||(this.userDefinedAttributes[this.selected.aresId]={}),i.active===!0?(n.$.attributeVal.setDisabled(!1),this.userDefinedAttributes[this.selected.aresId][o]=n.$.attributeVal.getFieldValue()):(n.$.attributeVal.setFieldValue(this.buildPropList(this.selected)[o]),n.$.attributeVal.setDisabled(!0),delete this.userDefinedAttributes[this.selected.aresId][o],this.doModify({name:o,value:void 0})))},setCurrentKindName:function(e){var t=this.getKindDefinition(e);this.helper.setDefinition(t),this.kindFunctions=this.helper.getFunctions().sort()},propertiesFiltering:function(e,t){return this.trace(e,"=>",t),""===this.$.filterProperties.getValue()?this.$.filterPropertiesIcon.set("src","$assets/enyo-editor/deimos/images/search-input-search.png"):this.$.filterPropertiesIcon.set("src","$assets/enyo-editor/deimos/images/search-input-cancel.png"),this.filterProperties(),!0},filterProperties:function(){var e=this.$.content.getControls(),t=this.$.filterProperties.getValue().toLowerCase();enyo.forEach(e,function(e){if(e.show(),""!==t){var i=e.getControls();i.length&&enyo.forEach(i,function(i){var n=i.fieldName;n&&-1===n.toLowerCase().indexOf(t)&&e.hide()},this)}},this)},resetFilter:function(e,t){return this.trace(e,"=>",t),""!==this.$.filterProperties.getValue()&&(this.$.filterProperties.setValue(""),this.propertiesFiltering()),!0},selectFile:function(e,t){this.trace(e,"=>",t);var i=Ares.Workspace.projects.getActiveProject();return this.chooser=t.originator,this.$.selectFilePopup.reset(),this.$.selectFilePopup.connectProject(i,function(){this.$.selectFilePopup.setHeaderText(t.header),this.$.selectFilePopup.pointSelectedName(t.originator.getValue(),t.originator.getStatus()),this.$.selectFilePopup.show()}.bind(this)),!0},selectFileChosen:function(e,t){var i=this.chooser;if(this.chooser=null,!t.file)return!0;var n=t.name.substr(1);return i.setFieldValue(n),i.handleChange(),this.$.selectFilePopup.reset(),!0},checkPath:function(e,t){if(this.checker=e,t.match(/^https?:\/\//))return this.pathChecked(!0),!0;if(t.match(/^[\.\/]/))return this.pathChecked(!1),!0;var i=Ares.Workspace.projects.getActiveProject();this.$.selectFilePopup.connectProject(i,function(){this.$.selectFilePopup.checkSelectedName("/"+t)}.bind(this))},handlePathChecked:function(e,t){this.pathChecked(t.status)},pathChecked:function(e){var t=this.checker;this.checker=null,this.$.selectFilePopup.reset(),this.updatePathCheck(t,e)},updatePathCheck:function(e,t){return e.setStatus(t),e.disableFileChooser(!1),!0}}),enyo.kind({name:"Inspector.FilterLevel",events:{onValueChanged:""},components:[{kind:"onyx.RadioGroup",fit:!1,onActivate:"filterLevelActivated",controlClasses:"onyx-tabbutton inspector-tabbutton filter thirds",components:[{value:ProjectKindsModel.F_USEFUL,content:"Frequent"},{value:ProjectKindsModel.F_NORMAL,content:"Normal",active:!0},{value:ProjectKindsModel.F_DANGEROUS,content:"All"}]}],filterLevelActivated:function(e,t){return t.originator.active&&this.doValueChanged({active:!0,originator:t.originator}),!0}}),enyo.kind({name:"Inspector.FilterType",events:{onValueChanged:""},components:[{kind:"onyx.RadioGroup",fit:!1,onActivate:"filterTypeActivated",style:"display:block;",controlClasses:"onyx-tabbutton inspector-tabbutton fourths",components:[{content:"Properties",value:"P",active:!0},{content:"Events",value:"E"},{content:"Layout",value:"L"},{content:"Style",value:"S"}]}],filterTypeActivated:function(e,t){return t.originator.active&&this.doValueChanged({active:!0,originator:t.originator}),!0}}),enyo.kind({name:"InheritCheckbox",kind:"enyo.Checkbox",published:{prop:null},handlers:{onActivate:"handleActivate"},allowActivate:!1,rendered:function(){this.inherited(arguments),this.allowActivate=!0},handleActivate:function(){return this.allowActivate?void 0:!0}});

// source/enyo-editor/deimos/designer/ComponentView.js
enyo.kind({name:"ComponentView",events:{onSelect:"",onHighlightDropTarget:"",onUnHighlightDropTargets:"",onMoveItem:"",onCreateItem:"",onHoldOver:""},handlers:{onItemDown:"itemDown",onItemDragover:"itemDragover",onPlaceholderDrop:"placeholderDrop",onItemDrop:"itemDrop",onItemDragend:"itemDragend"},published:{dragType:null},style:"position: relative;",components:[{kind:"Scroller",classes:"enyo-fit",components:[{name:"client",style:"padding: 8px;"}]}],holdoverTimeout:null,holdoverTimeoutMS:500,scroll:!1,visualize:function(e){this.destroyClientControls(),this._visualize(e,this),this.render()},_visualize:function(e,t){for(var i,n,o=0;n=e[o];o++)i=t.createComponent(this.createEntry(n)),n.components&&this._visualize(n.components,i)},createEntry:function(e){return{kind:"ComponentViewItem",comp:e}},select:function(e){this.selection&&this.unHighlightItem(this.selection),this.selection=e,this.highlightSelection(),this.scroll&&this.$.scroller.scrollIntoView(this.selection,!0),this.scroll=!1},setSelected:function(e,t){this.scroll=t,this._setSelected(e.aresId,this.getClientControls())},_setSelected:function(e,t){for(var i,n=0;i=t[n];n++){if(i.comp&&i.getAresId()===e)return this.select(i),!0;if(i.getClientControls().length>0&&this._setSelected(e,i.getClientControls()))return!0}},itemDown:function(e,t){return this.doSelect({component:t.originator.comp}),!0},itemDragover:function(e,t){var i,n,o,s,r,a,h=t.targetComponent,l=null;return t.dataTransfer.items&&(a="ares/createitem"===this.getDragType()),a===!0&&this.selection&&(this.unHighlightItem(this.selection),this.selection=null),this.isValidDropTarget(h)?(t.preventDefault(),i=this.calcDropDetails(h,t.clientY),this.dropDetails&&i.pos===this.dropDetails.pos&&i.target===this.dropDetails.target?!0:(this.dropDetails=i,n=i.target,this.destroyPlaceholder(),this.resetHoldoverTimeout(),"center"===i.pos?(this.highlightDropTarget(n),o=n.comp.aresId):(this.unhighlightDropTargets(),this.createDropPlaceholder(n,i.pos),o=n.owner.getAresId?n.owner.getAresId():null,s=this.findControlBeforeTarget(n,i.pos),r=s?s.comp:null,l=r?r.aresId:null),this.setHoldoverTimeout(o,l),!0)):(this.resetDropDetails(),this.unhighlightDropTargets(),!0)},itemDrop:function(e,t){this.destroyPlaceholder();var i,n,o,s=this.getDropData(t);return"center"===this.dropDetails.pos?this.completeDrop(s,this.dropDetails.target.getAresId(),null):(i=this.findControlBeforeTarget(this.dropDetails.target,this.dropDetails.pos),this.dropDetails.target.owner===this?(o=i===void 0||null===i?null:i.getAresId(),this.completeDrop(s,null,o)):null===i?this.completeDrop(s,this.dropDetails.target.owner.getAresId(),null):(n=this.dropDetails.target.owner===this?null:this.dropDetails.target.owner.getAresId(),this.completeDrop(s,n,i.getAresId()))),!0},itemDragend:function(){this.destroyPlaceholder()},placeholderDrop:function(e,t){this.destroyPlaceholder();var i=this.getDropData(t),n=this.dropDetails.target.owner.comp?this.dropDetails.target.owner.getAresId():null,o=this.findControlBeforeTarget(this.dropDetails.target,this.dropDetails.pos),s=o&&o.comp?o.getAresId():null;return this.completeDrop(i,n,s),!0},getDropData:function(e){var t=enyo.json.codify.from(e.dataTransfer.getData("text")),i=t.item,n=t.type;return{type:n,data:i}},completeDrop:function(e,t,i){switch(e.type){case"ares/moveitem":this.doMoveItem({itemId:e.data.aresId,targetId:t,beforeId:i});break;case"ares/createitem":this.doCreateItem({config:e.data.config,options:e.data.options,targetId:t,beforeId:i});break;default:enyo.warn("Component view received unknown drop: ",e)}this.resetDropDetails()},setHoldoverTimeout:function(e,t){this.holdoverTimeout=setTimeout(enyo.bind(this,function(){this.holdOver(e,t)}),this.holdoverTimeoutMS)},holdOver:function(e,t){this.doHoldOver({targetId:e,beforeId:t})},isValidDropTarget:function(e){return e!==this.selection&&"true"===e.getAttribute("dropTarget")&&!e.isDescendantOf(this.selection)},calcDropDetails:function(e,t){if(!e.hasNode())return null;var i=e.hasNode().getBoundingClientRect(),n=5,o=i.height-n,s=t-i.top,r=n>=s?"top":s>=o?"bottom":"center";return{pos:r,target:e}},findControlFromDropDetails:function(e,t){var i=this.indexOfControl(e),n="center"===t?i:"top"===t?i-1:i+1;return this.controlAtIndex(n)},createDropPlaceholder:function(e,t){var i=this.findControlBeforeTarget(e,t),n=i===void 0?"0px":null===i?e.owner.domStyles["padding-left"]||"0px":i.domStyles["padding-left"]||"0px",o={kind:"ComponentViewPlaceholder",style:"margin-left:"+n};i&&(o.addBefore=i),this.dropPlaceholder=e.owner.createComponent(o),this.dropPlaceholder.render()},findControlBeforeTarget:function(e,t){var i=this.calcAddBeforeIndex(e,t);return-1===i?null:e.owner.controlAtIndex(i)},calcAddBeforeIndex:function(e,t){var i=e.owner,n=i.indexOfControl(e),o="top"===t?n:n+1;return o>i.getClientControls().length+1?-1:o},destroyPlaceholder:function(){this.dropPlaceholder&&this.dropPlaceholder.destroy()},resetDropDetails:function(){this.dropDetails=null,this.setDragType(null)},resetHoldoverTimeout:function(){clearTimeout(this.holdoverTimeout),this.holdoverTimeout=null},highlightDropTarget:function(e){e.$.label.applyStyle("background","#cedafe"),this.doHighlightDropTarget({component:e.comp})},highlightSelection:function(){this.selection.$.label.applyStyle("background","orange")},unHighlightItem:function(e){e.$.label&&e.$.label.applyStyle("background","none")},unhighlightDropTargets:function(){this._unhighlightDropTargets(this.getClientControls()),this.doUnHighlightDropTargets()},_unhighlightDropTargets:function(e){if(0!==e.length)for(var t,i=0;t=e[i];i++)t!==this.selection&&"ComponentViewPlaceholder"!==t.kind&&(this.unHighlightItem(t),this._unhighlightDropTargets(t.getClientControls()))},syncDropTargetHighlighting:function(e){var t=e?e.aresId:null;this._syncDropTargetHighlighting(t,this.getClientControls())},_syncDropTargetHighlighting:function(e,t){if(0!==t.length)for(var i,n=0;i=t[n];n++)i!==this.selection&&i.comp&&(i.getAresId()!==e?(this.unHighlightItem(i),this._syncDropTargetHighlighting(e,i.getClientControls())):this.highlightDropTarget(i))}}),enyo.kind({name:"ComponentViewItem",published:{comp:{}},events:{onItemDown:"",onItemDragover:"",onItemDrop:"",onItemDragend:""},handlers:{ondown:"down",ondragstart:"dragstart",ondragover:"dragover",ondragleave:"dragleave",ondrop:"drop",ondragend:"dragend"},style:"padding-left: 15px;",attributes:{dropTarget:"true"},components:[{name:"label",components:[{name:"componentName",tag:"b",style:"pointer-events: none; line-height: 20px;"},{name:"componentKind",tag:"span",allowHtml:!0,style:"pointer-events: none; line-height: 20px;"}]},{name:"client",style:"position: relative;"},{name:"dragTarget",attributes:{draggable:"true"},comp:null,style:"background-color: white; position: absolute; opacity: 0.1;"}],rendered:function(){this.inherited(arguments),this.compChanged(),this.$.dragTarget.setBounds(this.$.label.getBounds())},compChanged:function(){this.$.dragTarget.comp=this.getComp(),this.$.componentName.setContent(this.getComp().name),this.$.componentKind.setContent("&nbsp;(<i>"+this.getComp().kind+"</i>)")},getAresId:function(){return this.getComp().aresId},down:function(e,t){this.doItemDown(t);var i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEwRDRFRUY1Rjk3NDExRTI5NTRFQ0U1RjAwMURENDczIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEwRDRFRUY2Rjk3NDExRTI5NTRFQ0U1RjAwMURENDczIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTBENEVFRjNGOTc0MTFFMjk1NEVDRTVGMDAxREQ0NzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTBENEVFRjRGOTc0MTFFMjk1NEVDRTVGMDAxREQ0NzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4/IH2ZAAAAEElEQVR42mL4//8/A0CAAQAI/AL+26JNFgAAAABJRU5ErkJggg==";return this.createDragImage(i),!0},dragstart:function(e,t){if(!t.dataTransfer)return!0;var i={type:"ares/moveitem",item:t.originator.comp};return t.dataTransfer.setData("text",enyo.json.codify.to(i)),t.dataTransfer.setDragImage&&t.dataTransfer.setDragImage(this.dragImage,0,0),!0},dragover:function(e,t){return t.dataTransfer?(t.targetComponent=this,this.doItemDragover(t),!0):!0},dragleave:function(e,t){return t.dataTransfer?void 0:!0},drop:function(e,t){return t.dataTransfer?(this.doItemDrop(t),!0):!0},dragend:function(e,t){return t.dataTransfer?(this.doItemDragend(t),!0):!0},createDragImage:function(e){return this.dragImage=document.createElement("img"),this.dragImage.src=e,this.dragImage}}),enyo.kind({name:"ComponentViewPlaceholder",classes:"component-view-drop-placeholder",published:{before:null},handlers:{ondragover:"dragover",ondragleave:"dragleave",ondrop:"drop"},events:{onPlaceholderDrop:""},dragover:function(e,t){return t.preventDefault(),!0},dragleave:function(){return!0},drop:function(e,t){return this.doPlaceholderDrop(t),!0}});

// source/enyo-editor/deimos/designer/InspectorConfig.js
enyo.kind({name:"Inspector.Config.IF",events:{onChange:"",onDblClick:""},published:{fieldName:"",fieldValue:"",fieldType:"",disabled:!1},create:function(){this.inherited(arguments),this.fieldNameChanged(),this.fieldValueChanged(),this.disabledChanged()},fieldNameChanged:function(){this.$.title.setContent(this.fieldName)},fieldValueChanged:function(){this.$.value.setValue(this.fieldValue)},disabledChanged:function(){this.$.value.setDisabled(this.getDisabled())}}),enyo.kind({name:"Inspector.Config.Boolean",kind:"Inspector.Config.IF",components:[{classes:"inspector-field-caption",name:"title"},{kind:"enyo.Checkbox",classes:"inspector-field-checkbox",name:"value",onActivate:"handleChange"}],allowActivate:!1,rendered:function(){this.inherited(arguments),this.allowActivate=!0},handleChange:function(){return this.allowActivate?(this.fieldValue=this.$.value.getChecked(),this.doChange({target:this}),!0):!0}}),enyo.kind({name:"Inspector.Config.Text",kind:"Inspector.Config.IF",components:[{classes:"inspector-field-caption",name:"title"},{kind:"onyx.InputDecorator",classes:"inspector-enyo-input-like",components:[{kind:"onyx.Input",classes:"inspector-field-editor",name:"value",onchange:"handleChange",ondblclick:"handleDblClick"}]}],focus:function(){this.$.value.focus()},handleChange:function(){return this.fieldValue=this.$.value.getValue(),this.doChange({target:this}),!0},handleDblClick:function(){return this.fieldValue=this.$.value.getValue(),this.doDblClick({target:this}),!0}}),enyo.kind({name:"Inspector.Config.Event",kind:"Inspector.Config.IF",components:[{classes:"inspector-field-caption",name:"title"},{kind:"onyx.MenuDecorator",style:"display: inline-block",onSelect:"itemSelected",components:[{kind:"onyx.InputDecorator",classes:"inspector-enyo-input-like",components:[{kind:"onyx.Input",classes:"inspector-field-editor",name:"value",onchange:"handleChange",ondblclick:"handleDblClick"}]},{kind:"enyo.Button",name:"button",classes:"inspector-event-button"},{kind:"onyx.Menu",name:"menu",floating:!0,components:[]}]}],handlers:{onActivate:"preventMenuActivation"},fieldValueChanged:function(){enyo.forEach(this.values,function(e){this.$.menu.createComponent({content:e,classes:"event-menu-item"})},this),this.$.value.setValue(this.fieldValue)},preventMenuActivation:function(){return!0},handleChange:function(){return this.fieldValue=this.$.value.getValue(),this.doChange({target:this}),!0},handleDblClick:function(){return this.fieldValue=this.$.value.getValue(),this.doDblClick({target:this}),!0},itemSelected:function(e,t){return this.fieldValue=t.content,this.$.value.setValue(t.content),this.doChange({target:this}),!0},disabledChanged:function(){this.inherited(arguments),this.$.button.setDisabled(this.getDisabled())}}),enyo.kind({name:"Inspector.Internal.Select",published:{fieldValue:"",disabled:!1},handlers:{onChange:"handleChange"},components:[{name:"decorator",kind:"onyx.PickerDecorator",classes:"css-editor-picker-decorator"}],initComponents:function(){this.initFinished=!1,this.inherited(arguments);var e,t,i=[];for(t=0;this.values.length>t;t++)e=this.values[t]===this.fieldValue,i.push({content:this.values[t],value:this.values[t],active:e});this.$.decorator.createComponents([{name:"pickerButton"},{kind:"onyx.Picker",classes:"inspector-field-editor",name:"value",components:i}],{owner:this}),this.initFinished=!0},disabledChanged:function(){this.$.pickerButton.setDisabled(this.getDisabled())},fieldValueChanged:function(){this.updateSelected()},handleChange:function(){return this.initFinished?(this.setFieldValue(this.$.value.getSelected().value),void 0):!0},updateSelected:function(){var e=Math.max(0,this.values.indexOf(this.fieldValue)),t=this.$.value.getClientControls()[e];this.initFinished=!1,this.$.value.setSelected(t),this.initFinished=!0}}),enyo.kind({name:"Inspector.Config.Select",kind:"Inspector.Config.IF",handlers:{onChange:"handleChange"},components:[{classes:"inspector-field-caption",name:"title"}],create:function(){this.inherited(arguments),this.createComponent({name:"selector",kind:"Inspector.Internal.Select",fieldValue:this.fieldValue,values:this.values},{owner:this}),this.$.selector.setDisabled(this.getDisabled())},disabledChanged:function(){var e=this.$.selector;e&&e.setDisabled(this.getDisabled())},fieldValueChanged:function(){var e=this.$.selector;e&&e.setFieldValue(this.getFieldValue())},handleChange:function(e,t){this.fieldValue=this.$.selector.getFieldValue(),t.target=this}}),enyo.kind({name:"Inspector.Config.Size",kind:"Inspector.Config.IF",components:[{classes:"inspector-field-caption",name:"title"},{kind:"onyx.InputDecorator",classes:"inspector-enyo-input-like",components:[{kind:"onyx.Input",classes:"inspector-field-editor",name:"value",onchange:"handleChange",ondblclick:"handleDblClick"}]},{name:"unit",kind:"Inspector.Internal.Select",classes:"css-editor-select-box",values:["px","cm","em","ern","rem","%"],onChange:"unitChanged"},{name:"slider",kind:"onyx.Slider",value:0,style:"width:91%",onChanging:"sliderChanged",onChange:"sliderChanged"}],focus:function(){this.$.value.focus()},handleChange:function(){var e=this.parseFieldValue(this.$.value.getValue()),t=this.unit,i="";return e&&(t=e[2]||this.unit,i=e[1]||""),this.fieldValue=i?i+t:"",this.doChange({target:this}),!0},handleDblClick:function(){return this.fieldValue=this.$.value.getValue(),this.doDblClick({target:this}),!0},unitChanged:function(e,t){""===this.size?this.$.unit.setFieldValue(this.unit):(this.setFieldValue(this.size+t.content),this.doChange({target:this}))},sliderChanged:function(e){this.fieldValue=Math.round(e.getValue())+this.unit,this.doChange({target:this})},fieldValueChanged:function(){var e=this.parseFieldValue(this.fieldValue);this.unit=e?e[2]:"px",this.size=e?e[1]:"",this.$.unit.setFieldValue(this.unit),this.$.slider.setValue(this.size),this.$.slider.setProgress(this.size),this.size&&this.setFieldValue(this.size+this.unit),this.$.value.setValue(this.fieldValue)},parseFieldValue:function(e){return e.match(/^(\d+)([%a-zA-Z]*)$/)}}),enyo.kind({name:"Inspector.Config.Color",kind:"Inspector.Config.IF",components:[{classes:"inspector-field-caption",name:"title"},{kind:"onyx.InputDecorator",classes:"inspector-enyo-input-like",components:[{kind:"onyx.Input",classes:"inspector-field-editor",name:"value",onchange:"handleChange",onclick:"handleDblClick",ondblclick:"handleDblClick"}]},{name:"color",classes:"inspector-color-button"}],focus:function(){this.$.value.focus()},handleChange:function(){return this.fieldValue=this.$.value.getValue(),this.doChange({target:this}),!0},handleDblClick:function(){return this.$.palette?this.$.palette.destroy():this.createComponent({name:"palette",kind:"PalettePicker",onChange:"colorChanged"}).render(),!0},fieldValueChanged:function(){this.$.value.setValue(this.fieldValue),this.$.color.applyStyle("background-color",this.fieldValue)},colorChanged:function(e,t){return this.fieldValue=t.originator.$.colorPicker.color,this.doChange({target:this}),this.$.palette&&this.$.palette.destroy(),!0}}),enyo.kind({name:"Inspector.Config.PathInputRow",kind:"Inspector.Config.IF",published:{value:"",inputTip:"",activated:!0,status:!1,buttonTip:ilibDeimos("Select file...")},events:{onInputButtonTap:"",onPathChecked:""},handlers:{onFileChooserAction:"pathInputTap",onInputChanged:"handleChange"},components:[{tag:"label",classes:"inspector-field-caption",name:"title"},{name:"fileChooserInput",kind:"Ares.FileChooserInput",inputDisabled:!0,inputClasses:"enyo-input inspector-field-editor",decoratorClasses:"inspector-enyo-input-like"}],debug:!1,create:function(){this.inherited(arguments),this.buttonTipChanged(),this.statusChanged()},handleChange:function(){return this.$.fileChooserInput.setActivePathInputButton(!0),this.fieldValue=this.$.fileChooserInput.getPathValue(),this.doChange({target:this}),!0},inputTipChanged:function(){this.$.fileChooserInput.setInputTip(this.inputTip)},disabledChanged:function(){var e=this.getDisabled();this.$.fileChooserInput.setInputDisabled(e),this.$.fileChooserInput.setActivePathInputButton(!e),!e&&this.fieldValue&&(this.statusChanged(),this.$.fileChooserInput.statusChanged())},disableFileChooser:function(e){this.$.fileChooserInput.setActivePathInputButton(!e)},statusChanged:function(){this.$.fileChooserInput.setStatus(this.status)},buttonTipChanged:function(){this.$.fileChooserInput.setButtonTip(this.buttonTip)},pathInputTap:function(){return this.doInputButtonTap({header:ilibDeimos("Select file...")}),!0},fieldValueChanged:function(){this.setStatus(!0),this.$.fileChooserInput.setPathValue(this.fieldValue)}});

// source/enyo-editor/deimos/designer/Designer.js
enyo.kind({name:"Designer",published:{height:null,width:null,currentFileName:"",autoZoom:!1},events:{onSelect:"",onSelected:"",onCreateItem:"",onMoveItem:"",onSyncDropTargetHighlighting:"",onReloadComplete:"",onResizeItem:"",onError:"",onReturnPositionValue:"",onForceCloseDesigner:"",onScaleChange:""},components:[{name:"designerFrame",tag:"iframe",classes:"ares-designer-frame-client"},{name:"communicator",kind:"RPCCommunicator",onMessage:"receiveMessage"}],baseSource:"designerFrame.html",projectSource:null,selection:null,scale:1,debug:!1,fsm:null,fsmStruct:{initial:"off",events:[{name:"projectSelected",from:["off","ready","broken","closed"],to:"reloading"},{name:"dfLoaded",from:"reloading",to:"initializing"},{name:"dfInitialized",from:"initializing",to:"initialized"},{name:"dfReady",from:"initialized",to:"ready"},{name:"dfReloadNeeded",from:"reloading",to:"broken"},{name:"render",from:"ready",to:"rendering"},{name:"dfRendered",from:"rendering",to:"ready"},{name:"dfRenderError",from:"rendering",to:"ready"},{name:"dfRequestReload",from:"rendering",to:"off"},{name:"syncFile",from:["ready","closed"],to:"updating"},{name:"dfRequestReload",from:"updating",to:"off"},{name:"dfUpdated",from:"updating",to:"ready"},{name:"dfReloadNeeded",from:"updating",to:"broken"},{name:"select",from:"ready",to:"selecting"},{name:"dfSelected",from:"selecting",to:"ready"},{name:"dfSelect",from:"ready",to:"ready"},{name:"cleanUp",from:"ready",to:"closed"},{name:"modifyProperty",from:"ready",to:"rendering"},{name:"render",from:"broken",to:"reloading"}],callbacks:{onenterstate:function(e,t,i){this.trace&&this.trace("fsm got event "+e+" from "+t+" to "+i)},onleaveoff:function(){this.fsmStash=[]},ondfReady:function(e,t,i){this.execCb(e,t,i)},onready:function(){if(this.fsmStash.length){var e=this.fsmStash.shift(),t=this,i=e[0],n=this[i],o=e[1];this.trace("resume "+i),window.setTimeout(function(){n.apply(t,o)})}},onprojectSelected:function(e,t,i,n,o){var s=function(){var e="designerFrame load failed. Please check console log for errors";this.doError(e),o()};this.trace("setup dead designer timer");var r=setTimeout(s.bind(this.designer),3e4),a=function(){this.trace("Clearing dead designer timer"),window.clearTimeout(r),o()};this.pendingCb=a.bind(this.designer),this.designer._reloadDesignerFrame(n)},ondfLoaded:function(){this.designer.designerFrameLoaded()},ondfInitialized:function(){this.designer.sendDesignerFrameContainerData()},onrender:function(e,t,i,n,o,s,r){ares.assertCb(r);var a=this.designer;"broken"===t?(this.fsmStash.push([e,[n,o,s,r]]),a._reloadDesignerFrame(a.projectSource)):(this.pendingCb=r,a._renderKind(n,o,s))},ondfRendered:function(e,t,i,n){this.execCb(e,t,i),this.designer._updateKind(n)},onsyncFile:function(e,t,i,n,o,s){this.pendingCb=s,this.designer._syncFile(n,o)},ondfUpdated:function(e,t,i){this.execCb(e,t,i)},onselect:function(e,t,i,n){this.designer.sendMessage({op:"select",val:n})},ondfSelected:function(e,t,i,n){var o=enyo.json.codify.from(n.val);this.designer.selection=o,this.designer.doSelected({component:o})},ondfSelect:function(e,t,i,n){var o=enyo.json.codify.from(n.val);this.designer.selection=o,this.designer.doSelect({component:o})},onmodifyProperty:function(e,t,i,n,o,s){this.pendingCb=s,this.designer.sendMessage({op:"modify",filename:this.designer.currentFileName,val:{property:n,value:o}})},oncleanUp:function(){this.designer.sendMessage({op:"cleanUp"})},ondfRequestReload:function(e,t,i,n){this.execCb(e,t,i);var o=this.designer.owner;n.callback=o.closeDesigner.bind(o,!1),n.action="Switching back to code editor",this.designer.doError(n)},ondfReloadNeeded:function(e,t,i,n){this.execCb(e,t,i),this.designer.doError(n)},ondfRenderError:function(e,t,i,n){this.execCb(e,t,i),this.designer.doError(n)}},error:function(e,t,i,n,o,s,r){var a,h;a=this.pendingCb?function(){this.execCb(e,t,i,s)}.bind(this):ares.noNext,h={callback:a},300===o?(h.err=r,h.msg="Internal error: "+s):h.msg=/^df/.test(e)?"Unexpected event "+e+" coming from designer in state "+t:"Unexpected event "+e+" coming from Ares in state "+t,this.trace("fsm error: "+h.msg),this.designer.doError(h)}},create:function(){ares.setupTraceLogger(this);var e=StateMachine.create(this.fsmStruct);e.trace=this.trace.bind(this),e.execCb=function(e,t,i,n){var o=this.pendingCb;if(this.pendingCb=null,o)o(n);else{var s="Internal error: missing call-back in event "+e;s+=" from state "+t+" to state "+i,this.designer.doError({msg:s})}}.bind(e),e.designer=this,this.fsm=e,this.inherited(arguments)},isBroken:function(){return this.fsm.is("broken")||this.fsm.is("off")},rendered:function(){this.inherited(arguments),this.$.communicator.setRemote(this.$.designerFrame.hasNode().contentWindow)},heightChanged:function(){this.$.designerFrame.applyStyle("height",this.getHeight()+"px"),this.resizeDesignerFrame(),this.repositionDesignerFrame()},widthChanged:function(){this.$.designerFrame.applyStyle("width",this.getWidth()+"px"),this.resizeDesignerFrame(),this.repositionDesignerFrame(),this.applyZoom()},zoom:function(e){this.scale=e>=0?Math.max(e/100,.2):1,enyo.dom.transformValue(this.$.designerFrame,"scale",this.scale),this.$.designerFrame.resized(),this.repositionDesignerFrame()},zoomFromWidth:function(){var e=this.width>0?Math.round(100*this.getBounds().width/this.width):100;return this.zoom(e),e},applyZoom:function(){if(this.autoZoom){var e=this.zoomFromWidth();this.doScaleChange({scale:e})}},resizeHandler:function(){return this.applyZoom(),!0},repositionDesignerFrame:function(){var e=this.getHeight(),t=this.getWidth(),i=e*this.scale,n=t*this.scale,o=-1*(e-i)/2,s=-1*(t-n)/2;this.$.designerFrame.addStyles("top: "+o+"px; left: "+s+"px")},updateSource:function(e,t){ares.assertCb(t),this.fsm.projectSelected(e,t)},_reloadDesignerFrame:function(e){var t=e.getService().config;this.projectSource=e,this.projectPath=t.origin+t.pathname+"/file";var i=this.projectSource.getProjectUrl()+"/"+this.baseSource+"?overlay=designer";this.trace("Setting designerFrame url: ",i),this.$.designerFrame.hasNode().src=i},reload:function(){this.trace("reload requested by user"),this.updateSource(this.projectSource,this.doReloadComplete.bind(this))},sendMessage:function(e){this.trace("Op: ",e.op,e),this.$.communicator.sendMessage(e)},receiveMessage:function(e,t){var i,n=t.message;return this.trace("Op: ",n.op,n),n&&n.op?("state"===n.op&&"initialized"===n.val?this.fsm.dfInitialized():"state"===n.op&&"ready"===n.val?this.fsm.dfReady():"state"===n.op&&"loaded"===n.val?this.fsm.dfLoaded():"rendered"===n.op?this.fsm.dfRendered(n):"selected"===n.op?this.fsm.dfSelected(n):"select"===n.op?this.fsm.dfSelect(n):"syncDropTargetHighlighting"===n.op?this.doSyncDropTargetHighlighting({component:enyo.json.codify.from(n.val)}):"createItem"===n.op?this.doCreateItem(n.val):"moveItem"===n.op?this.doMoveItem(n.val):"updated"===n.op?this.fsm.dfUpdated():"error"===n.op?(i={msg:n.val.msg,err:n.val.err},n.val.requestReload===!0?this.fsm.dfRequestReload(i):n.val.reloadNeeded===!0?this.fsm.dfReloadNeeded(i):"render"===n.val.triggeredByOp?this.fsm.dfRenderError(i):(this.log("unexpected error message from designer",n),this.doError(i))):"resize"===n.op?this.doResizeItem(n.val):"returnPositionValue"===n.op?this.doReturnPositionValue(n.val):enyo.warn("Deimos designer received unknown message op:",n),void 0):(enyo.warn("Deimos designer received invalid message data:",n),void 0)},sendDesignerFrameContainerData:function(){this.sendMessage({op:"containerData",val:ProjectKindsModel.getFlattenedContainerInfo()})},renderKind:function(e,t,i,n){ares.assertCb(n),this.fsm.render(e,t,i,n)},_renderKind:function(e,t,i){this.currentFileName=e;var n=[t];this.sendMessage({op:"render",filename:e,val:{name:t.name,components:enyo.json.codify.to(t.components),componentKinds:enyo.json.codify.to(n),selectId:i}})},select:function(e){this.fsm.select(e)},sendMessageIfReady:function(e){this.fsm.is("ready")?this.sendMessage(e):this.trace('dropped msg "'+e.op+'" while fsm is in state '+this.fsm.current)},highlightDropTarget:function(e){this.sendMessageIfReady({op:"highlight",val:e})},unHighlightDropTargets:function(){this.sendMessageIfReady({op:"unhighlight"})},modifyProperty:function(e,t,i){ares.assertCb(i),this.fsm.modifyProperty(e,t,i)},_updateKind:function(e){this.trace("called by op "+e.triggeredByOp+" for file "+e.filename);var t=this.owner;e.filename===this.currentFileName?(t.buildComponentView(e),t.updateCodeInEditor(e.filename)):this.log("dropped rendered message for stale file ",e.filename)},designerFrameLoaded:function(){this.sendMessage({op:"initializeOptions",options:ProjectKindsModel.get("defaultKindOptions")})},cleanUp:function(){this.fsm.cleanUp()},syncFile:function(e,t,i,n){if(ares.assertCb(n),e===this.projectSource.getName())/\.(css|js)$/i.test(t)?this.fsm.syncFile(t,i,n):(this.trace("Dropping syncFile on "+t),setTimeout(n,0));else{var o="syncFile aborted: project mismatch. Expected "+this.projectSource.getName()+" got "+e+" with file "+t,s=Error(o);setTimeout(function(){n(s)},0)}},_syncFile:function(e,t){/\.css$/i.test(e)?this.sendMessage({op:"cssUpdate",val:{filename:this.projectPath+e,code:t}}):/\.js$/i.test(e)&&this.sendMessage({op:"codeUpdate",val:t})},resizeDesignerFrame:function(){this.sendMessageIfReady({op:"resize"})},prerenderDrop:function(e,t){this.sendMessageIfReady({op:"prerenderDrop",val:{targetId:e,beforeId:t}})},requestPositionValue:function(e){this.sendMessageIfReady({op:"requestPositionValue",val:e})},sendSerializerOptions:function(e){this.sendMessage({op:"serializerOptions",val:e})},sendDragType:function(e){this.sendMessageIfReady({op:"dragStart",val:e})}});

// source/enyo-editor/deimos/designer/designerFrame/RPCCommunicator.js
enyo.kind({name:"RPCCommunicator",kind:"enyo.Component",published:{remote:window.parent},events:{onMessage:""},sendMessage:function(e){this.getRemote().postMessage({message:e},"*")},create:function(){this.inherited(arguments),this.setupRPC()},setupRPC:function(){enyo.dispatcher.listen(window,"message",enyo.bind(this,"receiveMessage"))},receiveMessage:function(e){this.doMessage(e.data)}});

// source/enyo-editor/deimos/designer/CssEditor.js
enyo.kind({name:"CssEditor",kind:"FittableRows",events:{onChange:""},cssEditorConfig:[{category:"Background-Style",properties:[{name:"background-color",inputKind:"Inspector.Config.Color"}]},{category:"Border-Style",properties:[{name:"border-color",inputKind:"Inspector.Config.Color"},{name:"border-style",inputKind:{kind:"Inspector.Config.Event",values:["dotted","dashed","double","groove","hidden","ridge","solid","inset","outset"]}},{name:"border-width",inputKind:{kind:"Inspector.Config.Size",values:["px","cm","em","ern","rem","%"]}}]},{category:"Padding",properties:[{name:"padding-top",inputKind:{kind:"Inspector.Config.Size",values:["px","cm","em","ern","rem","%"]}},{name:"padding-bottom",inputKind:{kind:"Inspector.Config.Size",values:["px","cm","em","ern","rem","%"]}},{name:"padding-right",inputKind:{kind:"Inspector.Config.Size",values:["px","cm","em","ern","rem","%"]}},{name:"padding-left",inputKind:{kind:"Inspector.Config.Size",values:["px","cm","em","ern","rem","%"]}}]},{category:"Padding-ShortHand",properties:[{name:"padding",inputKind:{kind:"Inspector.Config.Text"}}]},{category:"Margin",properties:[{name:"margin-top",inputKind:{kind:"Inspector.Config.Size",values:["px","cm","em","ern","rem","%"]}},{name:"margin-bottom",inputKind:{kind:"Inspector.Config.Size",values:["px","cm","em","ern","rem","%"]}},{name:"margin-right",inputKind:{kind:"Inspector.Config.Size",values:["px","cm","em","ern","rem","%"]}},{name:"margin-left",inputKind:{kind:"Inspector.Config.Size",values:["px","cm","em","ern","rem","%"]}}]},{category:"Margin-ShortHand",properties:[{name:"margin",inputKind:{kind:"Inspector.Config.Text"}}]},{category:"Font-Style",properties:[{name:"font-family",inputKind:{kind:"Inspector.Config.Event",values:["arial","arial black","comic sans ms","courier new","georgia","helvetica","times new roman","trebuchet ms","verdana"]}},{name:"font-style",inputKind:{kind:"Inspector.Config.Event",values:["normal","italic","oblique"]}},{name:"font-variant",inputKind:{kind:"Inspector.Config.Event",values:["normal","small-caps"]}},{name:"font-weight",inputKind:{kind:"Inspector.Config.Event",values:["normal","bold","bolder","lighter"]}},{name:"font-size",inputKind:"Inspector.Config.Size"},{name:"line-height",inputKind:"Inspector.Config.Size"},{name:"color",inputKind:"Inspector.Config.Color"}]},{category:"Text-Style",properties:[{name:"text-align",inputKind:{kind:"Inspector.Config.Event",values:["center","left","right"]}},{name:"text-decoration",inputKind:{kind:"Inspector.Config.Event",values:["overline","line-through","underline"]}},{name:"text-indent",inputKind:"Inspector.Config.Size"},{name:"text-justify",inputKind:{kind:"Inspector.Config.Event",values:["auto","inter-word","inter-ideograph","inter-cluster","distribute","kashida","trim","none"]}}]}],fieldName:null,fieldValue:null,create:function(){this.inherited(arguments),this.styleProps={},enyo.Control.cssTextToDomStyles(this.trimWhitespace(this.currentStyle),this.styleProps),enyo.forEach(this.cssEditorConfig,function(e){this.createComponent({kind:"CssEditor.Category",propUser:this.styleProps,config:e,owner:this,onChange:"change"})},this)},change:function(e,t){if(!t.target)return!0;var i=this.trimWhitespace(t.target.fieldValue),n=this.trimWhitespace(t.target.fieldName);return""===n?!0:(this.styleProps[n]=i,this.fieldName="style",this.fieldValue=enyo.Control.domStylesToCssText(this.styleProps),t.target=this,enyo.forEach(this.cssEditorConfig,function(e){var t=Object.keys(e.properties);enyo.forEach(t,function(t){e.properties[t].name===n&&(this.inspectorObj.lastModifiedCategory=e.category)},this)},this),void 0)},trimWhitespace:function(e){return e=e||"",1===e.split(" ").length&&e.replace(/\s/g,""),e}}),enyo.kind({name:"CssEditor.Category",components:[{classes:"css-editor-category",components:[{ontap:"toggleDrawer",classes:"css-editor-category-name",components:[{name:"indicator",classes:"css-editor-turned css-editor-indicator "},{name:"name",tag:"span"}]},{name:"drawer",kind:"onyx.Drawer",open:!1,components:[{name:"list",kind:"Repeater",onSetupItem:"setupItem",components:[{name:"item"}]}]}]}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.$.name.setContent(this.config.category),this.$.list.setCount(this.config.properties.length),this.$.list.build();var e=this.$.drawer.getOpen();void 0===this.owner.inspectorObj.lastModifiedCategory||this.owner.inspectorObj.lastModifiedCategory===this.config.category?(this.owner.inspectorObj.lastModifiedCategory=this.config.category,this.$.drawer.setOpen(!e),this.$.indicator.addRemoveClass("css-editor-turned",!e)):(this.$.drawer.setOpen(e),this.$.indicator.addRemoveClass("css-editor-turned",e))},toggleDrawer:function(){var e=this.$.drawer.getOpen();this.$.drawer.setOpen(!e),this.$.indicator.addRemoveClass("css-editor-turned",!e)},setupItem:function(e,t){var i=this.config.properties[t.index],n=t.item.$.item,o=this.propUser[i.name],s=i.inputKind;return s&&s instanceof Object?(s=enyo.clone(s),s=enyo.mixin(s,{fieldName:i.name,fieldValue:o})):s={kind:s,fieldName:i.name,fieldValue:o},this.trace("CREATE",s),n.createComponent(s,{owner:this}),!0}}),enyo.kind({name:"PalettePicker",components:[{kind:"ColorPicker",onColorSelected:"onPick"}],events:{onChange:""},onPick:function(){return this.doChange({target:this.$.colorPicker}),!0}});

// source/enyo-editor/deimos/designer/ColorPicker.js
enyo.kind({name:"DefaultColorsBox",published:{color:""},tag:"div",events:{onSelect:""},style:"border-radius: 3px; height: 15px; border: 1px solid Black; margin: 5px;",handlers:{ontap:"colorTapped"},create:function(){this.inherited(arguments),this.colorChanged()},colorChanged:function(){this.applyStyle("background-color","#"+this.color)},colorTapped:function(){return this.bubble("onSelect",{color:this.color}),!0}}),enyo.kind({name:"DefaultColorsBoxes",components:[{kind:"FittableColumns",components:[{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"222222"},{color:"444444"},{color:"666666"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"AAAAAA"},{color:"CCCCCC"},{color:"FFFFFF"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"440000"},{color:"880000"},{color:"BB0000"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"FE2E2E"},{color:"F78181"},{color:"F6CECE"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"004400"},{color:"008800"},{color:"00BB00"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"2EFF2E"},{color:"81FF81"},{color:"CEF6CE"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"000044"},{color:"000088"},{color:"0000BB"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"2E2EFF"},{color:"8181FF"},{color:"CECEF6"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"440044"},{color:"880088"},{color:"BB00BB"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"FF2EFF"},{color:"FF81FF"},{color:"F6CEF6"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"004444"},{color:"008888"},{color:"00BBBB"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"2EFFFF"},{color:"81FFFF"},{color:"CEF6F6"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"444400"},{color:"888800"},{color:"BBBB00"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"FFFF2E"},{color:"FFFF81"},{color:"F6F6CE"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"61380B"},{color:"B45F04"},{color:"FF8000"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"FAAC58"},{color:"F7BE81"},{color:"F5D0A9"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"610B21"},{color:"8A0829"},{color:"DF013A"}]},{kind:"FittableRows",style:"width: 5.5%;",defaultKind:"DefaultColorsBox",components:[{color:"FA5882"},{color:"F7819F"},{color:"F5A9BC"}]}]}]}),enyo.kind({name:"ColorPicker",kind:"Control",events:{onColorSelected:""},components:[{kind:"DefaultColorsBoxes",onSelect:"colorTapped"}],colorTapped:function(e,t){return this.color="#"+(t.color.substr(0,2)+t.color.substr(2,2)+t.color.substr(4,2)).toUpperCase(),this.doColorSelected(),!0}});

// source/enyo-editor/deimos/designer/LayoutEditor.js
enyo.kind({name:"Inspector.LayoutEditor",kind:"enyo.Control",published:{layoutKind:null,layoutKinds:null,styleProps:null,defaultStyleProps:{position:{val:"static",disabled:!1},top:{val:"",disabled:!0},left:{val:"",disabled:!0},bottom:{val:"",disabled:!0},right:{val:"",disabled:!0},width:{val:"",disabled:!0},height:{val:"",disabled:!0}}},events:{onRequestPositionValue:"",onPositionDataUpdated:"",onPositionPropertyChanged:""},handlers:{onSetRequestedPositionValue:"setRequestedPositionValue"},components:[{classes:"onyx-groupbox-header",content:"Layout Kind"},{name:"layoutKindRow",classes:"ares-inspector-row"},{classes:"onyx-groupbox-header",content:"Position"},{name:"positionEditorContainer",onUpdateProps:"handleUpdateProps"},{classes:"onyx-groupbox-header",content:"Properties"}],create:function(){this.inherited(arguments),this.setupStyleProps(),this.createLayoutKindPicker(),this.createPositionEditor(),this.createPropertyFields()},createLayoutKindPicker:function(){this.$.layoutKindRow.createComponent({name:"attributeVal-layoutKind",kind:"Inspector.Config.Select",classes:"layout-kind-select",fieldName:"layoutKind",fieldValue:this.getLayoutKind(),values:this.getLayoutKinds(),disabled:!1})},setupStyleProps:function(){var e,t=enyo.clone(this.getDefaultStyleProps()),i=enyo.clone(this.getStyleProps()),n={};for(e in t)n[e]=i[e]?enyo.clone(i[e]):enyo.clone(t[e]);this.setStyleProps(enyo.clone(n))},createPositionEditor:function(){this.$.positionEditorContainer.createComponent({kind:"Inspector.PositionBox",name:"positionEditor",props:this.getStyleProps()})},createPropertyFields:function(){var e,t,i=this.getStyleProps();for(e in i)t=this.createComponent({classes:"ares-inspector-row"}),t.createComponent({name:"attributeVal-"+e,kind:"Inspector.Config.Text",fieldName:e,fieldValue:i[e].val,disabled:i[e].disabled,onChange:"positionPropertyChanged"},{owner:this})},positionPropertyChanged:function(e,t){return this.doPositionPropertyChanged(t),!0},handleUpdateProps:function(e,t){for(var i,n,o,s,r=0;s=t.changedProps[r];r++)i=this.$["attributeVal-"+s],t.props[s].disabled?(i.setDisabled(!0),i.setFieldValue("")):(i.setDisabled(!1),t.changedSide===s&&1>=t.changedProps.length?o=!0:n={prop:s});return n?this.doRequestPositionValue(n):o||this.dataPositionUpdated(),!0},setRequestedPositionValue:function(e,t){var i=this.$["attributeVal-"+t.prop];i.setFieldValue(t.value+"px"),this.dataPositionUpdated()},dataPositionUpdated:function(){var e,t,i={top:"",right:"",bottom:"",left:"",height:"",width:""};for(var n in i)e=this.$["attributeVal-"+n],t=e.getFieldValue(),i[n]=t;this.doPositionDataUpdated({props:i})}}),enyo.kind({name:"Inspector.PositionBox",classes:"ares-inspector-position-editor",published:{props:null},events:{onUpdateProps:""},components:[{name:"topToggle",classes:"top-toggle anchor-toggle",side:"top",components:[{classes:"anchor-line"}],ontap:"toggleSide"},{name:"rightToggle",classes:"right-toggle anchor-toggle",side:"right",components:[{classes:"anchor-line"}],ontap:"toggleSide"},{name:"bottomToggle",classes:"bottom-toggle anchor-toggle",side:"bottom",components:[{classes:"anchor-line"}],ontap:"toggleSide"},{name:"leftToggle",classes:"left-toggle anchor-toggle",side:"left",components:[{classes:"anchor-line"}],ontap:"toggleSide"},{name:"innerBox",classes:"ares-inspector-position-editor-inner-box",components:[{name:"widthToggle",classes:"width-toggle anchor-toggle",side:"width",components:[{classes:"anchor-line"}],ontap:"toggleSide"},{name:"heightToggle",classes:"height-toggle anchor-toggle",side:"height",components:[{classes:"anchor-line"}],ontap:"toggleSide"}]}],create:function(){this.inherited(arguments),this.propsChanged()},propsChanged:function(){this.topChanged(),this.rightChanged(),this.bottomChanged(),this.leftChanged(),this.widthChanged(),this.heightChanged()},topChanged:function(){this.$.topToggle.getClientControls()[0].addRemoveClass("disabled",this.props.top.disabled)},rightChanged:function(){this.$.rightToggle.getClientControls()[0].addRemoveClass("disabled",this.props.right.disabled)},bottomChanged:function(){this.$.bottomToggle.getClientControls()[0].addRemoveClass("disabled",this.props.bottom.disabled)},leftChanged:function(){this.$.leftToggle.getClientControls()[0].addRemoveClass("disabled",this.props.left.disabled)},widthChanged:function(){this.$.widthToggle.getClientControls()[0].addRemoveClass("disabled",this.props.width.disabled)},heightChanged:function(){this.$.heightToggle.getClientControls()[0].addRemoveClass("disabled",this.props.height.disabled)},toggleSide:function(e){var t=e.side,i=this.props,n=[t];switch(i[t].disabled=!i[t].disabled,t){case"top":i.top.disabled?i.bottom.disabled?(i.bottom.disabled=!1,n.push("bottom")):i.height.disabled&&(i.height.disabled=!1,n.push("height")):i.bottom.disabled||i.height.disabled||(i.height.disabled=!0,n.push("height"));break;case"right":i.right.disabled?i.left.disabled?(i.left.disabled=!1,n.push("left")):i.width.disabled&&(i.width.disabled=!1,n.push("width")):i.left.disabled||i.width.disabled||(i.width.disabled=!0,n.push("width"));break;case"bottom":i.bottom.disabled?i.top.disabled?(i.top.disabled=!1,n.push("top")):i.height.disabled&&(i.height.disabled=!1,n.push("height")):i.top.disabled||i.height.disabled||(i.height.disabled=!0,n.push("height"));break;case"left":i.left.disabled?i.right.disabled?(i.right.disabled=!1,n.push("right")):i.width.disabled&&(i.width.disabled=!1,n.push("width")):i.right.disabled||i.width.disabled||(i.width.disabled=!0,n.push("width"));break;case"width":i.width.disabled?(i.left.disabled&&(i.left.disabled=!1,n.push("left")),i.right.disabled&&(i.right.disabled=!1,n.push("right"))):i.left.disabled||i.right.disabled||(i.right.disabled=!0,n.push("right"));break;case"height":i.height.disabled?(i.top.disabled&&(i.top.disabled=!1,n.push("top")),i.bottom.disabled&&(i.bottom.disabled=!1,n.push("bottom"))):i.top.disabled||i.bottom.disabled||(i.bottom.disabled=!0,n.push("bottom"));break;default:}this.propsChanged(),this.doUpdateProps({changedSide:t,changedProps:n,props:i})}});

// source/enyo-editor/deimos/designer/PaletteComponentActionPopup.js
enyo.kind({name:"PaletteComponentActionPopup",kind:"onyx.Popup",published:{configComponent:"",targetComponent:""},components:[{name:"title",content:ilibDeimos("Select one action")},{name:"body",kind:"FittableRows",noStretch:!0,components:[{name:"vtAction",kind:"ViewTemplateAction",showing:!1},{name:"close",kind:"onyx.Button",content:ilibDeimos("Cancel"),centered:!0,style:"width:200px;height:30px;",ontap:"doPaletteComponentAction"}]}],events:{onPaletteComponentAction:""},setActionShowing:function(e){for(var t in this.$)this.$[t].setShowing(!1);this.$.title.setShowing(!0),this.$.body.setShowing(!0),this.$[e].setShowing(!0),this.$.close.setShowing(!0)}}),enyo.kind({name:"ViewTemplateAction",kind:"FittableRows",noStretch:!0,components:[{name:"addtoKind",kind:"onyx.Button",content:ilibDeimos("Add to current kind"),style:"width:200px;height:30px;",ontap:"doPaletteComponentAction"},{name:"replaceKind",kind:"onyx.Button",content:ilibDeimos("Replace current kind"),centered:!0,style:"width:200px;height:30px;",ontap:"doPaletteComponentAction"},{name:"addNewKind",kind:"onyx.Button",content:ilibDeimos("Add new kind to current file"),centered:!0,style:"width:200px;height:30px;",ontap:"doPaletteComponentAction"}],events:{onPaletteComponentAction:""}});

// source/harmonia/Harmonia.js
var ilibHarmonia=AresI18n.resolve.bind(null,AresI18n.setBundle("$assets/harmonia/resources"));enyo.kind({name:"Harmonia",kind:"FittableColumns",events:{onRegisterMe:"",onMovePanel:"",onModifySettings:"",onBuild:"",onInstall:"",onRun:"",onRunDebug:"",onPreview:"",onProjectSave:"",onShowWaitPopup:"",onHideWaitPopup:"",onError:""},handlers:{onDisableProjectMenu:"disableProjectMenu"},components:[{kind:"FittableRows",classes:"enyo-fit",components:[{kind:"onyx.MoreToolbar",name:"moreToolbar",classes:"ares-top-toolbar ares-harmonia-panels",components:[{kind:"onyx.Grabber",classes:"ares-grabber",name:"filePanelGrabber",showing:!1,ontap:"activePanel",components:[{kind:"aresGrabber",name:"aresGrabberDirection"}]},{kind:"onyx.MenuDecorator",classes:"aresmenu",onSelect:"menuItemSelected",components:[{content:ilibHarmonia("Project"),name:"projectMenu",disabled:!0,ontap:"manageBuildIntefaceAction"},{kind:"onyx.Menu",floating:!0,classes:"sub-aresmenu",maxHeight:"100%",components:[{value:"doModifySettings",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/project-view/images/project_view_edit.png"},{content:ilibHarmonia("Edit...")}]},{classes:"onyx-menu-divider aresmenu-button"},{value:"doPreview",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/project-view/images/project_view_preview.png"},{content:ilibHarmonia("Preview")}]},{name:"buildItem",value:"doBuild",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/project-view/images/project_view_build.png"},{content:ilibHarmonia("Build...")}]},{classes:"onyx-menu-divider aresmenu-button"},{name:"installItem",value:"doInstall",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/project-view/images/project_view_install.png"},{content:ilibHarmonia("Install...")}]},{classes:"onyx-menu-divider aresmenu-button"},{name:"runItem",value:"doRun",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/project-view/images/project_view_run.png"},{content:ilibHarmonia("Run...")}]},{name:"runDebugItem",value:"doRunDebug",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/project-view/images/project_view_debug.png"},{content:ilibHarmonia("Debug...")}]}]}]},{fit:!0},{classes:"ares-logo-container",name:"logoContainer",components:[{name:"logo",kind:"Ares.Logo"}]}]},{kind:"HermesFileTree",dragAllowed:!0,menuAllowed:!0}]},{classes:"hangar"}],debug:!1,published:{panelIndex:1},project:null,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.doRegisterMe({name:"harmonia",reference:this}),this.trace("ilibHarmonia: Cancel=",ilibHarmonia("Cancel"))},handleSelectProvider:function(e,t){return this.trace("sender:",e,", event:",t),t.service&&this.$.hermesFileTree.connectService(t.service),this.$.hermesFileTree.hideFileOpButtons(),!0},setProject:function(e,t){ares.assertCb(t),this.trace("project:",e),null!==e?(this.$.hermesFileTree.connectProject(e,t).showFileOpButtons(),this.project=e,this.manageBuildIntefaceAction()):(this.$.hermesFileTree.hideFileOpButtons().clear(),setTimeout(t,0))},manageBuildIntefaceAction:function(){this.checkSelectedProjectProvidersType("build")?(this.$.buildItem.show(),this.$.installItem.show(),this.$.runItem.show(),this.$.runDebugItem.show()):(this.$.buildItem.hide(),this.$.installItem.hide(),this.$.runItem.hide(),this.$.runDebugItem.hide())},checkSelectedProjectProvidersType:function(e){var t=Ares.Workspace.projects.getSelectedProject().attributes.config.data.providers,i={};for(var n in t)t[n].enabled&&(i[n]=t[n]);var o=this.getServicesByType(e),s=!1;for(var r in i)for(var a=0,l=o.length;l>a;a++)if(r===o[a].id){s=!0;break}return s},getServicesByType:function(e){return ServiceRegistry.instance.getServicesByType(e)},showGrabber:function(){this.$.filePanelGrabber.show()},hideGrabber:function(){this.$.filePanelGrabber.hide()},switchGrabberDirection:function(e){this.$.aresGrabberDirection.switchGrabberDirection(e)},refreshFileTree:function(e,t){this.$.hermesFileTree.refreshFileTree(t,e)},activePanel:function(){this.doMovePanel({panelIndex:this.panelIndex})},showLogo:function(){this.$.logoContainer.show(),this.$.moreToolbar.resized()},hideLogo:function(){this.$.logoContainer.hide(),this.$.moreToolbar.resized()},disableProjectMenu:function(e){this.$.projectMenu.setDisabled(e)},menuItemSelected:function(e,t){this.trace("sender:",e,", event:",t);var i=t&&t.selected&&t.selected.value;"function"==typeof this[i]?this[i]({project:this.project}):this.trace("*** BUG: '",i,"' is not a known function")},projectSaveAndAction:function(e,t,i){var n=function(n){n?this.trace(n):this.projectAction(e,t,i)};e&&this.doProjectSave({project:e,callback:n.bind(this)})},projectAction:function(e,t,i){var n=this;this.doShowWaitPopup({msg:"Starting: "+i,service:t});var o=ServiceRegistry.instance.getServicesByType(t),s=o[o.length-1];if(s)if("function"!=typeof s[i])this.doError({msg:"Service "+s.name+" does not provide action: "+i});else{if("build"===t&&"build"===i){var r="";if(e){var a=e.getConfig();if(a&&a.data&&a.data.providers){var l=a.data.providers.phonegap;if(void 0!==l)if(l.enabled){var h=l.targets;void 0!==h&&0===Object.keys(h).length&&(r="No targets selected, build aborted")}else r="Phonegap build not enabled, build aborted";else r="No PhoneGap Build configuration, build aborted"}else r="No project configuration available, build aborted"}else r="No project selected, build aborted";if(""!==r)return this.doError({msg:r}),this.doHideWaitPopup(),!0}s[i](e,function(t){n.doHideWaitPopup(),n.refreshFileTree(e.getFolderId()),t&&n.doError({msg:""+t,err:t})})}else this.doError({msg:"No "+t+" service available"})},launchPreview:function(e){var t=function(t){t?this.trace(t):this._launchPreview(e)};this.doProjectSave({project:e,callback:t.bind(this)})},_launchPreview:function(e){var t=e.getConfig(),i=t.data.preview.top_file,n=e.getProjectUrl()+"/"+i,o=(""+window.location).replace(/\/ide\/$/,"/preview/index.html").replace("/ide/index.html","/preview/index.html").replace("/ide/debug.html","/preview/debug.html").replace("/ide/test.html","/preview/test.html"),s=o+(-1!=o.indexOf("?")?"&":"?")+"url="+encodeURIComponent(n)+"&name="+e.id;this.trace("preview on URL ",s),window.open(s,"_blank","scrollbars=0,menubar=1,resizable=1",!1)}});

// source/harmonia/services/ServiceRegistry.js
enyo.kind({name:"ServiceRegistry",debug:!1,kind:"enyo.Component",events:{onServicesChange:""},components:[{name:"errorPopup",kind:"Ares.ErrorPopup"}],published:{services:[]},create:function(){ares.setupTraceLogger(this),this.inherited(arguments),ServiceRegistry.instance||(ServiceRegistry.instance=this,this.reloadServices())},listServices:function(){0===this.services.length?this.reloadServices():this.notifyServicesChange()},serviceFailure:function(e,t){this.error("type="+e+", id="+t),this.reloadServices()},reloadServices:function(){var e=this;this._reloadServices(function(t){t?e._handleReloadError(t):e.notifyServicesChange()})},_reloadServices:function(e){this.trace("Refreshing the list of available services");var t=window.location.origin||window.location.protocol+"//"+window.location.host,i=t+"/res/services";this.services=[],t.match("^http")&&new enyo.Ajax({url:i,handleAs:"json"}).response(this,function(t,i){var n;i?i.services&&i.services[0]&&(n=i.services.filter(function(e){return e.active}),enyo.forEach(n,function(e){this.services.push({config:e})},this),this.complete(e)):e(Error("Empty response from Ares IDE Server")),this.trace(this.services)}).error(this,function(t){e(t)}).go()},complete:function(e){var t=this,i=enyo.map(this.services,function(e){return function(i){var n=[t.SERVICES_STORAGE_KEY,e.config.id].join(".");t.trace("localStorage[",n,"]..."),Ares.LocalStorage.get(n,function(o){t.trace("localStorage[",n,"] = ",o);var s;try{s=enyo.json.parse(o)}catch(r){s={}}ares.extend(e.config,s),ares.extend(e,{implementsType:function(e){return enyo.filter(this.config.type,function(t){return t===e}).length>0}}),t.instanciate(e,i)})}});async.series(i,e)},instanciate:function(e,t){this.trace("id:",e.config.id,"config:",e.config);var i=this;try{e.config.pluginClient?(this.trace("Loading browser side code: ",e.config.pluginClient),enyo.load(e.config.pluginClient,function(){i.trace("ServiceRegistry#instanciate(): Loaded browser side code: ",e.config.pluginClient),t()})):"hermes"===e.config.provider&&e.implementsType("filesystem")?(e.impl=new HermesFileSystem,e.impl.notifyFailure=enyo.bind(this,this.serviceFailure,e.config.type,e.config.id),e.impl.setOwner(this),this.configureService(e,t)):e.implementsType("build")&&"phonegap"===e.config.id?(e.impl=new Phonegap.Build,e.impl.setOwner(this),this.configureService(e,t)):e.implementsType("generate")&&"genZip"===e.config.id?(e.impl=new GenZip,e.impl.setOwner(this),this.configureService(e,t)):(this.log("Ignoring service: "+e.config.id),t())}catch(n){this.error(n),t(n)}},configureService:function(e,t){this.trace("id:",e.config.id,"config:",e.config);try{if(e.impl){this.trace("id:",e.config.id,"created"),e.impl&&!e.impl.authorize&&(this.trace("Adding ",e.config.id,"#authorize() stub"),e.impl.authorize=enyo.bind(e.impl,function(e){this.trace("authorize(): stubbed"),e(null,{})})),e.impl.id=e.config.id;try{e.impl.setConfig(e.config)}catch(i){var n="Unexpected error in setConfig() of service '"+e.config.id+"'";throw this.error(n,i),i.msg=n,i}this.trace("id:",e.config.id,"configured")}else this.trace("Ignoring service: ",e.config.id);t()}catch(o){this.error("Unable to configure service '"+e.config.id+"':",o.stack),t(o)}},SERVICES_STORAGE_KEY:"com.enyojs.ares.services",setConfig:function(e,t,i){this.trace("serviceId:",e,"config:",t);var n=this.resolveServiceId(e);if(n){ares.extend(n.config,t),n.setConfig(n.config);var o=[this.SERVICES_STORAGE_KEY,n.config.id].join(".");Ares.LocalStorage.set(o,enyo.json.stringify({auth:n.config.auth}),i)}},resolveServiceId:function(e){var t=this.filter(function(t){return t.config.id===e});return t&&t[0]},getServicesByType:function(e){return this.filter(function(t){return t&&"function"==typeof t.implementsType&&t.implementsType(e)})},filter:function(e,t){try{if("function"!=typeof e)throw Error("Parameter 'inFilterFunc' must be a function");t=t||!1;var i=enyo.filter(this.services,e,this),n=[];return this.trace("matches:",i),enyo.forEach(i,function(e){e.impl?n.push(e.impl):t===!0&&n.push(e)},this),this.trace("withNoImpl:",t," => services:",n),n}catch(o){return this.error("Unexpected error",o),[]}},forEach:function(e){enyo.forEach(this.services,function(t){t.impl&&e(t.impl)},this)},_handleReloadError:function(e){this.$.errorPopup.setErrorMsg("Ares IDE Server returned an error"),this.$.errorPopup.show(),this.error(e)},notifyServicesChange:function(){this.trace("sending signal..."),enyo.Signals.send("onServicesChange",{serviceRegistry:this})},pluginReady:function(e,t,i){this.trace("New plugin ready: ",e),i=i||function(e){e&&enyo.error(e)};var n=this.filter(function(t){return t.config.id===e},!0);if(1===n.length){var o=n[0];if(o.config.pluginClient&&!o.impl)try{o.impl=ServiceRegistry.instance.createComponent(t),o.impl.setOwner(this),this.configureService(o,i),this.trace("New plugin registered: ",e),enyo.Signals.send("onPluginRegist",{pluginService:o.impl}),this.notifyServicesChange()}catch(s){this.error("Unexpected error while creating '"+t.kind+"' for service '"+e+"': ",s.stack),i(s)}}},statics:{instance:null}});

// source/harmonia/services/FileSystemService.js
enyo.kind({name:"FileSystemService",kind:"Component",debug:!1,events:{onLogin:"",onFailure:""},published:{rootNode:null},impl:null,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.impl=null},rootNodeChanged:function(e){this.trace("rootNode:",this.rootNode,"<-",e)},connect:function(e,t){this.impl=e;var i=this.impl.propfind(void 0,0);i.response(this,function(e,i){this.trace("FileSystemService#connect(): connected"),this.setRootNode(i),t&&t()}),i.error(this,function(e,i){this.debug&&this.error("FileSystemService#connect(): connection failed"),t&&t(Error(i))})},isOk:function(){return this.impl&&this.rootNode&&this.impl.isOk()},setConfig:function(e){this.impl.setConfig(e)},getConfig:function(){return this.impl.getConfig()},propfind:function(e,t){return this.impl.propfind(e,t)},listFiles:function(e,t){return this.impl.listFiles(e,t)},getFile:function(e){return this.impl.getFile(e)},putFile:function(e,t){return this.impl.putFile(e,t)},createFile:function(e,t,i,n){return this.impl.createFile(e,t,i,n)},createFiles:function(e,t,i){return this.impl.createFiles(e,t,i)},createFolder:function(e,t,i){return this.impl.createFolder(e,t,i)},remove:function(e){return this.impl.remove(e)},rename:function(e,t){if("object"!=typeof t)throw Error("Invalid parameter type:"+typeof t+" (value:"+(""+t)+")");return this.impl.rename(e,t)},copy:function(e,t){if("object"!=typeof t)throw Error("Invalid parameter type:"+typeof t+" (value:"+(""+t)+")");return this.impl.copy(e,t)}});

// source/harmonia/services/HermesFileSystem.js
enyo.kind({name:"HermesFileSystem",kind:"enyo.Component",debug:!1,events:{onLoginFailed:""},create:function(){ares.setupTraceLogger(this),this.trace(""),this.inherited(arguments),this.config={}},isOk:function(){return!!this.config.origin},setConfig:function(e){this.trace("config:",this.config,"+",e),this.config=ares.extend(this.config,e),this.trace("=> config:",this.config)},getConfig:function(){return this.config},_requestDic:{GET:{verb:"GET",handleAs:"text"},PROPFIND:{verb:"GET",handleAs:"json"},PUT:{verb:"POST",handleAs:"json"},MKCOL:{verb:"POST",handleAs:"json"},COPY:{verb:"POST",handleAs:"json"},MOVE:{verb:"POST",handleAs:"json"},DELETE:{verb:"POST",handleAs:"json"}},_request:function(e,t,i){if(this.trace(e,t,i),!this.config.origin)throw"Service URL not yet defined";var n=this.config.origin+this.config.pathname+"/id/"+(t?t:""),o=this._requestDic[e].verb;this.trace(e,"/",o,": '",n,"'"),this.trace("params=",i);var s={url:n,method:o,handleAs:this._requestDic[e].handleAs,postBody:i&&i.postBody,contentType:i&&i.contentType,headers:{"x-http-method-override":e}};"GET"===e&&(s.mimeType="text/plain; charset=x-user-defined");var r=new enyo.Ajax(s);return i&&i.postBody&&delete i.postBody,r.response(this,function(e,t){this.trace("inValue=",t);var i=r.xhrResponse.headers["x-ares-node"];return this.trace("x-ares-node:",i),t}).error(this,function(e,t){return this.error("status="+t),0===t&&this.notifyFailure&&this.notifyFailure(),t}),r.go(i)},authorize:function(e,t){function i(){this.trace("authenticate(): count:",r),r--&&(this.trace("authenticate(): authorization:",e.headers.authorization),new enyo.Ajax({url:this.config.origin+this.config.pathname+"/",method:"POST",handleAs:"text"}).response(this,n).error(this,s).go({authorization:e.headers.authorization}))}function n(){this.trace("authorize():"),new enyo.Ajax({url:this.config.origin+this.config.pathname+"/",method:"GET"}).response(this,o).error(this,i).go()}function o(e,i){this.trace("authSuccess(): inValue:",i),t(null,i)}function s(e,i){this.trace("authFailure(): inError:",i,", body:",e.xhrResponse?e.xhrResponse.body:void 0),this.doLoginFailed({id:this.config.id}),t(Error(i))}var r=1;e&&e.headers&&e.headers.authorization&&enyo.bind(this,n)()},propfind:function(e,t){return this._request("PROPFIND",e,{depth:t}).response(this,function(e,t){return this.trace(t),t})},listFiles:function(e,t){return this.propfind(e,t).response(this,function(e,t){return t.children})},getFile:function(e){return this._request("GET",e,null).response(this,function(e,t){return{content:t}})},putFile:function(e,t){var i=new enyo.FormData,n=new enyo.Blob([t||""],{type:"text/plain; charset=UTF-8"});return this.trace("file:",n),i.append(".",n),this._request("PUT",e,{postBody:i})},createFile:function(e,t,i,n){var o=new enyo.FormData,s=new enyo.Blob([i||""],{type:"text/plain; charset=UTF-8"});this.trace("file:",s,"name:",t),o.append(t,s);var r=ares.extend({postBody:o},n);return this._request("PUT",e,r)},createFiles:function(e,t,i){var n=ares.extend({postBody:t.content,contentType:t.ctype},i);return this._request("PUT",e,n)},createFolder:function(e,t,i){var n=ares.extend({name:t},i);return this._request("MKCOL",e,n).response(this,function(e,t){return this.trace(t),t})},remove:function(e){return this._request("DELETE",e,null)},rename:function(e,t){return this._request("MOVE",e,t)},copy:function(e,t){return this._request("COPY",e,t)},exportAs:function(e,t){return this._request("GET",e,{depth:t,format:"base64"}).response(this,function(e,t){return this.trace(t),t})}});

// source/harmonia/services/ProjectProperties.js
enyo.kind({name:"Ares.ProjectProperties",kind:"enyo.Control",published:{config:{}},setProjectConfig:function(e){this.config=ares.extend(this.config,e)},getProjectConfig:function(){return this.config},saveProjectConfig:function(){return!0}});

// lib/enyo-ilib/version.js
enyo&&enyo.version&&(enyo.version["enyo-ilib"]="2.3.0-rc.3");

// lib/enyo-ilib/ilib/js/ilib-dyn-standard.js
var ilib=ilib||{};ilib.getVersion=function(){return"4.0"},ilib.data={norm:{nfc:{},nfd:{},nfkd:{},ccc:{}}},"undefined"!=typeof window&&(window.ilib=ilib),"undefined"!=typeof exports&&(exports.ilib=ilib),ilib._getPlatform=function(){return ilib._platform||(ilib._platform="undefined"!=typeof environment?"rhino":"undefined"!=typeof process||"undefined"!=typeof require?"nodejs":"undefined"!=typeof window?"undefined"!=typeof PalmSystem?"webos":"browser":"unknown"),ilib._platform},ilib._isGlobal=function(e){switch(ilib._getPlatform()){case"rhino":var t=function(){return"object"==typeof global?global:this}();return void 0!==typeof t[e];case"nodejs":var i="undefined"!=typeof global?global:this;return i&&void 0!==typeof i[e];default:return void 0!==typeof window[e]}},ilib.setLocale=function(e){"string"==typeof e&&(ilib.locale=e)},ilib.getLocale=function(){if("string"!=typeof ilib.locale){if("undefined"!=typeof navigator&&navigator.language!==void 0){if(ilib.locale=navigator.language,!ilib.locale){var e=navigator.browserLanguage!==void 0?navigator.browserLanguage:navigator.userLanguage!==void 0?navigator.userLanguage:navigator.systemLanguage!==void 0?navigator.systemLanguage:void 0;e!==void 0&&e&&(ilib.locale=e.substring(0,3)+e.substring(3,5).toUpperCase())}}else if("undefined"!=typeof PalmSystem&&PalmSystem.locales!==void 0)PalmSystem.locales.UI!==void 0&&PalmSystem.locales.UI.length>0&&(ilib.locale=PalmSystem.locales.UI);else if("undefined"!=typeof environment&&environment.user!==void 0)"string"==typeof environment.user.language&&environment.user.language.length>0&&(ilib.locale=environment.user.language,"string"==typeof environment.user.country&&environment.user.country.length>0&&(ilib.locale+="-"+environment.user.country));else if("undefined"!=typeof process&&process.env!==void 0){var e=process.env.LANG||process.env.LC_ALL;e&&"undefined"!==e&&(ilib.locale=e.substring(0,2).toLowerCase()+"-"+e.substring(3,5).toUpperCase())}ilib.locale="string"==typeof ilib.locale?ilib.locale:"en-US"}return ilib.locale},ilib.setTimeZone=function(e){ilib.tz=e||ilib.tz},ilib.getTimeZone=function(){return ilib.tz===void 0&&("undefined"!=typeof navigator&&navigator.timezone!==void 0?navigator.timezone.length>0&&(ilib.tz=navigator.timezone):"undefined"!=typeof PalmSystem&&PalmSystem.timezone!==void 0?PalmSystem.timezone.length>0&&(ilib.tz=PalmSystem.timezone):"undefined"!=typeof environment&&environment.user!==void 0?environment.user.timezone!==void 0&&environment.user.timezone.length>0&&(ilib.tz=environment.user.timezone):"undefined"!=typeof process&&process.env!==void 0&&process.env.TZ&&"undefined"!==process.env.TZ&&(ilib.tz=process.env.TZ),ilib.tz=ilib.tz||"local"),ilib.tz},ilib.setLoaderCallback=function(e){return"function"==typeof e||e===void 0?(ilib._load=e,!0):!1},ilib.Locale=function(e,t,i,n){if(t===void 0){var o=e||ilib.getLocale();if("string"==typeof o){for(var s=o.split("-"),r=0;s.length>r;r++)ilib.Locale._isLanguageCode(s[r])?this.language=s[r]:ilib.Locale._isRegionCode(s[r])?this.region=s[r]:ilib.Locale._isScriptCode(s[r])?this.script=s[r]:this.variant=s[r];this.language=this.language||void 0,this.region=this.region||void 0,this.script=this.script||void 0,this.variant=this.variant||void 0}else"object"==typeof o&&(this.language=o.language||void 0,this.region=o.region||void 0,this.script=o.script||void 0,this.variant=o.variant||void 0)}else e?(e=e.trim(),this.language=e.length>0?e.toLowerCase():void 0):this.language=void 0,t?(t=t.trim(),this.region=t.length>0?t.toUpperCase():void 0):this.region=void 0,i?(i=i.trim(),this.variant=i.length>0?i:void 0):this.variant=void 0,n?(n=n.trim(),this.script=n.length>0?n:void 0):this.script=void 0;this.spec=this.language||"",this.script&&(this.spec.length>0&&(this.spec+="-"),this.spec+=this.script),this.region&&(this.spec.length>0&&(this.spec+="-"),this.spec+=this.region),this.variant&&(this.spec.length>0&&(this.spec+="-"),this.spec+=this.variant)},ilib.Locale.a2toa3regmap={AF:"AFG",AX:"ALA",AL:"ALB",DZ:"DZA",AS:"ASM",AD:"AND",AO:"AGO",AI:"AIA",AQ:"ATA",AG:"ATG",AR:"ARG",AM:"ARM",AW:"ABW",AU:"AUS",AT:"AUT",AZ:"AZE",BS:"BHS",BH:"BHR",BD:"BGD",BB:"BRB",BY:"BLR",BE:"BEL",BZ:"BLZ",BJ:"BEN",BM:"BMU",BT:"BTN",BO:"BOL",BQ:"BES",BA:"BIH",BW:"BWA",BV:"BVT",BR:"BRA",IO:"IOT",BN:"BRN",BG:"BGR",BF:"BFA",BI:"BDI",KH:"KHM",CM:"CMR",CA:"CAN",CV:"CPV",KY:"CYM",CF:"CAF",TD:"TCD",CL:"CHL",CN:"CHN",CX:"CXR",CC:"CCK",CO:"COL",KM:"COM",CG:"COG",CD:"COD",CK:"COK",CR:"CRI",CI:"CIV",HR:"HRV",CU:"CUB",CW:"CUW",CY:"CYP",CZ:"CZE",DK:"DNK",DJ:"DJI",DM:"DMA",DO:"DOM",EC:"ECU",EG:"EGY",SV:"SLV",GQ:"GNQ",ER:"ERI",EE:"EST",ET:"ETH",FK:"FLK",FO:"FRO",FJ:"FJI",FI:"FIN",FR:"FRA",GF:"GUF",PF:"PYF",TF:"ATF",GA:"GAB",GM:"GMB",GE:"GEO",DE:"DEU",GH:"GHA",GI:"GIB",GR:"GRC",GL:"GRL",GD:"GRD",GP:"GLP",GU:"GUM",GT:"GTM",GG:"GGY",GN:"GIN",GW:"GNB",GY:"GUY",HT:"HTI",HM:"HMD",VA:"VAT",HN:"HND",HK:"HKG",HU:"HUN",IS:"ISL",IN:"IND",ID:"IDN",IR:"IRN",IQ:"IRQ",IE:"IRL",IM:"IMN",IL:"ISR",IT:"ITA",JM:"JAM",JP:"JPN",JE:"JEY",JO:"JOR",KZ:"KAZ",KE:"KEN",KI:"KIR",KP:"PRK",KR:"KOR",KW:"KWT",KG:"KGZ",LA:"LAO",LV:"LVA",LB:"LBN",LS:"LSO",LR:"LBR",LY:"LBY",LI:"LIE",LT:"LTU",LU:"LUX",MO:"MAC",MK:"MKD",MG:"MDG",MW:"MWI",MY:"MYS",MV:"MDV",ML:"MLI",MT:"MLT",MH:"MHL",MQ:"MTQ",MR:"MRT",MU:"MUS",YT:"MYT",MX:"MEX",FM:"FSM",MD:"MDA",MC:"MCO",MN:"MNG",ME:"MNE",MS:"MSR",MA:"MAR",MZ:"MOZ",MM:"MMR",NA:"NAM",NR:"NRU",NP:"NPL",NL:"NLD",NC:"NCL",NZ:"NZL",NI:"NIC",NE:"NER",NG:"NGA",NU:"NIU",NF:"NFK",MP:"MNP",NO:"NOR",OM:"OMN",PK:"PAK",PW:"PLW",PS:"PSE",PA:"PAN",PG:"PNG",PY:"PRY",PE:"PER",PH:"PHL",PN:"PCN",PL:"POL",PT:"PRT",PR:"PRI",QA:"QAT",RE:"REU",RO:"ROU",RU:"RUS",RW:"RWA",BL:"BLM",SH:"SHN",KN:"KNA",LC:"LCA",MF:"MAF",PM:"SPM",VC:"VCT",WS:"WSM",SM:"SMR",ST:"STP",SA:"SAU",SN:"SEN",RS:"SRB",SC:"SYC",SL:"SLE",SG:"SGP",SX:"SXM",SK:"SVK",SI:"SVN",SB:"SLB",SO:"SOM",ZA:"ZAF",GS:"SGS",SS:"SSD",ES:"ESP",LK:"LKA",SD:"SDN",SR:"SUR",SJ:"SJM",SZ:"SWZ",SE:"SWE",CH:"CHE",SY:"SYR",TW:"TWN",TJ:"TJK",TZ:"TZA",TH:"THA",TL:"TLS",TG:"TGO",TK:"TKL",TO:"TON",TT:"TTO",TN:"TUN",TR:"TUR",TM:"TKM",TC:"TCA",TV:"TUV",UG:"UGA",UA:"UKR",AE:"ARE",GB:"GBR",US:"USA",UM:"UMI",UY:"URY",UZ:"UZB",VU:"VUT",VE:"VEN",VN:"VNM",VG:"VGB",VI:"VIR",WF:"WLF",EH:"ESH",YE:"YEM",ZM:"ZMB",ZW:"ZWE"},ilib.Locale.a1toa3langmap={ab:"abk",aa:"aar",af:"afr",ak:"aka",sq:"sqi",am:"amh",ar:"ara",an:"arg",hy:"hye",as:"asm",av:"ava",ae:"ave",ay:"aym",az:"aze",bm:"bam",ba:"bak",eu:"eus",be:"bel",bn:"ben",bh:"bih",bi:"bis",bs:"bos",br:"bre",bg:"bul",my:"mya",ca:"cat",ch:"cha",ce:"che",ny:"nya",zh:"zho",cv:"chv",kw:"cor",co:"cos",cr:"cre",hr:"hrv",cs:"ces",da:"dan",dv:"div",nl:"nld",dz:"dzo",en:"eng",eo:"epo",et:"est",ee:"ewe",fo:"fao",fj:"fij",fi:"fin",fr:"fra",ff:"ful",gl:"glg",ka:"kat",de:"deu",el:"ell",gn:"grn",gu:"guj",ht:"hat",ha:"hau",he:"heb",hz:"her",hi:"hin",ho:"hmo",hu:"hun",ia:"ina",id:"ind",ie:"ile",ga:"gle",ig:"ibo",ik:"ipk",io:"ido",is:"isl",it:"ita",iu:"iku",ja:"jpn",jv:"jav",kl:"kal",kn:"kan",kr:"kau",ks:"kas",kk:"kaz",km:"khm",ki:"kik",rw:"kin",ky:"kir",kv:"kom",kg:"kon",ko:"kor",ku:"kur",kj:"kua",la:"lat",lb:"ltz",lg:"lug",li:"lim",ln:"lin",lo:"lao",lt:"lit",lu:"lub",lv:"lav",gv:"glv",mk:"mkd",mg:"mlg",ms:"msa",ml:"mal",mt:"mlt",mi:"mri",mr:"mar",mh:"mah",mn:"mon",na:"nau",nv:"nav",nb:"nob",nd:"nde",ne:"nep",ng:"ndo",nn:"nno",no:"nor",ii:"iii",nr:"nbl",oc:"oci",oj:"oji",cu:"chu",om:"orm",or:"ori",os:"oss",pa:"pan",pi:"pli",fa:"fas",pl:"pol",ps:"pus",pt:"por",qu:"que",rm:"roh",rn:"run",ro:"ron",ru:"rus",sa:"san",sc:"srd",sd:"snd",se:"sme",sm:"smo",sg:"sag",sr:"srp",gd:"gla",sn:"sna",si:"sin",sk:"slk",sl:"slv",so:"som",st:"sot",az:"azb",es:"spa",su:"sun",sw:"swa",ss:"ssw",sv:"swe",ta:"tam",te:"tel",tg:"tgk",th:"tha",ti:"tir",bo:"bod",tk:"tuk",tl:"tgl",tn:"tsn",to:"ton",tr:"tur",ts:"tso",tt:"tat",tw:"twi",ty:"tah",ug:"uig",uk:"ukr",ur:"urd",uz:"uzb",ve:"ven",vi:"vie",vo:"vol",wa:"wln",cy:"cym",wo:"wol",fy:"fry",xh:"xho",yi:"yid",yo:"yor",za:"zha",zu:"zul"},ilib.Locale._notLower=function(e){var t=e.charCodeAt(0);return 97>t||t>122},ilib.Locale._notUpper=function(e){var t=e.charCodeAt(0);return 65>t||t>90},ilib.Locale._notDigit=function(e){var t=e.charCodeAt(0);return 48>t||t>57},ilib.Locale._isLanguageCode=function(e){if(e===void 0||2>e.length||e.length>3)return!1;for(var t=0;e.length>t;t++)if(ilib.Locale._notLower(e.charAt(t)))return!1;return!0},ilib.Locale._isRegionCode=function(e){if(e===void 0||2>e.length||e.length>3)return!1;if(2===e.length){for(var t=0;e.length>t;t++)if(ilib.Locale._notUpper(e.charAt(t)))return!1}else for(var t=0;e.length>t;t++)if(ilib.Locale._notDigit(e.charAt(t)))return!1;return!0},ilib.Locale._isScriptCode=function(e){if(e===void 0||4!==e.length||ilib.Locale._notUpper(e.charAt(0)))return!1;for(var t=1;4>t;t++)if(ilib.Locale._notLower(e.charAt(t)))return!1;return!0},ilib.Locale.regionAlpha2ToAlpha3=function(e){return ilib.Locale.a2toa3regmap[e]||e},ilib.Locale.languageAlpha1ToAlpha3=function(e){return ilib.Locale.a1toa3langmap[e]||e},ilib.Locale.prototype={getLanguage:function(){return this.language},getLanguageAlpha3:function(){return ilib.Locale.languageAlpha1ToAlpha3(this.language)},getRegion:function(){return this.region},getRegionAlpha3:function(){return ilib.Locale.regionAlpha2ToAlpha3(this.region)},getScript:function(){return this.script},getVariant:function(){return this.variant},getSpec:function(){return this.spec},toString:function(){return this.getSpec()},equals:function(e){return this.language===e.language&&this.region===e.region&&this.script===e.script&&this.variant===e.variant},isPseudo:function(){return"zxx"===this.language&&"XX"===this.region}},ilib.Locale.locales=[],ilib.Locale.getAvailableLocales=function(){return ilib.Locale.locales},ilib.LocaleInfo=function(e,t){var i=!0,n=void 0;switch(this.info=ilib.LocaleInfo.defaultInfo,typeof e){case"string":this.locale=new ilib.Locale(e);break;default:case"undefined":this.locale=new ilib.Locale;break;case"object":this.locale=e}t&&(t.sync!==void 0&&(i=1==t.sync),t.loadParams!==void 0&&(n=t.loadParams)),ilib.LocaleInfo.cache||(ilib.LocaleInfo.cache={}),ilib.loadData({object:ilib.LocaleInfo,locale:this.locale,name:"localeinfo.json",sync:i,loadParams:n,callback:ilib.bind(this,function(e){if(!e){e=ilib.LocaleInfo.defaultInfo;var i=this.locale.getSpec().replace(/-/g,"_");ilib.LocaleInfo.cache[i]=e}this.info=e,t&&"function"==typeof t.onLoad&&t.onLoad(this)})})},ilib.LocaleInfo.defaultInfo=ilib.data.localeinfo,ilib.LocaleInfo.defaultInfo=ilib.LocaleInfo.defaultInfo||{scripts:["Latn"],timezone:"Etc/UTC",units:"metric",calendar:"gregorian",clock:"24",currency:"USD",firstDayOfWeek:1,numfmt:{currencyFormats:{common:"{s}{n}",commonNegative:"{s}-{n}",iso:"{s}{n}",isoNegative:"{s}-{n}"},script:"Latn",decimalChar:",",groupChar:".",prigroupSize:3,secgroupSize:0,pctFmt:"{n}%",negativepctFmt:"-{n}%",pctChar:"%",roundingMode:"halfdown",exponential:"e",digits:""}},ilib.LocaleInfo.prototype={getLanguageName:function(){return this.info["language.name"]},getRegionName:function(){return this.info["region.name"]},getClock:function(){return this.info.clock},getLocale:function(){return this.locale},getUnits:function(){return this.info.units},getCalendar:function(){return this.info.calendar},getFirstDayOfWeek:function(){return this.info.firstDayOfWeek},getTimeZone:function(){return this.info.timezone},getDecimalSeparator:function(){return this.info.numfmt.decimalChar},getNativeDecimalSeparator:function(){return this.info.native_numfmt&&this.info.native_numfmt.decimalChar||this.info.numfmt.decimalChar},getGroupingSeparator:function(){return this.info.numfmt.groupChar},getNativeGroupingSeparator:function(){return this.info.native_numfmt&&this.info.native_numfmt.groupChar||this.info.numfmt.groupChar},getPrimaryGroupingDigits:function(){return this.info.numfmt.prigroupSize!==void 0&&this.info.numfmt.prigroupSize||0},getSecondaryGroupingDigits:function(){return this.info.numfmt.secgroupSize||0},getPercentageFormat:function(){return this.info.numfmt.pctFmt},getNegativePercentageFormat:function(){return this.info.numfmt.negativepctFmt},getPercentageSymbol:function(){return this.info.numfmt.pctChar||"%"},getExponential:function(){return this.info.numfmt.exponential},getNativeExponential:function(){return this.info.native_numfmt&&this.info.native_numfmt.exponential||this.info.numfmt.exponential},getNativePercentageSymbol:function(){return this.info.native_numfmt&&this.info.native_numfmt.pctChar||this.info.numfmt.pctChar||"%"},getNegativeNumberFormat:function(){return this.info.numfmt.negativenumFmt},getCurrencyFormats:function(){return this.info.numfmt.currencyFormats},getCurrency:function(){return this.info.currency},getDigits:function(){return this.info.numfmt.digits},getNativeDigits:function(){return this.info.native_numfmt&&this.info.native_numfmt.digits},getRoundingMode:function(){return this.info.numfmt.roundingMode},getDefaultScript:function(){return this.info.scripts?this.info.scripts[0]:"Latn"},getScript:function(){return this.locale.getScript()||this.getDefaultScript()},getAllScripts:function(){return this.info.scripts||["Latn"]}},ilib.Date=function(e){this.year=e&&e.year||0,this.month=e&&e.month||1,this.day=e&&e.day||1,this.hour=e&&e.hour||0,this.minute=e&&e.minute||0,this.second=e&&e.second||0,this.millisecond=e&&e.millisecond||0},ilib.Date.newInstance=function(e){var t,i=e&&e.locale,n=e&&e.type;if(i||(i=new ilib.Locale),!n){var o=new ilib.LocaleInfo(i);n=o.getCalendar()}return t=ilib.Date._constructors[n],t&&new t(e)},ilib.Date._constructors={},ilib.Date.prototype={getType:function(){return"ilib.Date"},getDays:function(){return this.day},getMonths:function(){return this.month},getYears:function(){return this.year},getHours:function(){return this.hour},getMinutes:function(){return this.minute},getSeconds:function(){return this.second},getMilliseconds:function(){return this.millisecond},setDays:function(e){this.day=e},setMonths:function(e){this.month=e},setYears:function(e){this.year=e},setHours:function(e){this.hour=e},setMinutes:function(e){this.minute=e},setSeconds:function(e){this.second=e},setMilliseconds:function(e){this.millisecond=e}},ilib.bind=function(e,t){function i(e,t){for(var i=[],n=t||0,o=e.length;o>n;n++)i.push(e[n]);return i}if(!e||!t)return void 0;if("function"==typeof t){var n,o=i(arguments,2);return n="function"==typeof t.bind?t.bind.apply(t,[e].concat(o)):function(){var n=i(arguments);return t.apply(e,o.concat(n))}}return void 0},ilib.mod=function(e,t){if(0==t)return 0;var i=e%t;return 0>i?i+t:i},ilib.merge=function(e,t,i,n){var o=void 0,s={};for(o in e)o&&e[o]!==void 0&&(s[o]=e[o]);for(o in t)o&&t[o]!==void 0&&(e[o]instanceof Array&&t[o]instanceof Array?(s[o]=[],s[o]=s[o].concat(e[o]),s[o]=s[o].concat(t[o])):"object"==typeof e[o]&&"object"==typeof t[o]?s[o]=ilib.merge(e[o],t[o]):(i&&n&&s[o]==t[o]&&console.log("Property "+o+" in "+i+" is being overridden by the same value in "+n),s[o]=t[o]));return s},ilib.mergeLocData=function(e,t){var i=void 0,n=t||new ilib.Locale,o=!1,s=e;return i=ilib.data[e]||{},n.getLanguage()&&(s=e+"_"+n.getLanguage(),ilib.data[s]&&(o=!0,i=ilib.merge(i,ilib.data[s]))),n.getRegion()&&(s=e+"_"+n.getRegion(),ilib.data[s]&&(o=!0,i=ilib.merge(i,ilib.data[s]))),n.getLanguage()&&(s=e+"_"+n.getLanguage(),n.getScript()&&(s=e+"_"+n.getLanguage()+"_"+n.getScript(),ilib.data[s]&&(o=!0,i=ilib.merge(i,ilib.data[s]))),n.getRegion()&&(s=e+"_"+n.getLanguage()+"_"+n.getRegion(),ilib.data[s]&&(o=!0,i=ilib.merge(i,ilib.data[s])))),n.getRegion()&&n.getVariant()&&(s=e+"_"+n.getLanguage()+"_"+n.getVariant(),ilib.data[s]&&(o=!0,i=ilib.merge(i,ilib.data[s]))),n.getLanguage()&&n.getScript()&&n.getRegion()&&(s=e+"_"+n.getLanguage()+"_"+n.getScript()+"_"+n.getRegion(),ilib.data[s]&&(o=!0,i=ilib.merge(i,ilib.data[s]))),n.getLanguage()&&n.getRegion()&&n.getVariant()&&(s=e+"_"+n.getLanguage()+"_"+n.getRegion()+"_"+n.getVariant(),ilib.data[s]&&(o=!0,i=ilib.merge(i,ilib.data[s]))),n.getLanguage()&&n.getScript()&&n.getRegion()&&n.getVariant()&&(s=e+"_"+n.getLanguage()+"_"+n.getScript()+"_"+n.getRegion()+"_"+n.getVariant(),ilib.data[s]&&(o=!0,i=ilib.merge(i,ilib.data[s]))),o?i:void 0},ilib.getLocFiles=function(e,t){var i="",n=[],o=t||"resources.json",s=e||new ilib.Locale,r=s.getLanguage(),a=s.getRegion(),l=s.getScript(),h=s.getVariant();return n.push(o),r&&(i=r+"/",n.push(i+o)),a&&(i="und/"+a+"/",n.push(i+o)),r&&(l&&(i=r+"/"+l+"/",n.push(i+o)),a&&(i=r+"/"+a+"/",n.push(i+o))),a&&h&&(i="und/"+a+"/"+h+"/",n.push(i+o)),r&&l&&a&&(i=r+"/"+l+"/"+a+"/",n.push(i+o)),r&&a&&h&&(i=r+"/"+a+"/"+h+"/",n.push(i+o)),r&&l&&a&&h&&(i=r+"/"+l+"/"+a+"/"+h+"/",n.push(i+o)),n},ilib.isEmpty=function(e){var t=void 0;if(!e)return!0;for(t in e)if(t&&e[t]!==void 0)return!1;return!0},ilib.hashCode=function(e){function t(e,t){return e*=65543,e+=t,e%=2147483647}function i(e){for(var i=0,n=0;e.length>n;n++)i=t(i,e.charCodeAt(n));return i}var n=0;switch(typeof e){case"undefined":n=0;break;case"string":n=i(e);break;case"function":case"number":case"xml":n=i(e+"");break;case"boolean":n=e?1:0;break;case"object":var o=[];for(var s in e)e.hasOwnProperty(s)&&o.push(s);o.sort();for(var r=0;o.length>r;r++)n=t(n,i(o[r])),n=t(n,ilib.hashCode(e[o[r]]))}return n},ilib.loadData=function(e){var t,i="resources.json",n=void 0,o=new ilib.Locale(ilib.getLocale()),s=!1,r={},a=void 0;if(e&&"function"==typeof e.callback){if(e.name&&(i=e.name),e.object&&(n=e.object),e.locale&&(o="string"==typeof e.locale?new ilib.Locale(e.locale):e.locale),e.type&&(t=e.type),e.loadParams&&(r=e.loadParams),e.sync&&(s=e.sync),a=e.callback,n&&!n.cache&&(n.cache={}),!t){var l=i.lastIndexOf(".");t=-1!==l?i.substring(l+1):"text"}var h=(o.getSpec().replace(/-/g,"_")||"root")+","+i+","+(ilib.hashCode(r)+"");if(n&&n.cache[h]!==void 0)a(n.cache[h]);else{var c;if("json"===t){var d=i.substring(0,i.lastIndexOf("."));if(c=ilib.mergeLocData(d,o))return n&&(n.cache[h]=c),a(c),void 0}if("function"==typeof ilib._load){var u=ilib.getLocFiles(o,i);"json"!==t&&(r.returnOne=!0),ilib._load(u,s,r,ilib.bind(this,function(e){if("json"===t){c=ilib.data[d]||{};for(var i=0;e.length>i;i++)e[i]!==void 0&&(c=ilib.merge(c,e[i]));n&&(n.cache[h]=c),a(c)}else{for(var i=e.length-1;i>-1&&!e[i];)i--;i>-1?(n&&(n.cache[h]=e[i]),a(e[i])):a(void 0)}}))}else n&&c&&(n.cache[h]=c),a(c)}}},ilib.String=function(e){this.str="object"==typeof e?e.str:"string"==typeof e?new String(e):"",this.length=this.str.length,this.cpLength=-1,this.localeSpec=ilib.getLocale()},ilib.String._isSurrogate=function(e){var t=e.charCodeAt(0);return t>=56320&&57343>=t||t>=55296&&56319>=t},ilib.String.fromCodePoint=function(e){if(65536>e)return String.fromCharCode(e);var t=Math.floor(e/65536)-1,i=65535&e;return String.fromCharCode(55296|(15&t)<<6|(64512&i)>>10)+String.fromCharCode(56320|1023&i)},ilib.String.loadPlurals=function(e,t,i,n){var o;o=t?"string"==typeof t?new ilib.Locale(t):t:new ilib.Locale(ilib.getLocale());var s=o.getLanguage();ilib.data["plurals_"+s]?n&&"function"==typeof n&&n(ilib.data["plurals_"+s]):ilib.loadData({name:"plurals.json",object:ilib.String,locale:o,sync:e,loadParams:i,callback:ilib.bind(this,function(e){e||(ilib.String.cache[s]={}),ilib.data["plurals_"+s]=e||{},n&&"function"==typeof n&&n(ilib.data["plurals_"+s])})})},ilib.String._fncs={firstProp:function(e){for(var t in e)if(t&&e[t])return t;return void 0},getValue:function(e,t){if("object"==typeof e){var i=ilib.String._fncs.firstProp(e);return ilib.String._fncs[i](e[i],t)}return"string"==typeof e?t:e},matchRangeContinuous:function(e,t){for(var i in t)if(i!==void 0&&t[i]!==void 0){var n=t[i];if("number"==typeof n){if(e===t[i])return!0}else if("[object Array]"===Object.prototype.toString.call(n)&&e>=n[0]&&n[1]>=e)return!0}return!1},matchRange:function(e,t){return Math.floor(e)!==e?!1:ilib.String._fncs.matchRangeContinuous(e,t)},is:function(e,t){var i=ilib.String._fncs.getValue(e[0],t),n=ilib.String._fncs.getValue(e[1],t);return i==n},isnot:function(e,t){return ilib.String._fncs.getValue(e[0],t)!=ilib.String._fncs.getValue(e[1],t)},inrange:function(e,t){return ilib.String._fncs.matchRange(ilib.String._fncs.getValue(e[0],t),e[1])},notin:function(e,t){return!ilib.String._fncs.matchRange(ilib.String._fncs.getValue(e[0],t),e[1])},within:function(e,t){return ilib.String._fncs.matchRangeContinuous(ilib.String._fncs.getValue(e[0],t),e[1])},mod:function(e,t){return ilib.mod(ilib.String._fncs.getValue(e[0],t),ilib.String._fncs.getValue(e[1],t))},n:function(e,t){return t},or:function(e,t){return ilib.String._fncs.getValue(e[0],t)||ilib.String._fncs.getValue(e[1],t)},and:function(e,t){return ilib.String._fncs.getValue(e[0],t)&&ilib.String._fncs.getValue(e[1],t)}},ilib.String.prototype={_length:function(){return this.str.length},format:function(e){var t=this.str;if(e){var i;for(var n in e)e[n]!==void 0&&(i=RegExp("{"+n+"}","g"),t=t.replace(i,e[n]))}return""+t},formatChoice:function(e,t){var i,n,o,s,r=this.str.split("|"),a=typeof e,l=[],h=[],c=void 0,d="";if(0===this.str.length)return"";for(i=0;r.length>i;i++)if(n=r[i].split("#"),n.length>2)l[i]=n[0],n=n.shift(),h[i]=n.join("#");else{if(2!==n.length)throw"syntax error in choice format pattern: "+r[i];l[i]=n[0],h[i]=n[1]}for(i=0;l.length>i;i++)if(0===l[i].length)d=new ilib.String(h[i]);else switch(a){case"number":if(s=parseInt(e,10),"<="===l[i].substring(0,2))o=parseFloat(l[i].substring(2)),o>=s&&(c=new ilib.String(h[i]),i=l.length);else if(">="===l[i].substring(0,2))o=parseFloat(l[i].substring(2)),s>=o&&(c=new ilib.String(h[i]),i=l.length);else if("<"===l[i].charAt(0))o=parseFloat(l[i].substring(1)),o>s&&(c=new ilib.String(h[i]),i=l.length);else if(">"===l[i].charAt(0))o=parseFloat(l[i].substring(1)),s>o&&(c=new ilib.String(h[i]),i=l.length);else switch(this.locale=this.locale||new ilib.Locale(this.localeSpec),l[i]){case"zero":case"one":case"two":case"few":case"many":var u=ilib.data["plurals_"+this.locale.getLanguage()];if(u){var g=u[l[i]];ilib.String._fncs.getValue(g,s)&&(c=new ilib.String(h[i]),i=l.length)}break;default:var p=l[i].indexOf("-");if(-1!==p){var f=l[i].substring(0,p),m=l[i].substring(p+1);s>=parseInt(f,10)&&parseInt(m,10)>=s&&(c=new ilib.String(h[i]),i=l.length)}else s===parseInt(l[i],10)&&(c=new ilib.String(h[i]),i=l.length)}break;case"boolean":"true"===l[i]&&e===!0?(c=new ilib.String(h[i]),i=l.length):"false"===l[i]&&e===!1&&(c=new ilib.String(h[i]),i=l.length);break;case"string":var y=RegExp(l[i],"i");y.test(e)&&(c=new ilib.String(h[i]),i=l.length);break;case"object":throw"syntax error: fmtChoice parameter for the argument index cannot be an object"}return c||(c=d||new ilib.String("")),c=c.format(t),""+c},toString:function(){return""+this.str},valueOf:function(){return this.str.valueOf()},charAt:function(e){return new ilib.String(this.str.charAt(e))},charCodeAt:function(e){return this.str.charCodeAt(e)},concat:function(e){return new ilib.String(this.str.concat(e))},indexOf:function(e,t){return this.str.indexOf(e,t)},lastIndexOf:function(e,t){return this.str.lastIndexOf(e,t)},match:function(e){return this.str.match(e)},replace:function(e,t){return new ilib.String(this.str.replace(e,t))},search:function(e){return this.str.search(e)},slice:function(e,t){return new ilib.String(this.str.slice(e,t))},split:function(e,t){return this.str.split(e,t)},substr:function(e,t){return new ilib.String(this.str.substr(e,t))},substring:function(e,t){return this.str.substring(e,t)},toLowerCase:function(){return this.str.toLowerCase()},toUpperCase:function(){return this.str.toUpperCase()},_toCodePoint:function(e){if(0===this.str.length)return-1;var t=-1,i=this.str.charCodeAt(e);if(i>=55296&&56319>=i){if(this.str.length>e+1){var n=this.str.charCodeAt(e+1);n>=56320&&57343>=n&&(t=((960&i)>>6)+1<<16|((63&i)<<10|1023&n))}}else t=i;return t},iterator:function(){function e(e){this.index=0,this.hasNext=function(){return this.index<e.str.length},this.next=function(){if(this.index<e.str.length){var t=e._toCodePoint(this.index);this.index+=t>65535?2:1}else t=-1;return t}}return new e(this)},charIterator:function(){function e(e){this.index=0,this.hasNext=function(){return this.index<e.str.length},this.next=function(){var t;return this.index<e.str.length&&(t=e.str.charAt(this.index),ilib.String._isSurrogate(t)&&this.index+1<e.str.length&&ilib.String._isSurrogate(e.str.charAt(this.index+1))&&(this.index++,t+=e.str.charAt(this.index)),this.index++),t}}return new e(this)},codePointAt:function(e){if(0>e)return-1;var t,i,n=this.iterator();for(t=e;t>=0&&n.hasNext();t--)i=n.next();return 0>t?i:-1},setLocale:function(e,t,i,n){"object"==typeof e?this.locale=e:(this.localeSpec=e,this.locale=new ilib.Locale(e)),ilib.String.loadPlurals(t!==void 0?t:!0,this.locale,i,n)},getLocale:function(){return(this.locale?this.locale.getSpec():this.localeSpec)||ilib.getLocale()},codePointLength:function(){if(-1===this.cpLength){var e=this.iterator();for(this.cpLength=0;e.hasNext();)this.cpLength++,e.next()}return this.cpLength}},ilib.Cal=function(){},ilib.Cal.newInstance=function(e){var t,i=e&&e.locale,n=e&&e.type;if(i||(i=new ilib.Locale),!n){var o=new ilib.LocaleInfo(i);n=o.getCalendar()}return t=ilib.Cal._constructors[n],t&&new t(e)},ilib.Cal._constructors={},ilib.Cal.getCalendars=function(){var e,t=[];for(e in ilib.Cal._constructors)e&&ilib.Cal._constructors[e]&&t.push(e);return t},ilib.Cal.prototype={getType:function(){throw"Cannot call methods of abstract class ilib.Cal"},getNumMonths:function(){throw"Cannot call methods of abstract class ilib.Cal"},getMonLength:function(){throw"Cannot call methods of abstract class ilib.Cal"},isLeapYear:function(){throw"Cannot call methods of abstract class ilib.Cal"}},ilib.signum=function(e){var t=e;if("string"==typeof e)t=parseInt(e,10);else if("number"!=typeof e)return 1;return 0>t?-1:1},ilib._roundFnc={floor:function(e){return Math.floor(e)},ceiling:function(e){return Math.ceil(e)},down:function(e){return 0>e?Math.ceil(e):Math.floor(e)},up:function(e){return 0>e?Math.floor(e):Math.ceil(e)},halfup:function(e){return 0>e?Math.ceil(e-.5):Math.floor(e+.5)},halfdown:function(e){return 0>e?Math.floor(e+.5):Math.ceil(e-.5)},halfeven:function(e){return 0===Math.floor(e)%2?Math.ceil(e-.5):Math.floor(e+.5)},halfodd:function(e){return 0!==Math.floor(e)%2?Math.ceil(e-.5):Math.floor(e+.5)}},ilib.JulianDay=function(e){this.jd=e,this.days=Math.floor(this.jd),this.frac=e-this.days},ilib.JulianDay.prototype={getDays:function(){return this.days},setDays:function(e){this.days=Math.floor(e),this.jd=this.days+this.frac},getDayFraction:function(){return this.frac},setDayFraction:function(e){var t=Math.floor(e);this.frac=e-t,this.jd=this.days+this.frac},getDate:function(){return this.jd},setDate:function(e){this.jd=e},addDate:function(e){"number"==typeof e&&(this.jd+=e,this.days=Math.floor(this.jd),this.frac=this.jd-this.days)}},ilib.Cal.Gregorian=function(){this.type="gregorian"},ilib.Cal.Gregorian.monthLengths=[31,28,31,30,31,30,31,31,30,31,30,31],ilib.Cal.Gregorian.prototype.getNumMonths=function(){return 12},ilib.Cal.Gregorian.prototype.getMonLength=function(e,t){return 2===e&&this.isLeapYear(t)?29:ilib.Cal.Gregorian.monthLengths[e-1]},ilib.Cal.Gregorian.prototype.isLeapYear=function(e){var t="number"==typeof e?e:e.getYears(),i=ilib.mod(t,400);return 0===ilib.mod(t,4)&&100!==i&&200!==i&&300!==i},ilib.Cal.Gregorian.prototype.getType=function(){return this.type},ilib.Cal.Gregorian.prototype.newDateInstance=function(e){return new ilib.Date.GregDate(e)},ilib.Cal._constructors.gregorian=ilib.Cal.Gregorian,ilib.bsearch=function(e,t,i){if(t===void 0||!t||e===void 0)return-1;for(var n,o=t.length-1,s=0,r=0,a=i||ilib.bsearch.numbers;o>=s;)if(r=Math.floor((o+s)/2),n=a(t[r],e),n>0)o=r-1;else{if(!(0>n))return r;s=r+1}return s},ilib.bsearch.numbers=function(e,t){return e-t},ilib.Date.GregDate=function(e){if(this.cal=new ilib.Cal.Gregorian,e){if(e.timezone&&(this.timezone=e.timezone),e.locale&&(this.locale="string"==typeof e.locale?new ilib.Locale(e.locale):e.locale,!this.timezone)){var t=new ilib.LocaleInfo(this.locale);this.timezone=t.getTimeZone()}if(e.unixtime!==void 0)this.setTime(parseInt(e.unixtime,10));else if(e.julianday!==void 0)this.timezone="Etc/UTC",this.setJulianDay(parseFloat(e.julianday));else if(e.year||e.month||e.day||e.hour||e.minute||e.second||e.millisecond)this.year=parseInt(e.year,10)||0,this.month=parseInt(e.month,10)||1,this.day=parseInt(e.day,10)||1,this.hour=parseInt(e.hour,10)||0,this.minute=parseInt(e.minute,10)||0,this.second=parseInt(e.second,10)||0,this.millisecond=parseInt(e.millisecond,10)||0;else if(e.rd!==void 0)this.setRd(e.rd);else{var i=new Date;this.setTime(i.getTime())}}else{var i=new Date;this.setTime(i.getTime())}},ilib.Date.GregDate.prototype=new ilib.Date,ilib.Date.GregDate.prototype.parent=ilib.Date,ilib.Date.GregDate.prototype.constructor=ilib.Date.GregDate,ilib.Date.GregDate.cumMonthLengths=[0,31,59,90,120,151,181,212,243,273,304,334,365],ilib.Date.GregDate.cumMonthLengthsLeap=[0,31,60,91,121,152,182,213,244,274,305,335,366],ilib.Date.GregDate.epoch=1721424.5,ilib.Date.GregDate.prototype.calcRataDie=function(e){var t=365*(e.year-1)+Math.floor((e.year-1)/4)-Math.floor((e.year-1)/100)+Math.floor((e.year-1)/400),i=(e.month>1?ilib.Date.GregDate.cumMonthLengths[e.month-1]:0)+e.day+(ilib.Cal.Gregorian.prototype.isLeapYear.call(this.cal,e.year)&&e.month>2?1:0),n=(36e5*e.hour+6e4*e.minute+1e3*e.second+e.millisecond)/864e5;return t+i+n},ilib.Date.GregDate.prototype.getRataDie=function(){return this.calcRataDie(this)},ilib.Date.GregDate.prototype.calcComponents=function(e){var t,i,n,o,s,r,a,l,h,c,d={};return s=Math.floor((e-1)/146097),t=ilib.mod(e-1,146097),r=Math.floor(t/36524),i=ilib.mod(t,36524),a=Math.floor(i/1461),n=ilib.mod(i,1461),l=Math.floor(n/365),o=ilib.mod(n,365)+1,d.year=400*s+100*r+4*a+l,4!==r&&4!==l&&d.year++,d.month=1,d.day=1,d.hour=0,d.minute=0,d.second=0,d.millisecond=0,h=e-ilib.Date.GregDate.prototype.calcRataDie.call(this,d)+1,c=ilib.Cal.Gregorian.prototype.isLeapYear.call(this.cal,d.year)?ilib.Date.GregDate.cumMonthLengthsLeap:ilib.Date.GregDate.cumMonthLengths,d.month=ilib.bsearch(Math.floor(h),c),h-=c[d.month-1],d.day=Math.floor(h),h-=d.day,h=Math.round(864e5*h),d.hour=Math.floor(h/36e5),h-=36e5*d.hour,d.minute=Math.floor(h/6e4),h-=6e4*d.minute,d.second=Math.floor(h/1e3),h-=1e3*d.second,d.millisecond=h,d},ilib.Date.GregDate.prototype.setRd=function(e){var t=this.calcComponents(e);this.year=t.year,this.month=t.month,this.day=t.day,this.hour=t.hour,this.minute=t.minute,this.second=t.second,this.millisecond=t.millisecond},ilib.Date.GregDate.prototype.setJulianDay=function(e){var t,i="number"==typeof e?new ilib.JulianDay(e):e;t=i.getDate()-ilib.Date.GregDate.epoch,this.setRd(t)},ilib.Date.GregDate.prototype.getDayOfWeek=function(){var e=Math.floor(this.getRataDie());return ilib.mod(e,7)},ilib.Date.GregDate.prototype.onOrBeforeRd=function(e,t){return e-ilib.mod(Math.floor(e)-t,7)},ilib.Date.GregDate.prototype.onOrAfterRd=function(e,t){return this.onOrBeforeRd(e+6,t)},ilib.Date.GregDate.prototype.beforeRd=function(e,t){return this.onOrBeforeRd(e-1,t)},ilib.Date.GregDate.prototype.afterRd=function(e,t){return this.onOrBeforeRd(e+7,t)},ilib.Date.GregDate.prototype.firstSunday=function(e){var t=this.calcRataDie({year:e,month:1,day:1,hour:0,minute:0,second:0,millisecond:0}),i=this.onOrAfterRd(t,4);return this.beforeRd(i,0)},ilib.Date.GregDate.prototype.before=function(e){return this.cal.newDateInstance({rd:this.beforeRd(this.getRataDie(),e)})},ilib.Date.GregDate.prototype.after=function(e){return this.cal.newDateInstance({rd:this.afterRd(this.getRataDie(),e)})},ilib.Date.GregDate.prototype.onOrBefore=function(e){return this.cal.newDateInstance({rd:this.onOrBeforeRd(this.getRataDie(),e)})},ilib.Date.GregDate.prototype.onOrAfter=function(e){return this.cal.newDateInstance({rd:this.onOrAfterRd(this.getRataDie(),e)})},ilib.Date.GregDate.prototype.getWeekOfYear=function(){var e,t=Math.floor(this.getRataDie()),i=this.firstSunday(this.year);return i>t?i=this.firstSunday(this.year-1):12==this.month&&this.day>25&&(e=this.firstSunday(this.year+1),t>=e&&(i=e)),Math.floor((t-i)/7)+1},ilib.Date.GregDate.prototype.getDayOfYear=function(){var e=this.cal.isLeapYear(this.year)?ilib.Date.GregDate.cumMonthLengthsLeap:ilib.Date.GregDate.cumMonthLengths;
return e[this.month-1]+this.day},ilib.Date.GregDate.prototype.getWeekOfMonth=function(e){var t=new ilib.LocaleInfo(e),i=this.calcRataDie({year:this.year,month:this.month,day:1,hour:0,minute:0,second:0,millisecond:0}),n=this.getRataDie(),o=this.onOrAfterRd(i,t.getFirstDayOfWeek());return o-i>3&&(o-=7),Math.floor((n-o)/7)+1},ilib.Date.GregDate.prototype.getEra=function(){return 1>this.year?-1:1},ilib.Date.GregDate.prototype.getTime=function(){var e=this.calcRataDie({year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second,millisecond:0});if(719163>e||e>744018.134803241)return-1;var t=86400*Math.floor(e-719163)+3600*this.hour+60*this.minute+this.second,i=1e3*t+this.millisecond;return i},ilib.Date.GregDate.prototype.setTime=function(e){var t=719163+e/864e5;this.setRd(t)},ilib.Date.GregDate.prototype.getJSDate=function(){var e=this.getTime();return-1===e?void 0:new Date(e)},ilib.Date.GregDate.prototype.getJulianDay=function(){return this.getRataDie()+ilib.Date.GregDate.epoch},ilib.Date.GregDate.prototype.getCalendar=function(){return"gregorian"},ilib.Date.GregDate.prototype.getTimeZone=function(){return this.timezone||"local"},ilib.Date.GregDate.prototype.setTimeZone=function(e){e&&""!==e?"string"==typeof e&&(this.timezone=e):this.timezone=void 0},ilib.Date._constructors.gregorian=ilib.Date.GregDate,ilib.TimeZone=function(e){if(this.sync=!0,this.locale=new ilib.Locale,this.isLocal=!1,e){if(e.locale&&(this.locale="string"==typeof e.locale?new ilib.Locale(e.locale):e.locale),e.id){if("local"===e.id){this.isLocal=!0;var t=new Date,i=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),5,1);this.offsetJan1=-i.getTimezoneOffset(),this.offsetJun1=-n.getTimezoneOffset(),this.offset=Math.max(this.offsetJan1,this.offsetJun1)}this.id=e.id}else e.offset&&(this.offset="string"==typeof e.offset?parseInt(e.offset,10):e.offset,this.id=this.getDisplayName(void 0,void 0));e.sync!==void 0&&(this.sync=e.sync),this.loadParams=e.loadParams,this.onLoad=e.onLoad}this.id?this._loadtzdata():new ilib.LocaleInfo(this.locale,{sync:this.sync,onLoad:ilib.bind(this,function(e){this.id=e.getTimeZone()||"Etc/UTC",this._loadtzdata()})})},ilib.data.defaultZones={"Etc/UTC":{o:"0:0",f:"UTC"}},ilib.TimeZone.prototype._loadtzdata=function(){ilib.data.timezones?this._initZone():ilib.loadData({object:ilib.TimeZone,locale:"-",name:"timezones.json",sync:this.sync,loadParams:this.loadParams,callback:ilib.bind(this,function(e){ilib.data.timezones=e||ilib.data.defaultZones,this._initZone()})})},ilib.TimeZone.prototype._initZone=function(){this.zone=ilib.data.timezones[this.id],this.zone||void 0!==this.offset||(this.id="Etc/UTC",this.zone=ilib.data.timezones[this.id]),this.onLoad&&"function"==typeof this.onLoad&&this.onLoad(this)},ilib.TimeZone.getAvailableIds=function(e){var t,i=[];e||i.push("local");for(t in ilib.data.timezones)!t||e&&ilib.data.timezones[t].c!==e||i.push(t);return i},ilib.TimeZone.prototype.getId=function(){return this.id},ilib.TimeZone.prototype.getDisplayName=function(e,t){switch(t=this.isLocal||this.zone===void 0?"rfc822":t||"standard"){default:case"standard":if(this.zone.f&&"zzz"!==this.zone.f){if(-1!==this.zone.f.indexOf("{c}")){var i="";i=this.inDaylightTime(e)?this.zone.s.c:this.zone.e.c;var n=new ilib.String(this.zone.f);return n.format({c:i||""})}return this.zone.f}var n="GMT"+this.zone.o;return this.inDaylightTime(e)&&(n+="+"+this.zone.s.v),n;case"rfc822":var o=this.getOffset(e),s="UTC",r=o.h||0,a=o.m||0;return s+=r>0?"+":"-",10>Math.abs(r)&&(s+="0"),s+=0>r?-r:r,10>a&&(s+="0"),s+=a;case"long":if(this.zone.n){if(-1!==this.zone.n.indexOf("{c}")){var l=this.inDaylightTime(e)?"Daylight":"Standard",n=new ilib.String(this.zone.n);return n.format({c:l||""})}return this.zone.n}var n="GMT"+this.zone.o;return this.inDaylightTime(e)&&(n+="+"+this.zone.s.v),n}},ilib.TimeZone.prototype._offsetStringToObj=function(e){var t,i="string"==typeof e?e.split(":"):[],n={h:0};return i.length>0&&(n.h=parseInt(i[0],10),i.length>1&&(t=parseInt(i[1],10),t&&(n.m=t),i.length>2&&(t=parseInt(i[2],10),t&&(n.s=t)))),n},ilib.TimeZone.prototype.getOffset=function(e){var t=this.getOffsetMillis(e)/6e4,i=ilib._roundFnc.down(t/60),n=Math.abs(t)-60*Math.abs(i),o={h:i};return 0!=n&&(o.m=n),o},ilib.TimeZone.prototype.getOffsetMillis=function(e){var t;if(this.isLocal){var i=e?new Date(e.getTime()):new Date;return 1e3*60*-i.getTimezoneOffset()}return this.dstSavings===void 0&&this._calcDSTSavings(),this.offset===void 0&&this._calcOffset(),t=this.offset,e&&this.inDaylightTime(e)&&(t+=this.dstSavings),1e3*60*t},ilib.TimeZone.prototype.getOffsetStr=function(e){var t,i=this.getOffset(e);return t=i.h,i.m!==void 0?(t+=":"+i.m,i.s!==void 0&&(t+=":"+i.s)):t+=":0",t},ilib.TimeZone.prototype.getRawOffset=function(){var e=this.getRawOffsetMillis()/6e4,t=ilib._roundFnc.down(e/60),i=Math.abs(e)-60*Math.abs(t),n={h:t};return 0!=i&&(n.m=i),n},ilib.TimeZone.prototype.getRawOffsetMillis=function(){return this.offset===void 0&&this._calcOffset(),1e3*60*this.offset},ilib.TimeZone.prototype.getRawOffsetStr=function(){if(this.isLocal){var e=this.getRawOffset();return e.h+":"+e.m}return this.offset!==void 0?this.getOffsetStr(void 0):this.zone&&this.zone.o||"0:0"},ilib.TimeZone.prototype.getDSTSavings=function(){if(this.isLocal){var e=Math.abs(this.offsetJan1-this.offsetJun1),t=ilib._roundFnc.down(e/60),i=e-60*t;return{h:t,m:i}}return this.zone&&this.zone.s?this._offsetStringToObj(this.zone.s.v):{h:0}},ilib.TimeZone.prototype.getDSTSavingsStr=function(){if(this.isLocal){var e=this.getDSTSavings();return e.h+":"+e.m}return this.offset===void 0&&this.zone&&this.zone.s?this.zone.s.v:"0:0"},ilib.TimeZone.prototype._calcRuleStart=function(e,t){var i,n,o,s,r,a,l,h=0,c=0,d=0,u=0;switch("l"==e.r.charAt(0)||"f"==e.r.charAt(0)?(s=ilib.Cal.newInstance({type:"gregorian"}),i=e.r.charAt(0),h=parseInt(e.r.substring(1),10),n="l"===i?s.getMonLength(e.m,t):1):(i="=",l=e.r.indexOf("<"),-1==l&&(l=e.r.indexOf(">")),-1!=l?(i=e.r.charAt(l),h=parseInt(e.r.substring(0,l),10),n=parseInt(e.r.substring(l+1),10)):n=parseInt(e.r,10)),e.t&&(a=e.t.split(":"),c=parseInt(a[0],10),a.length>1&&(d=parseInt(a[1],10),a.length>2&&(u=parseInt(a[2],10)))),o=new ilib.Date.GregDate({year:t,month:e.m,day:n,hour:c,minute:d,second:u}),r=o.getRataDie(),i){case"l":case"<":return o.onOrBeforeRd(r,h);case"f":case">":return o.onOrAfterRd(r,h);default:return r}},ilib.TimeZone.prototype._calcDSTSavings=function(){var e=this.getDSTSavings();this.dstSavings=(60*Math.abs(e.h||0)+(e.m||0))*ilib.signum(e.h||0)},ilib.TimeZone.prototype._calcOffset=function(){if(this.zone.o){var e=this._offsetStringToObj(this.zone.o);this.offset=(60*Math.abs(e.h||0)+(e.m||0))*ilib.signum(e.h||0)}},ilib.TimeZone.prototype.inDaylightTime=function(e){var t,i,n;if(!this.useDaylightTime())return!1;if(this.isLocal){var o=new Date(e?e.getTime():void 0),s=Math.min(this.offsetJan1,this.offsetJun1);return-o.getTimezoneOffset()===s}return e||(e=ilib.Date.newInstance()),t=e.getRataDie(),i=this._calcRuleStart(this.zone.s,e.year),n=this._calcRuleStart(this.zone.e,e.year),n>i?t>=i&&n>t?!0:!1:t>=i||n>t?!0:!1},ilib.TimeZone.prototype.useDaylightTime=function(){return this.isLocal&&this.offsetJan1!==this.offsetJun1||this.zone!==void 0&&this.zone.s!==void 0&&this.zone.e!==void 0},ilib.TimeZone.prototype.getCountry=function(){return this.zone.c},ilib.ResBundle=function(e){var t,i;this.locale=new ilib.Locale,this.baseName="strings",this.type="text",this.loadParams={},this.missing="source",this.sync=!0,e&&(e.locale&&(this.locale="string"==typeof e.locale?new ilib.Locale(e.locale):e.locale),e.name&&(this.baseName=e.name),e.type&&(this.type=e.type),this.lengthen=e.lengthen||!1,e.sync!==void 0&&(this.sync=1==e.sync),e.loadParams!==void 0&&(this.loadParams=e.loadParams),e.missing!==void 0&&("pseudo"===e.missing||"empty"===e.missing)&&(this.missing=e.missing)),this.map={},ilib.ResBundle[this.baseName]||(ilib.ResBundle[this.baseName]={}),t=this.locale.isPseudo()?new ilib.Locale("en-US"):this.locale,ilib.loadData({object:ilib.ResBundle[this.baseName],locale:t,name:this.baseName+".json",sync:this.sync,loadParams:this.loadParams,callback:ilib.bind(this,function(n){n||(n=ilib.data[this.baseName]||{},i=t.getSpec().replace(/-/g,"_"),ilib.ResBundle[this.baseName].cache[i]=n),this.map=n,this.locale.isPseudo()?(ilib.ResBundle.pseudomap||(ilib.ResBundle.pseudomap={}),this._loadPseudo(this.locale,e.onLoad)):"pseudo"===this.missing?(ilib.ResBundle.pseudomap||(ilib.ResBundle.pseudomap={}),new ilib.LocaleInfo(this.locale,{sync:this.sync,loadParams:this.loadParams,onLoad:ilib.bind(this,function(t){var i=new ilib.Locale("zxx","XX",void 0,t.getDefaultScript());this._loadPseudo(i,e.onLoad)})})):e&&"function"==typeof e.onLoad&&e.onLoad(this)})})},ilib.ResBundle.defaultPseudo=ilib.data.pseudomap||{a:"\u00e0",e:"\u00eb",i:"\u00ed",o:"\u00f5",u:"\u00fc",y:"\u00ff",A:"\u00c3",E:"\u00cb",I:"\u00cf",O:"\u00d8",U:"\u00da",Y:"\u0176"},ilib.ResBundle.prototype={_loadPseudo:function(e,t){ilib.loadData({object:ilib.ResBundle.pseudomap,locale:e,name:"pseudomap.json",sync:this.sync,loadParams:this.loadParams,callback:ilib.bind(this,function(i){if(!i||ilib.isEmpty(i)){i=ilib.ResBundle.defaultPseudo;var n=e.getSpec().replace(/-/g,"_");ilib.ResBundle.pseudomap.cache[n]=i}this.pseudomap=i,"function"==typeof t&&t(this)})})},getLocale:function(){return this.locale},getName:function(){return this.baseName},getType:function(){return this.type},pseudo:function(e){if(!e)return void 0;var t,i="";for(t=0;e.length>t;t++)if("raw"!==this.type){if("html"===this.type||"xml"===this.type)if("<"===e.charAt(t)){for(i+=e.charAt(t++);e.length>t&&">"!==e.charAt(t);)i+=e.charAt(t++);e.length>t&&(i+=e.charAt(t++))}else if("&"===e.charAt(t)){for(i+=e.charAt(t++);e.length>t&&";"!==e.charAt(t)&&" "!==e.charAt(t);)i+=e.charAt(t++);e.length>t&&(i+=e.charAt(t++))}if(e.length>t)if("{"===e.charAt(t)){for(i+=e.charAt(t++);e.length>t&&"}"!==e.charAt(t);)i+=e.charAt(t++);e.length>t&&(i+=e.charAt(t))}else i+=this.pseudomap[e.charAt(t)]||e.charAt(t)}else i+=this.pseudomap[e.charAt(t)]||e.charAt(t);if(this.lengthen){var n;for(n=20>=i.length?Math.round(i.length/2):i.length>20&&40>=i.length?Math.round(i.length/3):Math.round(i.length/5),t=n-1;t>=0;t--)i+=t%10}return("Hans"===this.locale.getScript()||"Hant"===this.locale.getScript()||"Hani"===this.locale.getScript()||"Hrkt"===this.locale.getScript()||"Jpan"===this.locale.getScript()||"Hira"===this.locale.getScript()||"Kana"===this.locale.getScript())&&(i=i.replace(/ /g,"")),i},escapeXml:function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;")},unescapeXml:function(e){return e=e.replace(/&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">")},makeKey:function(e){var t=e.replace(/\s+/gm," ");return"xml"===this.type||"html"===this.type?this.unescapeXml(t):t},getString:function(e,t,i){if(!e&&!t)return new ilib.String("");var n;if(this.locale.isPseudo()){var o=e?e:this.map[t];n=this.pseudo(o||t)}else{var s=t||this.makeKey(e);n=this.map[s]!==void 0?this.map[s]:"pseudo"===this.missing?this.pseudo(e||t):"empty"===this.missing?"":e}if(i&&"none"!==i&&("default"==i&&(i=this.type),"xml"===i||"html"===i?n=this.escapeXml(n):("js"==i||"attribute"===i)&&(n=n.replace(/'/g,"\\'").replace(/"/g,'\\"'))),void 0===n)return void 0;var r=new ilib.String(n);return r.setLocale(this.locale.getSpec(),!0,this.loadParams),r},containsKey:function(e,t){if(e===void 0&&t===void 0)return!1;var i=t||this.makeKey(e);return this.map[i]!==void 0},getResObj:function(){return this.map}},ilib.shallowCopy=function(e,t){var i=void 0;if(e&&t)for(i in e)void 0!==i&&e[i]&&(t[i]=e[i])},ilib.mapString=function(e,t){var i="";if(t&&e)for(var n=0;e.length>n;n++){var o=e.charAt(n);i+=t[o]||o}else i=e;return i},ilib.indexOf=function(e,t){if(!e||!t)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var i=0;e.length>i;i++)if(e[i]===t)return i;return-1},ilib.DateFmt=function(e){var t,i,n,o=!0,s=void 0;if(this.locale=new ilib.Locale,this.type="date",this.length="s",this.dateComponents="dmy",this.timeComponents="ahm",this.useNative=!1,e){if(e.locale&&(this.locale="string"==typeof e.locale?new ilib.Locale(e.locale):e.locale),e.type&&("date"===e.type||"time"===e.type||"datetime"===e.type)&&(this.type=e.type),e.calendar&&(this.calName=e.calendar),e.length&&("short"===e.length||"medium"===e.length||"long"===e.length||"full"===e.length)&&(this.length=e.length.charAt(0)),e.date){for(t=e.date.split(""),t.sort(function(e,t){return t>e?-1:e>t?1:0}),n=!1,i=0;t.length>i;i++)if("d"!==t[i]&&"m"!==t[i]&&"y"!==t[i]&&"w"!==t[i]&&"n"!==t[i]){n=!0;break}n||(this.dateComponents=t.join(""))}if(e.time){for(t=e.time.split(""),t.sort(function(e,t){return t>e?-1:e>t?1:0}),this.badTime=!1,i=0;t.length>i;i++)if("h"!==t[i]&&"m"!==t[i]&&"s"!==t[i]&&"a"!==t[i]&&"z"!==t[i]){this.badTime=!0;break}this.badTime||(this.timeComponents=t.join(""))}!e.clock||"12"!==e.clock&&"24"!==e.clock||(this.clock=e.clock),e.template&&(this.type="",this.length="",this.dateComponents="",this.timeComponents="",this.template=e.template),e.timezone?this.tz=new ilib.TimeZone({locale:this.locale,id:e.timezone}):e.locale&&(this.tz=new ilib.TimeZone({locale:this.locale})),e.useNative!==void 0&&(this.useNative=e.useNative),e.sync!==void 0&&(o=1==e.sync),s=e.loadParams}ilib.DateFmt.cache||(ilib.DateFmt.cache={}),new ilib.LocaleInfo(this.locale,{sync:o,onLoad:ilib.bind(this,function(t){this.locinfo=t,this.calName=this.calName||this.locinfo.getCalendar()||"gregorian",this.cal=ilib.Cal.newInstance({type:this.calName}),this.cal||(this.cal=new ilib.Cal.Gregorian),new ilib.ResBundle({locale:this.locale,name:"sysres",sync:o,onLoad:ilib.bind(this,function(t){this.sysres=t,this.template?(this._massageTemplate(),e&&"function"==typeof e.onLoad&&e.onLoad(this)):ilib.loadData({object:ilib.DateFmt,locale:this.locale,name:"dateformats.json",sync:o,loadParams:s,callback:ilib.bind(this,function(t){if(!t){t=ilib.DateFmt.defaultFmt;var i=this.locale.getSpec().replace(/-/g,"_");ilib.DateFmt.cache[i]=t}this.clock===void 0&&(this.clock=this.locinfo.getClock()),this._initTemplate(t),this._massageTemplate(),e&&"function"==typeof e.onLoad&&e.onLoad(this)})})})})})})},ilib.DateFmt.lenmap={s:"short",m:"medium",l:"long",f:"full"},ilib.DateFmt.zeros="0000",ilib.DateFmt.defaultFmt=ilib.data.dateformats||{gregorian:{order:"{date} {time}",date:{dmwy:"EEE d/MM/yyyy",dmy:"d/MM/yyyy",dmw:"EEE d/MM",dm:"d/MM",my:"MM/yyyy",dw:"EEE d",d:"dd",m:"MM",y:"yyyy",n:"NN",w:"EEE"},time:{12:"h:mm:ssa",24:"H:mm:ss"},range:{c00:"{st} - {et}, {sd}/{sm}/{sy}",c01:"{sd}/{sm} {st} - {ed}/{em} {et}, {sy}",c02:"{sd}/{sm} {st} - {ed}/{em} {et}, {sy}",c03:"{sd}/{sm}/{sy} {st} - {ed}/{em}/{ey} {et}",c10:"{sd}-{ed}/{sm}/{sy}",c11:"{sd}/{sm} - {ed}/{em} {sy}",c12:"{sd}/{sm}/{sy} - {ed}/{em}/{ey}",c20:"{sm}/{sy} - {em}/{ey}",c30:"{sy} - {ey}"}},islamic:"gregorian",hebrew:"gregorian",julian:"gregorian",buddhist:"gregorian"},ilib.DateFmt.prototype={_initTemplate:function(e){if(!e[this.calName])throw"No formats available for calendar "+this.calName+" in locale "+(""+this.locale);switch(this.formats=e[this.calName],"string"==typeof this.formats&&(this.formats=e[this.formats]),this.template="",this.type){case"datetime":this.template=this.formats&&this._getLengthFormat(this.formats.order,this.length)||"{date} {time}",this.template=this.template.replace("{date}",this._getFormat(this.formats.date,this.dateComponents,this.length)||""),this.template=this.template.replace("{time}",this._getFormat(this.formats.time[this.clock],this.timeComponents,this.length)||"");break;case"date":this.template=this._getFormat(this.formats.date,this.dateComponents,this.length);break;case"time":this.template=this._getFormat(this.formats.time[this.clock],this.timeComponents,this.length)}},_massageTemplate:function(){var e;if(this.clock&&this.template){var t="";switch(this.clock){case"24":for(e=0;this.template.length>e;e++)if("'"==this.template.charAt(e)){for(t+=this.template.charAt(e++);this.template.length>e&&"'"!==this.template.charAt(e);)t+=this.template.charAt(e++);this.template.length>e&&(t+=this.template.charAt(e))}else t+="K"==this.template.charAt(e)?"k":"h"==this.template.charAt(e)?"H":this.template.charAt(e);this.template=t;break;case"12":for(e=0;this.template.length>e;e++)if("'"==this.template.charAt(e)){for(t+=this.template.charAt(e++);this.template.length>e&&"'"!==this.template.charAt(e);)t+=this.template.charAt(e++);this.template.length>e&&(t+=this.template.charAt(e))}else t+="k"==this.template.charAt(e)?"K":"H"==this.template.charAt(e)?"h":this.template.charAt(e);this.template=t}}this.templateArr=this._tokenize(this.template);var i=this.locinfo.getDigits();i&&"0123456789"!=i&&(this.digits=i),this.useNative&&(i=this.locinfo.getNativeDigits(),i&&(this.digits=i))},_tokenize:function(e){var t,i,n,o=0,s=[];if(e)for(;e.length>o;){if(i=e.charAt(o),t=o,"'"===i){for(o++;e.length>o&&"'"!==e.charAt(o);)o++;e.length>o&&o++}else if(i>="a"&&"z">=i||i>="A"&&"Z">=i)for(n=e.charAt(o);e.length>o&&i===n;)i=e.charAt(++o);else for(;e.length>o&&"'"!==i&&("a">i||i>"z")&&("A">i||i>"Z");)i=e.charAt(++o);s.push(e.substring(t,o))}return s},_getFormat:function(e,t,i){return t!==void 0&&e[t]?this._getLengthFormat(e[t],i):void 0},_getLengthFormat:function(e,t){return"string"==typeof e?e:e[t]?e[t]:void 0},getLocale:function(){return this.locale},getTemplate:function(){return this.template},getType:function(){return this.type},getCalendar:function(){return this.cal.getType()},getLength:function(){return ilib.DateFmt.lenmap[this.length]||""},getDateComponents:function(){return this.dateComponents||""},getTimeComponents:function(){return this.timeComponents||""},getTimeZone:function(){return this.tz||(this.tz=new ilib.TimeZone({id:ilib.getTimeZone()})),this.tz},getClock:function(){return this.clock||this.locinfo.getClock()},toString:function(){return this.getTemplate()},_pad:function(e,t){"string"!=typeof e&&(e=""+e);var i=0;return"-"===e.charAt(0)&&i++,e.length>=t+i?e:e.substring(0,i)+ilib.DateFmt.zeros.substring(0,t-e.length+i)+e.substring(i)},_formatTemplate:function(e,t){var i,n,o,s,r="";for(i=0;t.length>i;i++)switch(t[i]){case"d":r+=e.day||1;break;case"dd":r+=this._pad(e.day||"1",2);break;case"yy":o=""+(e.year||0)%100,r+=this._pad(o,2);break;case"yyyy":r+=this._pad(e.year||"0",4);break;case"M":r+=e.month||1;break;case"MM":r+=this._pad(e.month||"1",2);break;case"h":o=(e.hour||0)%12,0==o&&(o="12"),r+=o;break;case"hh":o=(e.hour||0)%12,0==o&&(o="12"),r+=this._pad(o,2);break;case"K":o=(e.hour||0)%12,r+=o;break;case"KK":o=(e.hour||0)%12,r+=this._pad(o,2);break;case"H":r+=e.hour||"0";break;case"HH":r+=this._pad(e.hour||"0",2);break;case"k":r+=0==e.hour?"24":e.hour;break;case"kk":o=0==e.hour?"24":e.hour,r+=this._pad(o,2);break;case"m":r+=e.minute||"0";break;case"mm":r+=this._pad(e.minute||"0",2);break;case"s":r+=e.minute||"0";break;case"ss":r+=this._pad(e.second||"0",2);break;case"S":r+=e.millisecond||"0";break;case"SSS":r+=this._pad(e.millisecond||"0",3);break;case"N":case"NN":case"MMM":case"MMMM":n=t[i]+(e.month||1),r+=this.sysres.getString(void 0,n+"-"+this.calName)||this.sysres.getString(void 0,n);break;case"E":case"EE":case"EEE":case"EEEE":n=t[i]+e.getDayOfWeek(),r+=this.sysres.getString(void 0,n+"-"+this.calName)||this.sysres.getString(void 0,n);break;case"a":n="zh"===this.locale.getLanguage()?6>e.hour?"azh0":9>e.hour?"azh1":12>e.hour?"azh2":13>e.hour?"azh3":18>e.hour?"azh4":21>e.hour?"azh5":"azh6":12>e.hour?"a0":"a1",r+=this.sysres.getString(void 0,n+"-"+this.calName)||this.sysres.getString(void 0,n);break;case"w":r+=e.getWeekOfYear();break;case"ww":r+=this._pad(e.getWeekOfYear(),2);break;case"D":r+=e.getDayOfYear();break;case"DD":r+=this._pad(e.getDayOfYear(),2);break;case"DDD":r+=this._pad(e.getDayOfYear(),3);break;case"W":r+=e.getWeekOfMonth(this.locale);break;case"G":n="G"+e.getEra(),r+=this.sysres.getString(void 0,n+"-"+this.calName)||this.sysres.getString(void 0,n);break;case"O":o=this.sysres.getString("1#1st|2#2nd|3#3rd|21#21st|22#22nd|23#23rd|31#31st|#{num}th","ordinalChoice"),r+=o.formatChoice(e.day,{num:e.day});break;case"z":s=this.getTimeZone(),r+=s.getDisplayName(e,"standard");break;case"Z":s=this.getTimeZone(),r+=s.getDisplayName(e,"rfc822");break;default:r+=t[i].replace(/'/g,"")}return this.digits&&(r=ilib.mapString(r,this.digits)),r},format:function(e){if(!e.getCalendar||e.getCalendar()!==this.calName)throw"Wrong date type passed to ilib.DateFmt.format()";var t=this.tz&&this.tz.getId()||"local",i=e.timezone||"local";if(i!==t){var n=new ilib.TimeZone({locale:e.locale,id:i}),o=this.tz||new ilib.TimeZone({locale:e.locale,id:t}),s=n.getOffset(e),r=o.getOffset(e),a=60*60*(s.h||0)+60*(s.m||0)+(s.s||0)-(60*60*(r.h||0)+60*(r.m||0)+(r.s||0)),l=ilib.Date.newInstance({type:this.calName,rd:e.getRataDie()-a/86400});e=l}return this._formatTemplate(e,this.templateArr)},formatRelative:function(e,t){var i,n,o,s,r,a;if("object"!=typeof e||!e.getCalendar||e.getCalendar()!==this.calName||"object"!=typeof t||!t.getCalendar||t.getCalendar()!==this.calName)throw"Wrong calendar type";if(i=e.getRataDie(),n=t.getRataDie(),i>n?(r=i-n,o=this.sysres.getString("{duration} ago")):(r=n-i,o=this.sysres.getString("in {duration}")),694444e-9>r)switch(a=Math.round(86400*r),this.length){case"s":s=this.sysres.getString("#{num}s");break;case"m":s=this.sysres.getString("1#1 se|#{num} sec");break;case"l":s=this.sysres.getString("1#1 sec|#{num} sec");break;default:case"f":s=this.sysres.getString("1#1 second|#{num} seconds")}else if(.041666667>r)switch(a=Math.round(1440*r),this.length){case"s":s=this.sysres.getString("#{num}m","durationShortMinutes");break;case"m":s=this.sysres.getString("1#1 mi|#{num} min");break;case"l":s=this.sysres.getString("1#1 min|#{num} min");break;default:case"f":s=this.sysres.getString("1#1 minute|#{num} minutes")}else if(1>r)switch(a=Math.round(24*r),this.length){case"s":s=this.sysres.getString("#{num}h");break;case"m":s=this.sysres.getString("1#1 hr|#{num} hrs","durationMediumHours");break;case"l":s=this.sysres.getString("1#1 hr|#{num} hrs");break;default:case"f":s=this.sysres.getString("1#1 hour|#{num} hours")}else if(14>r)switch(a=Math.round(r),this.length){case"s":s=this.sysres.getString("#{num}d");break;case"m":s=this.sysres.getString("1#1 dy|#{num} dys");break;case"l":s=this.sysres.getString("1#1 day|#{num} days","durationLongDays");break;default:case"f":s=this.sysres.getString("1#1 day|#{num} days")}else if(84>r)switch(a=Math.round(r/7),this.length){case"s":s=this.sysres.getString("#{num}w");break;case"m":s=this.sysres.getString("1#1 wk|#{num} wks","durationMediumWeeks");break;case"l":s=this.sysres.getString("1#1 wk|#{num} wks");break;default:case"f":s=this.sysres.getString("1#1 week|#{num} weeks")}else if(730>r)switch(a=Math.round(r/30.4),this.length){case"s":s=this.sysres.getString("#{num}m","durationShortMonths");break;case"m":s=this.sysres.getString("1#1 mo|#{num} mos");break;case"l":s=this.sysres.getString("1#1 mon|#{num} mons");break;default:case"f":s=this.sysres.getString("1#1 month|#{num} months")}else switch(a=Math.round(r/365),this.length){case"s":s=this.sysres.getString("#{num}y");break;case"m":s=this.sysres.getString("1#1 yr|#{num} yrs","durationMediumYears");break;case"l":s=this.sysres.getString("1#1 yr|#{num} yrs");break;default:case"f":s=this.sysres.getString("1#1 year|#{num} years")}return o.format({duration:s.formatChoice(a,{num:a})})}},ilib.DateRngFmt=function(e){var t=!0;this.locale=new ilib.Locale,this.length="s",e&&(e.locale&&(this.locale="string"==typeof e.locale?new ilib.Locale(e.locale):e.locale),e.length&&("short"===e.length||"medium"===e.length||"long"===e.length||"full"===e.length)&&(this.length=e.length.charAt(0)),e.sync!==void 0&&(t=1==e.sync));var i={};ilib.shallowCopy(e,i),i.sync=t,i.onLoad=ilib.bind(this,function(t){this.dateFmt=t,t&&(this.locinfo=this.dateFmt.locinfo,this.calName=this.calName||this.locinfo.getCalendar()||"gregorian",this.cal=ilib.Cal.newInstance({type:this.calName}),this.cal||(this.cal=new ilib.Cal.Gregorian),this.timeTemplate=this.dateFmt._getFormat(this.dateFmt.formats.time[this.dateFmt.clock],this.dateFmt.timeComponents,this.length)||"hh:mm",this.timeTemplateArr=this.dateFmt._tokenize(this.timeTemplate),e&&"function"==typeof e.onLoad&&e.onLoad(this))}),new ilib.DateFmt(i)},ilib.DateRngFmt.prototype={getLocale:function(){return this.locale},getCalendar:function(){return this.dateFmt.getCalendar()},getLength:function(){return ilib.DateFmt.lenmap[this.length]||""},getTimeZone:function(){return this.dateFmt.getTimeZone()},getClock:function(){return this.dateFmt.getClock()},format:function(e,t){var i,n,o,s,r,a="";if("object"!=typeof e||!e.getCalendar||e.getCalendar()!==this.calName||"object"!=typeof t||!t.getCalendar||t.getCalendar()!==this.calName)throw"Wrong calendar type";return i=e.getRataDie(),n=t.getRataDie(),a=3>n-i?e.year===t.year?e.month===t.month?e.day===t.day?new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c00",this.length)):new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c01",this.length)):new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c02",this.length)):new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c03",this.length)):730>n-i?e.year===t.year?e.month===t.month?new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c10",this.length)):new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c11",this.length)):new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c12",this.length)):3650>n-i?new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c20",this.length)):new ilib.String(this.dateFmt._getFormat(this.dateFmt.formats.range,"c30",this.length)),o=this.dateFmt._tokenize(this.dateFmt._getFormat(this.dateFmt.formats.date,"y",this.length)||"yyyy"),s=this.dateFmt._tokenize(this.dateFmt._getFormat(this.dateFmt.formats.date,"m",this.length)||"MM"),r=this.dateFmt._tokenize(this.dateFmt._getFormat(this.dateFmt.formats.date,"d",this.length)||"dd"),a.format({sy:this.dateFmt._formatTemplate(e,o),sm:this.dateFmt._formatTemplate(e,s),sd:this.dateFmt._formatTemplate(e,r),st:this.dateFmt._formatTemplate(e,this.timeTemplateArr),ey:this.dateFmt._formatTemplate(t,o),em:this.dateFmt._formatTemplate(t,s),ed:this.dateFmt._formatTemplate(t,r),et:this.dateFmt._formatTemplate(t,this.timeTemplateArr)})}},ilib.Cal.ThaiSolar=function(){this.type="thaisolar"},ilib.Cal.ThaiSolar.prototype=new ilib.Cal.Gregorian,ilib.Cal.ThaiSolar.prototype.parent=ilib.Cal.Gregorian,ilib.Cal.ThaiSolar.prototype.constructor=ilib.Cal.ThaiSolar,ilib.Cal.ThaiSolar.prototype.isLeapYear=function(e){var t="number"==typeof e?e:e.getYears();t-=543;var i=ilib.mod(t,400);return 0===ilib.mod(t,4)&&100!==i&&200!==i&&300!==i},ilib.Cal.ThaiSolar.prototype.newDateInstance=function(e){return new ilib.Date.ThaiSolarDate(e)},ilib.Cal._constructors.thaisolar=ilib.Cal.ThaiSolar,ilib.Date.ThaiSolarDate=function(e){ilib.Date.GregDate.call(this,e),this.cal=new ilib.Cal.ThaiSolar},ilib.Date.ThaiSolarDate.prototype=new ilib.Date.GregDate,ilib.Date.ThaiSolarDate.prototype.parent=ilib.Date.GregDate.prototype,ilib.Date.ThaiSolarDate.prototype.constructor=ilib.Date.ThaiSolarDate,ilib.Date.ThaiSolarDate.epoch=1523097.5,ilib.Date.ThaiSolarDate.prototype.calcRataDie=function(e){var t=this.parent.calcRataDie.call(this,{year:e.year-543,month:e.month,day:e.day,hour:e.hour,minute:e.minute,second:e.second,millisecond:e.millisecond});return t+198327},ilib.Date.ThaiSolarDate.prototype.calcComponents=function(e){var t=this.parent.calcComponents.call(this,e-198327);return t.year+=543,t},ilib.Date.ThaiSolarDate.prototype.setJulianDay=function(e){var t,i="number"==typeof e?new ilib.JulianDay(e):e;t=i.getDate()-ilib.Date.ThaiSolarDate.epoch,this.setRd(t)},ilib.Date.ThaiSolarDate.prototype.getDayOfWeek=function(){var e=Math.floor(this.getRataDie()-198327);return ilib.mod(e,7)},ilib.Date.ThaiSolarDate.prototype.onOrBeforeRd=function(e,t){return e-ilib.mod(Math.floor(e-198327)-t,7)},ilib.Date.ThaiSolarDate.prototype.getTime=function(){var e=this.calcRataDie({year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second,millisecond:0});if(917490>e||e>942345.134803241)return-1;var t=86400*Math.floor(e-917490)+3600*this.hour+60*this.minute+this.second,i=1e3*t+this.millisecond;return i},ilib.Date.ThaiSolarDate.prototype.setTime=function(e){var t=917490+e/864e5;this.setRd(t)},ilib.Date.ThaiSolarDate.prototype.getJulianDay=function(){return this.getRataDie()+ilib.Date.ThaiSolarDate.epoch},ilib.Date.ThaiSolarDate.prototype.getCalendar=function(){return"thaisolar"},ilib.Date._constructors.thaisolar=ilib.Date.ThaiSolarDate,ilib.CType={_inRange:function(e,t,i){var n,o,s;if(!e||0===e.length||!t||i===void 0)return!1;if(s=new ilib.String(e).codePointAt(0),n=i[t],!n)return!1;for(o=0;n.length>o;o++)if(1===n[o].length){if(s===n[o][0])return!0}else if(s>=n[o][0]&&n[o][1]>=s)return!0;return!1},withinRange:function(e,t){return t?ilib.CType._inRange(e,t.toLowerCase(),ilib.data.ctype):!1},_init:function(e,t,i){ilib.CType._load("ctype",e,t,i)},_load:function(e,t,i,n){if(ilib.data[e])n&&"function"==typeof n&&n(ilib.data[e]);else{var o=e?e+".json":"ctype.json";ilib.loadData({name:o,locale:"-",sync:t,loadParams:i,callback:ilib.bind(this,function(t){ilib.data[e]=t,n&&"function"==typeof n&&n(ilib.data[e])})})}}},ilib.CType.isDigit=function(e){return ilib.CType._inRange(e,"digit",ilib.data.ctype)},ilib.CType.isDigit._init=function(e,t,i){ilib.CType._init(e,t,i)},ilib.CType.isSpace=function(e){return ilib.CType._inRange(e,"space",ilib.data.ctype)||ilib.CType._inRange(e,"Zs",ilib.data.ctype_z)||ilib.CType._inRange(e,"Zl",ilib.data.ctype_z)||ilib.CType._inRange(e,"Zp",ilib.data.ctype_z)},ilib.CType.isSpace._init=function(e,t,i){ilib.CType._load("ctype_z",e,t,function(){ilib.CType._init(e,t,i)})},ilib.Number=function(e,t){var i,n,o,s="",r=!0;if(this.locale=new ilib.Locale,this.type="number",t){if(t.locale&&(this.locale="string"==typeof t.locale?new ilib.Locale(t.locale):t.locale),t.type)switch(t.type){case"number":case"currency":case"percentage":this.type=t.type;break;default:}t.sync!==void 0&&(r=1==t.sync),n=t.loadParams,o=t.onLoad}ilib.CType.isDigit._init(r,n,ilib.bind(this,function(){ilib.CType.isSpace._init(r,n,ilib.bind(this,function(){new ilib.LocaleInfo(this.locale,{sync:r,onLoad:ilib.bind(this,function(n){switch(this.decimal=n.getDecimalSeparator(),typeof e){case"string":var o=!0;for(this.str=e||"0",i=0,i=0;this.str.length>i;i++)o&&"-"===this.str.charAt(i)?(o=!1,s+=this.str.charAt(i)):ilib.CType.isDigit(this.str.charAt(i))?(s+=this.str.charAt(i),o=!1):this.str.charAt(i)===this.decimal&&(s+=".",o=!1);this.value=parseFloat(s);break;case"number":this.str=""+e,this.value=e;break;case"object":this.value=e.valueOf(),this.str=""+this.value;break;case"undefined":this.value=0,this.str="0"}switch(this.type){default:break;case"percentage":-1!==this.str.indexOf(n.getPercentageSymbol())&&(this.value/=100);break;case"currency":for(s="",i=0;this.str.length>i&&!ilib.CType.isDigit(this.str.charAt(i))&&!ilib.CType.isSpace(this.str.charAt(i));)s+=this.str.charAt(i++);if(0===s.length){for(;this.str.length>i&&ilib.CType.isDigit(this.str.charAt(i))||ilib.CType.isSpace(this.str.charAt(i))||"."===this.str.charAt(i)||","===this.str.charAt(i);)i++;for(;this.str.length>i&&!ilib.CType.isDigit(this.str.charAt(i))&&!ilib.CType.isSpace(this.str.charAt(i));)s+=this.str.charAt(i++)}return new ilib.Currency({locale:this.locale,sign:s,sync:r,onLoad:ilib.bind(this,function(e){this.currency=e,t&&"function"==typeof t.onLoad&&t.onLoad(this)})}),void 0}t&&"function"==typeof t.onLoad&&t.onLoad(this)})})}))}))},ilib.Number.prototype={getLocale:function(){return this.locale},toString:function(){return this.str},getCurrency:function(){return this.currency},valueOf:function(){return this.value}},ilib.Currency=function(e){this.sync=!0,e&&(e.code&&(this.code=e.code),e.locale&&(this.locale="string"==typeof e.locale?new ilib.Locale(e.locale):e.locale),e.sign&&(this.sign=e.sign),e.sync!==void 0&&(this.sync=e.sync),e.loadParams&&(this.loadParams=e.loadParams)),this.locale=this.locale||new ilib.Locale,ilib.data.currency===void 0?ilib.loadData({name:"currency.json",object:ilib.Currency,locale:"-",sync:this.sync,loadParams:this.loadParams,callback:ilib.bind(this,function(t){ilib.data.currency=t,this._loadLocinfo(e&&e.onLoad)
})}):this._loadLocinfo(e&&e.onLoad)},ilib.Currency.getAvailableCurrencies=function(){var e,t=[],i=new ilib.ResBundle({name:"currency"}).getResObj();for(e in i)e&&i[e]&&t.push(e);return t},ilib.Currency.prototype={_loadLocinfo:function(e){new ilib.LocaleInfo(this.locale,{onLoad:ilib.bind(this,function(t){var i;if(this.locinfo=t,this.code){if(i=ilib.data.currency[this.code],!i)throw"currency "+this.code+" is unknown"}else if(this.sign)if(i=ilib.data.currency[this.sign],i!==void 0)this.code=this.sign;else if(this.code=this.locinfo.getCurrency(),i=ilib.data.currency[this.code],i.sign!==this.sign)for(var n in ilib.data.currency)if(n&&ilib.data.currency[n]&&(i=ilib.data.currency[n],i.sign===this.sign)){this.code=n;break}i&&this.code||(this.code=this.locinfo.getCurrency(),i=ilib.data.currency[this.code]),this.name=i.name,this.fractionDigits=i.decimals,this.sign=i.sign,"function"==typeof e&&e(this)})})},getCode:function(){return this.code},getFractionDigits:function(){return this.fractionDigits},getSign:function(){return this.sign},getName:function(){return this.name},getLocale:function(){return this.locale}},ilib.NumFmt=function(e){var t=!0;this.locale=new ilib.Locale,this.type="number",this.useNative=!1,e&&(e.locale&&(this.locale="string"==typeof e.locale?new ilib.Locale(e.locale):e.locale),e.type&&("number"===e.type||"currency"===e.type||"percentage"===e.type)&&(this.type=e.type),e.currency&&(this.currency=e.currency),"number"==typeof e.maxFractionDigits&&(this.maxFractionDigits=this._toPrimitive(e.maxFractionDigits)),"number"==typeof e.minFractionDigits&&(this.minFractionDigits=this._toPrimitive(e.minFractionDigits)),e.style&&(this.style=e.style),e.useNative&&(this.useNative=e.useNative),this.roundingMode=e.roundingMode,e.sync!==void 0&&(t=1==e.sync)),this.localeInfo=void 0,new ilib.LocaleInfo(this.locale,{sync:t,onLoad:ilib.bind(this,function(i){if(this.localeInfo=i,"number"===this.type)this.templateNegative=new ilib.String(this.localeInfo.getNegativeNumberFormat()||"-{n}");else{if("currency"===this.type){var n;if(!this.currency||"string"!=typeof this.currency)throw"A currency property is required in the options to the number formatter constructor when the type property is set to currency.";return new ilib.Currency({locale:this.locale,code:this.currency,sync:t,onLoad:ilib.bind(this,function(t){this.currencyInfo=t,"common"!==this.style&&"iso"!==this.style&&(this.style="common"),"number"!=typeof this.maxFractionDigits&&"number"!=typeof this.minFractionDigits&&(this.minFractionDigits=this.maxFractionDigits=this.currencyInfo.getFractionDigits()),n=this.localeInfo.getCurrencyFormats(),this.template=new ilib.String(n[this.style]||n.common),this.templateNegative=new ilib.String(n[this.style+"Negative"]||n.commonNegative),this.sign="iso"===this.style?this.currencyInfo.getCode():this.currencyInfo.getSign(),this.roundingMode||(this.roundingMode=this.currencyInfo&&this.currencyInfo.roundingMode),this._init(),e&&"function"==typeof e.onLoad&&e.onLoad(this)})}),void 0}"percentage"===this.type&&(this.template=new ilib.String(this.localeInfo.getPercentageFormat()||"{n}%"),this.templateNegative=new ilib.String(this.localeInfo.getNegativePercentageFormat()||this.localeInfo.getNegativeNumberFormat()+"%"))}this._init(),e&&"function"==typeof e.onLoad&&e.onLoad(this)})})},ilib.NumFmt.getAvailableLocales=function(){return void 0},ilib.NumFmt.zeros="0000000000000000000000000000000000000000000000000000000000000000000000",ilib.NumFmt.prototype={_init:function(){if(this.maxFractionDigits<this.minFractionDigits&&(this.minFractionDigits=this.maxFractionDigits),this.roundingMode||(this.roundingMode=this.localeInfo.getRoundingMode()),this.roundingMode||(this.roundingMode="halfdown"),this.round=ilib._roundFnc[this.roundingMode],this.round||(this.roundingMode="halfdown",this.round=ilib._roundFnc[this.roundingMode]),this.prigroupSize=this.localeInfo.getPrimaryGroupingDigits(),this.secgroupSize=this.localeInfo.getSecondaryGroupingDigits(),this.groupingSeparator=this.useNative?this.localeInfo.getNativeGroupingSeparator():this.localeInfo.getGroupingSeparator(),this.decimalSeparator=this.useNative?this.localeInfo.getNativeDecimalSeparator():this.localeInfo.getDecimalSeparator(),this.useNative){var e=this.localeInfo.getNativeDigits()||this.localeInfo.getDigits();e&&(this.digits=e.split(""))}else{var t=this.localeInfo.getDigits();t&&"0123456789"!==t&&(this.digits=t.split(""))}this.exponentSymbol=this.localeInfo.getExponential()||"e"},_pad:function(e,t,i){return e.length>=t?e:i?ilib.NumFmt.zeros.substring(0,t-e.length)+e:e+ilib.NumFmt.zeros.substring(0,t-e.length)},_toPrimitive:function(e){var t=0;switch(typeof e){case"number":t=e;break;case"string":t=parseFloat(e);break;case"object":t=e.valueOf()}return t},_formatScientific:function(e){var t,i=new Number(e);if(this.maxFractionDigits!==void 0){var n,o,s=i.toExponential(),r=s.split("e"),a=r[0];n=r[1],o=Math.pow(10,this.maxFractionDigits),a=this.round(a*o)/o,t=""+a+this.exponentSymbol+n}else t=i.toExponential(this.minFractionDigits),"e"!==this.exponentSymbol&&(t=t.replace(/e/,this.exponentSymbol));return t},_formatStandard:function(e){var t,i;if(this.maxFractionDigits!==void 0&&this.maxFractionDigits>-1){var n=Math.pow(10,this.maxFractionDigits);e=this.round(e*n)/n}e=Math.abs(e);var o,s,r=(""+e).split("."),a=r[0],l=r[1];if(a=""+a,this.minFractionDigits>0&&(l=this._pad(l||"",this.minFractionDigits,!1)),this.secgroupSize>0){if(a.length>this.prigroupSize){var h=this.prigroupSize,c=a.length,d=c-h;a=a.slice(0,d)+this.groupingSeparator+a.slice(d);var u=a.substring(0,a.indexOf(this.groupingSeparator));for(i=u.length;i>this.secgroupSize;){var g=this.secgroupSize,p=u.length,f=p-g;a=a.slice(0,f)+this.groupingSeparator+a.slice(f),u=a.substring(0,a.indexOf(this.groupingSeparator)),i=u.length}}s=a}else if(0!==this.prigroupSize){for(o=ilib.mod(a.length-1,this.prigroupSize),s="",t=0;a.length-1>t;t++)s+=a.charAt(t),0===o&&(s+=this.groupingSeparator),o=ilib.mod(o-1,this.prigroupSize);s+=a.charAt(a.length-1)}else s=a;return l&&(this.maxFractionDigits===void 0||this.maxFractionDigits>0)&&(s+=this.decimalSeparator,s+=l),this.digits&&(s=ilib.mapString(s,this.digits)),s},format:function(e){var t,i;if(e===void 0)return"";if(i=this._toPrimitive(e),"number"===this.type)t="scientific"===this.style?this._formatScientific(i):this._formatStandard(i),0>e&&(t=this.templateNegative.format({n:t}));else{t=this._formatStandard(i);var n=0>i?this.templateNegative:this.template;t=n.format({n:t,s:this.sign})}return t},getType:function(){return this.type},getLocale:function(){return this.locale},isGroupingUsed:function(){return"undefined"!==this.groupingSeparator&&this.groupingSeparator.length>0},getMaxFractionDigits:function(){return this.maxFractionDigits!==void 0?this.maxFractionDigits:-1},getMinFractionDigits:function(){return this.minFractionDigits!==void 0?this.minFractionDigits:-1},getCurrency:function(){return this.currencyInfo&&this.currencyInfo.getCode()},getRoundingMode:function(){return this.roundingMode},getStyle:function(){return this.style}},ilib.DurFmt=function(e){var t=!0;this.locale=new ilib.Locale,this.length="short",this.style="text",e&&(e.locale&&(this.locale="string"==typeof e.locale?new ilib.Locale(e.locale):e.locale),e.length&&("short"===e.length||"medium"===e.length||"long"===e.length||"full"===e.length)&&(this.length=e.length),e.style&&("text"===e.style||"clock"===e.style)&&(this.style=e.style),e.sync!==void 0&&(t=1==e.sync)),new ilib.ResBundle({locale:this.locale,name:"sysres",sync:t,onLoad:ilib.bind(this,function(i){switch(this.length){case"short":this.components={year:i.getString("#{num}y"),month:i.getString("#{num}m","durationShortMonths"),week:i.getString("#{num}w"),day:i.getString("#{num}d"),hour:i.getString("#{num}h"),minute:i.getString("#{num}m","durationShortMinutes"),second:i.getString("#{num}s"),millisecond:i.getString("#{num}m","durationShortMillis"),separator:i.getString(" ","separatorShort"),finalSeparator:""};break;case"medium":this.components={year:i.getString("1#1 yr|#{num} yrs","durationMediumYears"),month:i.getString("1#1 mo|#{num} mos"),week:i.getString("1#1 wk|#{num} wks","durationMediumWeeks"),day:i.getString("1#1 dy|#{num} dys"),hour:i.getString("1#1 hr|#{num} hrs","durationMediumHours"),minute:i.getString("1#1 mi|#{num} min"),second:i.getString("1#1 se|#{num} sec"),millisecond:i.getString("#{num} ms"),separator:i.getString(" ","separatorMedium"),finalSeparator:""};break;case"long":this.components={year:i.getString("1#1 yr|#{num} yrs"),month:i.getString("1#1 mon|#{num} mons"),week:i.getString("1#1 wk|#{num} wks"),day:i.getString("1#1 day|#{num} days","durationLongDays"),hour:i.getString("1#1 hr|#{num} hrs"),minute:i.getString("1#1 min|#{num} min"),second:i.getString("1#1 sec|#{num} sec"),millisecond:i.getString("#{num} ms"),separator:i.getString(", ","separatorLong"),finalSeparator:""};break;case"full":this.components={year:i.getString("1#1 year|#{num} years"),month:i.getString("1#1 month|#{num} months"),week:i.getString("1#1 week|#{num} weeks"),day:i.getString("1#1 day|#{num} days"),hour:i.getString("1#1 hour|#{num} hours"),minute:i.getString("1#1 minute|#{num} minutes"),second:i.getString("1#1 second|#{num} seconds"),millisecond:i.getString("1#1 millisecond|#{num} milliseconds"),separator:i.getString(", ","separatorFull"),finalSeparator:i.getString(" and ","finalSeparatorFull")}}return"clock"===this.style?(new ilib.DateFmt({locale:this.locale,type:"time",time:"ms",sync:t,onLoad:ilib.bind(this,function(i){this.timeFmtMS=i,new ilib.DateFmt({locale:this.locale,type:"time",time:"hm",sync:t,onLoad:ilib.bind(this,function(i){this.timeFmtHM=i,new ilib.DateFmt({locale:this.locale,type:"time",time:"hms",sync:t,onLoad:ilib.bind(this,function(t){this.timeFmtHMS=t,this.timeFmtHM.template=this.timeFmtHM.template.replace(/hh?/,"H"),this.timeFmtHM.templateArr=this.timeFmtHM._tokenize(this.timeFmtHM.template),this.timeFmtHMS.template=this.timeFmtHMS.template.replace(/hh?/,"H"),this.timeFmtHMS.templateArr=this.timeFmtHMS._tokenize(this.timeFmtHMS.template),e&&"function"==typeof e.onLoad&&e.onLoad(this)})})})})})}),void 0):(e&&"function"==typeof e.onLoad&&e.onLoad(this),void 0)})})},ilib.DurFmt.complist={text:["year","month","week","day","hour","minute","second","millisecond"],clock:["year","month","week","day"]},ilib.DurFmt.prototype.format=function(e){var t,i,n,o=!0,s="";for(i=ilib.DurFmt.complist[this.style],t=i.length-1;t>=0;t--)e[i[t]]!==void 0&&0!=e[i[t]]&&(s.length>0&&(s=("full"===this.length&&o?this.components.finalSeparator:this.components.separator)+s,o=!1),s=this.components[i[t]].formatChoice(e[i[t]],{num:e[i[t]]})+s);return"clock"===this.style&&(n=e.hour!==void 0?e.second!==void 0?this.timeFmtHMS:this.timeFmtHM:this.timeFmtMS,s.length>0&&(s+=this.components.separator),s+=n._formatTemplate(e,n.templateArr)),new ilib.String(s)},ilib.DurFmt.prototype.getLocale=function(){return this.locale},ilib.DurFmt.prototype.getLength=function(){return this.length},ilib.DurFmt.prototype.getStyle=function(){return this.style},ilib.ScriptInfo=function(e,t){var i=!0,n=void 0;this.script=e,t&&(t.sync!==void 0&&(i=1==t.sync),t.loadParams!==void 0&&(n=t.loadParams)),ilib.ScriptInfo.cache||(ilib.ScriptInfo.cache={}),ilib.data.scripts?this.info=ilib.data.scripts[e]:ilib.loadData({object:ilib.ScriptInfo,locale:"-",name:"scripts.json",sync:i,loadParams:n,callback:ilib.bind(this,function(i){if(!i){i={Latn:{nb:215,nm:"Latin",lid:"Latin",rtl:!1,ime:!1,casing:!0}};var n=this.locale.getSpec().replace(/-/g,"_");ilib.ScriptInfo.cache[n]=i}ilib.data.scripts=i,this.info=e&&ilib.data.scripts[e],t&&"function"==typeof t.onLoad&&t.onLoad(this)})})},ilib.ScriptInfo.getAllScripts=function(){var e=[],t=void 0,i=ilib.data.scripts;for(t in i)t&&i[t]&&e.push(t);return e},ilib.ScriptInfo.prototype={getCode:function(){return this.info&&this.script},getCodeNumber:function(){return this.info&&this.info.nb||0},getName:function(){return this.info&&this.info.nm},getLongCode:function(){return this.info&&this.info.lid},getScriptDirection:function(){return this.info&&this.info.rtl!==void 0&&this.info.rtl?"rtl":"ltr"},getNeedsIME:function(){return this.info&&this.info.ime?!0:!1},getCasing:function(){return this.info&&this.info.casing?!0:!1}};

// lib/enyo-ilib/glue.js
(function(){function e(t,i,n,o,s){var r="resources/";if(o&&o.root!==void 0&&(r=o.root+"/"),i.length>0){var a=i.shift(),l=new enyo.Ajax({url:enyo.path.rewrite("$lib/enyo-ilib/ilib/locale/"+a)}),h=function(r,a){n.push(r.failed||"object"!=typeof a?void 0:a),i.length>0?e(t,i,n,o,s):s.call(t,n)};l.response(this,h),l.error(this,function(){var e=r+a,t=new enyo.Ajax({url:e});t.response(this,h),t.error(this,h),t.go()}),l.go()}}ilib.setLoaderCallback(enyo.bind(this,function(t,i,n,o){if(i){var s=[],r="resources/";return n&&n.root!==void 0&&(r=n.root+"/"),t.forEach(function(e){var t=new enyo.Ajax({url:enyo.path.rewrite("$lib/enyo-ilib/ilib/locale/"+e),sync:!0}),i=function(e,t){s.push(e.failed||"object"!=typeof t?void 0:t)};t.response(this,i),t.error(this,function(){var t=new enyo.Ajax({url:r+e,sync:!0});t.response(this,i),t.error(this,i),t.go()}),t.go()}),"function"==typeof o&&o.call(this,s),s}var a=[];e(this,t,a,n,o)})),window.UILocale!==void 0&&ilib.setLocale(window.UILocale),enyo.updateI18NClasses=function(){var e=new ilib.LocaleInfo,t=e.getLocale(),i="enyo-locale-";document&&document.body&&document.body.className&&document.body.className&&(document.body.className=document.body.className.replace(RegExp("(^|\\s)"+i+"[^\\s]*","g"),""));var n=["cs","hu","lv","lt","po","ro","sr","sl","tr","vi"],o=e.getScript();("Latn"!==o||-1!==n.indexOf(t.getLanguage()))&&enyo.dom.addBodyClass(i+"non-latin"),"Latn"!==o&&"Cyrl"!==o&&"Grek"!==o&&enyo.dom.addBodyClass(i+"non-italic");var s=new ilib.ScriptInfo(o);"rtl"===s.getScriptDirection()&&(enyo.dom.addBodyClass(i+"right-to-left"),enyo.Control&&(enyo.Control.prototype.rtl=!0)),t.getLanguage()&&(enyo.dom.addBodyClass(i+t.getLanguage()),t.getScript()?(enyo.dom.addBodyClass(i+t.getLanguage()+"-"+t.getScript()),t.getRegion()&&enyo.dom.addBodyClass(i+t.getLanguage()+"-"+t.getScript()+"-"+t.getRegion())):t.getRegion()&&enyo.dom.addBodyClass(i+t.getLanguage()+"-"+t.getRegion())),t.getScript()&&enyo.dom.addBodyClass(i+t.getScript()),t.getRegion()&&enyo.dom.addBodyClass(i+t.getRegion())}})(),$L=function(e){var t;if($L.rb||$L.setLocale(),"string"==typeof e){if(!$L.rb)return e;t=$L.rb.getString(e)}else if("object"==typeof e)if(e.key!==void 0&&e.value!==void 0){if(!$L.rb)return e.value;t=$L.rb.getString(e.value,e.key)}else t="";else t=e;return""+t},$L.setLocale=function(e){var t=new ilib.Locale(e);$L.rb&&e===$L.rb.getLocale().getSpec()||($L.rb=new ilib.ResBundle({locale:t,type:"html",name:"strings",sync:!0,lengthen:!0}))},enyo.updateLocale=function(){ilib.setLocale(navigator.language),$L.setLocale(navigator.language),enyo.updateI18NClasses()},enyo.updateLocale();

// source/harmonia/services/phonegap/I18n.js
var AresPBGI18n={},origin=window.location.origin||window.location.protocol+"//"+window.location.host,req=new enyo.Ajax({url:origin+"/res/language"});req.response(function(e,t){t.language?(enyo.log("PhoneGap Build service forced language:",t.language),AresPBGI18n.spec=t.language):AresPBGI18n.spec=navigator.language}),req.error(function(e,t){enyo.log("inError",t)}),req.go(),function(){var e=function(e,t){var i;if("string"==typeof t)i=e.getString(t);else{if("object"!=typeof t)throw"Parameter 'string' is not an object.";if(void 0===t.key||void 0===t.value)throw"Parameter 'string' is not well defined.";i=e.getString(t.value,t.key)}return""+i};AresPBGI18n.resolve=function(t,i,n){var o=e(t,i);if(n){var s=new ilib.String(o);return s.format(n)}return o},AresPBGI18n.setBundle=function(e){return new ilib.ResBundle({locale:new ilib.Locale(AresPBGI18n.spec),type:"html",name:"strings",sync:!0,lengthen:!0,loadParams:{root:e}})}}();

// source/harmonia/services/phonegap/PhonegapUiData.js
var ilibPGB=AresPBGI18n.resolve.bind(null,AresPBGI18n.setBundle("$assets/harmonia/services/phonegap/resources"));enyo.kind({name:"Phonegap.UIConfiguration",statics:{androidSdkVersions:{19:["Android 4.4"],18:["Android 4.3"],17:["Android 4.2, 4.2.2"],16:["Android 4.1, 4.1.1"],15:["Android 4.0.3, 4.0.4"],14:["Android 4.0, 4.0.1, 4.0.2"],13:["Android 3.2"],12:["Android 3.1.x"],11:["Android 3.0.x"],10:["Android 2.3.4, 2.3.3"],9:["Android 2.3.2, 2.3.1, 2.3"],8:["Android 2.2.x"],7:["Android 2.1.x"]},commonDrawersContent:[{id:"buildOption",name:ilibPGB("Build Options"),type:"Drawer",rows:[{name:"autoGenerateXML",label:ilibPGB("Generate config.xml file when building"),content:"",defaultValue:"true",type:"BuildOption"},{name:"minification",label:ilibPGB("Activate the build minification"),content:"",defaultValue:"true",type:"BuildOption"}]},{id:"applicationPermissions",name:ilibPGB("Application permissions"),type:"PanelInDrawer",rows:[{name:"battery",label:ilibPGB("Battery"),content:"",defaultValue:"",type:"CheckBoxRow",jsonSection:"features"},{name:"camera",label:ilibPGB("Camera"),content:"",defaultValue:"",type:"CheckBoxRow",jsonSection:"features"},{name:"contact",label:ilibPGB("Contact"),content:"",defaultValue:"",type:"CheckBoxRow",jsonSection:"features"},{name:"file",label:ilibPGB("File"),content:"",defaultValue:"",type:"CheckBoxRow",jsonSection:"features"},{name:"media",label:ilibPGB("Media"),content:"",defaultValue:"",type:"CheckBoxRow",jsonSection:"features"},{name:"geolocation",label:ilibPGB("Geolocation"),content:"",defaultValue:"",type:"CheckBoxRow",jsonSection:"features"},{name:"network",label:ilibPGB("Network"),content:"",defaultValue:"",type:"CheckBoxRow",jsonSection:"features"},{name:"notification",label:ilibPGB("Notification"),content:"",defaultValue:"",type:"CheckBoxRow",jsonSection:"features"},{name:"device",label:ilibPGB("Device"),content:"",defaultValue:"",type:"CheckBoxRow",jsonSection:"features"}]},{id:"sharedConfiguration",name:ilibPGB("Shared configuration"),type:"Drawer",rows:[{name:"phonegap-version",label:"Phonegap version",content:["3.1.0","3.0.0","2.9.0","2.7.0","2.5.0"],defaultValue:"3.1.0",type:"PickerRow",jsonSection:"preferences"},{name:"orientation",label:ilibPGB("Orientation"),content:["both","landscape","portrait"],defaultValue:"both",type:"PickerRow",jsonSection:"preferences"},{name:"target-device",label:ilibPGB("Target device"),content:["universal","handset","tablet"],defaultValue:"universal",type:"PickerRow",jsonSection:"preferences"},{name:"fullscreen",label:ilibPGB("Fullscreen mode"),content:["true","false"],defaultValue:"false",type:"PickerRow",jsonSection:"preferences"},{name:"access",label:ilibPGB("Access origin"),content:"",defaultValue:"http://127.0.0.1",type:"AccessRow",jsonSection:"preferences"},{name:"icon",label:ilibPGB("Icon"),content:"icon.png",defaultValue:"/icon.png",defaultWidth:"32",defaultHeight:"32",type:"ImgRow",description:"(px)"},{name:"splashScreen",label:ilibPGB("Splash screen"),content:"",defaultValue:"",defaultWidth:"60",defaultHeight:"60",type:"ImgRow",description:"(px)"}]}],platformDrawersContent:[{id:"android",name:ilibPGB("Google Android"),type:"Target",rows:[{name:"android-installLocation",label:ilibPGB("Install Location"),content:["internalOnly","preferExternal","auto"],defaultValue:"internalOnly",type:"PickerRow",jsonSection:"preferences"},{name:"android-minSdkVersion",label:ilibPGB("Min. API Level/Android Version "),content:[],defaultValue:"7",type:"SDKVersionRow",jsonSection:"preferences"},{name:"android-targetSdkVersion",label:ilibPGB("Target API Level/Android Version "),content:[],defaultValue:"None",type:"SDKVersionRow",jsonSection:"preferences",none:""},{name:"android-maxSdkVersion",label:ilibPGB("Max. API Level/Android Version "),content:[],defaultValue:"None",type:"SDKVersionRow",jsonSection:"preferences",none:""},{name:"android-windowSoftInputMode",label:ilibPGB("Window SoftInput Mode "),content:["stateVisible","adjustResize"],defaultValue:"stateVisible",type:"PickerRow",jsonSection:"preferences"},{name:"splash-screen-duration",label:ilibPGB("Splash screen Duration (ms)"),content:"5000",defaultValue:"5000",type:"NumberInputRow",jsonSection:"preferences",description:"Time in milliseconds"},{name:"load-url-timeout",label:ilibPGB("Load URL timeout (ms)"),content:"20000",defaultValue:"20000",type:"NumberInputRow",jsonSection:"preferences",description:"Time in milliseconds"},{name:"icon",label:ilibPGB("Icon"),content:"",defaultValue:"/icon.png",type:"AndroidImgRow"},{name:"splashScreen",label:ilibPGB("Splash screen"),content:"",defaultValue:"",type:"AndroidImgRow"},{name:"signingKey",label:ilibPGB("Signing Key"),content:"",defaultValue:"",type:"KeySelector",jsonSection:"targets"}]},{id:"ios",name:ilibPGB("Apple iOS"),type:"Target",rows:[{name:"webviewbounce",label:ilibPGB("Web view bounce"),content:["true","false"],defaultValue:"true",type:"PickerRow",jsonSection:"preferences"},{name:"prerendered-icon",label:ilibPGB("Prerendred icon"),content:["true","false"],defaultValue:"false",type:"PickerRow",jsonSection:"preferences"},{name:"ios-statusbarstyle",label:ilibPGB("Status Bar style"),content:["black-opaque","black-translucent","default"],defaultValue:"black-opaque",type:"PickerRow",jsonSection:"preferences"},{name:"detect-data-types",label:ilibPGB("Detect Data type"),content:["true","false"],defaultValue:"true",type:"PickerRow",jsonSection:"preferences"},{name:"exit-on-suspend",label:ilibPGB("Exit on suspend"),content:["true","false"],defaultValue:"false",type:"PickerRow",jsonSection:"preferences"},{name:"show-splash-screen-spinner",label:ilibPGB("Show splash screen spinner"),content:["true","false"],defaultValue:"false",type:"PickerRow",jsonSection:"preferences"},{name:"auto-hide-splash-screen",label:ilibPGB("Auto-hide splash screen"),content:["true","false"],defaultValue:"true",type:"PickerRow",jsonSection:"preferences"},{name:"icon",label:ilibPGB("Icon"),content:"",defaultValue:"/icon.png",defaultWidth:"",defaultHeight:"",type:"ImgRow",description:"(px)"},{name:"splashScreen",label:ilibPGB("Splash screen"),content:"",defaultValue:"",defaultWidth:"",defaultHeight:"",type:"ImgRow",description:"(px)"},{name:"signingKey",label:ilibPGB("Signing Key"),content:"",defaultValue:"",type:"KeySelector",jsonSection:"targets"}]},{id:"winphone",name:ilibPGB("Microsoft Windows Phone 7"),type:"Target",rows:[{name:"icon",label:ilibPGB("Icon"),content:"",defaultValue:"/icon.png",defaultWidth:"",defaultHeight:"",type:"ImgRow",description:"(px)"},{name:"splashScreen",label:ilibPGB("Splash screen"),content:"",defaultValue:"",defaultWidth:"",defaultHeight:"",type:"ImgRow",description:"(px)"}]},{id:"blackberry",name:ilibPGB("RIM Blackberry"),type:"Target",rows:[{name:"disable-cursor",label:ilibPGB("Disable Cursor"),content:["true","false"],defaultValue:"false",type:"PickerRow",jsonSection:"preferences"},{name:"icon",label:ilibPGB("Icon"),content:"",defaultValue:"/icon.png",defaultWidth:"",defaultHeight:"",type:"ImgRow",description:"(px)"},{name:"splashScreen",label:ilibPGB("Splash screen"),content:"",defaultValue:"",defaultWidth:"",defaultHeight:"",type:"ImgRow",description:"(px)"},{name:"signingKey",label:ilibPGB("Signing Key"),content:"",defaultValue:"",type:"KeySelector",jsonSection:"targets"}]},{id:"webos",name:ilibPGB("HP webOS 2"),type:"Target",rows:[{name:"icon",label:ilibPGB("Icon"),content:"",defaultValue:"/icon.png",defaultWidth:"",defaultHeight:"",type:"ImgRow",description:"(px)"},{name:"splashScreen",label:ilibPGB("Splash screen"),content:"",defaultValue:"",defaultWidth:"",defaultHeight:"",type:"ImgRow",description:"(px)"}]}]}});

// source/harmonia/services/phonegap/ProjectProperties.js
enyo.kind({name:"Phonegap.ProjectProperties",kind:"Ares.ProjectProperties",debug:!1,published:{config:{},project:void 0},events:{onError:"",onConfigure:""},handlers:{onRefresh:"_getUserData"},components:[{kind:"enyo.Scroller",fit:"true",classes:"ares-project-properties",components:[{kind:"FittableRows",components:[{content:"Sign-in is required",name:"signInErrorMsg",classes:"ares-project-properties-sign-in-msg"},{content:"Looking for Phonegap account data ...",name:"waitingForSignIn",classes:"ares-project-properties-sign-in-msg"},{kind:"FittableColumns",components:[{classes:"ares-row ares-align-left",name:"appIdRow",fit:!0,style:"width: 95%",components:[{kind:"Phonegap.ProjectProperties.AppId",name:"appIdSelector"}]},{style:"width: 5%",components:[{name:"phonegapBuildHelp",kind:"onyx.TooltipDecorator",components:[{name:"phonegapBuildButton",kind:"onyx.IconButton",src:"$assets/harmonia/services/images/Phonegap_build_help.png",ontap:"phonegapBuildClick"},{kind:"onyx.Tooltip",content:ilibPGB("PhoneGap Build Help"),classes:"ares-tooltip-last-phoneGap"}]}]}]},{name:"BuildOptionPanel",classes:"ares-project-properties-build-option-panel"},{kind:"Signals","plugin.phonegap.userDataRefreshed":"refresh"},{name:"targetsRows",kind:"FittableRows",classes:"ares-project-properties-targetsRows-display"}]}]}],commonDrawers:Phonegap.UIConfiguration.commonDrawersContent,platformDrawers:Phonegap.UIConfiguration.platformDrawersContent,phonegapBuildHelpBrowser:null,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.createAllDrawers(),this.trace("ilibPGB: Cancel=",ilibPGB("Cancel"))},createAllDrawers:function(){function e(e){var t;t="buildOption"===e.id?this.$.BuildOptionPanel:this.$.targetsRows,t.createComponent({name:e.id,classes:"applicationPermissions"===e.id?"":"ares-row",kind:"Phonegap.ProjectProperties."+e.type,targetId:e.id,drawerName:e.name,enabled:!1})}function t(t){enyo.forEach(t,function(t){e.call(this,t)},this)}function i(e,t){var i=function(e){return"autoGenerateXML"===e?this.$.targetsRows:void 0};enyo.forEach(t.rows,function(n){var o=i.call(this,n.name),s="drawer";e.$.panel&&(s="panel"),e.$[s].createComponent({kind:"Phonegap.ProjectProperties."+n.type,name:n.name,label:n.label,contentValue:n.content,value:n.defaultValue,jsonSection:n.jsonSection,platform:t.id,width:n.defaultWidth,height:n.defaultHeight,pan:o,description:n.description,none:n.none})},this)}function n(e){var t=0;enyo.forEach(e,function(e){var n=this.$.BuildOptionPanel.getComponents();n=n.concat(this.$.targetsRows.getComponents());var o=n[t];t++,enyo.forEach(this.commonDrawers.concat(this.platformDrawers),function(t){t.id===e.id&&i.call(this,o,t)},this)},this)}t.call(this,this.commonDrawers.concat(this.platformDrawers)),n.call(this,this.commonDrawers.concat(this.platformDrawers))},setProjectConfig:function(e){this.trace("Project config:",e),this.setConfig(e),this.$.appIdSelector.setSelectedAppId(e.appId||""),e.targets=e.targets||{},enyo.forEach(this.commonDrawers.concat(this.platformDrawers),function(t){"buildOption"===t.id?this.$.BuildOptionPanel.$[t.id].setProjectConfig(e):this.$.targetsRows.$[t.id].setProjectConfig(e)},this),this.refresh()},getProjectConfig:function(e){e.access={},e.features={},e.preferences={},e.icon={},e.splashScreen={},e.targets={},e.appId=this.$.appIdSelector.getSelectedAppId(),enyo.forEach(this.commonDrawers.concat(this.platformDrawers),function(t){"applicationPermissions"!==t.id&&"buildOption"!==t.id&&(e.icon[t.id]={},e.splashScreen[t.id]={}),"buildOption"===t.id?this.$.BuildOptionPanel.$[t.id].getProjectConfig(e):this.$.targetsRows.$[t.id].getProjectConfig(e)},this),this.trace("Project config:",e)},refresh:function(e,t){return this.trace("sender:",e,"value:",t),this.showErrorMsg("waitingSignIn"),this._getUserData(),!0},_getUserData:function(){var e=Phonegap.ProjectProperties.getProvider();this.config&&this.config.enabled&&e.authorize(enyo.bind(this,this.getUserData))},configure:function(e,t){this.trace("sender:",e,"value:",t),this.doConfigure({id:"phonegap"})},showErrorMsg:function(e){"userDataRecieved"===e?(this.$.appIdRow.show(),this.$.signInErrorMsg.hide(),this.$.waitingForSignIn.hide()):"signInError"===e?(this.$.signInErrorMsg.show(),this.$.appIdRow.hide(),this.$.waitingForSignIn.hide()):"waitingSignIn"===e&&(this.$.signInErrorMsg.hide(),this.$.appIdRow.hide(),this.$.waitingForSignIn.show())},getUserData:function(e,t){if(e)this.showErrorMsg("signInError"),this.doError({msg:""+e,err:e});else{this.showErrorMsg("userDataRecieved"),this.$.appIdSelector.setUserData(t);var i=Phonegap.ProjectProperties.getProvider();enyo.forEach(this.platformDrawers,function(e){var t=i.getKey(e.id);("android"===e.id||"ios"===e.id||"blackberry"===e.id)&&this.$.targetsRows.$[e.id].$.drawer.$.signingKey.setKeys(t)},this)}},activateInputRows:function(e){var t=this.findAllInputRows();enyo.forEach(t,function(t){t.setActivated(e)},this)},findAllInputRows:function(){var e=[],t=this.$.targetsRows;return enyo.forEach(enyo.keys(t.$),function(i){var n=t.$[i],o=n.$.drawer;enyo.forEach(enyo.keys(o.$),function(t){"icon"===o.$[t].name?e.push(o.$[t]):"splashScreen"===o.$[t].name&&e.push(o.$[t])},this)},this),e},phonegapBuildClick:function(){return this.phonegapBuildHelpBrowser&&!this.phonegapBuildHelpBrowser.closed?(this.phonegapBuildHelpBrowser.focus(),void 0):(this.phonegapBuildHelpBrowser=window.open("https://build.phonegap.com/docs","PhoneGap Build help","resizable=yes, dependent=yes, width=800, height=600"),void 0)},statics:{getProvider:function(){return this.provider=this.provider||ServiceRegistry.instance.resolveServiceId("phonegap"),this.provider}}}),enyo.kind({name:"Phonegap.ProjectProperties.Drawer",debug:!0,classes:"ares-drawer",published:{drawerName:"",config:{},fold:!0},handlers:{onEnableErrorHighLight:"enableDrawerHighLight",onDisableErrorHighLight:"disableDrawerHighLight"},components:[{name:"labelContainer",tag:"div",classes:"ares-project-properties-label-background",ontap:"unfold",components:[{tag:"label",name:"drawerLbl",classes:"ares-project-properties-common_drawer_header"}]},{name:"drawer",orient:"v",kind:"onyx.Drawer",open:!0}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.drawerNameChanged()},drawerNameChanged:function(){this.$.drawerLbl.setContent(this.drawerName)},setProjectConfig:function(e){this.setConfig(e),enyo.forEach(enyo.keys(this.$.drawer.$),function(t){"client"===t||"animator"===t||this.$.drawer.$[t].setProjectConfig(e)},this)},getProjectConfig:function(e){enyo.forEach(enyo.keys(this.$.drawer.$),function(t){"client"===t||"animator"===t||this.$.drawer.$[t].getProjectConfig(e)},this)},unfold:function(){var e=this.$.drawer.open;this.$.drawer.setOpen(!e)},enableDrawerHighLight:function(){this.$.labelContainer.setClassAttribute("ares-project-properties-label-background ares-project-properties-label-background_error")},disableDrawerHighLight:function(){this.$.labelContainer.setClassAttribute("ares-project-properties-label-background")}}),enyo.kind({name:"Phonegap.ProjectProperties.AppId",kind:"FittableRows",classes:"ares-project-properties-application-panel",debug:!1,published:{userData:void 0,selectedAppId:void 0,project:void 0},handlers:{onHideMessageContainer:"hideQrCodeImg",onShowMessageContainer:"showQrCodeImg"},components:[{kind:"FittableColumns",components:[{content:"Application"},{kind:"Ares.PickerDecorator",components:[{kind:"Ares.PickerButton",name:"appIdPickerButton",classes:"ares-project-properties-picker-AppId"},{kind:"onyx.Picker",name:"AppIdList",onSelect:"updateSelectedAppId"}]}]},{kind:"FittableColumns",components:[{kind:"Phonegap.ProjectProperties.BuildStatus",name:"buildStatusDisplay"},{kind:"Phonegap.ProjectProperties.QrCode",name:"applicationQrCode"}]}],create:function(){this.inherited(arguments),this.$.appIdPickerButton.setPickerContent(ilibPGB("Select AppId"))},userDataChanged:function(){this.clearPickerContent();var e={title:"",role:"owner",link:null};0===this.userData.user.apps.all.length?(this.$.AppIdList.createComponent({content:ilibPGB("New Application"),published:{applicationObject:e},active:!0}),this.setSelectedAppId("")):(this.selectedAppIdChanged(),this.$.AppIdList.createComponent({content:ilibPGB("New Application"),published:{applicationObject:e},active:!1}),enyo.forEach(this.userData.user.apps.all,function(e){var t=e.id===this.selectedAppId?!0:!1;this.$.AppIdList.createComponent({content:e.id+" - "+e.title,value:e.id,published:{applicationObject:e},active:t,classes:"ares-project-properties-picker-item-align-left"}),this.$.AppIdList.render()},this)),this.$.buildStatusDisplay.sendBuildStatusRequest()},updateSelectedAppId:function(e,t){this.$.buildStatusDisplay.$.statusMessage.setContent(""),t.content===ilibPGB("New Application")?this.setSelectedAppId(""):this.setSelectedAppId(t.selected.value)},selectedAppIdChanged:function(){this.$.buildStatusDisplay.setAppId(this.selectedAppId)},showQrCodeImg:function(){this.$.applicationQrCode.setAppId(this.selectedAppId),this.$.applicationQrCode.show()},hideQrCodeImg:function(){this.$.applicationQrCode.hide()},clearPickerContent:function(){for(var e in this.$.AppIdList.$)"onyx.MenuItem"===this.$.AppIdList.$[e].kind&&this.$.AppIdList.$[e].destroy();this.$.AppIdList.render()}}),enyo.kind({name:"Phonegap.ProjectProperties.Target",kind:"Phonegap.ProjectProperties.Drawer",debug:!1,classes:"ares-drawer",published:{targetId:"",enabled:"",keys:{}},components:[{name:"labelContainer",tag:"div",classes:"ares-project-properties-label-background",ontap:"unfold",components:[{name:"targetChkBx",kind:"onyx.Checkbox",onchange:"updateDrawer"},{tag:"label",name:"targetLbl",classes:"ares-project-properties-platform_drawer_header"}]},{name:"drawer",orient:"v",kind:"onyx.Drawer",open:!0}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.drawerNameChanged()},setProjectConfig:function(e){this.trace("id:",this.targetId,"config:",e),this.setEnabled(e&&e.targets[this.targetId]),enyo.forEach(enyo.keys(this.$.drawer.$),function(t){this.$.drawer.$[t].platform&&this.$.drawer.$[t].setProjectConfig(e)},this)},getProjectConfig:function(e){this.enabled&&(e.targets[this.targetId]={}),enyo.forEach(enyo.keys(this.$.drawer.$),function(t){"client"===t||"animator"===t||("signingKey"===t?this.enabled&&this.$.drawer.$.signingKey.getActiveKeyId()&&(e.targets[this.targetId].keyId=this.$.drawer.$.signingKey.getActiveKeyId(),e.targets[this.targetId].keyTitle=this.$.drawer.$.signingKey.getActiveKeyTitle()):this.$.drawer.$[t].getProjectConfig(e))},this),this.trace("id:",this.targetId,"config:",e)},drawerNameChanged:function(e){this.trace(e,"->",this.enabled),this.$.targetLbl.setContent(this.drawerName)},enabledChanged:function(e){this.trace("id:",this.targetId,e,"->",this.enabled),this.$.targetChkBx.setChecked(this.enabled),this.updateDrawer(),this.config=this.enabled?this.config||{}:!1},updateDrawer:function(){this.setEnabled(this.$.targetChkBx.checked)}}),enyo.kind({name:"PhoneGapGridArranger",kind:"GridArranger",colHeight:"30",colWidth:"150"}),enyo.kind({name:"Phonegap.ProjectProperties.PanelInDrawer",kind:"Phonegap.ProjectProperties.Drawer",debug:!1,classes:"ares-drawer",published:{targetId:"",enabled:"",keys:{}},components:[{tag:"div",classes:"ares-project-properties-label-background",ontap:"unfold",components:[{tag:"label",name:"targetLbl",classes:"ares-project-properties-common_drawer_header"}]},{name:"drawer",orient:"v",kind:"onyx.Drawer",open:!0,components:[{kind:"FittableRows",name:"row",components:[{name:"panel",kind:"Panels",arrangerKind:"PhoneGapGridArranger",fit:!0,realtimeFit:!0,draggable:!1,classes:"panels-phonegap-grid"}]}]}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.drawerNameChanged()},rendered:function(){this.inherited(arguments)},setProjectConfig:function(e){this.trace("id:",this.targetId,"config:",e),this.setEnabled(e&&e.targets[this.targetId]);var t=0;enyo.forEach(enyo.keys(this.$.panel.$),function(i){this.$.panel.$[i].platform&&(this.$.panel.$[i].setProjectConfig(e),t++)},this),this.$.row.applyStyle("height",2*(t/4)+"em")},getProjectConfig:function(e){this.enabled&&(e.targets[this.targetId]={}),enyo.forEach(enyo.keys(this.$.panel.$),function(t){"client"===t||"animator"===t||("signingKey"===t?this.enabled&&this.$.panel.$.signingKey.getActiveKeyId()&&(e.targets[this.targetId].keyTitle=this.$.panel.$.signingKey.getActiveKeyTitle()):this.$.panel.$[t].getProjectConfig(e))},this),this.trace("id:",this.targetId,"config:",e)},drawerNameChanged:function(e){this.trace(e,"->",this.enabled),this.$.targetLbl.setContent(this.drawerName)},enabledChanged:function(e){this.trace("id:",this.targetId,e,"->",this.enabled),this.config=this.enabled?this.config||{}:!1}});

// source/harmonia/services/phonegap/BuildStatusUI.js
enyo.kind({name:"Phonegap.ProjectProperties.PlatformBuildStatus",kind:"onyx.IconButton",ontap:"showStatusMessage",published:{platform:null,status:null},statusChanged:function(){return"complete"===this.status?(this.setSrc("$assets/harmonia/services/images/platforms/"+this.platform+"-logo-complete-32x32.png"),void 0):"error"===this.status?(this.show(),this.setSrc("$assets/harmonia/services/images/platforms/"+this.platform+"-logo-error-32x32.png"),void 0):(this.setSrc("$assets/harmonia/services/images/platforms/"+this.platform+"-logo-not-available-32x32.png"),void 0)}}),enyo.kind({name:"Phonegap.ProjectProperties.BuildStatus",kind:"FittableRows",buildStatusData:{},published:{appId:"",phongapUrl:"https://build.phonegap.com",provider:{},selectedPlatform:null},events:{onError:""},handlers:{onUpdateStatusMessage:"updateDownloadMessageContent"},components:[{name:"buildStatusContainer",kind:"FittableRows",classes:"ares-project-properties-build-status-container",components:[{name:"platformIconContainer",classes:"ares-project-properties-platform-icon-container",kind:"FittableColumns"},{name:"downloadStatus",kind:"Phonegap.ProjectProperties.DownloadStatus"},{name:"messageContainer",classes:"ares-project-properties-status-message-container",showing:!1,components:[{name:"hideStatusContainer",kind:"onyx.IconButton",src:"$assets/project-view/images/close-button-16x16.png",classes:"ares-project-properties-hide-status-button",ontap:"hideMessageContainer"},{name:"statusMessage",classes:"ares-project-properties-status-message"}]},{kind:"FittableColumns",style:"height: 32px; position: relative; top:-6em;",components:[{name:"separatorForDownloadButton"},{name:"downloadButton",kind:"onyx.IconButton",src:"$assets/harmonia/services/images/download-icon.png",showing:!1,ontap:"downloadPackage"}]}]}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.createIconButtons(),this.appIdChanged(),this.setProvider(Phonegap.ProjectProperties.getProvider())},createIconButtons:function(){for(var e=0,t=Phonegap.UIConfiguration.platformDrawersContent.length;t>e;e++){var i=Phonegap.UIConfiguration.platformDrawersContent[e].id;this.$.platformIconContainer.createComponent({name:i+"Decorator",classes:"ares-project-properties-build-status-icon",components:[{name:i+"Button",kind:"Phonegap.ProjectProperties.PlatformBuildStatus",platform:i}]},{owner:this})}},updateBuildStatusData:function(e){this.buildStatusData=e;var t=!1;for(var i in this.buildStatusData&&this.buildStatusData.status)"pending"===this.buildStatusData.status[i]&&(t=!0);t&&enyo.job("updateBuildStatus",function(){this.sendBuildStatusRequest()}.bind(this),3e3);for(var n in this.$){var o=this.$[n].platform,s=this.buildStatusData&&this.buildStatusData.status[o];void 0!==o&&this.$[n].setStatus(s||"notAvailable")}null!==this.selectedPlatform&&this.showStatusMessage({platform:this.selectedPlatform})},sendBuildStatusRequest:function(){""===this.appId||void 0===this.appId?this.updateBuildStatusData(null):this.provider.getAppData(this.appId,enyo.bind(this,this.getBuildStatusData))},updateDownloadMessageContent:function(){return this.$.statusMessage.setContent(this.$.downloadStatus.getDownloadStatus(this.selectedPlatform)),this.$.statusMessage.show(),this.updateDownloadMessageDisplay(this.selectedPlatform),!0},addHightlightIconButton:function(e){this.removeHightlightIconButton(),e.addClass("ares-project-properties-buildStatus-icon-highlight")},removeHightlightIconButton:function(){for(var e=0,t=Phonegap.UIConfiguration.platformDrawersContent.length;t>e;e++){var i=Phonegap.UIConfiguration.platformDrawersContent[e].id;this.$[i+"Decorator"].removeClass("ares-project-properties-buildStatus-icon-highlight")}},updateDownloadMessageDisplay:function(e){var t="ares-project-properties-buildStatus-download-button-"+e;this.$.separatorForDownloadButton.setClassAttribute(t),this.$.downloadButton.show(),this.bubble("onShowMessageContainer")},showStatusMessage:function(e){this.setSelectedPlatform(e.platform),this.$.messageContainer.show(),this.addHightlightIconButton(this.$[e.platform+"Decorator"]);var t=this.buildStatusData&&this.buildStatusData.status[e.platform];return"complete"===t?(this.updateDownloadMessageContent(),this.updateDownloadMessageDisplay(e.platform),!0):(this.$.downloadButton.hide(),this.bubble("onHideMessageContainer"),"skip"===t?(this.$.statusMessage.setContent(ilibPGB("Build skipped for this platform")),!0):"pending"===t?(this.$.statusMessage.setContent(ilibPGB("Build in progress")),!0):"error"===t?(this.$.statusMessage.setContent("Error: "+this.buildStatusData.error[e.platform]),!0):(this.$.statusMessage.setContent(ilibPGB("Application not built yet")),!0))},downloadPackage:function(){this.provider.downloadPackage(this.provider.getSelectedProject(),this.selectedPlatform,this.buildStatusData,enyo.bind(this,this.getPackage)),this.$.downloadStatus.setDownloadStatus(this.selectedPlatform,2)},getPackage:function(e){e?this.$.downloadStatus.setDownloadStatus(this.selectedPlatform,0):this.$.downloadStatus.setDownloadStatus(this.selectedPlatform,1)},hideMessageContainer:function(){this.setSelectedPlatform(void 0),this.removeHightlightIconButton(),this.$.messageContainer.hide(),this.$.downloadButton.hide(),this.bubble("onHideMessageContainer")},hideMessageContent:function(){this.$.downloadButton.hide()},appIdChanged:function(){this.sendBuildStatusRequest()},getBuildStatusData:function(e,t){e?this.doError({msg:""+e,err:e}):this.updateBuildStatusData(t.user)}}),enyo.kind({name:"Phonegap.ProjectProperties.DownloadStatus",provider:{},create:function(){this.inherited(arguments),this.set("provider",Phonegap.ProjectProperties.getProvider())},setDownloadStatus:function(e,t){this.provider.getSelectedProject().getDownloadStatus()[e]=1===t?ilibPGB("Download complete"):0===t?ilibPGB("Download failed"):ilibPGB("Download in progress"),this.bubble("onUpdateStatusMessage")},getDownloadStatus:function(e){return this.provider.getSelectedProject().getDownloadStatus()[e]}});

// source/harmonia/services/phonegap/PhonegapUIRows.js
enyo.kind({name:"Phonegap.ProjectProperties.Row",kind:"FittableColumns",classes:"ares-project-properties-drawer-row",debug:!1,published:{label:void 0,name:void 0,value:void 0,jsonSection:void 0,platform:void 0,description:void 0,err:null},events:{onEnableOkButton:"",onDisableOkButton:"",onEnableErrorHighLight:"",onDisableErrorHighLight:""},create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.errChanged()},getDrawer:function(){return this.container.container},getPhonegapProvider:function(){return Phonegap.ProjectProperties.getProvider()},getProjectInstance:function(){var e=this.getPhonegapProvider();return e.getSelectedProject()},getProjectInstanceAttribute:function(e){return this.getProjectInstance().getConfig().data.providers.phonegap[e]},errChanged:function(e){this.trace("err:",this.err&&""+this.err,"<-",e&&""+e),e&&!this.err?(this.doEnableOkButton(),this.disableDrawerHighLight()):!e&&this.err&&(this.warn(this.err),this.doDisableOkButton({reason:""+this.err}))},disableDrawerHighLight:function(){var e=Phonegap.ProjectProperties.getProvider(),t=e.getSelectedProject().getValidPgbConf();for(var i in t[this.platform])t[this.platform][i]||(t[this.platform].validDrawer=!1);t[this.platform].validDrawer&&this.doDisableErrorHighLight()}}),enyo.kind({name:"Phonegap.ProjectProperties.Panel",debug:!1,published:{label:void 0,name:void 0,value:void 0,jsonSection:void 0,platform:void 0,description:void 0,err:null},events:{onEnableOkButton:"",onDisableOkButton:""},create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.errChanged()},errChanged:function(e){this.trace("err:",this.err&&""+this.err,"<-",e&&""+e),e&&!this.err?this.doEnableOkButton():!e&&this.err&&(this.warn(this.err),this.doDisableOkButton({reason:""+this.err}))}}),enyo.kind({name:"Phonegap.ProjectProperties.CheckBoxRow",kind:"Phonegap.ProjectProperties.Panel",debug:!1,published:{activated:!1},components:[{components:[{kind:"onyx.Checkbox",name:"configurationCheckBox",classes:"ares-project-properties-drawer-row-check-box-label",onchange:"updateConfigurationValue"},{name:"label",tag:"label",classes:"ares-project-properties-label",content:this.label}]}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.labelChanged()},labelChanged:function(){this.$.label.setContent(this.label)},valueChanged:function(){this.$.configurationCheckBox.setChecked(this.value)},updateConfigurationValue:function(e){return this.setValue(e.getValue()),!0},setProjectConfig:function(e){this.setValue(e[this.jsonSection][this.name])},getProjectConfig:function(e){e[this.jsonSection][this.name]=this.getValue()}}),enyo.kind({name:"Phonegap.ProjectProperties.InputRow",kind:"Phonegap.ProjectProperties.Row",classes:"ares-project-properties-drawer-row",debug:!1,events:{onInputButtonTap:"",onPathChecked:""},published:{value:"",inputTip:""},components:[{name:"label",classes:"ares-project-properties-drawer-row-label"},{kind:"onyx.InputDecorator",classes:"ares-project-properties-input-medium",components:[{kind:"onyx.Input",name:"configurationInput",onchange:"updateConfigurationValue"}]},{name:"errorMsg",content:ilibPGB("The value must be a number"),showing:!1,classes:"ares-project-properties-input-error-message"}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.labelChanged(),this.$.configurationInput.setAttribute("placeholder",this.description),this.valueChanged(),this.inputTipChanged()},labelChanged:function(){this.$.label.setContent(this.label)},valueChanged:function(){this.$.configurationInput.setValue(this.value)},inputTipChanged:function(){this.$.configurationInput.setAttribute("title",this.inputTip)},updateConfigurationValue:function(e){return this.setValue(e.getValue()),!0},setProjectConfig:function(e){this.setValue(e[this.jsonSection][this.name])},getProjectConfig:function(e){e[this.jsonSection][this.name]=this.getValue()}}),enyo.kind({name:"Phonegap.ProjectProperties.NumberInputRow",kind:"Phonegap.ProjectProperties.InputRow",updateConfigurationValue:function(e){if(isNaN(e.getValue())){var t=Error(""+this.$.label.getContent()+": '"+(""+e.getValue())+"' is not a number");this.$.errorMsg.setContent(""+t),this.$.errorMsg.show(),this.doEnableErrorHighLight(),this.setErr(t)}else this.$.errorMsg.hide(),this.setValue(e.getValue()),this.setErr(null);return!0}}),enyo.kind({name:"Phonegap.ProjectProperties.BuildOption",kind:"Phonegap.ProjectProperties.Panel",classes:"ares-project-properties-drawer-row",published:{pan:""},debug:!1,components:[{kind:"onyx.Checkbox",name:"configurationCheckBox",classes:"ares-project-properties-drawer-row-check-box-label",onchange:"updateConfigurationValue"},{tag:"label",name:"label",classes:"ares-project-properties-label",content:this.label}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.labelChanged()},labelChanged:function(){this.$.label.setContent(this.label)},valueChanged:function(){this.$.configurationCheckBox.setChecked(this.value)},updateConfigurationValue:function(e){return this.setValue(e.getValue()),this.displayConfigXmlPanel(),!0},displayConfigXmlPanel:function(){"autoGenerateXML"===this.name&&(this.trace("auto-generate config.xml is enabled: ",this.getValue()),this.pan&&(this.getValue()?this.pan.show():this.pan.hide()))},setProjectConfig:function(e){this.setValue(e[this.name]),this.displayConfigXmlPanel()},getProjectConfig:function(e){e[this.name]=this.getValue()}}),enyo.kind({name:"Phonegap.ProjectProperties.AccessRow",kind:"Phonegap.ProjectProperties.Row",classes:"ares-project-properties-drawer-row",debug:!1,components:[{name:"label",classes:"ares-project-properties-drawer-row-label"},{kind:"onyx.InputDecorator",classes:"ares-project-properties-input-medium",components:[{kind:"onyx.Input",name:"configurationInput",onchange:"updateConfigurationValue"}]},{name:"addButton",kind:"onyx.IconButton",src:"$assets/harmonia/services/images/add-icon-25x25.png",ontap:"addAccessRow"}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.labelChanged()},labelChanged:function(){this.$.label.setContent(this.label)},valueChanged:function(){this.$.configurationInput.setValue(this.value)},updateConfigurationValue:function(e){return this.setValue(e.getValue()),!0},setProjectConfig:function(e){this.setValue(e.access.origin),this.valueChanged(),this.initializeAddedAccessRows(e)},getProjectConfig:function(e){e.access.origin=this.getValue()},initializeAddedAccessRows:function(e){for(var t in e.access)"origin"!==t&&(this.container.$[t]!==void 0?this.container.$[t].set("value",e.access[t]):this.addAccessRow().set("value",e.access[t]))},addAccessRow:function(){var e=this.container.createComponent({kind:"Phonegap.ProjectProperties.AddedAccessRow"},{addBefore:this.container.$.icon});return this.container.render(),e}}),enyo.kind({name:"Phonegap.ProjectProperties.AddedAccessRow",kind:"Phonegap.ProjectProperties.Row",classes:"ares-project-properties-drawer-row",debug:!1,components:[{name:"label",classes:"ares-project-properties-drawer-row-label"},{kind:"onyx.InputDecorator",name:"AccessRowDecorator",classes:"ares-project-properties-input-medium",components:[{kind:"onyx.Input",name:"configurationInput",onchange:"updateConfigurationValue"}]},{name:"deleteButton",kind:"onyx.IconButton",parentRowName:"",src:"$assets/harmonia/services/images/delete-icon-25x25.png",ontap:"deleteAccessRow"}],create:function(){this.inherited(arguments),this.$.deleteButton.set("parentRowName",this.name)},valueChanged:function(){this.$.configurationInput.setValue(this.value)},updateConfigurationValue:function(e){return this.setValue(e.getValue()),!0},setProjectConfig:function(){},getProjectConfig:function(e){e.access[this.name]=this.getValue()},deleteAccessRow:function(e){delete this.getProjectInstanceAttribute("access")[e.get("parentName")],this.destroy()}}),enyo.kind({name:"Phonegap.ProjectProperties.PickerRow",kind:"Phonegap.ProjectProperties.Row",classes:"ares-project-properties-drawer-row",debug:!1,published:{contentValue:void 0},none:void 0,components:[{name:"label",classes:"ares-project-properties-drawer-row-label"},{kind:"Ares.PickerDecorator",components:[{name:"configurationPickerButton",classes:"ares-project-properties-picker"},{kind:"onyx.Picker",name:"configurationPicker",onSelect:"updateConfigurationValue"}]},{name:"errorMsg",content:ilibPGB("The value must be a number"),showing:!1,classes:"ares-project-properties-input-error-message"}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.labelChanged(),this.contentValueChanged()},labelChanged:function(){this.$.label.setContent(this.label)},contentValueChanged:function(){this.addNoneElement(this.none),enyo.forEach(this.contentValue,function(e){var t=e===this.value?!0:!1;this.$.configurationPicker.createComponent({content:e,active:t})},this)},addNoneElement:function(e){void 0!==this.none&&this.$.configurationPicker.createComponent({content:ilibPGB("None"),value:e,active:!1})},activatePickerItemByContent:function(e){for(var t in this.$.configurationPicker.$)"onyx.MenuItem"===this.$.configurationPicker.$[t].kind&&(this.$.configurationPicker.$[t].active=!1,this.$.configurationPicker.$[t].content===e&&this.$.configurationPicker.setSelected(this.$.configurationPicker.$[t]))},valueChanged:function(){this.activatePickerItemByContent(this.value)},updateConfigurationValue:function(e,t){return this.checkActiveValue(t.content)?this.showErrorMessage(t.content,this.name,ilibPGB("Not an allowed value. Select another one using the picker.")):(this.hideErrorMessage(this.name),this.contentValueChanged(),this.setValue(t.content)),!0},showErrorMessage:function(e,t,i){var n=Error(""+this.$.label.getContent()+": '"+e+"' is not an allowed value");this.container.$[t].$.configurationPickerButton.setContent(e),this.container.$[t].$.errorMsg.setContent(i),this.container.$[t].$.errorMsg.show(),this.doEnableErrorHighLight(),this.setErr(n)},checkActiveValue:function(e){var t=!0;return enyo.forEach(this.contentValue,function(i){e===i&&(t=!1)},this),t},hideErrorMessage:function(e){this.container.$[e].$.errorMsg.hide(),this.setErr(null)},setProjectConfig:function(e){this.checkActiveValue(e[this.jsonSection][this.name])?this.showErrorMessage(e[this.jsonSection][this.name],this.name,ilibPGB("Not an allowed value. Select another one using the picker.")):(this.hideErrorMessage(this.name),this.setValue(e[this.jsonSection][this.name]))},getProjectConfig:function(e){e[this.jsonSection][this.name]=this.getValue()}}),enyo.kind({name:"Phonegap.ProjectProperties.SDKVersionRow",kind:"Phonegap.ProjectProperties.PickerRow",contentValueChanged:function(){this.addNoneElement(this.none),Object.keys(Phonegap.UIConfiguration.androidSdkVersions).sort(function(e,t){return e-t}).forEach(function(e){var t=e===this.value?!0:!1;this.$.configurationPicker.createComponent({classes:"ares-project-properties-api-version-picker-element",content:e+" / "+Phonegap.UIConfiguration.androidSdkVersions[e],value:e,active:t})}.bind(this))},activatePickerItemByContent:function(e){for(var t in this.$.configurationPicker.$)"onyx.MenuItem"===this.$.configurationPicker.$[t].kind&&(this.$.configurationPicker.$[t].active=!1,this.$.configurationPicker.$[t].value===e&&this.$.configurationPicker.setSelected(this.$.configurationPicker.$[t]))},updateConfigurationValue:function(e,t){var i=parseInt(this.container.$["android-minSdkVersion"].value,10),n=parseInt(this.container.$["android-maxSdkVersion"].value,10),o=parseInt(this.container.$["android-targetSdkVersion"].value,10),s=parseInt(t.selected.value,10);switch(this.name){case"android-maxSdkVersion":n=s;break;case"android-minSdkVersion":i=s;break;case"android-targetSdkVersion":o=s}var r,a,l,h;if(r=!isNaN(o)&&o>=i&&n>=o,a=!isNaN(o)&&isNaN(n)&&o>=i,l=isNaN(o)&&n>=i,h=isNaN(o)&&isNaN(n),r||a||l||h)this.container.$["android-minSdkVersion"].hideErrorMessage("android-minSdkVersion"),this.container.$["android-maxSdkVersion"].hideErrorMessage("android-maxSdkVersion"),this.container.$["android-targetSdkVersion"].hideErrorMessage("android-targetSdkVersion");else{var c=this.container.$["android-minSdkVersion"].$.configurationPickerButton.content,d=this.container.$["android-maxSdkVersion"].$.configurationPickerButton.content,u=this.container.$["android-targetSdkVersion"].$.configurationPickerButton.content;this.container.$["android-minSdkVersion"].showErrorMessage(c,"android-minSdkVersion",ilibPGB("Inconsistent API level values")),this.container.$["android-maxSdkVersion"].showErrorMessage(d,"android-maxSdkVersion",ilibPGB("Inconsistent API level values")),this.container.$["android-targetSdkVersion"].showErrorMessage(u,"android-targetSdkVersion",ilibPGB("Inconsistent API level values"))}return this.setValue(t.selected.value),!0},setProjectConfig:function(e){this.setValue(e[this.jsonSection][this.name])},getProjectConfig:function(e){e[this.jsonSection][this.name]=this.getValue()}}),enyo.kind({name:"Phonegap.ProjectProperties.AndroidImgRow",kind:"Phonegap.ProjectProperties.Row",classes:"ares-project-properties-drawer-row",debug:!1,published:{density:"",inputTip:"",activated:!1,status:!1,buttonTip:""},events:{onInputButtonTap:"",onPathChecked:""},handlers:{onFileChooserAction:"pathInputTap"},components:[{name:"label",classes:"ares-project-properties-drawer-row-label"},{kind:"Ares.FileChooserInput",name:"AndroidImgPath",inputDisabled:!0,inputClasses:"ares-project-properties-input-icon"},{kind:"onyx.PickerDecorator",classes:"ares-project-properties-picker-small",components:[{kind:"onyx.PickerButton"},{kind:"onyx.Picker",name:"AndroidDensity",onSelect:"updateAndroidIconDensity",components:[{content:"ldpi"},{content:"mdpi",active:!0},{content:"hdpi"},{content:"xdpi"}]}]}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.labelChanged(),this.valueChanged(),this.inputTipChanged(),this.activatedChanged(),this.statusChanged(),this.buttonTipChanged()},labelChanged:function(){this.$.label.setContent(this.label)},densityChanged:function(){this.activatePickerItemByContent(this.density)},activatePickerItemByContent:function(e){for(var t in this.$.AndroidDensity.controls)"onyx.MenuItem"===this.$.AndroidDensity.controls[t].kind&&(this.$.AndroidDensity.controls[t].active=!1,this.$.AndroidDensity.controls[t].content===e&&this.$.AndroidDensity.setSelected(this.$.AndroidDensity.controls[t]))},updateAndroidIconDensity:function(e,t){return this.setDensity(t.content),!0},valueChanged:function(){this.$.AndroidImgPath.setPathValue(this.value),this.setStatus(!0)},inputTipChanged:function(){this.$.AndroidImgPath.setInputTip(this.inputTip)},activatedChanged:function(){this.$.AndroidImgPath.setActivePathInputButton(this.activated),this.activated&&(this.statusChanged(),this.$.AndroidImgPath.statusChanged())},statusChanged:function(){this.$.AndroidImgPath.setStatus(this.status)},buttonTipChanged:function(){this.$.AndroidImgPath.setButtonTip(this.buttonTip)},pathInputTap:function(){var e="";return"icon"===this.name?e=ilibPGB("Select an icon file"):"splashScreen"===this.name&&(e=ilibPGB("Select a splashscreen file")),this.doInputButtonTap({header:e}),!0},setProjectConfig:function(e){this.setValue(e[this.name].android.src),this.setDensity(e[this.name].android.density)},getProjectConfig:function(e){e[this.name][this.platform].src=this.getValue(),e[this.name][this.platform].density=this.getDensity()}}),enyo.kind({name:"Phonegap.ProjectProperties.ImgRow",kind:"Phonegap.ProjectProperties.Row",classes:"ares-project-properties-drawer-row",debug:!1,events:{onInputButtonTap:"",onPathChecked:""},handlers:{onFileChooserAction:"pathInputTap"},published:{height:"",width:"",description:void 0,activated:!1,status:!1,buttonTip:""},components:[{name:"label",classes:"ares-project-properties-drawer-row-label"},{kind:"Ares.FileChooserInput",name:"ImgPath",inputDisabled:!0,inputClasses:"ares-project-properties-input-icon"},{content:"Height",classes:"ares-project-properties-drawer-row-attribute-label"},{kind:"onyx.InputDecorator",classes:"ares-project-properties-input-small",components:[{kind:"onyx.Input",name:"ImgHeight",onchange:"updateIconHeightValue"}]},{content:"Width",classes:"ares-project-properties-drawer-row-attribute-label"},{kind:"onyx.InputDecorator",classes:"ares-project-properties-input-small",components:[{kind:"onyx.Input",name:"ImgWidth",onchange:"updateIconWidhtValue"}]},{name:"errorMsg",showing:!1,classes:"ares-project-properties-input-error-message small"}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.labelChanged(),this.valueChanged(),this.inputTipChanged(),this.activatedChanged(),this.statusChanged(),this.buttonTipChanged(),this.heightChanged(),this.widthChanged(),this.$.ImgWidth.setAttribute("placeholder",this.description),this.$.ImgHeight.setAttribute("placeholder",this.description)},labelChanged:function(){this.$.label.setContent(this.label)},heightChanged:function(){if(isNaN(this.$.ImgHeight.value)||isNaN(this.$.ImgWidth.value)){var e=Error("Height and Width values must be numbers");this.doEnableErrorHighLight(),this.$.errorMsg.setContent(ilibPGB(""+e)),this.$.errorMsg.show(),this.doEnableErrorHighLight(),this.setErr(e)}else this.$.errorMsg.hide(),this.$.ImgHeight.setValue(this.height||""),this.setErr(null)},widthChanged:function(){if(isNaN(this.$.ImgHeight.value)||isNaN(this.$.ImgWidth.value)){var e=Error("Height and Width values must be numbers");this.doEnableErrorHighLight(),this.$.errorMsg.setContent(ilibPGB(""+e)),this.doEnableErrorHighLight(),this.$.errorMsg.show(),this.setErr(e)}else this.$.errorMsg.hide(),this.$.ImgHeight.setValue(this.width||""),this.setErr(null)},updateIconHeightValue:function(e){return this.setHeight(e.getValue()),!0},updateIconWidhtValue:function(e){return this.setWidth(e.getValue()),!0},valueChanged:function(){this.$.ImgPath.setPathValue(this.value),this.setStatus(!0)},inputTipChanged:function(){this.$.ImgPath.setInputTip(this.inputTip)},activatedChanged:function(){this.$.ImgPath.setActivePathInputButton(this.activated),this.activated&&(this.statusChanged(),this.$.ImgPath.statusChanged())},statusChanged:function(){this.$.ImgPath.setStatus(this.status)},buttonTipChanged:function(){this.$.ImgPath.setButtonTip(this.buttonTip)},pathInputTap:function(){var e="";return"icon"===this.name?e=ilibPGB("Select an icon file"):"splashScreen"===this.name&&(e=ilibPGB("Select a splashscreen file")),this.doInputButtonTap({header:e}),!0},setProjectConfig:function(e){this.setValue(e[this.name][this.platform].src),this.setHeight(e[this.name][this.platform].height),this.setWidth(e[this.name][this.platform].width)},getProjectConfig:function(e){e[this.name][this.platform].src=this.getValue(),e[this.name][this.platform].height=this.getHeight(),e[this.name][this.platform].width=this.getWidth()}}),enyo.kind({name:"Phonegap.ProjectProperties.KeySelector",debug:!1,kind:"Phonegap.ProjectProperties.Row",published:{keys:void 0,activeKeyId:void 0,activeKeyTitle:void 0,provider:void 0},components:[{name:"label",classes:"ares-project-properties-drawer-row-label"},{name:"activeSigningKey",classes:"ares-project-properties-show-sk"},{name:"loadingSingingKeys"},{name:"noSigningKeys",content:ilibPGB("No signing keys for this platform"),showing:!1},{name:"signingKeysContainer",showing:!1,kind:"FittableRows",components:[{name:"keyPicker",kind:"Ares.PickerDecorator",onSelect:"selectKey",components:[{kind:"Ares.PickerButton",name:"keyPickerButton",classes:"ares-project-properties-picker"},{kind:"onyx.Picker",name:"keys"}]},{kind:"onyx.InputDecorator",classes:"ares-project-properties-margin-right",showing:!1,name:"passwdFrm",components:[{name:"keyPasswd",kind:"onyx.Input",classes:"ares-project-properties-password",type:"password",placeholder:ilibPGB("Password")}]},{kind:"onyx.InputDecorator",name:"keystorePasswdFrm",showing:!1,classes:"ares-project-properties-margin-right",components:[{name:"keystorePasswd",kind:"onyx.Input",classes:"ares-project-properties-password",type:"password",placeholder:ilibPGB("Keystore password")}]},{kind:"onyx.Button",content:ilibPGB("Save"),ontap:"savePassword",showing:!1,classes:"ares-project-properties-margin-right",name:"saveButton"}]}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.labelChanged(),this.setProvider(Phonegap.ProjectProperties.getProvider()),this.$.keyPickerButton.setPickerContent(ilibPGB("Choose...")),this.activeKeyIdChanged()},labelChanged:function(){this.$.label.setContent(this.label)},activeKeyTitleChanged:function(){this.$.activeSigningKey.setContent(this.getActiveKeyTitle()),this.$.loadingSingingKeys.setContent(ilibPGB(" Loading signing keys ..."))},setProjectConfig:function(e){var t=e[this.jsonSection][this.platform];this.setValue(t&&t.keyId),this.setActiveKeyId(t&&t.keyId),this.setActiveKeyTitle(t&&t.keyTitle||"")},getProjectConfig:function(e){e[this.jsonSection][this.platform].keyId=this.getValue()},keysChanged:function(){this.keys=this.keys||[],this.clearPickerContent();var e=function(e,t){void 0===this.$.keys.$[e.id]&&this.$.keys.createComponent({name:e.id,content:e.title,active:t})};this.$.loadingSingingKeys.hide(),this.$.activeSigningKey.hide(),0!==this.keys.length?(this.$.signingKeysContainer.show(),this.$.noSigningKeys.hide(),enyo.forEach(this.keys,function(t){t.id===this.getValue()?e.call(this,t,!0):e.call(this,t,!1)},this)):(this.$.signingKeysContainer.hide(),this.$.noSigningKeys.show())},activeKeyIdChanged:function(){var e=this.getKey(this.activeKeyId);e&&("ios"===this.platform||"blackberry"===this.platform?(this.$.keyPasswd.setValue(e.password||""),this.$.passwdFrm.show(),this.$.saveButton.show()):"android"===this.platform&&(this.$.keyPasswd.setValue(e.key_pw||""),this.$.keystorePasswd.setValue(e.keystore_pw||""),this.$.keystorePasswdFrm.show(),this.$.passwdFrm.show(),this.$.saveButton.show()))},getKey:function(e){return e?enyo.filter(this.keys,function(t){return t.id===e},this)[0]:void 0},selectKey:function(e,t){this.trace("sender:",e,"value:",t),enyo.forEach(this.keys,function(e){e.title===t.content&&(this.setActiveKeyId(e.id),this.setActiveKeyTitle(e.title),this.trace("selected key:",e))},this),this.activeKeyIdChanged()},clearPickerContent:function(){for(var e in this.$.keyPicker.$)"onyx.MenuItem"===this.$.keyPicker.$[e].kind&&this.$.keyPicker.$[e].destroy();this.$.keyPicker.render()},getShowingKey:function(){var e=this.getKey(this.activeKeyId);return e?("ios"===this.platform||"blackberry"===this.platform?e.password=this.$.keyPasswd.getValue():"android"===this.platform&&(e.key_pw=this.$.keyPasswd.getValue(),e.keystore_pw=this.$.keystorePasswd.getValue()),e):void 0},savePassword:function(e,t){this.trace("sender:",e,"value:",t);var i=this.getShowingKey();this.trace("platform:",this.platform,"key:",i),this.provider.setKey(this.platform,i)}});

// source/harmonia/services/phonegap/Build.js
enyo.kind({name:"Phonegap.Build",kind:"enyo.Component",events:{onLoginFailed:"",onShowWaitPopup:"",onFsEvent:""},published:{checkBuildResultInterval:3e3},components:[{kind:"Signals","plugin.phonegap.buildCanceled":"abortAjaxRequest"}],debug:!1,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.config={}},setConfig:function(e){this.trace("config:",this.config,"+",e),this.config=ares.extend(this.config,e),this.trace("=> config:",this.config),this.config.origin&&this.config.pathname&&(this.url=this.config.origin+this.config.pathname,this.trace("url:",this.url)),this.folderKey="build."+this.config.id+".target.folderId",this.appKey="build."+this.config.id+".app"},getConfig:function(){return this.config},getSelectedProject:function(){return Ares.Workspace.projects.getSelectedProject()},getName:function(){return this.config.name||this.config.id},getDefaultProjectConfig:function(){return ares.clone(Phonegap.Build.DEFAULT_PROJECT_CONFIG)},getProjectPropertiesKind:function(){return"Phonegap.ProjectProperties"},isOk:function(){return!!(this.config&&this.config.auth&&this.config.auth.token&&this.config.auth.keys)},_handleServiceError:function(e,t,i,n){var o,s,r,a=i.xhrResponse;a&&(o=a.headers["content-type"],o&&(o.match("^text/plain")&&(r=a.body),o.match("^text/html")&&(s=a.body))),n&&401===n.statusCode&&(this.config.auth.token=null,ServiceRegistry.instance.setConfig(this.config.id,{auth:this.config.auth}));var l=Error(e+" ("+(""+n)+")");l.html=s,l.text=r,l.status=a.status,t(l)},authenticate:function(e,t){this.trace(),this.config.auth={username:e.username,password:e.password},this._getToken(t)},getConfigInstance:function(e){if(!e instanceof Ares.Model.Project)return next(Error("Invalid parameters")),void 0;var t=e.getConfig().getData();return t&&t.providers&&t.providers.phonegap?t:(next(Error("Project not configured for Phonegap Build")),void 0)},getConfigAppId:function(e){var t=this.getConfigInstance(e);return t.providers.phonegap.appId},authorize:function(e){var t=this;this.trace(),this.getUserData(function(i,n){i?t._getToken(function(i){i?e(i):t.getUserData(e)},e):e(null,n)},e)},checkAppId:function(e,t,i){var n=this.getConfigAppId(e),o=!1;if(0===(""+n).length)return i(null,t),void 0;if(enyo.forEach(t.user.apps.all,function(e){n==e.id&&(o=!0)},this),o)i(null,t);else{var s=this.getConfigInstance(e);s.providers.phonegap.appId="",ServiceRegistry.instance.setConfig(s);var r="The AppId '"+n+"' does not exist in the Phonegap Build account "+t.user.email+". Please choose a correct AppId";i(r)}},_getToken:function(e,t){if(this.trace(),this.config.auth&&this.config.auth.token)return this.trace("skipping token obtention"),e(),void 0;var i="username="+encodeURIComponent(this.config.auth.username)+"&password="+encodeURIComponent(this.config.auth.password),n=new enyo.Ajax({url:this.url+"/token",method:"POST",postBody:i,xhrFields:{withCredentials:!0}});this.abortAjaxRequest=function(){this.abortAjaxRequest=function(){},enyo.xhr.cancel(n.xhr),t(Phonegap.Build.abortBuild)},n.response(this,function(t,i){this.config.auth.token=i.token,this.trace("Got phonegap token:",this.config.auth.token),ServiceRegistry.instance.setConfig(this.config.id,{auth:this.config.auth}),e()}),n.error(this,this._handleServiceError.bind(this,"Unable to obtain PhoneGap security token",e)),n.go()},getUserData:function(e,t){this.trace();var i=new enyo.Ajax({url:this.url+"/api/v1/me",xhrFields:{withCredentials:!0}});this.abortAjaxRequest=function(){this.abortAjaxRequest=function(){},enyo.xhr.cancel(i.xhr),t(Phonegap.Build.abortBuild)},i.response(this,function(t,i){this.trace("inData: ",i),this._storeUserData(i.user),e(null,i)}),i.error(this,this._handleServiceError.bind(this,"Unable to get PhoneGap user data",e)),i.go()},getProjectAppData:function(e,t){var i=e.getConfig().getData(),n=i.providers.phonegap.appId;this.getAppData(n,t)},getAppData:function(e,t){var i=this.url+"/api/v1/apps/"+e,n=new enyo.Ajax({url:i,xhrFields:{withCredentials:!0}});n.response(this,function(e,i){t(null,i)}),n.error(this,this._handleServiceError.bind(this,"Unable to get application build status",t)),n.go()},_storeUserData:function(e){var t=this.config.auth.keys||{};enyo.forEach(enyo.keys(e.keys),function(i){if("link"!==i){var n,o=t[i],s=e.keys[i].all;n=enyo.map(s,function(e){var t,i;return i={id:e.id,title:e.title},t=enyo.filter(o,function(t){return t&&t.id===e.id})[0],enyo.mixin(i,t)}),t[i]=n}}),this.trace("keys:",t),this.config.auth.keys=t,ServiceRegistry.instance.setConfig(this.config.id,{auth:this.config.auth})},getKey:function(e,t){var i,n=this.config.auth.keys&&this.config.auth.keys[e];return i=t?enyo.filter(n,function(e){return e.id===t},this)[0]:n,this.trace("target:",e,"id:",t,"=> keys:",i),i},setKey:function(e,t){var i,n;return t&&"number"==typeof t.id&&"string"==typeof t.title?(this.config.auth.keys=this.config.auth.keys||{},this.config.auth.keys[e]=this.config.auth.keys[e]||[],i=this.config.auth.keys&&this.config.auth.keys[e],n=enyo.filter(i,function(e){return e.id===t.id},this)[0],n?enyo.mixin(n,t):i.push(t),this.trace("target:",e,"keys:",i),this.config.auth.keys[e]=i,ServiceRegistry.instance.setConfig(this.config.id,{auth:this.config.auth}),void 0):(this.warn("Will not store an invalid signing key:",t),void 0)},build:function(e,t){this.trace("Starting phonegap build: ",this.url,"/build"),async.waterfall([enyo.bind(this,this.authorize),enyo.bind(this,this.checkAppId,e),enyo.bind(this,this._updateConfigXml,e),enyo.bind(this,this._getFiles,e),enyo.bind(this,this._submitBuildRequest,e,t)],function(e){e&&e!==Phonegap.Build.abortBuild&&(enyo.warn("phonegap.Build#build()","err:",e),t(e))})},downloadPackage:function(e,t,i,n){async.waterfall([enyo.bind(this,this._prepareStore,e,i,t),enyo.bind(this,this._waitFetchStore,e)],n)},_updateConfigXml:function(e,t,i){var n=this.getConfigInstance(e);if(n.providers.phonegap.autoGenerateXML){var o=this._generateConfigXml(n);if(o){var s,r,a;a=e.getService(),r=!1,s=a.createFile(e.getFolderId(),"config.xml",o,{overwrite:!0}),this.abortAjaxRequest=function(){this.abortAjaxRequest=function(){},r=!0},s.response(this,function(e,t){this.trace("Phonegap.Build#_updateConfigXml()","wrote config.xml:",t),r?i(Phonegap.Build.abortBuild):i()}),s.error(this,this._handleServiceError.bind(this,"Unable to write config.xml",i))}else this.error("unable to generate config.xml from:",n),i()}else this.trace("skipping config.xml generation"),i()},_getFiles:function(e,t){this.trace("...");var i,n=!1;this.doShowWaitPopup({msg:$L("Building source archive"),service:"build"}),i=e.getService().exportAs(e.getFolderId(),-1),this.abortAjaxRequest=function(){this.abortAjaxRequest=function(){},n=!0},i.response(this,function(e,o){this.trace("Phonegap.Build#_getFiles()","Got the files data");var s=i.xhrResponse.headers["x-content-type"];n?t(Phonegap.Build.abortBuild):t(null,{content:o,ctype:s})}),i.error(this,this._handleServiceError.bind(this,"Unable to fetch application source code",t))},_submitBuildRequest:function(e,t,i,n){var o=ares.clone(e.getConfig().getData());this.trace("config: ",o),this.doShowWaitPopup({msg:$L("Uploading source archive to PhoneGap Build"),service:"build"});var s=o.providers.phonegap.minification,r={},a=[],l={title:o.title,debug:!s};if(o.providers.phonegap.appId&&(this.trace("appId:",o.providers.phonegap.appId),l.appId=o.providers.phonegap.appId),"object"==typeof o.providers.phonegap.targets&&enyo.forEach(enyo.keys(o.providers.phonegap.targets),function(e){var t=o.providers.phonegap.targets[e];if(t&&(this.trace("platform:",e),a.push(e),"object"==typeof t)){var i=t.keyId;i&&(r[e]=enyo.clone(this.getKey(e,i)))}},this),"object"==typeof r&&enyo.keys(r).length>0&&(this.trace("keys:",r),l.keys=enyo.json.stringify(r)),!(a.length>0))return n(Error("No build platform selected")),void 0;l.platforms=enyo.json.stringify(a);var h=new enyo.Ajax({url:this.url+"/op/build",method:"POST",postBody:i.content,contentType:i.ctype,xhrFields:{withCredentials:!0}});this.abortAjaxRequest=function(){this.abortAjaxRequest=function(){},enyo.xhr.cancel(h.xhr),n(Phonegap.Build.abortBuild)},h.response(this,function(i,s){if(this.trace("Phonegap.Build#_submitBuildRequest(): response:",s),s){o.providers.phonegap.appId=s.id;var r=e.getConfig();r.setData(o),r.save()}t(),ComponentsRegistry.getComponent("projectView").$.projectWizardModify.showEditPopUp(e,2),enyo.Signals.send("plugin.phonegap.userDataRefreshed"),n()}),h.error(this,this._handleServiceError.bind(this,"Unable to build application",n)),h.go(l)},abortAjaxRequest:function(){},_prepareStore:function(e,t,i,n){this.trace("PhoneGap.Build#_prepareStore()");var o=e.getObject(this.folderKey);if(o)n(null,t,o,i);else{var s=e.getService().createFolder(e.getFolderId(),"target/"+this.config.id);s.response(this,function(s,r){this.trace("PhoneGap.Build#_prepareStore()","response:",r),o=r.id,e.setObject(this.folderKey,o),this.doFsEvent({nodeId:o}),n(null,t,o,i)}),s.error(this,this._handleServiceError.bind(this,"Unable to prepare packages folder",n))}},_storePkg:function(e,t,i,n){this.trace("data content.ctype: ",i.ctype);var o,s=e.getService();o=s.createFiles(t,{content:i.content,ctype:i.ctype},{overwrite:!0}),o.response(this,function(t,i){this.trace("response:",i);var o=e.getService().config,s=o.origin+o.pathname+"/file"+i[0].path;e.setObject("build.phonegap.target.pkgUrl",s),this.doFsEvent({nodeId:i[0].id}),n()}),o.error(this,this._handleServiceError.bind(this,"Unable to store application package",n))},_waitFetchStore:function(e,t,i,n,o){this.trace("Entering _store function project: ",e,"folderId:",i,"appData:",t),e.setObject(this.appKey,t),this._getPackageByPlatform(e,t,i,n,o)},_getPackageByPlatform:function(e,t,i,n,o){function s(i){async.waterfall([function(e){setTimeout(e,h.checkBuildResultInterval)},function(i){"pending"===t.status[n]?h.getProjectAppData(e,t,i):i(null,null)},function(e,i){null!==e&&(t=e.user),i()}],i)}function r(e){e?o(e):"complete"===t.status[n]?a(function(e){e&&enyo.warn("phonegap.Build#getAllPackagedApplications._downloadApp()","non-fatal err:",e),o()}):o()}function a(o){var s,r,a,c=ares.clone(e.getConfig().getData()),d=c.id;async.waterfall([function(e){s=t.id,r=d,a=t.version||"SNAPSHOT";var i=s+"/"+n+"/"+r+"/"+a;h.debug&&h.log("Application "+n+" ready for download"),l.bind(h)(i,e)},function(t,n){h._storePkg(e,i,t,n)}],o)}function l(e,t){var i=this.url+"/api/v1/apps/"+e;this.trace("download URL is : ",i);var n=new enyo.Ajax({url:i,handleAs:"text",xhrFields:{withCredentials:!0}});n.response(this,function(e,i){this.trace("response: received ",i.length," bytes typeof: ",typeof i);var o=n.xhrResponse.headers["content-type"];this.trace("response: received ctype: ",o),t(null,{content:i,ctype:o})}),n.error(this,this._handleServiceError.bind(this,"Unable to download application package",t)),n.go()}var h=this;async.whilst(function(){return"pending"===t.status[n]},s,r)},_generateConfigXml:function(e){var t=this,i=e.providers.phonegap;if(!i)return this.trace("PhoneGap build disabled: will not generate the XML"),void 0;var n,o=function(e){"sharedConfiguration"==e?(a.writeStartElement("icon"),a.writeAttributeString("src",i.icon[e].src||"icon.png"),i.icon[e].width&&a.writeAttributeString("width",i.icon[e].width),i.icon[e].height&&a.writeAttributeString("height",i.icon[e].height)):i.icon[e].src&&i.icon[e].src.length>0&&(a.writeStartElement("icon"),a.writeAttributeString("src",i.icon[e].src),a.writeAttributeString("gap:platform",e),"android"===e?i.icon[e].density&&a.writeAttributeString("gap:density",i.icon[e].density):(i.icon[e].width&&a.writeAttributeString("width",i.icon[e].width),i.icon[e].height&&a.writeAttributeString("height",i.icon[e].height))),a.writeEndElement()},s=function(e){"sharedConfiguration"==e?(a.writeStartElement("gap:splash"),a.writeAttributeString("src",i.splashScreen[e].src||"icon.png"),i.splashScreen[e].width&&a.writeAttributeString("width",i.splashScreen[e].width),i.splashScreen[e].height&&a.writeAttributeString("height",i.splashScreen[e].height)):i.splashScreen[e].src&&i.splashScreen[e].src.length>0&&(a.writeStartElement("gap:splash"),a.writeAttributeString("src",i.splashScreen[e].src),a.writeAttributeString("gap:platform",e),"android"===e?i.splashScreen.android.density&&a.writeAttributeString("gap:density",i.splashScreen.android.density):(i.splashScreen[e].width&&a.writeAttributeString("width",i.splashScreen[e].width),i.splashScreen[e].height&&a.writeAttributeString("height",i.splashScreen[e].height))),a.writeEndElement()},r=function(e){a.writeStartElement("gap:plugin"),a.writeAttributeString("name",e.name),a.writeAttributeString("version",e.version),enyo.forEach(e.parameters&&enyo.keys(e.parameters),function(t){a.writeStartElement("param"),a.writeAttributeString("name",e.parameters[t].name),a.writeAttributeString("value",e.parameters[t].value),a.writeEndElement()},this),a.writeEndElement()},a=new XMLWriter("UTF-8");if(a.indentation=4,a.writeStartDocument(),a.writeStartElement("widget"),a.writeAttributeString("xmlns","http://www.w3.org/ns/widgets"),a.writeAttributeString("xmlns:gap","http://phonegap.com/ns/1.0"),a.writeAttributeString("id",e.id),a.writeAttributeString("version",e.version),a.writeComment("***				  WARNING			     ***"),a.writeComment("***		This is an automatically generated document.	     ***"),a.writeComment("*** Do not edit it: your changes would be automatically overwritten ***"),a.writeElementString("name",e.title),a.writeElementString("description",e.description),a.writeStartElement("author"),a.writeAttributeString("href",e.author.href),a.writeString(e.author.name),a.writeEndElement(),a.writeComment("Platforms"),i.targets&&enyo.keys(i.targets).length>0)for(var l in i.targets){var h=i.targets[l];if(h!==!1){a.writeStartElement("platform","gap"),a.writeAttributeString("name",l);for(var c in h)a.writeAttributeString(c,h[c]);a.writeEndElement()}}a.writeComment("Features");var d="http://api.phonegap.com/1.0/",u=function(){var e=!0;for(var t in i.features)i.features[t]&&(e=!1);return e};u.call(this)?(a.writeStartElement("preference"),a.writeAttributeString("name","permissions"),a.writeAttributeString("value","none"),a.writeEndElement()):enyo.forEach(i.features&&enyo.keys(i.features),function(e){i.features[e]&&(a.writeStartElement("feature"),a.writeAttributeString("name",d+e),a.writeEndElement())},this),a.writeComment("Preferences"),enyo.forEach(i.preferences&&enyo.keys(i.preferences),function(e){a.writeStartElement("preference"),a.writeAttributeString("name",e),a.writeAttributeString("value",i.preferences[e]),a.writeEndElement()},this),a.writeComment("Plugins"),enyo.forEach(i.plugins&&enyo.keys(i.plugins),function(e){r.call(t,i.plugins[e])},this),a.writeComment("Define app icon for each platform"),enyo.forEach(i.icon&&enyo.keys(i.icon),function(e){o.call(t,e)},this),a.writeComment("Define app splash screen for each platform"),enyo.forEach(i.splashScreen&&enyo.keys(i.splashScreen),function(e){s.call(t,e)},this),a.writeComment("Access external websites ressources");for(var g in i.access)a.writeStartElement("access"),a.writeAttributeString("origin",i.access[g]),a.writeEndElement();return a.writeEndElement(),n=a.flush(),a.close(),this.trace("xml:",n),n},statics:{DEFAULT_PROJECT_CONFIG:{enabled:!1,autoGenerateXML:!0,minification:!0,features:{battery:!1,camera:!1,contact:!1,file:!1,geolocation:!1,media:!1,network:!1,notification:!1,device:!1},preferences:{"phonegap-version":Phonegap.UIConfiguration.commonDrawersContent[2].rows[0].defaultValue,orientation:Phonegap.UIConfiguration.commonDrawersContent[2].rows[1].defaultValue,"target-device":Phonegap.UIConfiguration.commonDrawersContent[2].rows[2].defaultValue,fullscreen:Phonegap.UIConfiguration.commonDrawersContent[2].rows[3].defaultValue,"android-installLocation":Phonegap.UIConfiguration.platformDrawersContent[0].rows[0].defaultValue,"android-minSdkVersion":Phonegap.UIConfiguration.platformDrawersContent[0].rows[1].defaultValue,"android-targetSdkVersion":Phonegap.UIConfiguration.platformDrawersContent[0].rows[2].defaultValue,"android-maxSdkVersion":Phonegap.UIConfiguration.platformDrawersContent[0].rows[3].defaultValue,"android-windowSoftInputMode":Phonegap.UIConfiguration.platformDrawersContent[0].rows[4].defaultValue,"splash-screen-duration":Phonegap.UIConfiguration.platformDrawersContent[0].rows[5].defaultValue,"load-url-timeout":Phonegap.UIConfiguration.platformDrawersContent[0].rows[6].defaultValue,webviewbounce:Phonegap.UIConfiguration.platformDrawersContent[1].rows[0].defaultValue,"prerendered-icon":Phonegap.UIConfiguration.platformDrawersContent[1].rows[1].defaultValue,"ios-statusbarstyle":Phonegap.UIConfiguration.platformDrawersContent[1].rows[2].defaultValue,"detect-data-types":Phonegap.UIConfiguration.platformDrawersContent[1].rows[3].defaultValue,"exit-on-suspend":Phonegap.UIConfiguration.platformDrawersContent[1].rows[4].defaultValue,"show-splash-screen-spinner":Phonegap.UIConfiguration.platformDrawersContent[1].rows[5].defaultValue,"auto-hide-splash-screen":Phonegap.UIConfiguration.platformDrawersContent[1].rows[6].defaultValue,"disable-cursor":Phonegap.UIConfiguration.platformDrawersContent[3].rows[0].defaultValue},icon:{sharedConfiguration:{src:"",role:"default"},android:{src:"",density:""},ios:{src:"",height:"",width:""},winphone:{src:""},blackberry:{src:""},webos:{src:""}},splashScreen:{sharedConfiguration:{src:"",role:"default"},android:{src:"",density:""},ios:{src:"",height:"",width:""},winphone:{src:""},blackberry:{src:""},webos:{src:""}},plugins:{},access:{origin:Phonegap.UIConfiguration.commonDrawersContent[1].rows[4].defaultValue}},abortBuild:Error("Build canceled by user")}});

// source/harmonia/services/phonegap/QrCode.js
enyo.kind({name:"Phonegap.ProjectProperties.QrCode",published:{appId:void 0,token:void 0},classes:"ares-project-properties-qrcode-image",debug:!1,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.setToken(Phonegap.ProjectProperties.getProvider().config.auth.token)},appIdChanged:function(){this.displayQrCode()},tokenChanged:function(){this.displayQrCode()},displayQrCode:function(){void 0!==this.appId&&void 0!==this.token&&(this.trace("appid: ",this.appId," token: ",this.token),this.hasNode().innerHTML=this.generateQrCode())},generateQrCode:function(){var e,t,i;return e=qrcode(4,"L"),e.addData("https://build.phonegap.com/apps/"+this.appId+"/install?auth_token="+this.token),e.make(),i=e.createSVGPath(4),t='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="132" height="132">/',t+='	<path d="'+i+'"/>',t+="</svg>"}});

// source/harmonia/services/GenZip.js
enyo.kind({name:"GenZip",kind:"enyo.Component",events:{onLoginFailed:"",onBuildStarted:""},debug:!1,create:function(){ares.setupTraceLogger(this),this.trace(""),this.inherited(arguments),this.config={}},setConfig:function(e){this.trace("config:",this.config,"+",e),this.config=ares.extend(this.config,e),this.trace("=> config:",this.config),this.config.origin&&this.config.pathname&&(this.url=this.config.origin+this.config.pathname,this.trace("url:",this.url))},getConfig:function(){return this.config},getSources:function(e){this.trace("type:",e);var t=new enyo.Ajax({url:this.url+"/config/sources"});return t.go({type:e})},generate:function(e){var t=[];enyo.forEach(enyo.keys(e),function(i){t.push(i+"="+encodeURIComponent(enyo.json.stringify(e[i])))},this);var i=t.join("&");this.trace("data:",i);var n=new enyo.Async,o=new enyo.Ajax({url:this.url+"/op/generate",method:"POST",handleAs:"text",postBody:i,mimeType:"text/plain; charset=x-user-defined"});return o.response(this,function(e,t){n.respond({ctype:o.xhrResponse.headers["x-content-type"],content:t})}),o.error(this,function(e,t){this.log("Unable to get the template files ("+t+")"),n.fail(t)}),o.go({overwrite:!0}),n}});

// source/harmonia/FieldDecorator.js
enyo.kind({name:"FieldDecorator",kind:"ToolDecorator",published:{title:ilibHarmonia("Field")},style:"margin: 0 32px 8px 0; vertical-align: top;",components:[{name:"label",tag:"label",style:"xborder: 1px solid lightblue;",components:[{name:"title",content:ilibHarmonia("Field"),style:"font-size: 14px; font-style: italic; font-weight: bold; padding-bottom: 8px; padding-left: 0; color: #555;"},{name:"subtitle",style:"font-size: 12px; font-style: italic; padding-bottom: 8px; padding-left: 0; color: #555;",showing:!1},{name:"client",tag:null}]}],create:function(){this.inherited(arguments),this.titleChanged(),this.subtitleChanged()},titleChanged:function(){this.$.title.setContent(this.title)},subtitleChanged:function(){this.$.subtitle.setShowing(Boolean(this.subtitle)),this.$.subtitle.setContent(this.subtitle)}});

// source/harmonia/DropboxAuthConfig.js
enyo.kind({name:"DropboxAuthConfig",kind:"FittableRows",debug:!1,requestTokenUrl:"https://api.dropbox.com/1/oauth/request_token",authorizeUrl:"https://www.dropbox.com/1/oauth/authorize",accessTokenUrl:"https://api.dropbox.com/1/oauth/access_token",accountInfoUrl:"/res/services/dropbox",requestToken:"",requestTokenSecret:"",uid:"",published:{serviceId:"",serviceName:"",auth:{}},events:{onUpdateAuth:"",onError:"",onStartWaiting:"",onStopWaiting:""},components:[{kind:"Ares.Groupbox",components:[{kind:"onyx.GroupboxHeader",name:"serviceName"},{components:[{content:ilibHarmonia("User Name:"),kind:"Ares.GroupBoxItemKey"},{name:"name",kind:"Ares.GroupBoxItemValue"}]},{components:[{content:ilibHarmonia("Email:"),kind:"Ares.GroupBoxItemKey"},{name:"email",kind:"Ares.GroupBoxItemValue"}]},{components:[{content:ilibHarmonia("Country Code:"),kind:"Ares.GroupBoxItemKey"},{name:"countryCode",kind:"Ares.GroupBoxItemValue"}]},{components:[{content:ilibHarmonia("Quota (Max):"),kind:"Ares.GroupBoxItemKey"},{name:"quota",kind:"Ares.GroupBoxItemValue"}]},{components:[{content:ilibHarmonia("Usage (Private):"),kind:"Ares.GroupBoxItemKey"},{name:"privateBytes",kind:"Ares.GroupBoxItemValue"}]},{components:[{content:ilibHarmonia("Usage (Shared):"),kind:"Ares.GroupBoxItemKey"},{name:"sharedBytes",kind:"Ares.GroupBoxItemValue"}]}]},{kind:"FittableColumns",components:[{name:"renewBtn",kind:"onyx.Button",content:ilibHarmonia("Renew"),disabled:!1,ontap:"renew"},{name:"checkBtn",kind:"onyx.Button",content:ilibHarmonia("Check"),disabled:!0,ontap:"check"}]},{name:"footnote"}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.trace("title:",this.title),this.$.serviceName.setContent(this.serviceName),this.auth=this.auth||{},this.auth.headers=this.auth.headers||{},this.auth.headers.authorization&&this.$.checkBtn.setDisabled(!1),this.waitAccountInfo()},render:function(){ares.isPopupAllowed()?this.$.footnote.setContent(""):this.$.footnote.setContent(ilibHarmonia("You need to accept Dropbox popup when asked...")),this.inherited(arguments)},check:function(){var e=this;this.$.checkBtn.setDisabled(!0),async.series([this.waitAccountInfo.bind(this),this.authenticate.bind(this),this.getAccountInfo.bind(this),this.displayAccountInfo.bind(this)],function(t,i){enyo.log("DropboxAuthConfig.check: err:",t,"results:",i),e.doStopWaiting(),e.$.checkBtn.setDisabled(!1),t&&e.doError({msg:"Unable to check Dropbox Account",details:""+t})})},renew:function(){var e=this;this.$.renewBtn.setDisabled(!0),async.series([this.waitAccountInfo.bind(this),this.getRequestToken.bind(this),this.authorize.bind(this),this.getAccessToken.bind(this),this.saveAccessToken.bind(this),this.getAccountInfo.bind(this),this.displayAccountInfo.bind(this)],function(t,i){enyo.log("DropboxAuthConfig.renew: err:",t,"results:",i),e.doStopWaiting(),e.$.renewBtn.setDisabled(!1),t&&e.doError({msg:"Unable to renew Dropbox Account tokens",details:""+t})})},getOauthTimestamp:function(){return 0|Date.now()/1e3},getOauthNonce:function(){for(var e="",t=0;24>t;t++)e+=Math.floor(10*Math.random()).toString(16);return e},makeOAuthRequestTokenObject:function(e,t){var i={oauth_signature_method:"PLAINTEXT",oauth_consumer_key:e,oauth_signature:t+"&"};return i},makeOAuthHeaderObject:function(e,t,i,n){var o={oauth_signature_method:"PLAINTEXT",oauth_consumer_key:e,oauth_token:i,oauth_signature:t+"&"+n};return o},makeOAuthHeader:function(e,t){var i=e+" ",n=", ";return i+='oauth_version="1.0"',enyo.forEach(enyo.keys(t),function(e){i+=n+e+'="'+t[e]+'"'},this),this.log("header:",i),i},getRequestToken:function(e){if(!this.auth.appKey||!this.auth.appSecret)return this.warn("Ares IDE mis-configuration: missing Dropbox AppKey and/or AppSecret in ide.json.  Get those values from https://www.dropbox.com/developers/apps"),e(Error("Ares is not configured as a Dropbox application: Contact your system administrator")),void 0;this.doStartWaiting({msg:"Dropbox: waiting for request token..."});var t={url:this.requestTokenUrl,method:"POST",handleAs:"text",cacheBust:!1,headers:{"cache-control":!1,Authorization:this.makeOAuthHeader("OAuth",this.makeOAuthRequestTokenObject(this.auth.appKey,this.auth.appSecret))}};this.log("options:",t);var i=new enyo.Ajax(t);i.response(this,function(t,i){this.log("response:",i);var n=ares.decodeWebForm(i);this.log("form:",n),this.requestTokenSecret=n.oauth_token_secret,this.requestToken=n.oauth_token,this.uid=n.uid,e()}),i.error(this,function(t,i){this.log("response:",i),e(Error(i))}),i.go()},authorize:function(e){this.doStartWaiting({msg:"Dropbox: waiting for user's authorization..."});var t=this.authorizeUrl+"?oauth_token="+encodeURIComponent(this.requestToken),i=window.open(t,"Dropbox Authentication","resizeable=1,width=1024, height=600"),n=this,o=20,s=setInterval(function(){i.closed?(clearInterval(s),enyo.log("DropboxAuthConfig.waitAuthorization: Dropbox popup closed"),e()):--o?n.doStartWaiting({msg:"Dropbox: waiting for the accessToken ("+o+"s left)..."}):(clearInterval(s),enyo.log("DropboxAuthConfig.waitAuthorization: failure: User did not accept or close the authorization window"),i.close(),e(Error("Dropbbox Authorization window did not close")))},1e3)},getAccessToken:function(e){this.doStartWaiting({msg:"Dropbox: waiting for the accessToken..."});var t={url:this.accessTokenUrl,method:"POST",handleAs:"text",cacheBust:!1,headers:{"cache-control":!1,Authorization:this.makeOAuthHeader("OAuth",this.makeOAuthHeaderObject(this.auth.appKey,this.auth.appSecret,this.requestToken,this.requestTokenSecret))}};this.log("options:",t);var i=new enyo.Ajax(t);i.response(this,function(t,i){this.log("response:",i);var n=ares.decodeWebForm(i);this.log("form:",n),this.auth.accessTokenSecret=n.oauth_token_secret,this.auth.accessToken=n.oauth_token,this.auth.uid=n.uid,this.auth.headers.authorization=this.makeOAuthHeader("OAuth",this.makeOAuthHeaderObject(this.auth.appKey,this.auth.appSecret,this.auth.accessToken,this.auth.accessTokenSecret)),e()}),i.error(this,function(t,i){this.log("response:",i),e(Error(i))}),i.go()},saveAccessToken:function(e){var t={serviceId:this.serviceId,auth:{accessToken:this.auth.accessToken,accessTokenSecret:this.auth.accessTokenSecret,uid:this.auth.uid,headers:ares.clone(this.auth.headers)}};this.log("event:",t),this.doUpdateAuth(t),delete this.auth.requestToken,delete this.auth.requestTokenSecret,this.$.checkBtn.setDisabled(!1),e()},authenticate:function(e){var t={url:this.accountInfoUrl,method:"POST",handleAs:"json"};this.log("options:",t);var i=new enyo.Ajax(t);i.response(this,function(t,i){this.log("response:",i),e()}),i.error(this,function(t,i){var n;try{n=enyo.json.parse(t.xhrResponse.body).error}catch(o){n=i}this.log("errMsg:",n),e(Error(n))}),i.go({auth:enyo.json.stringify({appKey:this.auth.appKey,appSecret:this.auth.appSecret,uid:this.auth.uid,accessToken:this.auth.accessToken,accessTokenSecret:this.auth.accessTokenSecret})})},getAccountInfo:function(e){this.doStartWaiting({msg:"Dropbox: waiting for user's account information..."});var t={url:this.accountInfoUrl,method:"GET",handleAs:"json"};this.log("options:",t);var i=new enyo.Ajax(t);i.response(this,function(t,i){this.log("response:",i),this.accountInfo=i,e()}),i.error(this,function(t,i){var n;try{n=enyo.json.parse(t.xhrResponse.body).error}catch(o){n=i}this.log("errMsg:",n),e(Error(n))}),i.go({auth:enyo.json.stringify({appKey:this.auth.appKey,appSecret:this.auth.appSecret,uid:this.auth.uid,accessToken:this.auth.accessToken,accessTokenSecret:this.auth.accessTokenSecret})})},waitAccountInfo:function(e){this.$.name.setContent("..."),this.$.email.setContent("..."),this.$.countryCode.setContent("..."),this.$.quota.setContent("..."),this.$.privateBytes.setContent("..."),this.$.sharedBytes.setContent("..."),e&&e()},displayAccountInfo:function(e){this.log("accountInfo:",this.accountInfo),this.$.name.setContent(this.accountInfo.name),this.$.email.setContent(this.accountInfo.email),this.$.countryCode.setContent(this.accountInfo.countryCode);var t=Math.floor(this.accountInfo.quota/1048576)+" MB";this.$.quota.setContent(t);var i=Math.floor(this.accountInfo.privateBytes/1048576)+" MB";this.$.privateBytes.setContent(i);var n=Math.floor(this.accountInfo.sharedBytes/1048576)+" MB";this.$.sharedBytes.setContent(n),e&&e()}});

// source/harmonia/ProviderList.js
enyo.kind({name:"ProviderList",kind:"FittableRows",debug:!1,published:{selector:[],header:"",selected:-1},events:{onSelectProvider:""},classes:"onyx-dark ares_harmonia_providerList",components:[{name:"header",kind:"onyx.Toolbar",content:"",classes:"onyx-menu-toolbar ares_harmonia_toolBar"},{kind:"enyo.Scroller",fit:!0,components:[{name:"list",kind:"FlyweightRepeater",classes:"ares_harmonia_providerItems",fit:!0,toggleSelected:!1,onSetupItem:"setupRow",onSelect:"rowSelected",onDeselect:"rowDeselected",components:[{name:"item",classes:"enyo-children-inline",ontap:"itemTap",ondblclick:"dblClick",components:[{name:"icon",kind:"onyx.Icon"},{name:"name"},{name:"auth",kind:"Image",src:"$assets/harmonia/images/valid-check.png",showing:!1}]}]}]},{kind:"Signals",onServicesChange:"handleServicesChange"}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.services=[],this.trace("selector=",this.selector),this.header?this.$.header.setContent(this.header):this.$.header.hide()},handleServicesChange:function(e,t){this.trace("sender:",e,"event:",t),0===this.selector.length?(this.error("Unexpected selector value: ",this.selector),this.services=[]):"type"===this.selector[0]?this.services=t.serviceRegistry.getServicesByType(this.selector[1]):"auth"===this.selector[0]?this.services=t.serviceRegistry.filter(function(e){return e.config.auth}):(this.error("Unexpected selector value: ",this.selector),this.services=[]),this.trace("selector=",this.selector," ==> services: ",this.services),this.$.list.count=this.services.length,this.$.list.render(),this.doSelectProvider({service:this.services[this.selected]})},setupRow:function(e,t){this.trace("sender:",e,", event:",t);var i,n=this.services[t.index];return n&&(i=n.getConfig(),this.$.item.applyStyle("background-color",e.isSelected(t.index)?"lightblue":""),this.$.name.setContent(i.name),this.$.icon.setSrc(i.icon)),!0},selectedChanged:function(){this.$.list.getSelection().select(this.selected)},rowSelected:function(e,t){this.trace("sender:",e,", event:",t),this.selected=t.key;var i=this.services[this.selected];i&&this.doSelectProvider({service:i})},reset:function(){this.selector=null,this.setSelected(-1)}});

// source/harmonia/NamePopup.js
enyo.kind({name:"NamePopup",kind:"onyx.Popup",published:{title:ilibHarmonia("New"),type:"",path:"",folderId:"",fileName:"",placeHolder:""},events:{onConfirm:"",onCancel:""},handlers:{onShow:"shown"},classes:"ares-classic-popup",modal:!0,centered:!0,floating:!0,components:[{tag:"div",name:"title",classes:"title",content:ilibHarmonia("Name for new object")},{kind:"enyo.Scroller",classes:"ares-small-popup",fit:!0,components:[{tag:"p",classes:"break"},{kind:"onyx.InputDecorator",components:[{name:"fileName",kind:"onyx.Input",onkeyup:"nameChanged",placeholder:""}]},{classes:"ares-small-popup-details",components:[{name:"path",tag:"p",content:ilibHarmonia("Path:")}]}]},{kind:"onyx.Toolbar",classes:"bottom-toolbar",components:[{name:"cancelButton",kind:"onyx.Button",content:ilibHarmonia("Cancel"),ontap:"newCancel"},{name:"confirmButton",classes:"right",kind:"onyx.Button",content:ilibHarmonia("Create"),ontap:"newConfirm"}]}],create:function(){this.inherited(arguments),this.typeChanged(),this.pathChanged(),this.fileNameChanged(),this.placeHolderChanged()},typeChanged:function(){var e="";void 0!==this.type&&(e=this.type),this.$.title.setContent(this.title+" "+e)},titleChanged:function(){var e="";void 0!==this.type&&(e=this.type),this.$.title.setContent(this.title+" "+e)},pathChanged:function(){this.$.path.setContent("in "+this.path)},newCancel:function(){this.hide(),this.doCancel()},newConfirm:function(){var e=this.$.fileName.getValue();this.hide(),this.doConfirm({name:e,path:this.path,folderId:this.folderId})},nameChanged:function(e,t){this.setFileName(this.$.fileName.getValue()),13===t.keyCode&&this.fileName.length>0&&this.newConfirm()},fileNameChanged:function(){this.$.fileName.setValue(this.fileName),this.$.confirmButton.setDisabled(0===this.fileName.length)},placeHolderChanged:function(){this.$.fileName.setPlaceholder(this.placeHolder)},shown:function(){this.$.fileName.focus()}});

// source/harmonia/DeletePopup.js
enyo.kind({name:"DeletePopup",kind:"onyx.Popup",published:{type:"",name:"",path:""},events:{onConfirm:"",onCancel:""},modal:!0,centered:!0,floating:!0,classes:"ares-classic-popup",components:[{tag:"div",name:"title",classes:"title",content:ilibHarmonia("Delete")},{kind:"enyo.Scroller",classes:"ares-small-popup",fit:!0,components:[{tag:"p",classes:"break"},{kind:"onyx.InputDecorator",components:[{name:"name",kind:"onyx.Input",disabled:!0}]},{classes:"ares-small-popup-details",components:[{name:"path",tag:"p",content:ilibHarmonia("Path: ")}]}]},{kind:"onyx.Toolbar",classes:"bottom-toolbar",components:[{name:"deleteCancelButton",kind:"onyx.Button",content:ilibHarmonia("Cancel"),ontap:"deleteCancel"},{name:"deleteDeleteButton",classes:"right",kind:"onyx.Button",content:ilibHarmonia("Delete"),ontap:"deleteConfirm"}]}],create:function(){this.inherited(arguments),this.typeChanged(),this.nameChanged(),this.pathChanged()},typeChanged:function(){this.$.title.setContent("Delete "+this.type)},nameChanged:function(){this.$.name.setValue(this.name)},pathChanged:function(){var e=this.$.name.getValue(),t=this.path.substring(0,this.path.lastIndexOf(e));this.$.path.setContent("in "+t)},deleteCancel:function(){this.hide(),this.doCancel()},deleteConfirm:function(){this.hide(),this.doConfirm({name:this.name,nodeId:this.nodeId,path:this.path})}});

// source/harmonia/RenamePopup.js
enyo.kind({name:"RenamePopup",kind:"NamePopup",create:function(){this.inherited(arguments),this.$.confirmButton.setContent(ilibHarmonia("Rename"))}});

// source/harmonia/RevertPopup.js
enyo.kind({name:"RevertPopup",kind:"onyx.Popup",published:{type:"",name:"",path:""},events:{onConfirm:"",onCancel:""},classes:"ares-classic-popup",modal:!0,centered:!0,floating:!0,components:[{tag:"div",name:"title",classes:"title",content:ilibHarmonia("Revert?")},{kind:"enyo.Scroller",classes:"ares-small-popup",fit:!0,components:[{classes:"ares-small-popup-details",components:[{tag:"p",name:"path",content:ilibHarmonia("Path:")}]},{tag:"p",classes:"break"}]},{kind:"onyx.Toolbar",classes:"bottom-toolbar",components:[{name:"revertCancelButton",kind:"onyx.Button",content:ilibHarmonia("Cancel"),ontap:"revertCancel"},{name:"revertDeleteButton",kind:"onyx.Button",classes:"right",content:ilibHarmonia("Revert"),ontap:"revertConfirm"}]}],create:function(){this.inherited(arguments),this.typeChanged(),this.nameChanged(),this.pathChanged()},typeChanged:function(){this.$.title.setContent(ilibHarmonia("Revert {type}: {name}?",{type:this.type,name:this.name}))},nameChanged:function(){this.$.title.setContent(ilibHarmonia("Revert {type}: {name}?",{type:this.type,name:this.name}))},pathChanged:function(){this.$.path.setContent(ilibHarmonia("to {destination}",{destination:this.path}))},revertCancel:function(){this.hide(),this.doCancel()},revertConfirm:function(){this.hide(),this.doConfirm()}});

// source/harmonia/AccountsConfigurator.js
enyo.kind({name:"AccountsConfigurator",kind:"onyx.Popup",modal:!0,centered:!0,floating:!0,autoDismiss:!1,debug:!1,classes:"ares-classic-popup",components:[{tag:"div",classes:"title",content:ilibHarmonia("Accounts")},{kind:"FittableRows",classes:"ares-phonegap-config",fit:!0,components:[{kind:"FittableColumns",fit:!0,components:[{kind:"ProviderList",name:"accountsList",selector:["auth"],onSelectProvider:"handleSelectProvider"},{name:"authPanel",classes:"ares_harmonia_authPanel ares_harmonia_providerItems"}],onUpdateAuth:"handleUpdateAuth"}]},{kind:"onyx.Toolbar",classes:"bottom-toolbar",components:[{kind:"onyx.Button",content:ilibHarmonia("Done"),ontap:"dismiss"}]},{name:"errorPopup",kind:"Ares.ErrorPopup",msg:"",details:"",autoDismiss:!1,modal:!0},{name:"waitPopup",kind:"onyx.Popup",centered:!0,floating:!0,autoDismiss:!1,modal:!0,classes:"ares-waitpopup",components:[{kind:"onyx.Spinner",classes:"onyx-dark"},{name:"waitPopupMsg",content:ilibHarmonia("Ongoing...")}]}],events:{onRegisterMe:""},handlers:{onError:"showError",onStartWaiting:"startWaiting",onStopWaiting:"stopWaiting"},selectedAuthConfig:void 0,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.doRegisterMe({name:"accountsConfigurator",reference:this}),this.trace("")},handleSelectProvider:function(e,t){this.trace("sender:",e,", event:",t);var i=t.service;if(i&&i.config&&i.config.auth){this.trace("selected service:",i.config.id);var n=i.config.id+"AuthConfig";if(this.selectedAuthConfig&&(this.selectedAuthConfig.hide(),this.selectedAuthConfig=void 0),this.selectedAuthConfig=this.$.authPanel.$[n],!this.selectedAuthConfig){if("plugin"===i.config.auth.type){this.trace("creating 'custom' auth form");var o,s;o=ServiceRegistry.instance.resolveServiceId(i.config.id),s=o.getAuthConfigKind(),this.trace("auth form using kind:",s),this.$.authPanel.createComponent({kind:s,name:n,serviceId:i.config.id,serviceName:i.config.name,username:i.config.auth.username,password:i.config.auth.password})}else if("basic"===i.config.auth.type)this.trace("creating 'basic' auth form"),this.$.authPanel.createComponent({kind:"BasicAuthConfig",name:n,serviceId:i.config.id,serviceName:i.config.name,username:i.config.auth.username,password:i.config.auth.password});else if("phonegap"===i.config.auth.type)this.trace("creating 'phonegap' auth form"),this.$.authPanel.createComponent({kind:"PhonegapAuthConfig",name:n,serviceId:i.config.id,serviceName:i.config.name,username:i.config.auth.username,password:i.config.auth.password});else{if("dropbox"!==i.config.auth.type)throw Error("Unhandled authentication type of service:"+i.config.id);this.trace("creating 'dropbox' auth form"),this.$.authPanel.createComponent({kind:"DropboxAuthConfig",name:n,serviceId:i.config.id,serviceName:i.config.name,auth:ares.clone(i.config.auth)})}this.selectedAuthConfig=this.$.authPanel.$[n],this.selectedAuthConfig.render()}this.selectedAuthConfig&&this.selectedAuthConfig.show()}else-1===e.selected?this.selectedAuthConfig&&this.selectedAuthConfig.hide():this.warn("provider ("+e.selected+") selected by sender ("+e+") without giving a suitable service",i);return!0},dismiss:function(e,t){this.trace("sender:",e,", event:",t),this.hide()},showError:function(e,t){return this.trace("event:",t,"from sender:",e),this.$.errorPopup.raise(t.msg,t.details),!0},startWaiting:function(e,t){return this.trace("event:",t,"from sender:",e),this.$.waitPopupMsg.setContent(t.msg),this.$.waitPopup.show(),!0},stopWaiting:function(e,t){return this.trace("event:",t,"from sender:",e),this.$.waitPopupMsg.setContent(""),this.$.waitPopup.hide(),!0}});

// source/harmonia/BasicAuthConfig.js
enyo.kind({name:"BasicAuthConfig",debug:!1,published:{serviceName:"",username:"",password:""},events:{onUpdateAuth:"",onError:""},components:[{kind:"enyo.Scroller",fit:!0,classes:"ares-large-content",components:[{kind:"Ares.Groupbox",classes:"ares-group-box",components:[{kind:"onyx.GroupboxHeader",name:"serviceName"},{content:ilibHarmonia("User Name:")},{kind:"onyx.InputDecorator",components:[{name:"username",kind:"onyx.Input",placeholder:ilibHarmonia("login")}]},{content:"Password:"},{kind:"onyx.InputDecorator",components:[{name:"password",kind:"onyx.Input",placeholder:ilibHarmonia("password"),type:"password"}]}]},{name:"accountOps",classes:"ares-align-right ares-row",components:[{kind:"onyx.Button",name:"checkBtn",content:ilibHarmonia("Check"),ontap:"check"}]},{name:"userData"}]}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.trace("serviceId:",this.serviceId,", serviceName:",this.serviceName,", username:",this.username,", password:","XXX"),this.service=ServiceRegistry.instance.resolveServiceId(this.serviceId),this.$.serviceName.setContent(this.serviceName),this.usernameChanged(),this.passwordChanged()},usernameChanged:function(){this.$.username.setValue(this.username)},passwordChanged:function(){this.$.password.setValue(this.password)},check:function(){var e=this;this.$.checkBtn.setDisabled(!0),this.$.userData.hide(),async.waterfall([enyo.bind(this,this.authenticate),enyo.bind(this.service,this.service.authorize),enyo.bind(this,this.display)],function(t,i){enyo.log("BasicAuthConfig.check(): err:",t,", results:",i),e.$.checkBtn.setDisabled(!1),t&&e.doError({msg:"Unable to check "+e.serviceName+" Account",details:""+t})})},authenticate:function(e){this.trace(""),this.service.authenticate({username:this.$.username.getValue(),password:this.$.password.getValue()},e)},display:function(e,t){this.trace(e),t()}});

// source/harmonia/PhonegapAuthConfig.js
enyo.kind({name:"PhonegapAuthConfig",debug:!1,kind:"BasicAuthConfig",create:function(){ares.setupTraceLogger(this),this.inherited(arguments)},display:function(e,t){this.trace(e);var i={userId:e.user.id,username:e.user.username,email:e.user.email,apps:e.user.apps.all.length,androidKeys:e.user.keys.android.all.length,blackberryKeys:e.user.keys.blackberry.all.length,iosKeys:e.user.keys.ios.all.length};this.$.userData.$.pgUserData||(this.$.userData.createComponent({kind:"PhonegapUserdata",name:"pgUserData"}),this.$.userData.$.pgUserData.render()),this.$.userData.$.pgUserData.setUserData(i),this.$.userData.show(),enyo.Signals.send("plugin.phonegap.userDataRefreshed"),t()}});

// source/harmonia/PhonegapUserdata.js
enyo.kind({name:"PhonegapUserdata",kind:"Ares.Groupbox",classes:"ares-group-box ares-datas ",published:{userData:{}},components:[{kind:"onyx.GroupboxHeader",content:ilibHarmonia("PhoneGap Account")},{kind:"control.Link",components:[{content:ilibHarmonia("User ID:"),kind:"Ares.GroupBoxItemKey"},{name:"userId",kind:"Ares.GroupBoxItemValue"}],ontap:"manageAccount"},{kind:"control.Link",components:[{content:ilibHarmonia("User Login:"),kind:"Ares.GroupBoxItemKey"},{name:"username",kind:"Ares.GroupBoxItemValue"}],ontap:"manageAccount"},{kind:"control.Link",components:[{content:ilibHarmonia("User Email:"),kind:"Ares.GroupBoxItemKey"},{name:"email",kind:"Ares.GroupBoxItemValue"}],ontap:"manageAccount"},{kind:"control.Link",components:[{content:ilibHarmonia("Signing Keys (Android):"),kind:"Ares.GroupBoxItemKey"},{name:"androidKeys",kind:"Ares.GroupBoxItemValue"}],ontap:"manageAccount"},{kind:"control.Link",components:[{content:ilibHarmonia("Signing Keys (Blackberry):"),kind:"Ares.GroupBoxItemKey"},{name:"blackberryKeys",kind:"Ares.GroupBoxItemValue"}],ontap:"manageAccount"},{kind:"control.Link",components:[{content:ilibHarmonia("Signing Keys (iOS):"),kind:"Ares.GroupBoxItemKey"},{name:"iosKeys",kind:"Ares.GroupBoxItemValue"}],ontap:"manageAccount"},{kind:"control.Link",components:[{content:ilibHarmonia("Registered Applications:"),kind:"Ares.GroupBoxItemKey"},{name:"apps",kind:"Ares.GroupBoxItemValue"}],ontap:"manageApps"}],create:function(){ares.setupTraceLogger(this),this.inherited(arguments)},setUserData:function(e){this.userData=e;var t=enyo.keys(e);enyo.forEach(t,function(t){if(this.$[t]){var i=e[t]&&""+e[t];this.$[t].setValue?this.$[t].setValue(i):this.$[t].setContent(i)}else this.log("No such display field: '"+t+"'")},this)},manageAccount:function(e,t){this.trace("sender:",e,"value:",t),window.open("https://build.phonegap.com/people/edit","PhoneGap Build Account Management","resizeable=1,width=1024, height=600")},manageApps:function(e,t){this.trace("sender:",e,"value:",t),window.open("https://build.phonegap.com/apps","PhoneGap Build Account Management","resizeable=1,width=1024, height=600")}});

// source/project-view/ProjectView.js
var ilibProjectView=AresI18n.resolve.bind(null,AresI18n.setBundle("$assets/project-view/resources"));enyo.kind({name:"ProjectView",kind:"FittableColumns",classes:"enyo-unselectable",debug:!1,published:{panelIndex:0},components:[{kind:"ProjectList",onCreateProject:"createProjectAction",onOpenProject:"openProjectAction",onSearchProjects:"searchProjectsAction",onDuplicateProject:"duplicateProjectAction",onProjectRemoved:"projectRemoved",name:"projectList"},{kind:"ProjectWizardCreate",canGenerate:!1,name:"projectWizardCreate",classes:"ares-masked-content-popup"},{kind:"ProjectWizardScan",canGenerate:!1,name:"projectWizardScan",classes:"ares-masked-content-popup"},{kind:"ProjectWizardModify",canGenerate:!1,name:"projectWizardModify"},{kind:"ProjectWizardCopy",name:"projectWizardCopy",classes:"ares-masked-content-popup"}],handlers:{onAddProjectInList:"addProjectInList"},events:{onHideWaitPopup:"",onError:"",onProjectSelected:"",onRegisterMe:""},create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.doRegisterMe({name:"projectView",reference:this}),this.trace("ilibProjectView: Cancel=",ilibProjectView("Cancel"))},refreshFileTree:function(e,t){ComponentsRegistry.getComponent("harmonia").refreshFileTree(e,t)},searchProjectsAction:function(){return this.$.projectWizardScan.setHeaderText(ilibProjectView("Select a folder hierarchy")),this.$.projectWizardScan.setRecurse(!0),this.$.projectWizardScan.show(),!0},openProjectAction:function(){return this.$.projectWizardScan.setHeaderText(ilibProjectView("Select an existing Ares application folder (contains a project.json file)")),this.$.projectWizardScan.setRecurse(!1),this.$.projectWizardScan.show(),!0},duplicateProjectAction:function(){return this.currentProject()?(this.$.projectWizardCopy.start(this.currentProject()),!0):(this.doError({msg:"Please project list select item."}),!1)},createProjectAction:function(){return this.$.projectWizardCreate.start(),!0},addProjectInList:function(e,t){this.doHideWaitPopup();try{this.$.projectList.addProject(t.name,t.folderId,t.service,t.dontSelect)}catch(i){var n=""+i;return this.error(n),this.doError({msg:n}),!1}return!0},currentProject:function(){return this.$.projectList.getSelectedProject()},setupProjectConfig:function(e,t){ares.assertCb(t);var i=e.getName();if(this.currentProject()&&i===this.currentProject().getName())return this.trace("skip setup of already selected project"+i),t(),void 0;var n=this,o=new ProjectConfig;this.trace("setup project config init on "+e.getName());var s={service:e.getService(),folderId:e.getFolderId()};async.series([o.init.bind(o,s),function(t){n.trace("ProjectView: setup project set config on "+e.getName()),n.initializeValidPgbConf(e,o.data.providers.phonegap.enabled),e.setConfig(o),n.initializeDownloadStatus(e,o.data.providers.phonegap.enabled),t()},function(t){n.trace("ProjectView: setup project on harmonia "+e.getName()),ComponentsRegistry.getComponent("harmonia").setProject(e,t)}],function(i){n.trace("ProjectView: setup project config done on "+e.getName()+" err is ",i),i&&n.doError({msg:""+i,err:i}),t(i)})},initializeDownloadStatus:function(e,t){if(void 0===e.getDownloadStatus()&&t){var i={},n=0;for(n in Phonegap.UIConfiguration.platformDrawersContent)i[Phonegap.UIConfiguration.platformDrawersContent[n].id]="Ready for download";e.setDownloadStatus(i)}},initializeValidPgbConf:function(e,t){if(void 0===e.getValidPgbConf()&&t){var i={},n=Phonegap.UIConfiguration.commonDrawersContent.concat(Phonegap.UIConfiguration.platformDrawersContent),o=0;for(o in n){i[n[o].id]={};for(var s=0,r=n[o].rows.length;r>s;s++)i[n[o].id][n[o].rows[s].name]=!0;i[n[o].id].validDrawer=!0}e.setValidPgbConf(i)}},projectRemoved:function(){ComponentsRegistry.getComponent("harmonia").setProject(null,ares.noNext)}});

// source/project-view/AresProperties.js
enyo.kind({name:"AresProperties",classes:"enyo-unselectable ares-classic-popup",kind:"onyx.Popup",fit:!0,modal:!0,centered:!0,floating:!0,autoDismiss:!1,events:{onModifiedConfig:"",onSaveGeneratedXml:"",onDone:""},components:[{classes:"title left-align",components:[{kind:"onyx.RadioGroup",onActivate:"switchDrawers",name:"thumbnail",classes:"ares-radio-group",components:[]}]},{kind:"onyx.Toolbar",name:"toolbarId",classes:"bottom-toolbar",components:[{name:"ok",classes:"right",kind:"onyx.Button",content:"Close",ontap:"confirmTap"}]},{kind:"Signals",onPluginRegist:"handlePluginRegist"}],debug:!1,pluginServicesList:[],create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.createEditorSettingsDrawer()},initDrawers:function(){enyo.forEach(this.$.editorSettingsDrawer.getControls(),function(e){"editorSettings"===e.kind&&e.resetSettings()},this)},createEditorSettingsDrawer:function(){var e={id:"editorSettings",name:"EditorSettings",kind:"editorSettings",components:[{content:"Editor settings",classes:"large-fixed"},{tag:"span",classes:"ares-bottom-check"}]};this.createComponentTab(e,{mainToolbar:!1})},createComponentTab:function(e,t){var i=this.createComponent({name:e.id+"Drawer",kind:"onyx.Drawer",animated:!1,open:!1},{addBefore:this.$.toolbarId}),n={name:e.id,kind:e.kind};if(t)for(var o in t)n[o]=t[o];e.panel=i.createComponent(n),e.tab=this.$.thumbnail.createComponent({name:e.id+"Tab",content:e.name,componentId:e.id,showing:!0,active:!0,components:e.components}),i.applyStyle("overflow","visible")},handlePluginRegist:function(e,t){if(this.trace(""),"function"!=typeof t.pluginService.getAresPropertiesKind)return!0;var i={id:t.pluginService.id,name:t.pluginService.getName()||t.pluginService.id,kind:t.pluginService.getAresPropertiesKind()};return this.createComponentTab(i),this.pluginServicesList.push(i),!0},switchDrawers:function(e,t){this.initDrawers(),t.originator.active===!0&&enyo.forEach(t.originator.parent.children,function(e){var i=e.componentId===t.originator.componentId;this.$[e.componentId+"Drawer"].setOpen(i)},this)},confirmTap:function(){this.initDrawers();for(var e in this.pluginServicesList){var t=this.pluginServicesList[e].id;"function"==typeof this.$[t+"Drawer"].$[t].okButtonAction&&this.$[this.pluginServicesList[e].id+"Drawer"].$[t].okButtonAction()}this.hide()}}),enyo.kind({name:"AboutAres",kind:"onyx.Popup",modal:!0,centered:!0,floating:!0,autoDismiss:!1,classes:"ares-classic-popup",published:{config:{},aboutAresData:void 0},events:{onError:""},components:[{tag:"div",name:"title",classes:"title",content:"About"},{kind:"enyo.Scroller",classes:"ares-small-popup",components:[{classes:"ares-small-popup-details",name:"popupContent",components:[{kind:"FittableRows",name:"aboutDescription",components:[{kind:"FittableColumns",components:[{content:"Ares version: ",classes:"ares-about-description"},{name:"versionValue"}]},{kind:"FittableColumns",components:[{content:"In case of issue, please consider ",classes:"ares-about-description"},{name:"brValue",kind:"enyo.Control",tag:"a",content:"Reporting a bug",attributes:{target:"_blank"}}]},{kind:"FittableColumns",components:[{content:"See ",classes:"ares-about-description"},{name:"homeValue",kind:"enyo.Control",tag:"a",content:"Project Homepage",attributes:{target:"_blank"}}]},{kind:"FittableColumns",components:[{content:"License: ",classes:"ares-about-description"},{name:"license",classes:"ares-about-description"}]}]}]}]},{kind:"onyx.Toolbar",classes:"bottom-toolbar",name:"buttons",components:[{name:"cancelButton",classes:"right",kind:"onyx.Button",content:"Close",ontap:"actionClose"}]},{name:"errorMessage",content:"Error: Unable to load Ares About data from Ares IDE Server",showing:!1}],create:function(){this.inherited(arguments),this.reqAboutAresData()},reqAboutAresData:function(){var e=window.location.origin||window.location.protocol+"//"+window.location.host,t=new enyo.Ajax({url:e+"/res/aboutares"});t.response(this,function(e,t){this.setAboutAresData(t.aboutAres)}),t.error(this,function(e,t){this.doError({msg:"Unable to load data about Ares",err:t}),this.$.errorMessage.show(),this.$.aboutDescription.hide()}),t.go()},aboutAresDataChanged:function(){this.$.versionValue.content=this.aboutAresData.version,this.$.brValue.setAttribute("href",this.aboutAresData.bugReportURL),this.$.homeValue.setAttribute("href",this.aboutAresData.projectHomePage),this.$.license.content=this.aboutAresData.license},actionClose:function(){return this.hide(),!0}});

// source/project-view/ProjectList.js
enyo.kind({name:"ProjectList",kind:"FittableColumns",classes:"enyo-unselectable ares-project-list",events:{onCreateProject:"",onOpenProject:"",onSearchProjects:"",onDuplicateProject:"",onProjectRemoved:"",onDisableProjectMenu:"",onError:"",onRegisterMe:"",onShowWaitPopup:"",onHideWaitPopup:""},debug:!1,components:[{kind:"FittableRows",classes:"project-list",components:[{kind:"onyx.MoreToolbar",classes:"ares-top-toolbar",isContainer:!0,name:"toolbar",components:[{kind:"onyx.MenuDecorator",classes:"aresmenu",onSelect:"menuItemSelected",components:[{tag:"button",content:ilibProjectView("Ares")},{kind:"onyx.Menu",floating:!0,classes:"sub-aresmenu",components:[{value:"showAccountConfigurator",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/project-view/images/ares_accounts.png",classes:"aresmenu-icon-button"},{content:ilibProjectView("Accounts..."),classes:"aresmenu-button-label"}]},{classes:"onyx-menu-divider aresmenu-button"},{value:"showAresAbout",classes:"aresmenu-button",components:[{content:ilibProjectView("About..."),classes:"aresmenu-button-label"}]},{classes:"onyx-menu-divider aresmenu-button"},{value:"showAresProperties",classes:"aresmenu-button",components:[{content:ilibProjectView("Properties..."),classes:"aresmenu-button-label"}]},{classes:"onyx-menu-divider aresmenu-button"},{value:"showEnyoHelp",classes:"aresmenu-button",components:[{content:ilibProjectView("Enyo API Viewer"),classes:"aresmenu-button-label"}]}]}]},{kind:"onyx.MenuDecorator",classes:"aresmenu",onSelect:"menuItemSelected",components:[{content:ilibProjectView("Projects")},{kind:"onyx.Menu",floating:!0,classes:"sub-aresmenu",components:[{value:"doCreateProject",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/project-view/images/project_view_new.png"},{content:ilibProjectView("New...")}]},{classes:"onyx-menu-divider aresmenu-button"},{value:"doOpenProject",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/project-view/images/project_view_open.png"},{content:ilibProjectView("Open...")}]},{value:"doSearchProjects",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/project-view/images/project_view_search.png"},{content:ilibProjectView("Search...")}]},{classes:"onyx-menu-divider aresmenu-button"},{value:"doDuplicateProject",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/project-view/images/project_view_duplicate.png"},{content:ilibProjectView("Duplicate...")}]},{classes:"onyx-menu-divider aresmenu-button"},{value:"removeProjectAction",classes:"aresmenu-button",components:[{kind:"onyx.IconButton",src:"$assets/project-view/images/project_view_delete.png"},{content:ilibProjectView("Delete")}]}]}]}]},{content:"Project list",classes:"project-list-title title-gradient"},{kind:"enyo.Scroller",fit:!0,components:[{tag:"ul",kind:"enyo.Repeater",classes:"ares-project-list-menu",controlParentName:"client",fit:!0,name:"projectList",onSetupItem:"projectListSetupItem",ontap:"projectListTap",components:[{tag:"li",kind:"ProjectList.Project",name:"item"}]}]},{name:"removeProjectPopup",kind:"ProjectDeletePopup",onConfirmActionPopup:"confirmRemoveProject"},{kind:"AccountsConfigurator"},{kind:"AresProperties"},{name:"about",kind:"AboutAres"}]},{classes:"hangar"}],enyoHelpTab:null,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.$.projectList.setCount(Ares.Workspace.projects.length),Ares.Workspace.projects.on("add remove reset",enyo.bind(this,this.projectCountChanged)),this.doRegisterMe({name:"projectList",reference:this})},aresMenuTapped:function(){this.$.amenu.show(),this.$.amenu.hasClass("on")?this.$.amenu.removeClass("on"):this.$.amenu.addClass("on")},aresMenuHide:function(){this.$.amenu.hide()},projectCountChanged:function(){var e=Ares.Workspace.projects.length;this.$.projectList.setCount(e),this.$.projectList.render(),this.doProjectRemoved()},menuItemSelected:function(e,t){this.trace("sender:",e,", event:",t);var i=t&&t.selected&&t.selected.value;"function"==typeof this[i]?this[i]({project:this.selectedProject}):this.trace("*** BUG: '",i,"' is not a known function")},addProject:function(e,t,i,n){var o=i.getConfig().id||"";if(""===o)throw Error("Cannot add a project in service="+i);var s=Ares.Workspace.projects.get(e);if(s)this.log("Skipped project ",e," as it is already listed");else{var r=Ares.Workspace.projects.createProject(e,t,o);r&&!n&&this.selectProject(r,ares.noNext)}},removeProjectAction:function(){var e=this.$.removeProjectPopup;this.selectedProject&&(e.setTitle(ilibProjectView("Remove project")),e.setMessage(ilibProjectView("Remove project '{projectName}' from list?",{projectName:this.selectedProject.getName()})),e.set("nukeFiles",!1),e.show())},removeProject:function(e,t,i){if(this.trace("removing project",t.getName()),e){this.trace("removing project",t.getName(),"files");var n="Deleting files of project "+t.getName();this.doShowWaitPopup({msg:n});var o=t.getService(),s=t.getFolderId();o.remove(s).response(this,function(){this.trace("removed project",t.getName(),"files"),this.doHideWaitPopup(),this.removeProjectData(t,i)}).error(this,function(e){this.trace("failed to remove project",t.getName(),"files",e),this.doHideWaitPopup(),i(e)})}else this.removeProjectData(t,i)},confirmRemoveProject:function(){var e=this.selectedProject,t=this.$.removeProjectPopup.get("nukeFiles"),i=ComponentsRegistry.getComponent("enyoEditor");e&&async.series([i.requestCloseProject.bind(i,e),this.removeProject.bind(this,t,e)],function(t){t&&this.doError({msg:"Error removing files of project "+e.name+": "+(""+t),err:t})})},removeProjectData:function(e){var t=e.getName();t===this.selectedProject.getName()?(this.trace("called on selected "+t),this.selectedProject=null,this.doProjectRemoved(),this.doDisableProjectMenu({disable:!0})):this.trace("called on "+t),Ares.Workspace.projects.removeProject(t)},projectListSetupItem:function(e,t){var i=Ares.Workspace.projects.at(t.index),n=t.item;n=n.$.item,n.setProjectName(i.getName()),n.setIndex(t.index)},projectListTap:function(e,t){var i=Ares.Workspace.projects.at(t.index);i&&this.selectProject(i,ares.noNext)},_selectInProjectList:function(e){var t=this.$.projectList.getClientControls();enyo.forEach(t,function(t){t.$.item.removeClass("on"),t.$.item.projectName===e.id&&t.$.item.addClass("on")},this)},selectProject:function(e,t){var i,n,o,s=0,r=this.selectedProject,a=r?r.getName():"",l=e.getName(),h=this;this.trace("select project "+l+(r?" old "+a:""));var c=function(e){var i=h.pendingSelect;h.trace("end of selection of project "+l),h.pendingSelect=null,h.ongoingSelect=null,e?setTimeout(function(){t(e)},0):i?(h.trace("selecting pending project "+i.getName()),h.selectProject(i,t)):setTimeout(t,0)};return this.ongoingSelect&&(this.trace("on-going select project "+a+" storing request for "+l),this.pendingSelect=e,s=1),l===a&&(this.trace("drop redundant select project "+a),s=1),n=ServiceRegistry.instance.resolveServiceId(e.getServiceId()),void 0===n&&(i="Service "+e.getServiceId()+" not found",this.doError({msg:i}),o=Error(i),s=1),s?(setTimeout(function(){c(o)},0),void 0):(this._selectInProjectList(e),this.ongoingSelect=e,e.setService(n),this.doDisableProjectMenu({disable:!1}),this.owner.setupProjectConfig(e,c),this.selectedProject=e,Ares.Workspace.projects.setSelectedProject(e.getName()),void 0)},getSelectedProject:function(){return this.selectedProject},showAccountConfigurator:function(){this.$.accountsConfigurator.show()},showAresAbout:function(){this.$.about.show()},showAresProperties:function(){this.$.aresProperties.show(),this.$.aresProperties.initDrawers()},showEnyoHelp:function(){var e=ComponentsRegistry.getComponent("enyoEditor").requestSelectedText();return this.enyoHelpTab&&!this.enyoHelpTab.closed?(this.enyoHelpTab.focus(),""!==e&&(this.enyoHelpTab=window.open("http://enyojs.com/api/#"+e,"Enyo API Viewer","resizable=1, dependent=yes, width=800, height=600")),void 0):(""!==e&&(e="#"+e),this.enyoHelpTab=window.open("http://enyojs.com/api/"+e,"Enyo API Viewer","resizable=1, dependent=yes, width=800, height=600"),void 0)},stringifyReplacer:function(e,t){return"originator"===e?void 0:t}}),enyo.kind({name:"ProjectList.Project",kind:"control.Link",published:{projectName:"",index:-1},components:[{name:"name"}],projectNameChanged:function(){this.$.name.setContent(this.projectName)}}),enyo.kind({name:"ProjectDeletePopup",kind:"Ares.ActionPopup",nukeFiles:!1,create:function(){ares.setupTraceLogger(this),this.inherited(arguments),this.createComponent({container:this.$.popupContent,classes:"ares-more-row",components:[{kind:"onyx.Checkbox",checked:!1,name:"nukeFiles",onActivate:"changeNuke"},{kind:"Control",tag:"span",classes:"ares-padleft",content:ilibProjectView("also delete files from disk")}]}),this.changeNuke()},nukeFilesChanged:function(){this.$.nukeFiles.set("checked",this.nukeFiles),this.changeNuke()},changeNuke:function(){this.nukeFiles=this.$.nukeFiles.checked,this.$.nukeFiles.checked?this.setActionButton(ilibProjectView("Delete")):this.setActionButton(ilibProjectView("Remove"))}});

// source/project-view/ProjectWizard.js
enyo.kind({name:"ProjectWizardCreate",kind:"onyx.Popup",modal:!0,centered:!0,floating:!0,autoDismiss:!1,classes:"enyo-unselectable",events:{onAddProjectInList:"",onShowWaitPopup:"",onHideWaitPopup:""},handlers:{onFileChosen:"_folderSelectedAction",onModifiedConfig:"createProject",onDone:"hideMe"},published:{projectHermesNode:"",projectFiles:""},components:[{kind:"ProjectProperties",name:"propertiesWidget",onApplyAddSource:"notifyChangeSource"},{kind:"Ares.FileChooser",header:ilibProjectView("Select a directory containing the new project"),canGenerate:!1,name:"selectDirectoryPopup",classes:"ares-masked-content-popup",folderChooser:!0,allowCreateFolder:!0,serverSelectable:!1},{kind:"Ares.ErrorPopup",name:"errorPopup",msg:ilibProjectView("unknown error")},{kind:"Ares.ActionPopup",name:"confirmOverwriteOrLoadPopup",title:ilibProjectView("Non-empty folder"),message:ilibProjectView("Use existing folder content or overwrite it?"),actionButton:ilibProjectView("Overwrite"),onConfirmActionPopup:"_confirmedOverwriteAction",action1Button:ilibProjectView("Use"),onConfirmAction1Popup:"_confirmedUseAction",cancelButton:ilibProjectView("Cancel")}],debug:!1,projectName:"",config:null,create:function(){ares.setupTraceLogger(this),this.inherited(arguments)},start:function(){this.projectHermesNode=null,this.projectFiles={},this.show(),this.$.propertiesWidget.setDefaultTab(),this.hide(),this._selectFolder()},_selectFolder:function(){this.trace(),this.$.selectDirectoryPopup.show()},_folderSelectedAction:function(e,t){if(this.trace("inSender:",e,"inEvent:",t),this.projectHermesNode=this.$.selectDirectoryPopup.$.hermesFileTree.selectedNode,this.projectHermesNode){var i=this.projectHermesNode.updateNodes();i.response(this,function(){var e=this.projectHermesNode.getNodeFiles();enyo.forEach(e,function(e){this.projectFiles[e.content]=e.file},this),enyo.keys(this.projectFiles).length>0?this.$.confirmOverwriteOrLoadPopup.show():this._createProject()}),i.error(this,function(e,t){this._waitOk(Error(""+t))})}return!0},_confirmedUseAction:function(e,t){this.trace("inSender:",e,"inEvent:",t),this._loadProject()},_confirmedOverwriteAction:function(e,t){this.trace("inSender:",e,"inEvent:",t),this._createProject()},_loadProject:function(){function e(e,t){var i=this.projectFiles["project.json"];if(i){var n=this.projectHermesNode.service.getFile(i.id);n.response(this,function(i,n){try{e=ares.extend(e,enyo.json.parse(n.content)),t(null,e)}catch(o){this.warn(Error("Unable to parse 'project.json', skipping it...")),t(null,e)}}),n.error(this,function(e,i){t(Error(i.toString))})}else t(null,e)}function t(e,t){var i=this.projectFiles["appinfo.json"];if(i){var n=this.projectHermesNode.service.getFile(i.id);n.response(this,function(i,n){try{var o=enyo.json.parse(n.content);e.id=o.id||e.id,e.version=o.version||e.version,e.title=o.title||e.title,t(null,e)}catch(s){this.warn(Error("Unable to parse 'appinfo.json', skipping it...")),t(null,e)}}),n.error(this,function(e,i){t(Error(i.toString))})}else t(null,e)}this.trace();var i=ares.clone(ProjectConfig.PREFILLED_CONFIG_FOR_UI);async.waterfall([e.bind(this,i),t.bind(this),this._fillProjectPropPopup.bind(this,!1),this._showProjectPropPopup.bind(this)],this._waitOk.bind(this))},_createProject:function(){this.trace();var e=ares.clone(ProjectConfig.PREFILLED_CONFIG_FOR_UI);async.waterfall([this._fillProjectPropPopup.bind(this,!0,e),this._getSources.bind(this,"template"),this._showProjectPropPopup.bind(this)],this._waitOk.bind(this))},_fillProjectPropPopup:function(e,t,i){this.trace("conf:",t);var n=this.$.propertiesWidget;this.selectedDir=this.projectHermesNode.file,e?n.setupCreate():n.setupModif(),n.preFill(t),n.$.projectPathLabel.setContent(ilibProjectView("Project path: ")),n.$.projectPathValue.setContent(this.selectedDir.path),n.$.projectName.setValue(this.selectedDir.name),n.activateFileChoosers(!1),i()},_getSources:function(e,t){this.trace("type:",e);var i=this.$.propertiesWidget,n=ServiceRegistry.instance.getServicesByType("generate")[0];if(n){var o=n.getSources(e);o.response(this,function(e,n){i.setTemplateList(n),t()}),o.error(this,function(i,n){t(Error("Unable to get list for type: "+e+" ("+(""+n)+")"))})}else t(Error("No application templating service ('generate')) defined"))},_showProjectPropPopup:function(e){this.$.selectDirectoryPopup.hide(),this.$.selectDirectoryPopup.reset(),this.$.propertiesWidget.hideVersions(),this.show(),e()},_waitOk:function(e){this.trace("err:",e),this.doHideWaitPopup(),e&&(this.hideMe(),this.warn("An error occured: ",e),this.$.errorPopup.raise(""+e))},createProject:function(e,t){this.trace("inSender:",e,"inEvent:",t);var i=t.data;this.projectName=i.name;var n=this.selectedDir.id,o=t.template,s=0!==t.addedSources.length?!0:!1;return this.trace("Creating new project ",this.projectName," in folderId=",n," (template: ",o,")"),async.waterfall([this.createProjectJson.bind(this,i),this.instanciateTemplate.bind(this,o,s,i),this.populateProject.bind(this),this.projectReady.bind(this)],this._waitOk.bind(this)),!0},createProjectJson:function(e,t){var i=new ProjectConfig;i.service=this.selectedDir.service,i.folderId=this.selectedDir.id,i.setData(e),i.save(t)},instanciateTemplate:function(e,t,i,n){if(this.trace("template:",e,"addedSources:",t,"conf:",i),!e)return n(null,null),void 0;var o=[];this.doShowWaitPopup({msg:ilibProjectView("Creating project from template '{template}'.",{template:e})});var s=[{fileRegexp:"appinfo.json",json:{id:i.id,version:i.version,title:i.title}}],r=ServiceRegistry.instance.getServicesByType("generate")[0];o.push(e),(t||[]).forEach(function(e){o.push(e)});var a=r.generate({sourceIds:o,substitutions:s});a.response(this,function(e,t){var i=this.$.propertiesWidget;i.setTemplateList([]),this.trace("generate response:",t),n(null,t)}),a.error(this,function(t,i){var o=Error("Unable to instanciate projet content from the template '"+e+"': "+(""+i));n(o)})},populateProject:function(e,t){if(this.trace("inData:",e),!e)return t(),void 0;var i=this.selectedDir.id,n=this.selectedDir.service,o=n.createFiles(i,{content:e.content,ctype:e.ctype});o.response(this,function(){t()}),o.error(this,function(e,i){var n=Error("Unable to create projet content from the template ("+(""+i)+")");t(n)})},projectReady:function(e){this.trace(),this.doAddProjectInList({name:this.projectName,folderId:this.selectedDir.id,service:this.selectedDir.service}),e()},hideMe:function(){return this.$.selectDirectoryPopup.hide(),this.$.selectDirectoryPopup.reset(),this.hide(),!0}}),enyo.kind({name:"ProjectWizardModify",kind:"onyx.Popup",modal:!0,centered:!0,floating:!0,autoDismiss:!1,handlers:{onDone:"hide",onModifiedConfig:"saveProjectConfig",onModifiedSource:"populateProject",onSelectFile:"selectFile",onCheckPath:"checkPath",onPathChecked:"pathChecked"},classes:"ares-masked-content-popup",components:[{kind:"ProjectProperties",name:"propertiesWidget",onApplyAddSource:"notifyChangeSource",onFileChoosersChecked:"fileChoosersChecked"},{name:"selectFilePopup",kind:"Ares.FileChooser",classes:"ares-masked-content-popup",showing:!1,folderChooser:!1,allowToolbar:!1,onFileChosen:"selectFileChosen"}],debug:!1,targetProject:null,chooser:null,checker:null,displayedTab:null,versions:[],create:function(){ares.setupTraceLogger(this),this.inherited(arguments)},start:function(e){if(e){var t=e.getConfig(),i=t.service.config,n=i.origin+i.pathname+"/file";this.targetProject=e,this.$.propertiesWidget.setTargetProject(e),this.$.propertiesWidget.setupModif(),this.$.propertiesWidget.preFill(t.data),this.$.propertiesWidget.$.projectPathLabel.setContent(ilibProjectView("Project path: ")),this.$.propertiesWidget.$.projectPathValue.setContent("");var o=t.service.propfind(t.folderId,3);o.response(this,function(e,t){this.$.propertiesWidget.$.projectPathValue.setContent(t.path),this.readDeployFile(t.path,n)}),this.$.propertiesWidget.activateFileChoosers(!0),this.$.propertiesWidget.checkFileChoosers()}},readDeployFile:function(e,t){var i=t+e+"/deploy.json",n=new enyo.Ajax({url:i,handleAs:"json"});n.response(this,function(i,n){this.searchForVersions(n,e,t)}),n.error(this,function(){this.searchForVersions(null,e,t)}),n.go()},searchForVersions:function(e,t,i){this.trace(e,t,i);var n=[],o=[],s={},r=i+t,a="/source/boot/version.js",l="/version.js",h=[];e||(e={enyo:"./enyo",libs:["./lib/onyx","./lib/layout"]}),n.push(e.enyo),enyo.forEach(e.libs,function(e){n.push(e)},this),enyo.forEach(n,function(e){if(e){e=e.replace(/^\.\//,"");var t=e.replace(/^lib\//,"");s={lib:t,url:r+"/"+e+(e.match(/^enyo/)?a:l)},o.push(s)}},this),this.trace("found urls",o),o.length&&(this.versions=[],enyo.forEach(o,function(e){var t=this.readVersionFileFromUrl.bind(this,e);h.push(t)},this),async.parallel(h,this.setVersionLabel.bind(this)))},readVersionFileFromUrl:function(e,t){var i=new enyo.Ajax({url:e.url,handleAs:"text"}),n="",o="",s=RegExp('enyo.version.|=|:|"',"g");i.response(this,function(e,i){i&&(n=i.match(/{\s*(enyo[^\n,;]+)/),o=n[1].replace(s,"").replace(/[\w\.]+/,"$&:"),this.versions.push(o)),t()}),i.error(this,function(){this.versions.push(e.lib+": not found"),t()}),i.go()},setVersionLabel:function(){this.versions.sort(this.compareLibs),this.$.propertiesWidget.setVersionLabel(this.versions.join(", "))},compareLibs:function(e,t){var i=RegExp("^enyo:");return e.match(i)&&t.match(i)?0:e.match(i)?-1:t.match(i)?1:0},addVersions:function(e,t){var i=t.item.$.item,n=t.item.index;return i.setContent(this.versions[n]),!0},showEditPopUp:function(e,t){e&&(this.start(e),this.displayedTab=t)},saveProjectConfig:function(e,t){if(this.trace("saving project config"),!this.targetProject)return this.warn("internal error: saveProjectConfig was called without a target project."),!0;var i=this.targetProject.getConfig();if(i.setData(t.data),i.save(),t.data.name!==this.targetProject.getName()){var n=this.targetProject.getName();Ares.Workspace.projects.renameProject(n,t.data.name)}return!0},selectFile:function(e,t){return this.trace(e,"=>",t),this.chooser=t.input,this.$.selectFilePopup.reset(),this.$.selectFilePopup.connectProject(this.targetProject,function(){this.$.selectFilePopup.setHeaderText(t.header),this.$.selectFilePopup.pointSelectedName(t.value,t.status),this.$.selectFilePopup.show()}.bind(this)),!0},selectFileChosen:function(e,t){this.trace(e,"=>",t);var i=this.chooser;return this.chooser=null,t.file?(this.$.propertiesWidget.updateFileInput(i,t.name),this.$.selectFilePopup.reset(),!0):!0},populateProject:function(e,t){this.trace("inData:",t);var i=this.targetProject.getConfig(),n=i.folderId,o=i.service,s=o.createFiles(n,{content:t.content,ctype:t.ctype});return s.response(this,this.projectRefresh),s.error(this,function(){this.$.errorPopup.raise(ilibProjectView("Unable to create projet content from the template")),this.doHideWaitPopup()}),!0},projectRefresh:function(){this.owner.setupProjectConfig(this.targetProject),this.hideMe()},hideMe:function(){return this.hide(),!0},checkPath:function(e,t){return this.trace(e,"=>",t),this.checker=t.input,0!==t.value.indexOf("/")?(this.pathChecked(e,{status:!1}),!0):(this.$.selectFilePopup.connectProject(this.targetProject,function(){this.$.selectFilePopup.checkSelectedName(t.value)}.bind(this)),void 0)},pathChecked:function(e,t){this.trace(e,"=>",t);var i=this.checker;this.checker=null,this.$.selectFilePopup.reset(),this.$.propertiesWidget.updatePathCheck(i,t.status)},fileChoosersChecked:function(e,t){return this.trace(e,"=>",t),this.show(),this.displayedTab?this.$.propertiesWidget.setDisplayedTab(this.displayedTab):this.$.propertiesWidget.setDefaultTab(),!0}}),enyo.kind({name:"ProjectWizardScan",kind:"Ares.FileChooser",modal:!0,centered:!0,floating:!0,autoDismiss:!1,folderChooser:!0,classes:"enyo-unselectable",events:{onAddProjectInList:"",onError:"",onShowWaitPopup:"",onHideWaitPopup:""},handlers:{onFileChosen:"searchProjects"},published:{recurse:!0},debug:!1,create:function(){ares.setupTraceLogger(this),this.inherited(arguments)},importProject:function(e,t){throw this.trace("importing project from folder ",t.name),Error("Not implemented - XXX ENYO-3543")},openProject:function(e,t,i,n){function o(n){if(i&&i.id)n(null,i);else{var o=e.propfind(t.id,1);o.response(this,function(e,t){this.trace(t),i=t.children.filter(function(e){return"project.json"===e.name})[0],n(null,i)}),o.error(a)}}function s(t,i){var n=e.getFile(t.id);n.error(a),n.response(function(e,t){i(null,t)})}function r(i,n){var o;try{this.trace("file contents: '",i.content,"'"),o=enyo.json.parse(i.content),this.trace("Opened project ",o&&o.name," from ",t.path),this.doAddProjectInList({name:o&&o.name||t.name,folderId:t.id,service:e,dontSelect:!0}),n()}catch(s){this.warn("Error parsing project data: ",""+s),n(s)}}function a(e,t){this.warning(t),n(Error(""+t))}this.trace("opening project.json from ",t.name),async.waterfall([o.bind(this),s.bind(this),r.bind(this)],n)},searchProjects:function(e,t){function i(e,t){this.trace("Searching in ",e.path),this.doShowWaitPopup({msg:"Scanning: "+e.name+"..."});var n=r.listFiles(e.id);n.response(this,function(n,o){var s=enyo.filter(o,function(e){return"project.json"===e.name},this)[0];if(s)this.trace("Found:",s.path),this.doShowWaitPopup({msg:"Found: "+e.name+"..."}),l.push({folder:e,file:s}),t();else if(this.recurse){var r=enyo.filter(o,function(e){return e.isDir});async.forEachSeries(r,i.bind(this),t)}else t()})}function n(e){this.trace("Adding found projects:",l),async.forEachSeries(l,function(e,t){this.doShowWaitPopup({msg:"Adding: "+e.folder.name+" ..."}),this.openProject(r,e.folder,e.file,t)}.bind(this),e)}function o(e){this.reset(),e()}function s(e){if(this.doHideWaitPopup(),0===l.length){var t=this.recurse?"Did not find any project in the directory (no project.json found)":"This folder can't be opened as a project. Project.json file not found.";this.doError({msg:t}),this.trace(t)}e&&(this.warn("Unable to open project:",e),this.recurse||this.doError({msg:"Unable to open project",err:e}))}if(this.trace("inSender:",e,"inEvent:",t),!t.file||!t.file.service)return this.hide(),this.reset(),void 0;var r=t.file.service,a=this.$.hermesFileTree.selectedNode.file,l=[];async.series([i.bind(this,a),n.bind(this),o.bind(this)],s.bind(this))}}),enyo.kind({name:"ProjectWizardCopy",kind:"onyx.Popup",modal:!0,centered:!0,floating:!0,autoDismiss:!1,handlers:{onDone:"hide",onModifiedConfig:"copyProject"},events:{onError:"",onShowWaitPopup:"",onHideWaitPopup:""},components:[{kind:"ProjectProperties",name:"propertiesWidget"}],debug:!1,targetProject:null,create:function(){ares.setupTraceLogger(this),this.inherited(arguments)},start:function(e){if(e){var t=enyo.clone(e.getConfig().data);t.name=t.name+"-Copy",this.targetProject=e,this.$.propertiesWidget.setupModif(),this.$.propertiesWidget.preFill(t),this.$.propertiesWidget.$.projectPathLabel.setContent(ilibProjectView("Parent project path: ")),this.$.propertiesWidget.$.projectPathValue.setContent(""),this.$.propertiesWidget.hideVersions();var i=e.getConfig(),n=i.service.propfind(i.folderId,3);n.response(this,function(e,t){var i=t.path.slice(0,-t.name.length);this.$.propertiesWidget.$.projectPathValue.setContent(i)}),this.$.propertiesWidget.activateFileChoosers(!1),this.show()}},copyProject:function(e,t){this.trace("Copying project",this.targetProject.getConfig().data.name),this.doShowWaitPopup({msg:ilibProjectView("Duplicating project")});var i=this.targetProject.getService(),n=this.targetProject.getFolderId();this.newConfigData=t.data;var o=t.data.name,s=Ares.Workspace.projects.get(o);if(s)return this.doError({msg:ilibProjectView("Unable to duplicate the project, the project '{destination}' already exists",{destination:o})}),!0;var r=i.copy(n,{name:o});return r.response(this,this.saveProjectJson),r.error(this,function(e,t){var i=ilibProjectView("Unable to duplicate the project");412===t?(this.warn("Unable to duplicate the project, directory '",o,"' already exists",t),i=ilibProjectView("Unable to duplicate the project, directory '{destination}' already exists",{destination:o})):this.warn("Unable to duplicate the project",t),this.doError({msg:i})}),!0},saveProjectJson:function(e,t){this.trace(t);var i=t.id;this.newFolderId=i;var n,o=this.targetProject.getService();if(enyo.forEach(t.children,function(e){"project.json"===e.name&&(n=e.id)}),!n)return this.warn("Unable to duplicate the project, no 'project.json' found",t),this.doError({msg:ilibProjectView("Unable to duplicate the project, no 'project.json' found")}),void 0;var s=o.putFile(n,enyo.json.stringify(this.newConfigData,null,2));s.response(this,this.createProjectEntry),s.error(this,function(e,t){this.warn("Unable to duplicate the project, unable to update 'project.json'",t),this.doError({msg:ilibProjectView("Unable to duplicate the project, unable to update 'project.json'")})})},createProjectEntry:function(e,t){this.trace(t);var i=this.targetProject.getServiceId(),n=Ares.Workspace.projects.createProject(this.newConfigData.name,this.newFolderId,i);n&&this.owner.$.projectList.selectProject(n,ares.noNext),this.doHideWaitPopup()}});

// source/project-view/ProjectConfig.js
enyo.kind({name:"ProjectConfig",kind:"enyo.Object",published:{data:{}},service:null,folderId:null,fileId:null,debug:!1,constructor:function(){this.inherited(arguments),ares.setupTraceLogger(this)},init:function(e,t){this.data=null,this.service=e.service,this.folderId=e.folderId;var i=this.service.propfind(this.folderId,1);i.response(this,function(e,i){var n=i.children.filter(function(e){return"project.json"===e.name});0===n.length?(this.setData(ProjectConfig.checkConfig()),this.data.name=i.name,this.save(t)):(this.fileId=n[0].id,this.load(t))}),i.error(this,function(e,i){enyo.error("ProjectConfig.init:",i),t instanceof Function&&t(i)})},load:function(e){var t,i=this.service.getFile(this.fileId);i.response(this,function(i,n){if(this.trace("ProjectConfig.load: file=",n),"string"==typeof n.content)try{t=enyo.json.parse(n.content)}catch(o){enyo.error("ProjectConfig.load:",o),i.fail(o)}else t=n.content;this.data=ProjectConfig.checkConfig(t),this.trace("ProjectConfig.load config=",this.data),this.data!==t?this.save(e):"function"==typeof e&&e()}),i.error(this,function(t,i){this.error("ProjectConfig.load:",i),e instanceof Function&&e(i)})},save:function(e){var t;this.trace("data=",this.data),t=this.fileId?this.service.putFile(this.fileId,enyo.json.stringify(this.data,null,2)):this.service.createFile(this.folderId,"project.json",JSON.stringify(this.data,null,2)),t.response(this,function(t,i){this.trace("ProjectConfig.save: inResponse=",i),this.fileId=i.id,e instanceof Function&&e()}),t.error(this,function(t,i){enyo.error("ProjectConfig.save: error=",i),e instanceof Function&&e(i)})},statics:{checkConfig:function(e){var t=ares.clone(ProjectConfig.DEFAULT_PROJECT_CONFIG);return ServiceRegistry.instance.forEach(function(e){if("function"==typeof e.getDefaultProjectConfig&&"function"==typeof e.getConfig){var i=e.getConfig().id;t.providers[i]=e.getDefaultProjectConfig()}}),e&&e.build&&(e.providers=e.build,delete e.build),t=ares.extend(t,e)},PREFILLED_CONFIG_FOR_UI:{providers:{},preview:{top_file:"/debug.html"}},DEFAULT_PROJECT_CONFIG:{id:"com.examples.apps.myapp",name:"BUG IF YOU SEE THIS",version:"0.0.1",title:ilibProjectView("Example: My Application"),description:ilibProjectView("My application description..."),author:{name:ilibProjectView("An Example Company"),href:"http://www.example.com"},providers:{},preview:{top_file:"/debug.html"}}}});

// source/project-view/ProjectProperties.js
enyo.kind({name:"ProjectProperties",debug:!1,classes:"enyo-unselectable ares-classic-popup",fit:!0,events:{onError:"",onModifiedConfig:"",onSaveGeneratedXml:"",onDone:"",onSelectFile:"",onCheckPath:"",onFileChoosersChecked:""},handlers:{onAddSource:"addNewSource",onRemoveSource:"removeAddedSource",onInitSource:"initAddedSource",onInputButtonTap:"selectInputFile",onDisableOkButton:"disableOkButton",onEnableOkButton:"enableOkButton"},components:[{classes:"title left-align",content:"Project properties",components:[{kind:"onyx.RadioGroup",onActivate:"switchDrawers",name:"thumbnail",classes:"ares-radio-group",components:[{serviceId:"project",active:!0,attributes:{title:ilibProjectView("project attributes...")},components:[{classes:"large-fixed",content:ilibProjectView("Project")},{tag:"span",classes:"ares-bottom-check"}]},{serviceId:"preview",attributes:{title:ilibProjectView("project preview parameters...")},components:[{classes:"large-fixed",content:ilibProjectView("Preview")},{tag:"span",classes:"ares-bottom-check"}]}]}]},{name:"projectDrawer",kind:"onyx.Drawer",open:!0,components:[{classes:"ares-project-properties",kind:"Scroller",components:[{kind:"FittableRows",components:[{kind:"FittableColumns",classes:"ares-row",components:[{components:[{tag:"label",name:"projectPathLabel",classes:"ares-fixed-label ares-small-label",content:""}]},{fit:!0,components:[{tag:"label",name:"projectPathValue",classes:"ares-label",content:""}]}]},{kind:"FittableColumns",name:"versions",classes:"ares-row",components:[{components:[{tag:"label",classes:"ares-fixed-label ares-small-label",content:"Versions: "}]},{fit:!0,components:[{tag:"label",name:"enyoVersions",classes:"ares-label",content:""}]}]}]},{tag:"p",classes:"break"},{kind:"FittableColumns",components:[{kind:"FittableRows",components:[{classes:"ares-row",components:[{tag:"label",classes:"ares-fixed-label ares-small-label",content:ilibProjectView("Name: ")},{kind:"onyx.InputDecorator",components:[{kind:"Input",defaultFocus:!0,name:"projectName"}]}]},{classes:"ares-row",components:[{tag:"label",classes:"ares-fixed-label ares-small-label",content:ilibProjectView("Version: ")},{kind:"onyx.InputDecorator",components:[{kind:"Input",defaultFocus:!0,name:"projectVersion",placeholder:"0.0.1"}]}]},{classes:"ares-row",components:[{tag:"label",classes:"ares-fixed-label ares-small-label",content:ilibProjectView("Author name: ")},{kind:"onyx.InputDecorator",components:[{kind:"Input",name:"projectAuthor",attributes:{title:ilibProjectView("Vendor / Committer Name")},placeholder:ilibProjectView("My Company")}]}]},{classes:"ares-row",name:"templatesEntry",showing:!1,components:[{tag:"label",classes:"ares-fixed-label ares-small-label",content:ilibProjectView("Template:")},{kind:"Ares.PickerDecorator",fit:!0,components:[{name:"templateButton",classes:"very-large-width"},{kind:"onyx.FlyweightPicker",name:"templatePicker",components:[{name:"template"}],onSetupItem:"templateSetupItem",onSelect:"templateSelected"}]}]}]},{kind:"FittableRows",components:[{classes:"ares-row",components:[{tag:"label",classes:"ares-fixed-label ares-small-label",content:ilibProjectView("Title: ")},{kind:"onyx.InputDecorator",components:[{kind:"Input",defaultFocus:!0,name:"projectTitle",placeholder:ilibProjectView("My Example App")}]}]},{classes:"ares-row",components:[{tag:"label",classes:"ares-fixed-label ares-small-label",content:ilibProjectView("Id: ")},{kind:"onyx.InputDecorator",components:[{kind:"Input",defaultFocus:!0,name:"projectId",attributes:{title:ilibProjectView("Application ID in reverse domain-name format: com.example.apps.myapp")},placeholder:"com.example.apps.myapp"}]}]},{classes:"ares-row",components:[{tag:"label",classes:"ares-fixed-label ares-small-label",content:ilibProjectView("Contact: ")},{kind:"onyx.InputDecorator",components:[{kind:"Input",name:"projectContact",attributes:{title:ilibProjectView("mail address or home page of the author")},placeholder:"support@example.com"}]}]}]}]},{tag:"p",classes:"break"},{kind:"FittableColumns",components:[{classes:"ares-row",components:[{tag:"label",classes:"ares-fixed-label  ares-small-label",content:ilibProjectView("Description:")},{kind:"onyx.InputDecorator",classes:"ares-project-properties-textarea-wide",components:[{kind:"onyx.TextArea",name:"projectDescription",fit:!0,content:"",placeholder:ilibProjectView("My application description...")}]}]}]},{tag:"p",classes:"break"},{kind:"enyo.FittableColumns",classes:"ares-row",name:"servicesList"}]}]},{name:"previewDrawer",kind:"onyx.Drawer",open:!1,components:[{classes:"ares-project-properties",components:[{kind:"FittableRows",components:[{kind:"ProjectProperties.PathInputRow",name:"topFileRow",label:ilibProjectView("Top application file: "),inputTip:ilibProjectView("top file of your application. Typically '/index.html', but per default '/debug.html' for debug mode."),buttonTip:ilibProjectView("select file...")}]}]}]},{name:"errTooltipDecorator",kind:"onyx.TooltipDecorator",components:[{name:"toolbarId",kind:"onyx.Toolbar",classes:"bottom-toolbar",components:[{kind:"onyx.Button",content:ilibProjectView("Cancel"),ontap:"doDone"},{kind:"onyx.Button",name:"ok",classes:"right",content:ilibProjectView("OK"),ontap:"confirmTap"}]}]},{kind:"Signals",onServicesChange:"handleServicesChange"}],published:{topFileStatus:"",targetProject:"",validatePhonegapUiValues:{}},templates:[],selectedTemplate:void 0,selectedAddedSource:void 0,services:{},addedSource:[],fileChoosers:[],create:function(){ares.setupTraceLogger(this),this.inherited(arguments)},setDefaultTab:function(){this.$.thumbnail.children[0].setActive(!0)},setDisplayedTab:function(e){this.$.thumbnail.children[e].setActive(!0)},handleServicesChange:function(e,t){this.trace(e,"=>",t),this.services=enyo.clone(this.services)||{},t.serviceRegistry.forEach(enyo.bind(this,function(e){var t={id:e.id,name:e.getName()||e.id,kind:e.getProjectPropertiesKind&&e.getProjectPropertiesKind()};this.trace("service:",t),t.kind&&(this.services[t.id]=t)})),enyo.forEach(enyo.keys(this.services),function(e){var t=this.services[e],i=this.$[t.id+"Drawer"]||this.createComponent({name:t.id+"Drawer",kind:"onyx.Drawer",open:!1},{addBefore:this.$.toolbarId});t.panel=i.$[t.id]||i.createComponent({name:t.id,kind:t.kind}),t.tab=this.$.thumbnail.$[t.id+"Tab"]||this.$.thumbnail.createComponent({name:t.id+"Tab",serviceId:t.id,showing:!1,components:[{content:t.name,classes:"large-fixed"},{tag:"span",classes:"ares-bottom-check"}]});var n=this.$.servicesList.$[t.id+"Frame"];"object"!=typeof n&&(n=this.$.servicesList.createComponent({name:t.id+"Frame"}),n.createComponent({kind:"onyx.Checkbox",name:t.id+"CheckBox",onchange:"toggleService",serviceId:t.id},{owner:this}),n.createComponent({tag:"label",classes:"ares-label",content:t.name})),t.checkBox=this.$[t.id+"CheckBox"],this.showService(e)},this),this.trace("services:",this.services)},toggleService:function(e,t){var i=t.originator.serviceId,n=t.originator.checked;this.trace("serviceId:",i,"checked:",n),void 0===this.config.providers[i]&&(this.config.providers[i]={}),this.config.providers[i].enabled=n,this.showService(i)},setupCreate:function(){this.$.templatesEntry.show(),this.notifyProjectPropertyStatus({status:"create"})},setupModif:function(){for(var e in this.services){var t=this.services[e],i=this.$[t.id+"Drawer"].$[t.id];"function"==typeof i.setTargetProject&&i.setTargetProject(this.targetProject)}this.$.templatesEntry.hide(),this.notifyProjectPropertyStatus({status:"modify"})},switchDrawers:function(e,t){t.originator.active===!0&&enyo.forEach(t.originator.parent.children,function(e){var i=e.serviceId===t.originator.serviceId;this.$[e.serviceId+"Drawer"].setOpen(i)},this)},showServiceDrawer:function(e){this.$.thumbnail.$[e+"Tab"].setActive(!0)},preFill:function(e){var t="object"==typeof e?e:enyo.json.parse(e);return this.config=ProjectConfig.checkConfig(t),this.$.projectId.setValue(this.config.id||""),this.$.projectVersion.setValue(this.config.version||""),this.$.projectName.setValue(this.config.name||""),this.$.projectTitle.setValue(this.config.title||""),this.config.author||(this.config.author={}),this.$.projectAuthor.setValue(this.config.author.name||""),this.$.projectContact.setValue(this.config.author.href||""),this.$.projectDescription.setValue(this.config.description||""),enyo.forEach(enyo.keys(this.services),function(e){this.showService(e)},this),this.config.preview||(this.config.preview={}),this.$.topFileRow.setValue(this.config.preview.top_file),this},update:function(e){var t=this.config;return enyo.forEach(enyo.keys(e),function(i){t[i]=e[i]}),this.$.projectId.setValue(t.id||""),this.$.projectVersion.setValue(t.version||""),this.$.projectTitle.setValue(t.title||""),this},showService:function(e){var t=this.services[e],i=this.config&&this.config.providers&&this.config.providers[e],n=i&&i.enabled;t.checkBox.setChecked(n),t.tab.setShowing(n),i&&t.panel.setProjectConfig(i)},notifyProjectPropertyStatus:function(e){this.waterfallDown("onChangeProjectStatus",e)},confirmTap:function(e,t){return this.config={},this.config.id=this.$.projectId.getValue(),this.config.version=this.$.projectVersion.getValue(),this.config.name=this.$.projectName.getValue(),this.config.title=this.$.projectTitle.getValue(),this.config.author={},this.config.author.name=this.$.projectAuthor.getValue(),this.config.author.href=this.$.projectContact.getValue(),this.config.description=this.$.projectDescription.getValue(),this.config.preview={},this.config.preview.top_file=this.$.topFileRow.getValue(),this.config.providers={},enyo.forEach(enyo.keys(this.services),function(e){var t=this.services[e];this.config.providers[t.id]={},this.config.providers[t.id].enabled=t.checkBox.checked,t.panel.saveProjectConfig(this.targetProject),t.panel.getProjectConfig(this.config.providers[t.id])},this),""===this.config.name?(this.doError({msg:"Please enter a valid Name value.",title:"User Error"}),void 0):""===this.config.title?(this.doError({msg:"Please enter a valid Title value.",title:"User Error"}),void 0):""===this.config.version?(this.doError({msg:"Please enter a valid Version value.",title:"User Error"}),void 0):""===this.config.id?(this.doError({msg:"Please enter a valid Id value.",title:"User Error"}),void 0):(this.doModifiedConfig({data:this.config,template:this.selectedTemplate&&this.selectedTemplate.id,addedSources:this.addedSource}),this.doDone(),t.callBack&&t.callBack(),!0)},disableOkButton:function(e,t){var i=Phonegap.ProjectProperties.getProvider();this.trace("inSender:",e,"inEvent:",t),this.$.ok.setDisabled(!0);var n=t.reason||"Check project properties tabs for errors";this.$.errTooltip?this.$.errTooltip.setContent(n):(this.$.errTooltipDecorator.createComponent({kind:"onyx.Tooltip",name:"errTooltip",content:n,showing:!0,showDelay:0},{owner:this}),this.$.errTooltipDecorator.render()),this.$.errTooltip.show(),i.getSelectedProject().getValidPgbConf()[t.originator.platform][t.originator.name]=!1,i.getSelectedProject().getValidPgbConf()[t.originator.platform].validDrawer=!1},enableOkButton:function(e,t){this.trace("inSender:",e,"inEvent:",t);var i=Phonegap.ProjectProperties.getProvider();i.getSelectedProject().getValidPgbConf()[t.originator.platform][t.originator.name]=!0;var n=function(){var e=!0;for(var n in i.getSelectedProject().getValidPgbConf()[t.originator.platform])i.getSelectedProject().getValidPgbConf()[t.originator.platform][n]||"validDrawer"===n||(e=!1);return e},o=function(){var e=!1;for(var t in i.getSelectedProject().getValidPgbConf())i.getSelectedProject().getValidPgbConf()[t].validDrawer||(e=!0);return e};n.call(this)&&(i.getSelectedProject().getValidPgbConf()[t.originator.platform].validDrawer=!0),this.$.ok.setDisabled(o.call(this)),this.$.errTooltip&&this.$.errTooltip.destroy()},setTemplateList:function(e){this.templates=[].concat(e),this.$.templatePicker.setCount(this.templates.length),this.$.templatePicker.setSelected(0),this.selectedTemplate=this.templates[0]},setLibsList:function(e){this.libs=this.libs||[],enyo.forEach(e,function(e){e=enyo.filter(this.libs,function(t){return e.id!==t.id})[0],e&&(this.libs.push(e.id),this.$.libsChecker.createComponent({kind:"ProjectProperties.LibCheckBox",name:e.id+"Checker",lib:e},{onLibChecked:"_onLibCheckedAction",owner:this}))},this)},_onLibCheckedAction:function(e,t){this.trace("inSender:",e,"inEvent:",t);var i=[];enyo.forEach(this.libs,function(e){e.id===t.lib.id&&(e.selected=t.checked),e.selected&&i.push(e.id)},this),this.setSelectedLibs(i)},templateSetupItem:function(e,t){this.trace("inSender:",e,"inEvent:",t);var i=this.templates[t.index];return this.$.template.setContent(i.description),this.$.template.setAttribute("x-template",i),!0},templateSelected:function(e,t){this.trace("inSender:",e,"inEvent:",t),this.selectedTemplate=t.selected.getAttribute("x-template")},topFileChanged:function(){this.$.topFileRow.setValue(this.topFile)},topFileStatusChanged:function(){this.$.topFileRow.setStatus(this.topFileStatus)},handleAdditionalSource:function(e,t){return this.selectedAddedSource=t.source,!0},addNewSource:function(e,t){return this.addedSource.push(t.source),!0},removeAddedSource:function(e,t){var i=this.addedSource.indexOf(t.source);return this.addedSource=this.addedSource.slice(0,i).concat(this.addedSource.slice(i+1,this.addedSource.lenght)),!0},initAddedSource:function(){return this.addedSource=[],!0},activateFileChoosers:function(e){this.$.topFileRow.setActivated(e),enyo.forEach(enyo.keys(this.services),function(t){"phonegap"===t&&this.services[t].panel.activateInputRows(e)},this)},checkFileChoosers:function(){this.fileChoosers=[];for(var e in this.$)"ProjectProperties.PathInputRow"===this.$[e].kind&&this.fileChoosers.push(this.$[e]);enyo.forEach(enyo.keys(this.services),function(e){"phonegap"===e&&(this.fileChoosers=this.fileChoosers.concat(this.services[e].panel.findAllInputRows()))},this);var t=this.fileChoosers.shift();this.doCheckPath({input:t,value:t.getValue()})},fileChooserChecked:function(){if(this.fileChoosers.length){var e=this.fileChoosers.shift();this.doCheckPath({input:e,value:e.getValue()})}else this.doFileChoosersChecked();return!0},selectInputFile:function(e,t){this.doSelectFile({input:t.originator,value:t.originator.getValue(),status:t.originator.getStatus(),header:t.header})},updateFileInput:function(e,t){return e.setValue(t),!0},updatePathCheck:function(e,t){return e.setStatus(t),this.fileChooserChecked(),!0},setVersionLabel:function(e){this.$.enyoVersions.setContent(e)},hideVersions:function(){this.$.versions.hide()}}),enyo.kind({name:"ProjectProperties.LibCheckBox",classes:"ares-row",published:{lib:""},events:{onLibChecked:""},components:[{name:"chkBx",kind:"onyx.Checkbox",onchange:"onCheckedAction"},{tag:"label",classes:"ares-label",content:""}],onCheckedAction:function(){return this.doLibChecked({lib:this.lib,use:this.$.chkBx.checked}),!0}}),enyo.kind({name:"ProjectProperties.PathInputRow",classes:"ares-row",published:{label:"",value:"",inputTip:"",activated:!1,status:!1,buttonTip:""},events:{onInputButtonTap:"",onPathChecked:""},components:[{tag:"label",name:"pathInputLabel",classes:"ares-fixed-label"},{kind:"onyx.InputDecorator",components:[{kind:"Input",name:"pathInputValue",disabled:!0}]},{kind:"onyx.IconButton",name:"pathInputButton",src:"$project-view/assets/images/file-32x32.png",ontap:"pathInputTap"}],debug:!1,create:function(){this.inherited(arguments),this.labelChanged(),this.valueChanged(),this.inputTipChanged(),this.activatedChanged(),this.statusChanged(),this.buttonTipChanged()},labelChanged:function(){this.$.pathInputLabel.setContent(this.label)},valueChanged:function(){this.$.pathInputValue.setValue(this.value),this.setStatus(!0)},inputTipChanged:function(){this.$.pathInputValue.setAttribute("title",this.inputTip)},activatedChanged:function(){this.activated?(this.$.pathInputButton.show(),this.statusChanged()):this.$.pathInputButton.hide()},statusChanged:function(){this.status?this.$.pathInputButton.setSrc("$project-view/assets/images/file-32x32.png"):this.$.pathInputButton.setSrc("$project-view/assets/images/file_broken-32x32.png")},buttonTipChanged:function(){this.$.pathInputButton.setAttribute("title",this.buttonTip)},pathInputTap:function(){return this.doInputButtonTap({header:ilibProjectView("Select top file...")}),!0}});
